<div class="servicios-modal-container">
  <h2 mat-dialog-title>Gestionar Servicios Externos</h2>

  <mat-dialog-content>
    <!-- Buscador -->
    <div class="search-container">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Buscar servicio externo</mat-label>
        <input matInput
          placeholder="Ingresa nombre o descripción"
          [(ngModel)]="searchTerm"
          (keyup)="onSearch()">
        <button *ngIf="searchTerm" matSuffix mat-icon-button aria-label="Clear" (click)="searchTerm = ''; onSearch()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
    </div>

    <!-- Tabla de servicios externos -->
    <div class="table-container">
      <table *ngIf="serviciosExternos.length > 0" class="servicios-table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Descripción</th>
            <th class="col-acciones">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let servicio of serviciosExternos" class="row-item">
            <td class="col-nombre">{{ servicio.name }}</td>
            <td class="col-descripcion">{{ servicio.description }}</td>
            <td class="col-acciones">
              <button mat-icon-button (click)="editServicio(servicio)" matTooltip="Editar" class="btn-edit">
                <mat-icon class="colorGreen">edit</mat-icon>
              </button>
              <button mat-icon-button (click)="deleteServicio(servicio)" matTooltip="Eliminar" class="btn-delete">
                <mat-icon class="icon-delete">delete_outline</mat-icon>
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Mensaje vacío -->
      <div *ngIf="serviciosExternos.length === 0" class="empty-state">
        <mat-icon>folder_open</mat-icon>
        <p>No hay servicios externos registrados</p>
      </div>
    </div>

    <!-- Paginación -->
    <mat-paginator
      *ngIf="totalServicios > 0"
      [length]="totalServicios"
      [pageSize]="pageSize"
      [pageSizeOptions]="[5, 10, 25, 50]"
      (page)="onPageChange($event)">
    </mat-paginator>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-raised-button color="accent" (click)="agregarServicio()">
      <mat-icon>add</mat-icon>
      Agregar Servicio
    </button>
    <button mat-button (click)="dialogRef.close()">Cerrar</button>
  </mat-dialog-actions>
</div>

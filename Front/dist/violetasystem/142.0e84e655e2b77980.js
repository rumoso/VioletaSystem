"use strict";(self.webpackChunkvioletasystem=self.webpackChunkvioletasystem||[]).push([[142],{142:(to,se,d)=>{d.r(se),d.d(se,{ProtectedModule:()=>Ka});var m=d(6814),c=d(6223),Se=d(7361),D=d(3403),f=d(5861),_=d(553),e=d(5879),v=d(4857),S=d(4567);let Ce=(()=>{class a{constructor(t,i){this.servicesGServ=t,this.authService=i,this._appMain=_.N.appMain}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authService.checkSession()})()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.$),e.Y36(S.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"dashboard works!"),e.qZA())}}),a})();var g=d(2296),x=d(3305),U=d(617),re=d(1919),ce=d(2651),ve=d(1274);const xe=["sidenav"];function Ze(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-nav-list")(1,"a",14),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.changeRoute(n.linkList))}),e._UZ(2,"mat-icon",15),e.TgZ(3,"span"),e._uU(4),e.qZA()()()}if(2&a){const t=s.$implicit;e.xp6(4),e.Oqu(t.name)}}function Te(a,s){if(1&a&&(e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header"),e._uU(2),e.qZA(),e.YNc(3,Ze,5,1,"mat-nav-list",13),e.qZA()),2&a){const t=s.$implicit;e.ekj("mat-elevation-z0",!0),e.xp6(2),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngForOf",t.subMenus)}}let Fe=(()=>{class a{constructor(t,i){this.authService=t,this.servicesGServ=i,this._appMain=_.N.appMain,this._menuList=[],this.MenusList=[]}get userLogin(){return this.authService.userLogin}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authService.checkSession();var i=yield localStorage.getItem("idUser");i?.length>0||t.servicesGServ.changeRoute("/"),yield t.getMenuByPermissions(i)})()}changeRoute(t){this.sidenav.toggle(),this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}logout(){this.authService.logout(!0)}getMenuByPermissions(t){this.authService.getMenuByPermissions(t).subscribe(i=>{0==i.status&&(this._menuList=i.data)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(S.e),e.Y36(v.$))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-main"]],viewQuery:function(t,i){if(1&t&&e.Gf(xe,5),2&t){let o;e.iGM(o=e.CRH())&&(i.sidenav=o.first)}},decls:29,vars:2,consts:[["fullscreen",""],["mode","push"],["sidenav",""],[1,"spacer"],["mat-icon-button","",3,"click"],[3,"mat-elevation-z0",4,"ngFor","ngForOf"],["id","headerApp"],["width","60","src","assets/img/icons/VioletaIcon.png","alt","","routerLink","./dashboard",1,"manitaSobre"],["routerLink","./dashboard",1,"manitaSobre"],["src","assets/img/icons/connectUser.gif",1,"imgDashboard",2,"width","50px !important"],["mat-button","",3,"click"],["mat-list-icon",""],[1,"container",2,"margin-bottom","50px"],[4,"ngFor","ngForOf"],["mat-list-item","",3,"click"],["aria-hidden","false","aria-label","Example home icon","fontIcon","user"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"mat-toolbar")(4,"span"),e._uU(5,"Men\xfa"),e.qZA(),e._UZ(6,"span",3),e.TgZ(7,"button",4),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(2);return e.KtG(r.toggle())}),e.TgZ(8,"mat-icon"),e._uU(9,"menu"),e.qZA()()(),e.YNc(10,Te,4,4,"mat-expansion-panel",5),e.qZA(),e.TgZ(11,"mat-toolbar",6)(12,"button",4),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(2);return e.KtG(r.toggle())}),e.TgZ(13,"mat-icon"),e._uU(14,"menu"),e.qZA()(),e._UZ(15,"img",7),e.TgZ(16,"h1",8),e._uU(17,"VioletaSistem"),e.qZA(),e._UZ(18,"span",3)(19,"span",3)(20,"img",9),e.TgZ(21,"span"),e._uU(22),e.qZA(),e.TgZ(23,"button",10),e.NdJ("click",function(){return i.logout()}),e.TgZ(24,"mat-icon",11),e._uU(25,"logout"),e.qZA(),e._uU(26," Logout "),e.qZA()(),e.TgZ(27,"div",12),e._UZ(28,"router-outlet"),e.qZA()()}2&t&&(e.xp6(10),e.Q6J("ngForOf",i._menuList),e.xp6(12),e.Oqu(i.userLogin.name))},dependencies:[m.sg,g.lW,g.RK,x.ib,x.yz,U.Hw,re.Hk,re.Tg,ce.JX,ce.TM,ve.Ye,D.lC,D.rH]}),a})();var h=d(3680),le=d(4664),A=d(9862);let z=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/users"}CGetUsersListWithPage(t){return this.http.post(`${this.baseURL}/${this._api}/getUsersListWithPage`,{search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CGetUserByID(t){return this.http.post(`${this.baseURL}/${this._api}/getUserByID`,{idUser:t})}CInsertUser(t){return this.http.post(`${this.baseURL}/${this._api}/insertUser`,t)}CUpdateUser(t){return this.http.post(`${this.baseURL}/${this._api}/updateUser`,t)}CChangePassword(t){return this.http.post(`${this.baseURL}/${this._api}/changePassword`,t)}CDisabledUser(t){return this.http.post(`${this.baseURL}/${this._api}/disabledUser`,{idUser:t})}CCbxGetSellersCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetSellersCombo`,{idUser:i,search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ye=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/roles"}CGetRolesForAddUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/getRolesForAddUser`,{search:t,idUser:i})}CGetRolesByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/getRolesByIdUser`,{idUser:t})}CInsertRolByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/insertRolByIdUser`,t)}CDeleteRolByIdUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/deleteRolByIdUser`,{idUser:t,idRol:i})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Q=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/sucursales"}CGetSucursalesForAddUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/getSucursalesForAddUser`,{search:t,idUser:i})}CGetSucursalesByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/getSucursalesByIdUser`,{idUser:t})}CCbxGetSucursalesCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetSucursalesCombo`,{idUser:i,search:t})}CInsertSucursalByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/insertSucursalByIdUser`,t)}CDeleteSucursalByIdUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/deleteSucursalByIdUser`,{idUser:t,idSucursal:i})}CGetPrintTicketSuc(t,i){var o=this;return(0,f.Z)(function*(){var n={idSucursal:t,type:i};return new Promise((r,l)=>{o.http.post(`${o.baseURL}/${o._api}/getPrintTicketSuc`,n).subscribe({next:u=>{r(u.data)},error:u=>{l(u)}})})})()}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Z=d(6381),M=d(5986),p=d(9157),P=d(4516),w=d(7290);function Ae(a,s){1&a&&(e.TgZ(0,"div",2)(1,"div",3)(2,"mat-form-field",5)(3,"mat-label"),e._uU(4,"Contrase\xf1a:"),e.qZA(),e._UZ(5,"input",17),e.qZA()()())}function Ue(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cbxRolClear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Pe(a,s){if(1&a&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function we(a,s){1&a&&(e.TgZ(0,"mat-option",38),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ne(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",39)(2,"div",40)(3,"span",41),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.fn_deleteRolByIdUser(n.idRol))}),e._uU(4," delete_outline "),e.qZA()()(),e.TgZ(5,"td",42),e._uU(6),e.qZA(),e.TgZ(7,"td",39),e._uU(8),e.ALo(9,"date"),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(6),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(9,2,t.createDate,"dd-MM-yyyy"))}}function qe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"div",1),e._uU(3," Roles del usuario "),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",18),e._UZ(7,"br"),e.TgZ(8,"form",19)(9,"div",2)(10,"div",20)(11,"mat-label"),e._uU(12,"Rol: "),e.qZA(),e.TgZ(13,"mat-form-field",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSearchRol())}),e.TgZ(14,"input",22),e.NdJ("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSearchRol())}),e.qZA(),e.YNc(15,Ue,3,0,"button",23),e.TgZ(16,"mat-autocomplete",24,25),e.NdJ("optionSelected",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSelectedOptionRol(o))}),e.YNc(18,Pe,2,2,"mat-option",26),e.YNc(19,we,2,0,"mat-option",27),e.qZA()()(),e.TgZ(20,"div",20)(21,"div",28)(22,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_insertRolByIdUser())}),e._uU(23,"Agregar rol"),e.qZA()()()()()()()(),e.TgZ(24,"div",30)(25,"div",3)(26,"div",31)(27,"table",32)(28,"thead")(29,"th",33),e._uU(30,"Acciones"),e.qZA(),e.TgZ(31,"th",34),e._uU(32,"Rol"),e.qZA(),e.TgZ(33,"th",33),e._uU(34,"Creado"),e.qZA()(),e.TgZ(35,"tbody"),e.YNc(36,Ne,10,5,"tr",35),e.qZA()()()()()()()}if(2&a){const t=e.MAs(17),i=e.oxw();e.xp6(8),e.Q6J("formGroup",i.addRoleForm),e.xp6(6),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("ngIf",i.addRoleForm.value.roleDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxRoles),e.xp6(1),e.Q6J("ngIf",0==i.cbxRoles.length&&i.addRoleForm.value.roleDesc),e.xp6(3),e.Q6J("disabled",i.addRoleForm.invalid),e.xp6(14),e.Q6J("ngForOf",i.rolesByUserList)}}function De(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ie(a,s){if(1&a&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Le(a,s){1&a&&(e.TgZ(0,"mat-option",38),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function ke(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",39)(2,"div",40)(3,"span",41),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.fn_deleteSucursalByIdUser(n.idSucursal))}),e._uU(4," delete_outline "),e.qZA()()(),e.TgZ(5,"td",42),e._uU(6),e.qZA(),e.TgZ(7,"td",39),e._uU(8),e.ALo(9,"date"),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(6),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(9,2,t.createDate,"dd-MM-yyyy h:mm:ss a"))}}function Ge(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"div",1),e._uU(3," Sucursales "),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",18),e._UZ(7,"br"),e.TgZ(8,"form",19)(9,"div",2)(10,"div",20)(11,"mat-label"),e._uU(12,"Sucursal: "),e.qZA(),e.TgZ(13,"mat-form-field",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSucursales_Search())}),e.TgZ(14,"input",43),e.NdJ("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSucursales_Search())}),e.qZA(),e.YNc(15,De,3,0,"button",23),e.TgZ(16,"mat-autocomplete",24,44),e.NdJ("optionSelected",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSucursales_SelectedOption(o))}),e.YNc(18,Ie,2,2,"mat-option",26),e.YNc(19,Le,2,0,"mat-option",27),e.qZA()()(),e.TgZ(20,"div",20)(21,"div",28)(22,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_insertSucursalByIdUser())}),e._uU(23,"Agregar sucursal"),e.qZA()()()()()()()(),e.TgZ(24,"div",30)(25,"div",3)(26,"div",31)(27,"table",32)(28,"thead")(29,"th",33),e._uU(30,"Acciones"),e.qZA(),e.TgZ(31,"th",34),e._uU(32,"Sucursal"),e.qZA(),e.TgZ(33,"th",33),e._uU(34,"Creado"),e.qZA()(),e.TgZ(35,"tbody"),e.YNc(36,ke,10,5,"tr",35),e.qZA()()()()()()()}if(2&a){const t=e.MAs(17),i=e.oxw();e.xp6(8),e.Q6J("formGroup",i.addSucursalForm),e.xp6(6),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("ngIf",i.addSucursalForm.value.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.addSucursalForm.value.sucursalDesc),e.xp6(3),e.Q6J("disabled",i.addSucursalForm.invalid),e.xp6(14),e.Q6J("ngForOf",i.sucursalesByUserList)}}function Me(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"div",1),e._uU(3," Cambio de contrase\xf1a "),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",39),e._UZ(7,"br"),e.TgZ(8,"form",19)(9,"div",2)(10,"div",3)(11,"mat-form-field",5)(12,"mat-label"),e._uU(13,"Contrase\xf1a:"),e.qZA(),e._UZ(14,"input",45),e.TgZ(15,"mat-icon",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hidePwd=!o.hidePwd)}),e._uU(16),e.qZA()()()(),e.TgZ(17,"div",2)(18,"div",3)(19,"mat-form-field",5)(20,"mat-label"),e._uU(21,"Verificar contrase\xf1a:"),e.qZA(),e._UZ(22,"input",47),e.TgZ(23,"mat-icon",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hidePwd2=!o.hidePwd2)}),e._uU(24),e.qZA()()()(),e.TgZ(25,"div",11)(26,"div",3)(27,"div",12)(28,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_changePassword())}),e._uU(29,"Guardar"),e.qZA()()()()()()()()()()}if(2&a){const t=e.oxw();e.xp6(8),e.Q6J("formGroup",t.changePwdForm),e.xp6(6),e.Q6J("type",t.hidePwd?"password":"text"),e.xp6(2),e.Oqu(t.hidePwd?"visibility_off":"visibility"),e.xp6(6),e.Q6J("type",t.hidePwd2?"password":"text"),e.xp6(2),e.Oqu(t.hidePwd2?"visibility_off":"visibility"),e.xp6(4),e.Q6J("disabled",t.changePwdForm.invalid)}}let ue=(()=>{class a{constructor(t,i,o,n,r,l,u,F,y,T){this.fb=t,this.router=i,this.activatedRoute=o,this.servicesGServ=n,this._adapter=r,this._locale=l,this.usersServ=u,this.rolesServ=F,this.sucursalesServ=y,this.authService=T,this._appMain=_.N.appMain,this.hidePwd=!0,this.hidePwd2=!0,this.title="Usuario",this.bShowSpinner=!1,this.idUser=0,this.rolesByUserList=[],this.sucursalesByUserList=[],this.showPwd2=!1,this.userForm=this.fb.group({idUser:0,name:["",[c.kI.required]],userName:["",[c.kI.required]],pwd:["",c.kI.compose([c.kI.minLength(6),c.kI.pattern(/(?=.*[0-9])/),c.kI.pattern(/(?=.*[A-Z])/),c.kI.pattern(/(?=.*[a-z])/),c.kI.pattern(/(?=.*[-_.,$@^!%*?&])/)])],active:[!0]}),this.addRoleForm=this.fb.group({idUser:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],idRol:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],roleDesc:[""]}),this.addSucursalForm=this.fb.group({idUser:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],idSucursal:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],sucursalDesc:[""]}),this.changePwdForm=this.fb.group({idUser:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],pwd:["",c.kI.compose([c.kI.required,c.kI.minLength(6),c.kI.pattern(/(?=.*[0-9])/),c.kI.pattern(/(?=.*[A-Z])/),c.kI.pattern(/(?=.*[a-z])/),c.kI.pattern(/(?=.*[-_.,$@^!%*?&])/)])],pwd2:["",c.kI.compose([c.kI.required,c.kI.minLength(6),c.kI.pattern(/(?=.*[0-9])/),c.kI.pattern(/(?=.*[A-Z])/),c.kI.pattern(/(?=.*[a-z])/),c.kI.pattern(/(?=.*[-_.,$@^!%*?&])/)])]}),this.cbxRoles=[],this.cbxSucursales=[]}ngOnInit(){this.authService.checkSession(),this._locale="mx",this._adapter.setLocale(this._locale),this.router.url.includes("editUser")&&(this.bShowSpinner=!0,this.activatedRoute.params.pipe((0,le.w)(({id:t})=>this.usersServ.CGetUserByID(t))).subscribe(t=>{console.log(t),0==t.status?(this.idUser=t.data.idUser,this.userForm.get("idUser")?.setValue(t.data.idUser),this.addRoleForm.get("idUser")?.setValue(t.data.idUser),this.addSucursalForm.get("idUser")?.setValue(t.data.idUser),this.changePwdForm.get("idUser")?.setValue(t.data.idUser),this.userForm.setValue({idUser:t.data.idUser,name:t.data.name,userName:t.data.userName,pwd:"",active:t.data.active}),this.fn_getRolesByIdUser(),this.fn_getSucursalesByIdUser()):this.servicesGServ.showSnakbar(t.message),this.bShowSpinner=!1}))}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_saveUser(){this.bShowSpinner=!0,this.idUser>0?this.usersServ.CUpdateUser(this.userForm.value).subscribe({next:t=>{this.servicesGServ.showAlertIA(t),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}):this.usersServ.CInsertUser(this.userForm.value).subscribe({next:t=>{0===t.status&&(this.idUser=t.insertID,this.userForm.get("idUser")?.setValue(t.insertID),this.addRoleForm.get("idUser")?.setValue(t.insertID),this.addSucursalForm.get("idUser")?.setValue(t.insertID),this.changePwdForm.get("idUser")?.setValue(t.insertID)),this.servicesGServ.showAlertIA(t),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}fn_getRolesByIdUser(){this.rolesServ.CGetRolesByIdUser(this.idUser).subscribe({next:t=>{this.rolesByUserList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio")}})}fn_insertRolByIdUser(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de asignar este rol","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.rolesServ.CInsertRolByIdUser(this.addRoleForm.value).subscribe({next:i=>{this.servicesGServ.showAlertIA(i),this.bShowSpinner=!1,this.addRoleForm.get("idRol")?.setValue(0),this.addRoleForm.get("roleDesc")?.setValue(""),this.fn_getRolesByIdUser()},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_deleteRolByIdUser(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de borrar la asignaci\xf3n del rol","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.rolesServ.CDeleteRolByIdUser(this.idUser,t).subscribe({next:o=>{this.fn_getRolesByIdUser(),this.servicesGServ.showAlertIA(o),this.bShowSpinner=!1},error:o=>{console.log(o),this.servicesGServ.showSnakbar(o.error.data),this.bShowSpinner=!1}}))}})}fn_insertSucursalByIdUser(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de asignar esta sucursal","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.sucursalesServ.CInsertSucursalByIdUser(this.addSucursalForm.value).subscribe({next:i=>{this.bShowSpinner=!1,this.addSucursalForm.get("idSucursal")?.setValue(0),this.addSucursalForm.get("sucursalDesc")?.setValue(""),this.fn_getSucursalesByIdUser(),this.servicesGServ.showAlertIA(i)},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_deleteSucursalByIdUser(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de borrar la asignaci\xf3n de la sucursal","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.sucursalesServ.CDeleteSucursalByIdUser(this.idUser,t).subscribe({next:o=>{0===o.status&&this.fn_getSucursalesByIdUser(),this.servicesGServ.showAlertIA(o),this.bShowSpinner=!1},error:o=>{console.log(o),this.servicesGServ.showSnakbar(o.error.data),this.bShowSpinner=!1}}))}})}fn_getSucursalesByIdUser(){this.sucursalesServ.CGetSucursalesByIdUser(this.idUser).subscribe({next:t=>{this.sucursalesByUserList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio")}})}fn_changePassword(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de cambiar la contrase\xf1a","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.usersServ.CChangePassword(this.changePwdForm.value).subscribe({next:i=>{0===i.status&&(this.changePwdForm.get("pwd")?.setValue(""),this.changePwdForm.get("pwd2")?.setValue("")),this.servicesGServ.showSnakbar(i.message),this.bShowSpinner=!1},error:i=>{console.log(i),this.servicesGServ.showSnakbar(i.error.data),this.bShowSpinner=!1}}))}})}cbxSearchRol(){this.rolesServ.CGetRolesForAddUser(this.addRoleForm.value.roleDesc,this.idUser).subscribe({next:t=>{this.cbxRoles=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSelectedOptionRol(t){if(!t.option.value)return;const i=t.option.value;this.addRoleForm.get("idRol")?.setValue(i.idRol),this.addRoleForm.get("roleDesc")?.setValue(i.name)}cbxRolClear(){this.addRoleForm.get("idRol")?.setValue(0),this.addRoleForm.get("roleDesc")?.setValue("")}cbxSucursales_Search(){this.sucursalesServ.CGetSucursalesForAddUser(this.addSucursalForm.value.sucursalDesc,this.idUser).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.addSucursalForm.get("idSucursal")?.setValue(i.idSucursal),this.addSucursalForm.get("sucursalDesc")?.setValue(i.name)}cbxSucursales_Clear(){this.addSucursalForm.get("idSucursal")?.setValue(0),this.addSucursalForm.get("sucursalDesc")?.setValue("")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(c.qu),e.Y36(D.F0),e.Y36(D.gz),e.Y36(v.$),e.Y36(h._A),e.Y36(h.Ad),e.Y36(z),e.Y36(ye),e.Y36(Q),e.Y36(S.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user"]],decls:35,vars:9,consts:[[1,"divMain","textAlingCenter",2,"padding","30px"],[1,"divTitle-center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup","ngSubmit"],["fxLayout.xs","column",2,"width","100%"],["matInput","","type","text","formControlName","name"],["matInput","","type","text","formControlName","userName"],["class","row",4,"ngIf"],[1,"col-md-1"],["formControlName","active",1,"example-margin"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled"],["mat-raised-button","","type","button",3,"click"],[4,"ngIf"],[3,"hidden"],["matInput","","type","password","formControlName","pwd"],[1,""],["action","","autocomplete","off",3,"formGroup"],[1,"col-md-4"],[2,"width","100%",3,"click"],["type","text","id","cbxRol","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","roleDesc",2,"width","100%",3,"matAutocomplete","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxRol","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[2,"float","left","margin-top","30px"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Eliminar Paciente",1,"material-icons","manitaSobre","colorRed",3,"click"],[1,"textAlingLeft"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","sucursalDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxSucursal","matAutocomplete"],["matInput","","formControlName","pwd",3,"type"],["matSuffix","",3,"click"],["matInput","","formControlName","pwd2",3,"type"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e._UZ(5,"br"),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return i.fn_saveUser()}),e.TgZ(7,"div",2)(8,"div",3)(9,"mat-form-field",5)(10,"mat-label"),e._uU(11,"Nombre:"),e.qZA(),e._UZ(12,"input",6),e.qZA()()(),e.TgZ(13,"div",2)(14,"div",3)(15,"mat-form-field",5)(16,"mat-label"),e._uU(17,"Usuario:"),e.qZA(),e._UZ(18,"input",7),e.qZA()()(),e.YNc(19,Ae,6,0,"div",8),e.TgZ(20,"div",2)(21,"div",9)(22,"mat-checkbox",10),e._uU(23,"Activo"),e.qZA()()(),e.TgZ(24,"div",11)(25,"div",3)(26,"div",12)(27,"button",13),e._uU(28,"Guardar"),e.qZA(),e.TgZ(29,"button",14),e.NdJ("click",function(){return i.changeRoute("userList")}),e._uU(30,"Cancelar"),e.qZA()()()()()()()(),e.YNc(31,qe,37,7,"div",15),e.YNc(32,Ge,37,7,"div",15),e.YNc(33,Me,30,6,"div",15),e._UZ(34,"app-spinner",16)),2&t&&(e.xp6(2),e.AsE(" ",i.idUser?"Editar":"Nuevo"," ",i.title," "),e.xp6(4),e.Q6J("formGroup",i.userForm),e.xp6(13),e.Q6J("ngIf",0==i.idUser),e.xp6(8),e.Q6J("disabled",i.userForm.invalid),e.xp6(4),e.Q6J("ngIf",i.idUser>0),e.xp6(1),e.Q6J("ngIf",i.idUser>0),e.xp6(1),e.Q6J("ngIf",i.idUser>0),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,Z.XC,h.ey,Z.ZL,g.lW,g.RK,M.oG,p.KE,p.hX,p.R9,P.Nt,U.Hw,w.O,m.uU]}),a})();var pe=d(3365);let k=(()=>{class a{constructor(t){this.paginator=t,this.OPagination=new e.vpe,this.pagination={search:"",length:0,pageSize:5,pageIndex:0,pageSizeOptions:[5,10,25,100]}}emitPagination(t){this.pagination.length=t.length,this.pagination.pageSize=t.pageSize,this.pagination.pageIndex=t.pageIndex,this.OPagination.emit(this.pagination)}ngOnInit(){this.paginator.itemsPerPageLabel="Registros por p\xe1gina",this.paginator.nextPageLabel="Siguiente p\xe1gina",this.paginator.previousPageLabel="P\xe1gina anterior",this.paginator.firstPageLabel="Primera P\xe1gina",this.paginator.lastPageLabel="\xdaltima P\xe1gina",this.pagination=this.IPagination}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(pe.ye))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-pagination"]],inputs:{IPagination:"IPagination"},outputs:{OPagination:"OPagination"},decls:1,vars:5,consts:[["aria-label","",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-paginator",0),e.NdJ("page",function(n){return i.emitPagination(n)}),e.qZA()),2&t&&e.Q6J("length",i.pagination.length)("pageSize",i.pagination.pageSize)("pageIndex",i.pagination.pageIndex)("pageSizeOptions",i.pagination.pageSizeOptions)("showFirstLastButtons",!0)},dependencies:[pe.NW]}),a})();function Oe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"span",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.fn_deleteUser(o.idUser))}),e._uU(1," delete_outline "),e.qZA()}}function Je(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",17)(2,"div",18)(3,"span",19),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.edit(n.idUser))}),e._uU(4," edit "),e.qZA(),e.YNc(5,Oe,2,0,"span",20),e.qZA()(),e.TgZ(6,"td",21),e._uU(7),e.qZA(),e.TgZ(8,"td",17),e._uU(9),e.qZA(),e.TgZ(10,"td",17),e._uU(11),e.qZA(),e.TgZ(12,"td",17),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td",17)(16,"mat-checkbox",22),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.active=o)}),e.qZA()()()}if(2&a){const t=s.$implicit;e.xp6(5),e.Q6J("ngIf",t.active),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.roles),e.xp6(2),e.Oqu(e.xi3(14,6,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngModel",t.active)}}function Re(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",24),e.NdJ("OPagination",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.changePagination(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Qe=(()=>{class a{constructor(t,i,o){this.servicesGServ=t,this.usersServ=i,this.authService=o,this._appMain=_.N.appMain,this.title="Lista de usuarios",this.bShowSpinner=!1,this.catlist=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){this.authService.checkSession(),this.fn_getUsersListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editUser`,t)}changePagination(t){this.pagination=t,this.fn_getUsersListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getUsersListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_getUsersListWithPage(){this.bShowSpinner=!0,this.usersServ.CGetUsersListWithPage(this.pagination).subscribe({next:t=>{this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t.error.errors[0].msg),this.servicesGServ.showSnakbar(t.error.errors[0].msg),this.bShowSpinner=!1}})}fn_deleteUser(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deshabilitar al usuario","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.usersServ.CDisabledUser(t).subscribe({next:o=>{this.fn_getUsersListWithPage(),this.servicesGServ.showAlertIA(o),this.bShowSpinner=!1},error:o=>{console.log(o),this.servicesGServ.showSnakbar(o.error.data),this.bShowSpinner=!1}}))}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.$),e.Y36(z),e.Y36(S.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-list"]],decls:36,vars:4,consts:[[1,"divMain","textAlingCenter",2,"width","100%"],[1,"row"],[1,"col-md-1"],[1,"divSearch"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],[1,"col-md-11"],[1,"divTitle-center"],[1,"row","top20px"],[1,"col-md-12"],[1,"with100"],["matInput","","placeholder","Ingrese un nombre",3,"change"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Editar Paciente",1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorRed","matTooltip","Eliminar Paciente",3,"click",4,"ngIf"],[1,"textAlingLeft"],[1,"example-margin",3,"ngModel","ngModelChange"],["matTooltip","Eliminar Paciente",1,"material-icons","manitaSobre","colorRed",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.NdJ("click",function(){return i.changeRoute("users")}),e._uU(5," add_circle_outline "),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6),e._uU(8),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label"),e._uU(13,"B\xfaqueda de usuario por nombre o usuario"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("change",function(n){return i.onChangeEvent(n)}),e.qZA()()()(),e.TgZ(15,"div",7)(16,"div",8)(17,"div",11)(18,"table",12)(19,"thead")(20,"th",13),e._uU(21,"Acciones"),e.qZA(),e.TgZ(22,"th",13),e._uU(23,"Nombre"),e.qZA(),e.TgZ(24,"th",13),e._uU(25,"Usuario"),e.qZA(),e.TgZ(26,"th",13),e._uU(27,"Roles"),e.qZA(),e.TgZ(28,"th",13),e._uU(29,"Creado"),e.qZA(),e.TgZ(30,"th",13),e._uU(31,"Activo"),e.qZA()(),e.TgZ(32,"tbody"),e.YNc(33,Je,17,9,"tr",14),e.qZA()()(),e.YNc(34,Re,1,1,"app-pagination",15),e.qZA()()(),e._UZ(35,"app-spinner",16)),2&t&&(e.xp6(8),e.hij(" ",i.title," "),e.xp6(25),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.sg,m.O5,c.JJ,c.On,M.oG,p.KE,p.hX,P.Nt,w.O,k,m.uU]}),a})(),$=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/products"}CGetProductsListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getProductsListWithPage`,{idUser:i.idUser,idSucursal:i.idSucursal,createDateStart:i.createDateStart,createDateEnd:i.createDateEnd,barCode:i.barCode,name:i.name,description:i.description,idFamily:i.idFamily,idGroup:i.idGroup,idQuality:i.idQuality,idOrigin:i.idOrigin,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CGetProductByID(t){return this.http.post(`${this.baseURL}/${this._api}/getProductByID`,{idProduct:t})}CInsertProduct(t){return this.http.post(`${this.baseURL}/${this._api}/insertProduct`,t)}CUpdateProduct(t){return this.http.post(`${this.baseURL}/${this._api}/updateProduct`,t)}CCbxGetProductsCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetProductsCombo`,{idUser:i,search:t})}CGetProductByBarCode(t,i){return this.http.post(`${this.baseURL}/${this._api}/getProductByBarCode`,{idUser:i,barCode:t})}CGetInventaryListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getInventaryListWithPage`,{idUser:i.idUser,idSucursal:i.idSucursal,barCode:i.barCode,name:i.name,description:i.description,idFamily:i.idFamily,idGroup:i.idGroup,idQuality:i.idQuality,idOrigin:i.idOrigin,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CGetInventaryBySucursal(t){return this.http.post(`${this.baseURL}/${this._api}/getInventaryBySucursal`,{idUser:t.idUser,idSucursal:t.idSucursal,barCode:t.barCode,name:t.name,description:t.description,idFamily:t.idFamily,idGroup:t.idGroup,idQuality:t.idQuality,idOrigin:t.idOrigin})}CDisableProduct(t){return this.http.post(`${this.baseURL}/${this._api}/disableProduct`,{idProduct:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),X=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/families"}CCbxGetFamiliesCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetFamiliesCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ee=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/groups"}CCbxGetGroupsCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetGroupsCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),te=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/origin"}CCbxGetOriginCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetOriginCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ie=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/quality"}CCbxGetQualityCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetQualityCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var N=d(8034);function Ye(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ee(a,s){if(1&a&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function He(a,s){1&a&&(e.TgZ(0,"mat-option",54),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function je(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxGroups_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function $e(a,s){if(1&a&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Be(a,s){1&a&&(e.TgZ(0,"mat-option",54),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ve(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxFamilies_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ke(a,s){if(1&a&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function We(a,s){1&a&&(e.TgZ(0,"mat-option",54),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function ze(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxQuality_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Xe(a,s){if(1&a&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function et(a,s){1&a&&(e.TgZ(0,"mat-option",54),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function tt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxOrigin_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function it(a,s){if(1&a&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function at(a,s){1&a&&(e.TgZ(0,"mat-option",54),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function ot(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"span",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.fn_disableProduct(o.idProduct))}),e._uU(1," delete_outline "),e.qZA()}}function nt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",55)(2,"div",56)(3,"span",57),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.edit(n.idProduct))}),e._uU(4," edit "),e.qZA(),e.YNc(5,ot,2,0,"span",58),e.qZA()(),e.TgZ(6,"td",59)(7,"div",2)(8,"div",41)(9,"mat-icon",60),e._uU(10,"qr_code"),e.qZA()(),e.TgZ(11,"div",61)(12,"label",62),e._uU(13),e.qZA()()()(),e.TgZ(14,"td",59),e._uU(15),e.qZA(),e.TgZ(16,"td",63),e._uU(17),e.ALo(18,"currency"),e.qZA(),e.TgZ(19,"td",63),e._uU(20),e.ALo(21,"currency"),e.qZA(),e.TgZ(22,"td",63),e._uU(23),e.qZA(),e.TgZ(24,"td",59),e._uU(25),e.qZA(),e.TgZ(26,"td",55),e._uU(27),e.ALo(28,"date"),e.qZA(),e.TgZ(29,"td",55)(30,"mat-checkbox",64),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.active=o)}),e.qZA()()()}if(2&a){const t=s.$implicit;e.xp6(5),e.Q6J("ngIf",t.active),e.xp6(8),e.Oqu(t.barCode),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.lcZ(18,9,t.cost)),e.xp6(3),e.Oqu(e.lcZ(21,11,t.price)),e.xp6(3),e.hij("",t.catInventary," piezas"),e.xp6(2),e.Oqu(t.gramos),e.xp6(2),e.Oqu(e.xi3(28,13,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngModel",t.active)}}function st(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",66),e.NdJ("OPagination",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.changePagination(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let rt=(()=>{class a{constructor(t,i,o,n,r,l,u,F,y,T,I){this.servicesGServ=t,this.productsServ=i,this.fb=o,this._adapter=n,this._locale=r,this.familiesServ=l,this.groupsServ=u,this.originServ=F,this.qualityServ=y,this.sucursalesServ=T,this.authServ=I,this._appMain=_.N.appMain,this.idUserLogON=0,this.title="Lista de Products",this.bShowSpinner=!1,this.catlist=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm=this.fb.group({idUser:0,idSucursal:0,sucursalDesc:"",createDateStart:"",createDateEnd:"",barCode:"",name:"",idFamily:0,familyDesc:[""],idGroup:0,groupDesc:[""],idQuality:0,qualityDesc:[""],idOrigin:0,originDesc:[""]}),this.cbxFamiliesList=[],this.cbxGroupsList=[],this.cbxQualityList=[],this.cbxOriginList=[],this.cbxSucursales=[]}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getProductsListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getProductsListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getProductsListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_getProductsListWithPage(){this.parametersForm.get("idUser")?.setValue(this.idUserLogON),this.bShowSpinner=!0,this.productsServ.CGetProductsListWithPage(this.pagination,this.parametersForm.value).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_disableProduct(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deshabilitar el producto","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.productsServ.CDisableProduct(t).subscribe({next:o=>{0===o.status&&this.fn_getProductsListWithPage(),this.servicesGServ.showAlertIA(o),this.bShowSpinner=!1},error:o=>{console.log(o),this.servicesGServ.showSnakbar(o.error.data),this.bShowSpinner=!1}}))}})}parametersForm_Clear(){this.parametersForm.get("createDateStart")?.setValue(""),this.parametersForm.get("createDateEnd")?.setValue(""),this.parametersForm.get("barCode")?.setValue(""),this.parametersForm.get("name")?.setValue(""),this.parametersForm.get("description")?.setValue(""),this.parametersForm.get("idFamily")?.setValue(0),this.parametersForm.get("familyDesc")?.setValue(""),this.parametersForm.get("idGroup")?.setValue(0),this.parametersForm.get("groupDesc")?.setValue(""),this.parametersForm.get("idQuality")?.setValue(0),this.parametersForm.get("qualityDesc")?.setValue(""),this.parametersForm.get("idOrigin")?.setValue(0),this.parametersForm.get("originDesc")?.setValue(""),this.parametersForm.get("idSucursal")?.setValue(0),this.parametersForm.get("sucursalDesc")?.setValue(""),this.fn_getProductsListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editProduct`,t)}cbxFamilies_Search(){this.familiesServ.CCbxGetFamiliesCombo(this.parametersForm.value.familyDesc).subscribe({next:t=>{this.cbxFamiliesList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFamilies_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idFamily")?.setValue(i.idFamily),this.parametersForm.get("familyDesc")?.setValue(i.name)}cbxFamilies_Clear(){this.parametersForm.get("idFamily")?.setValue(0),this.parametersForm.get("familyDesc")?.setValue("")}cbxGroups_Search(){this.groupsServ.CCbxGetGroupsCombo(this.parametersForm.value.groupDesc).subscribe({next:t=>{this.cbxGroupsList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxGroups_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idGroup")?.setValue(i.idGroup),this.parametersForm.get("groupDesc")?.setValue(i.name)}cbxGroups_Clear(){this.parametersForm.get("idGroup")?.setValue(0),this.parametersForm.get("groupDesc")?.setValue("")}cbxQuality_Search(){this.qualityServ.CCbxGetQualityCombo(this.parametersForm.value.qualityDesc).subscribe({next:t=>{this.cbxQualityList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxQuality_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idQuality")?.setValue(i.idQuality),this.parametersForm.get("qualityDesc")?.setValue(i.name)}cbxQuality_Clear(){this.parametersForm.get("idQuality")?.setValue(0),this.parametersForm.get("qualityDesc")?.setValue("")}cbxOrigin_Search(){this.originServ.CCbxGetOriginCombo(this.parametersForm.value.originDesc).subscribe({next:t=>{this.cbxOriginList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxOrigin_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idOrigin")?.setValue(i.idOrigin),this.parametersForm.get("originDesc")?.setValue(i.name)}cbxOrigin_Clear(){this.parametersForm.get("idOrigin")?.setValue(0),this.parametersForm.get("originDesc")?.setValue("")}cbxSucursales_Search(){this.sucursalesServ.CCbxGetSucursalesCombo(this.parametersForm.value.sucursalDesc,this.idUserLogON).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.parametersForm.get("idSucursal")?.setValue(i.idSucursal),this.parametersForm.get("sucursalDesc")?.setValue(i.name)}cbxSucursales_Clear(){this.parametersForm.get("idSucursal")?.setValue(0),this.parametersForm.get("sucursalDesc")?.setValue("")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.$),e.Y36($),e.Y36(c.qu),e.Y36(h._A),e.Y36(h.Ad),e.Y36(X),e.Y36(ee),e.Y36(te),e.Y36(ie),e.Y36(Q),e.Y36(S.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-product-list"]],decls:131,vars:27,consts:[[1,"divMain",3,"opened","closed"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","sucursalDesc",2,"width","100%",3,"matAutocomplete","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"formGroup","rangePicker","click"],["matStartDate","","formControlName","createDateStart","placeholder","Start date"],["matEndDate","","formControlName","createDateEnd","placeholder","End date"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","top20px"],[1,"col-md-4"],["fxLayout.xs","column",1,"with100"],["matPrefix","",1,"my-icon"],["matInput","","placeholder","Ingrese un C\xf3digo de barras","formControlName","barCode"],[1,"col-md-8"],["matInput","","placeholder","Ingrese un nombre","formControlName","name"],["text","",1,"row","top20px"],[1,"col-md-3"],["type","text","id","cbxGroups","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","groupDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxGroups","matAutocomplete"],["type","text","id","cbxFamilies","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","familyDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxFamilies","matAutocomplete"],["type","text","id","cbxQuality","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","qualityDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxQuality","matAutocomplete"],["type","text","id","cbxOrigin","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","originDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxOrigin","matAutocomplete"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["mat-raised-button","","type","button",3,"click"],[1,"divMain",2,"width","100%","margin-top","50px !important"],[1,"col-md-1"],[1,"divSearch"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Editar Paciente",1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorRed","matTooltip","Eliminar Paciente",3,"click",4,"ngIf"],[1,"textAlingLeft"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[1,"col-md-10"],[2,"margin-left","10px"],[1,"textAlingRight"],[1,"example-margin",3,"ngModel","ngModelChange"],["matTooltip","Eliminar Paciente",1,"material-icons","manitaSobre","colorRed",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header")(3,"mat-panel-title",1),e._uU(4," Filtros de productos "),e.qZA()(),e.TgZ(5,"div",2)(6,"div",3),e._UZ(7,"br"),e.TgZ(8,"form",4)(9,"div",2)(10,"div",3)(11,"mat-label"),e._uU(12,"Sucursal: "),e.qZA(),e.TgZ(13,"mat-form-field",5),e.NdJ("click",function(){return i.cbxSucursales_Search()}),e.TgZ(14,"input",6),e.NdJ("input",function(){return i.cbxSucursales_Search()}),e.qZA(),e.YNc(15,Ye,3,0,"button",7),e.TgZ(16,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(r){return i.cbxSucursales_SelectedOption(r)}),e.YNc(18,Ee,2,2,"mat-option",10),e.YNc(19,He,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(20,"div",2)(21,"div",12)(22,"mat-form-field",13)(23,"mat-label"),e._uU(24,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(25,"mat-date-range-input",14),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(32);return e.KtG(r.open())}),e._UZ(26,"input",15)(27,"input",16),e.qZA(),e.TgZ(28,"mat-hint"),e._uU(29,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(30,"mat-datepicker-toggle",17)(31,"mat-date-range-picker",null,18),e.qZA()()(),e.TgZ(33,"div",19)(34,"div",20)(35,"mat-form-field",21)(36,"mat-label"),e._uU(37,"C\xf3digo de barras"),e.qZA(),e.TgZ(38,"mat-icon",22),e._uU(39,"qr_code"),e.qZA(),e._UZ(40,"input",23),e.qZA()(),e.TgZ(41,"div",24)(42,"mat-form-field",13)(43,"mat-label"),e._uU(44,"Nombre"),e.qZA(),e._UZ(45,"input",25),e.qZA()()(),e.TgZ(46,"div",26)(47,"div",27)(48,"mat-label"),e._uU(49,"Grupo: "),e.qZA(),e.TgZ(50,"mat-form-field",5),e.NdJ("click",function(){return i.cbxGroups_Search()}),e.TgZ(51,"input",28),e.NdJ("input",function(){return i.cbxGroups_Search()}),e.qZA(),e.YNc(52,je,3,0,"button",7),e.TgZ(53,"mat-autocomplete",8,29),e.NdJ("optionSelected",function(r){return i.cbxGroups_SelectedOption(r)}),e.YNc(55,$e,2,2,"mat-option",10),e.YNc(56,Be,2,0,"mat-option",11),e.qZA()()(),e.TgZ(57,"div",27)(58,"mat-label"),e._uU(59,"Familia: "),e.qZA(),e.TgZ(60,"mat-form-field",5),e.NdJ("click",function(){return i.cbxFamilies_Search()}),e.TgZ(61,"input",30),e.NdJ("input",function(){return i.cbxFamilies_Search()}),e.qZA(),e.YNc(62,Ve,3,0,"button",7),e.TgZ(63,"mat-autocomplete",8,31),e.NdJ("optionSelected",function(r){return i.cbxFamilies_SelectedOption(r)}),e.YNc(65,Ke,2,2,"mat-option",10),e.YNc(66,We,2,0,"mat-option",11),e.qZA()()(),e.TgZ(67,"div",27)(68,"mat-label"),e._uU(69,"Calidad: "),e.qZA(),e.TgZ(70,"mat-form-field",5),e.NdJ("click",function(){return i.cbxQuality_Search()}),e.TgZ(71,"input",32),e.NdJ("input",function(){return i.cbxQuality_Search()}),e.qZA(),e.YNc(72,ze,3,0,"button",7),e.TgZ(73,"mat-autocomplete",8,33),e.NdJ("optionSelected",function(r){return i.cbxQuality_SelectedOption(r)}),e.YNc(75,Xe,2,2,"mat-option",10),e.YNc(76,et,2,0,"mat-option",11),e.qZA()()(),e.TgZ(77,"div",27)(78,"mat-label"),e._uU(79,"Origen: "),e.qZA(),e.TgZ(80,"mat-form-field",5),e.NdJ("click",function(){return i.cbxOrigin_Search()}),e.TgZ(81,"input",34),e.NdJ("input",function(){return i.cbxOrigin_Search()}),e.qZA(),e.YNc(82,tt,3,0,"button",7),e.TgZ(83,"mat-autocomplete",8,35),e.NdJ("optionSelected",function(r){return i.cbxOrigin_SelectedOption(r)}),e.YNc(85,it,2,2,"mat-option",10),e.YNc(86,at,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(87,"div",36)(88,"div",3)(89,"div",37)(90,"button",38),e.NdJ("click",function(){return i.fn_getProductsListWithPage()}),e.TgZ(91,"mat-icon",22),e._uU(92,"search"),e.qZA(),e._uU(93," Buscar"),e.qZA(),e.TgZ(94,"button",39),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(95,"mat-icon",22),e._uU(96,"clear"),e.qZA(),e._uU(97," limpiar"),e.qZA()()()()()()()()(),e.TgZ(98,"div",40)(99,"div",2)(100,"div",41)(101,"div",42)(102,"span",43),e.NdJ("click",function(){return i.changeRoute("product")}),e._uU(103," add_circle_outline "),e.qZA()()()(),e.TgZ(104,"div",19)(105,"div",3)(106,"div",44)(107,"table",45)(108,"thead")(109,"th",46),e._uU(110,"Acciones"),e.qZA(),e.TgZ(111,"th",47),e._uU(112,"C\xf3digo de barras"),e.qZA(),e.TgZ(113,"th",47),e._uU(114,"Nombre"),e.qZA(),e.TgZ(115,"th",48),e._uU(116,"Costo"),e.qZA(),e.TgZ(117,"th",48),e._uU(118,"Precio"),e.qZA(),e.TgZ(119,"th",48),e._uU(120,"Inventario"),e.qZA(),e.TgZ(121,"th",47),e._uU(122,"Gramos"),e.qZA(),e.TgZ(123,"th",46),e._uU(124,"Creado"),e.qZA(),e.TgZ(125,"th",46),e._uU(126,"Activo"),e.qZA()(),e.TgZ(127,"tbody"),e.YNc(128,nt,31,16,"tr",49),e.qZA()()(),e.YNc(129,st,1,1,"app-pagination",50),e.qZA()()(),e._UZ(130,"app-spinner",51)}if(2&t){const o=e.MAs(17),n=e.MAs(32),r=e.MAs(54),l=e.MAs(64),u=e.MAs(74),F=e.MAs(84);e.xp6(8),e.Q6J("formGroup",i.parametersForm),e.xp6(6),e.Q6J("matAutocomplete",o),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.parametersForm.value.sucursalDesc),e.xp6(6),e.Q6J("formGroup",i.parametersForm)("rangePicker",n),e.xp6(5),e.Q6J("for",n),e.xp6(21),e.Q6J("matAutocomplete",r),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.groupDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxGroupsList),e.xp6(1),e.Q6J("ngIf",0==i.cbxGroupsList.length&&i.parametersForm.value.groupDesc),e.xp6(5),e.Q6J("matAutocomplete",l),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.familyDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFamiliesList),e.xp6(1),e.Q6J("ngIf",0==i.cbxFamiliesList.length&&i.parametersForm.value.familyDesc),e.xp6(5),e.Q6J("matAutocomplete",u),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.qualityDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxQualityList),e.xp6(1),e.Q6J("ngIf",0==i.cbxQualityList.length&&i.parametersForm.value.qualityDesc),e.xp6(5),e.Q6J("matAutocomplete",F),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.originDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxOriginList),e.xp6(1),e.Q6J("ngIf",0==i.cbxOriginList.length&&i.parametersForm.value.originDesc),e.xp6(42),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.On,Z.XC,h.ey,Z.ZL,g.lW,g.RK,M.oG,N.nW,N.wx,N.zY,N.By,N._g,x.pp,x.ib,x.yz,x.yK,p.KE,p.hX,p.bx,p.qo,p.R9,P.Nt,U.Hw,w.O,k,m.H9,m.uU]}),a})();function ct(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function lt(a,s){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ut(a,s){1&a&&(e.TgZ(0,"mat-option",42),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function pt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxGroups_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function mt(a,s){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function dt(a,s){1&a&&(e.TgZ(0,"mat-option",42),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function _t(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxFamilies_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function ht(a,s){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function gt(a,s){1&a&&(e.TgZ(0,"mat-option",42),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function ft(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxQuality_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function bt(a,s){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function St(a,s){1&a&&(e.TgZ(0,"mat-option",42),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ct(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxOrigin_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function vt(a,s){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function xt(a,s){1&a&&(e.TgZ(0,"mat-option",42),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Zt(a,s){1&a&&(e.TgZ(0,"div",23)(1,"mat-form-field",14)(2,"mat-label"),e._uU(3,"Agregar al inventario"),e.qZA(),e._UZ(4,"input",43),e.qZA()())}let me=(()=>{class a{constructor(t,i,o,n,r,l,u,F,y,T,I,G,E){this.servicesGServ=t,this.productsServ=i,this.fb=o,this.router=n,this.activatedRoute=r,this._adapter=l,this._locale=u,this.familiesServ=F,this.groupsServ=y,this.originServ=T,this.qualityServ=I,this.sucursalesServ=G,this.authServ=E,this._appMain=_.N.appMain,this.title="Producto",this.bShowSpinner=!1,this.idProduct=0,this.idUserLogON=0,this.productForm=this.fb.group({idSucursal:0,sucursalDesc:"",idProduct:0,createDate:"",barCode:["",[c.kI.required]],name:["",[c.kI.required]],gramos:0,cost:[0,[c.kI.required,c.kI.pattern(/^[0-9]+(.[0-9]{0,2})?$/)]],price:[0,[c.kI.required,c.kI.pattern(/^[0-9]+(.[0-9]{0,2})?$/)]],idFamily:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],familyDesc:[""],idGroup:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],groupDesc:[""],idQuality:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],qualityDesc:[""],idOrigin:[0,[c.kI.required,c.kI.pattern(/^[1-9]\d*$/)]],originDesc:[""],active:!0,addInv:1,idUser:0}),this.cbxFamiliesList=[],this.cbxGroupsList=[],this.cbxQualityList=[],this.cbxOriginList=[],this.cbxSucursales=[]}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.router.url.includes("editProduct")&&(t.bShowSpinner=!0,t.activatedRoute.params.pipe((0,le.w)(({id:i})=>t.productsServ.CGetProductByID(i))).subscribe(i=>{console.log(i),0==i.status?(t.idProduct=i.data.idProduct,t.productForm.setValue({idProduct:i.data.idProduct,idSucursal:i.data.idSucursal,sucursalDesc:i.data.sucursalDesc,createDate:i.data.createDate,barCode:i.data.barCode,name:i.data.name,gramos:i.data.gramos,cost:i.data.cost,price:i.data.price,idFamily:i.data.idFamily,familyDesc:i.data.familyDesc,idGroup:i.data.idGroup,groupDesc:i.data.groupDesc,idQuality:i.data.idQuality,qualityDesc:i.data.qualityDesc,idOrigin:i.data.idOrigin,originDesc:i.data.originDesc,active:i.data.active,addInv:1,idUser:t.idUserLogON})):t.servicesGServ.showSnakbar(i.message),t.bShowSpinner=!1}))})()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_saveProduct(){this.productForm.get("idUser")?.setValue(this.idUserLogON),this.bShowSpinner=!0,this.idProduct>0?this.productsServ.CUpdateProduct(this.productForm.value).subscribe({next:t=>{0===t.status?this.servicesGServ.showAlert("S","OK!",t.message,!0):this.servicesGServ.showAlert("W","Alerta!",t.message,!0),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}):this.productsServ.CInsertProduct(this.productForm.value).subscribe({next:t=>{0===t.status?(this.idProduct=t.insertID,this.productForm.get("idProduct")?.setValue(t.insertID),this.servicesGServ.showAlert("S","OK!",t.message,!0)):this.servicesGServ.showAlert("W","Alerta!",t.message,!0),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFamilies_Search(){this.familiesServ.CCbxGetFamiliesCombo(this.productForm.value.familyDesc).subscribe({next:t=>{this.cbxFamiliesList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFamilies_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.productForm.get("idFamily")?.setValue(i.idFamily),this.productForm.get("familyDesc")?.setValue(i.name)}cbxFamilies_Clear(){this.productForm.get("idFamily")?.setValue(0),this.productForm.get("familyDesc")?.setValue("")}cbxGroups_Search(){this.groupsServ.CCbxGetGroupsCombo(this.productForm.value.groupDesc).subscribe({next:t=>{this.cbxGroupsList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxGroups_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.productForm.get("idGroup")?.setValue(i.idGroup),this.productForm.get("groupDesc")?.setValue(i.name)}cbxGroups_Clear(){this.productForm.get("idGroup")?.setValue(0),this.productForm.get("groupDesc")?.setValue("")}cbxQuality_Search(){this.qualityServ.CCbxGetQualityCombo(this.productForm.value.qualityDesc).subscribe({next:t=>{this.cbxQualityList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxQuality_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.productForm.get("idQuality")?.setValue(i.idQuality),this.productForm.get("qualityDesc")?.setValue(i.name)}cbxQuality_Clear(){this.productForm.get("idQuality")?.setValue(0),this.productForm.get("qualityDesc")?.setValue("")}cbxOrigin_Search(){this.originServ.CCbxGetOriginCombo(this.productForm.value.originDesc).subscribe({next:t=>{this.cbxOriginList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxOrigin_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.productForm.get("idOrigin")?.setValue(i.idOrigin),this.productForm.get("originDesc")?.setValue(i.name)}cbxOrigin_Clear(){this.productForm.get("idOrigin")?.setValue(0),this.productForm.get("originDesc")?.setValue("")}cbxSucursales_Search(){this.sucursalesServ.CCbxGetSucursalesCombo(this.productForm.value.sucursalDesc,this.idUserLogON).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.productForm.get("idSucursal")?.setValue(i.idSucursal),this.productForm.get("sucursalDesc")?.setValue(i.name)}cbxSucursales_Clear(){this.productForm.get("idSucursal")?.setValue(0),this.productForm.get("sucursalDesc")?.setValue("")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.$),e.Y36($),e.Y36(c.qu),e.Y36(D.F0),e.Y36(D.gz),e.Y36(h._A),e.Y36(h.Ad),e.Y36(X),e.Y36(ee),e.Y36(te),e.Y36(ie),e.Y36(Q),e.Y36(S.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-product"]],decls:105,vars:26,consts:[[1,"divMain","textAlingCenter",2,"padding","30px"],[1,"divTitle-center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","top20px"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","sucursalDesc",2,"width","100%",3,"matAutocomplete","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-4"],[1,"with100"],["matPrefix","",1,"my-icon"],["matInput","","placeholder","Ingrese un C\xf3digo de barras","formControlName","barCode"],["matInput","","placeholder","Ingrese un costo","type","number","formControlName","cost"],["matInput","","placeholder","Ingrese un precio","type","number","formControlName","price"],[1,"col-md-6"],["matInput","","placeholder","Ingrese un nombre","formControlName","name"],["matInput","","placeholder","Ingrese los gramos","type","number","formControlName","gramos"],["text","",1,"row","top20px"],[1,"col-md-3"],["type","text","id","cbxGroups","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","groupDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxGroups","matAutocomplete"],["type","text","id","cbxFamilies","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","familyDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxFamilies","matAutocomplete"],["type","text","id","cbxQuality","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","qualityDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxQuality","matAutocomplete"],["type","text","id","cbxOrigin","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","originDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxOrigin","matAutocomplete"],[1,"col-md-1"],["formControlName","active",1,"example-margin"],["class","col-md-3",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled"],["mat-raised-button","","type","button",3,"click"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["matInput","","placeholder","Ingrese una cantidad","type","number","formControlName","addInv"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e._UZ(5,"br"),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return i.fn_saveProduct()}),e.TgZ(7,"div",5)(8,"div",3)(9,"mat-label"),e._uU(10,"Sucursal: "),e.qZA(),e.TgZ(11,"mat-form-field",6),e.NdJ("click",function(){return i.cbxSucursales_Search()}),e.TgZ(12,"input",7),e.NdJ("input",function(){return i.cbxSucursales_Search()}),e.qZA(),e.YNc(13,ct,3,0,"button",8),e.TgZ(14,"mat-autocomplete",9,10),e.NdJ("optionSelected",function(n){return i.cbxSucursales_SelectedOption(n)}),e.YNc(16,lt,2,2,"mat-option",11),e.YNc(17,ut,2,0,"mat-option",12),e.qZA()()()(),e.TgZ(18,"div",5)(19,"div",13)(20,"mat-form-field",14)(21,"mat-label"),e._uU(22,"C\xf3digo de barras"),e.qZA(),e.TgZ(23,"mat-icon",15),e._uU(24,"qr_code"),e.qZA(),e._UZ(25,"input",16),e.qZA()(),e.TgZ(26,"div",13)(27,"mat-form-field",14)(28,"mat-label"),e._uU(29,"Costo: "),e.qZA(),e.TgZ(30,"mat-icon",15),e._uU(31,"monetization_on"),e.qZA(),e._UZ(32,"input",17),e.qZA()(),e.TgZ(33,"div",13)(34,"mat-form-field",14)(35,"mat-label"),e._uU(36,"Precio: "),e.qZA(),e.TgZ(37,"mat-icon",15),e._uU(38,"monetization_on"),e.qZA(),e._UZ(39,"input",18),e.qZA()()(),e.TgZ(40,"div",5)(41,"div",19)(42,"mat-form-field",14)(43,"mat-label"),e._uU(44,"Nombre"),e.qZA(),e._UZ(45,"input",20),e.qZA()(),e.TgZ(46,"div",19)(47,"mat-form-field",14)(48,"mat-label"),e._uU(49,"Gramos"),e.qZA(),e._UZ(50,"input",21),e.qZA()()(),e.TgZ(51,"div",22)(52,"div",23)(53,"mat-label"),e._uU(54,"Grupo: "),e.qZA(),e.TgZ(55,"mat-form-field",6),e.NdJ("click",function(){return i.cbxGroups_Search()}),e.TgZ(56,"input",24),e.NdJ("input",function(){return i.cbxGroups_Search()}),e.qZA(),e.YNc(57,pt,3,0,"button",8),e.TgZ(58,"mat-autocomplete",9,25),e.NdJ("optionSelected",function(n){return i.cbxGroups_SelectedOption(n)}),e.YNc(60,mt,2,2,"mat-option",11),e.YNc(61,dt,2,0,"mat-option",12),e.qZA()()(),e.TgZ(62,"div",23)(63,"mat-label"),e._uU(64,"Familia: "),e.qZA(),e.TgZ(65,"mat-form-field",6),e.NdJ("click",function(){return i.cbxFamilies_Search()}),e.TgZ(66,"input",26),e.NdJ("input",function(){return i.cbxFamilies_Search()}),e.qZA(),e.YNc(67,_t,3,0,"button",8),e.TgZ(68,"mat-autocomplete",9,27),e.NdJ("optionSelected",function(n){return i.cbxFamilies_SelectedOption(n)}),e.YNc(70,ht,2,2,"mat-option",11),e.YNc(71,gt,2,0,"mat-option",12),e.qZA()()(),e.TgZ(72,"div",23)(73,"mat-label"),e._uU(74,"Calidad: "),e.qZA(),e.TgZ(75,"mat-form-field",6),e.NdJ("click",function(){return i.cbxQuality_Search()}),e.TgZ(76,"input",28),e.NdJ("input",function(){return i.cbxQuality_Search()}),e.qZA(),e.YNc(77,ft,3,0,"button",8),e.TgZ(78,"mat-autocomplete",9,29),e.NdJ("optionSelected",function(n){return i.cbxQuality_SelectedOption(n)}),e.YNc(80,bt,2,2,"mat-option",11),e.YNc(81,St,2,0,"mat-option",12),e.qZA()()(),e.TgZ(82,"div",23)(83,"mat-label"),e._uU(84,"Origen: "),e.qZA(),e.TgZ(85,"mat-form-field",6),e.NdJ("click",function(){return i.cbxOrigin_Search()}),e.TgZ(86,"input",30),e.NdJ("input",function(){return i.cbxOrigin_Search()}),e.qZA(),e.YNc(87,Ct,3,0,"button",8),e.TgZ(88,"mat-autocomplete",9,31),e.NdJ("optionSelected",function(n){return i.cbxOrigin_SelectedOption(n)}),e.YNc(90,vt,2,2,"mat-option",11),e.YNc(91,xt,2,0,"mat-option",12),e.qZA()()()(),e.TgZ(92,"div",2)(93,"div",32)(94,"mat-checkbox",33),e._uU(95,"Activo"),e.qZA()(),e.YNc(96,Zt,5,0,"div",34),e.qZA(),e.TgZ(97,"div",35)(98,"div",3)(99,"div",36)(100,"button",37),e._uU(101,"Guardar"),e.qZA(),e.TgZ(102,"button",38),e.NdJ("click",function(){return i.changeRoute("productList")}),e._uU(103,"Cancelar"),e.qZA()()()()()()()(),e._UZ(104,"app-spinner",39)),2&t){const o=e.MAs(15),n=e.MAs(59),r=e.MAs(69),l=e.MAs(79),u=e.MAs(89);e.xp6(2),e.AsE(" ",i.idProduct?"Editar":"Nuevo"," ",i.title," "),e.xp6(4),e.Q6J("formGroup",i.productForm),e.xp6(6),e.Q6J("matAutocomplete",o),e.xp6(1),e.Q6J("ngIf",i.productForm.value.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.productForm.value.sucursalDesc),e.xp6(39),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",i.productForm.value.groupDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxGroupsList),e.xp6(1),e.Q6J("ngIf",0==i.cbxGroupsList.length&&i.productForm.value.groupDesc),e.xp6(5),e.Q6J("matAutocomplete",r),e.xp6(1),e.Q6J("ngIf",i.productForm.value.familyDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFamiliesList),e.xp6(1),e.Q6J("ngIf",0==i.cbxFamiliesList.length&&i.productForm.value.familyDesc),e.xp6(5),e.Q6J("matAutocomplete",l),e.xp6(1),e.Q6J("ngIf",i.productForm.value.qualityDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxQualityList),e.xp6(1),e.Q6J("ngIf",0==i.cbxQualityList.length&&i.productForm.value.qualityDesc),e.xp6(5),e.Q6J("matAutocomplete",u),e.xp6(1),e.Q6J("ngIf",i.productForm.value.originDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxOriginList),e.xp6(1),e.Q6J("ngIf",0==i.cbxOriginList.length&&i.productForm.value.originDesc),e.xp6(5),e.Q6J("ngIf",0==i.idProduct),e.xp6(4),e.Q6J("disabled",i.productForm.invalid),e.xp6(4),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,Z.XC,h.ey,Z.ZL,g.lW,g.RK,M.oG,p.KE,p.hX,p.qo,p.R9,P.Nt,U.Hw,w.O]}),a})();var q=d(7700);let Y=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=_.N.baseUrl,this.idSucursal=_.N.idSucursal,this._api="api/customers"}CGetCustomersListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getCustomersListWithPage`,{createDateStart:i.createDateStart,createDateEnd:i.createDateEnd,name:i.name,lastName:i.lastName,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CCbxGetCustomersCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetCustomersCombo`,{idUser:i,search:t})}CGetCustomerByID(t){return this.http.post(`${this.baseURL}/${this._api}/getCustomerByID`,{idCustomer:t})}CGetCustomerByIDPromise(t){var i=this;return(0,f.Z)(function*(){var o={idCustomer:t};return new Promise((n,r)=>{i.http.post(`${i.baseURL}/${i._api}/getCustomerByID`,o).subscribe({next:l=>{n(l.data)},error:l=>{r(l)}})})})()}CInsertCustomer(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertCustomer`,t)}CUpdateCustomer(t){return this.http.post(`${this.baseURL}/${this._api}/updateCustomer`,t)}CDeleteCustomer(t){return this.http.post(`${this.baseURL}/${this._api}/deleteCustomer`,{idCustomer:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN),e.LFG(S.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var ae=d(6263);let de=(()=>{class a{constructor(t,i,o,n,r,l,u,F,y,T){this.dialogRef=t,this.OParamsData=i,this.servicesGServ=o,this.customerServ=n,this.fb=r,this.router=l,this.activatedRoute=u,this._adapter=F,this._locale=y,this.authServ=T,this._appMain=_.N.appMain,this.title="Cliente",this.bShowSpinner=!1,this.id=0,this.name="",this.idUserLogON=0,this.isMDL=!1,this.customerForm=this.fb.group({idCustomer:0,createDate:"",name:["",[c.kI.required]],lastName:"",address:"",tel:"",eMail:"",active:!0,idUser:0})}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.OParamsData.id>0&&(t.bShowSpinner=!0,t.customerServ.CGetCustomerByID(t.OParamsData.id).subscribe(i=>{0==i.status?(t.id=i.data.idCustomer,t.customerForm.setValue({idCustomer:i.data.idCustomer,createDate:i.data.createDate,name:i.data.name,lastName:i.data.lastName,address:i.data.address,tel:i.data.tel,eMail:i.data.eMail,active:i.data.active,idUser:t.idUserLogON}),t.name=t.event_getDescCustomer()):t.servicesGServ.showSnakbar(i.message),t.bShowSpinner=!1}))})()}close(){this.dialogRef.close({bOK:this.id>0,id:this.id,name:this.name})}inputFocus(t){t?.focus()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_saveCustomer(){this.customerForm.get("idUser")?.setValue(this.idUserLogON),this.bShowSpinner=!0,this.id>0?this.customerServ.CUpdateCustomer(this.customerForm.value).subscribe({next:t=>{0===t.status?(this.servicesGServ.showAlert("S","OK!",t.message,!0),this.name=this.event_getDescCustomer()):this.servicesGServ.showAlert("W","Alerta!",t.message,!0),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}):this.customerServ.CInsertCustomer(this.customerForm.value).subscribe({next:t=>{0===t.status&&(this.id=t.insertID,this.name=this.event_getDescCustomer(),this.customerForm.get("idCustomer")?.setValue(t.insertID),this.servicesGServ.showAlert("S","OK!",t.message,!0)),this.servicesGServ.showSnakbar(t.message),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}event_getDescCustomer(){return this.customerForm.value.lastName+this.customerForm.value.name+" - "+this.customerForm.value.tel+" - "+this.customerForm.value.address}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.so),e.Y36(q.WI),e.Y36(v.$),e.Y36(Y),e.Y36(c.qu),e.Y36(D.F0),e.Y36(D.gz),e.Y36(h._A),e.Y36(h.Ad),e.Y36(S.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-customer"]],decls:48,vars:5,consts:[[1,"textAlingCenter",2,"padding","30px","padding-top","60px"],[1,"divTitle-center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","top20px"],[1,"col-md-4"],[1,"with100"],["matInput","","placeholder","Ingrese los apellidos","formControlName","lastName"],["matInput","","placeholder","Ingrese el nombre","type","text","formControlName","name"],["matPrefix","",1,"my-icon"],["matInput","","placeholder","Ingrese un tel\xe9fono","type","text","formControlName","tel"],[1,"col-md-6"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese la direcci\xf3n","formControlName","address"],["matInput","","placeholder","Ingrese un correo electr\xf3nico","formControlName","eMail"],[1,"col-md-1"],["formControlName","active",1,"example-margin"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled"],["mat-raised-button","","type","button",3,"click"],[3,"hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e._UZ(5,"br"),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return i.fn_saveCustomer()}),e.TgZ(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Apellidos"),e.qZA(),e._UZ(12,"input",8),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),e._uU(16,"Nombre: "),e.qZA(),e._UZ(17,"input",9),e.qZA()(),e.TgZ(18,"div",6)(19,"mat-form-field",7)(20,"mat-label"),e._uU(21,"Tel\xe9fono: "),e.qZA(),e.TgZ(22,"mat-icon",10),e._uU(23,"phone"),e.qZA(),e._UZ(24,"input",11),e.qZA()()(),e.TgZ(25,"div",5)(26,"div",12)(27,"mat-form-field",13)(28,"mat-label"),e._uU(29,"Direcci\xf3n"),e.qZA(),e._UZ(30,"textarea",14),e.qZA()(),e.TgZ(31,"div",12)(32,"mat-form-field",7)(33,"mat-label"),e._uU(34,"Correo electr\xf3nico"),e.qZA(),e._UZ(35,"input",15),e.qZA()()(),e.TgZ(36,"div",2)(37,"div",16)(38,"mat-checkbox",17),e._uU(39,"Activo"),e.qZA()()(),e.TgZ(40,"div",18)(41,"div",3)(42,"div",19)(43,"button",20),e._uU(44,"Guardar"),e.qZA(),e.TgZ(45,"button",21),e.NdJ("click",function(){return i.close()}),e._uU(46,"Cerrar"),e.qZA()()()()()()()(),e._UZ(47,"app-spinner",22)),2&t&&(e.xp6(2),e.AsE(" ",i.id?"Editar":"Nuevo"," ",i.title," "),e.xp6(4),e.Q6J("formGroup",i.customerForm),e.xp6(37),e.Q6J("disabled",i.customerForm.invalid),e.xp6(4),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,g.lW,M.oG,p.KE,p.hX,p.qo,P.Nt,ae.IC,U.Hw,w.O]}),a})(),Tt=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=_.N.baseUrl,this.idSucursal=_.N.idSucursal,this._api="api/electronicMoney"}CGetElectronicMoneyListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getElectronicMoneyListWithPage`,{idCustomer:i,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CInsertElectronicMoney(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertElectronicMoney`,t)}CDeleteElectronicMoney(t){return this.http.post(`${this.baseURL}/${this._api}/deleteElectronicMoney`,{idElectronicMoney:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN),e.LFG(S.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var O=d(6262);const Ft=["tbxDescription"],yt=["tbxMonto"];function At(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.fn_deleteElectronicMoney(o.idElectronicMoney))}),e._uU(1," delete_outline "),e.qZA()}}function Ut(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td",21)(2,"div",25),e.YNc(3,At,2,0,"span",26),e.qZA()(),e.TgZ(4,"td",19),e._uU(5),e.qZA(),e.TgZ(6,"td",20),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"td",21)(10,"div",3)(11,"div",2)(12,"mat-icon",27),e._uU(13,"calendar_today"),e.qZA(),e.TgZ(14,"label",28),e._uU(15),e.ALo(16,"date"),e.qZA()()()()()),2&a){const t=s.$implicit;e.xp6(3),e.Q6J("ngIf",0==t.idRelation),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(8,4,t.amount)),e.xp6(8),e.Oqu(e.xi3(16,6,t.createDate,"dd-MM-yyyy h:mm:ss a"))}}function Pt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",30),e.NdJ("OPagination",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.changePagination(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let wt=(()=>{class a{constructor(t,i,o,n,r,l,u){this.dialogRef=t,this.ODataP=i,this.servicesGServ=o,this._adapter=n,this._locale=r,this.authServ=l,this.electronicMoneyServ=u,this._appMain=_.N.appMain,this.title="Dinero electr\xf3nico",this.bShowSpinner=!1,this.idUserLogON=0,this.electronicMoneyForm={idCustomer:0,amount:0,description:""},this.electronicMoneyList=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.bInsertElectronicMoney=!1,this.bDeleteElectronicMoney=!1}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.electronicMoneyForm.idCustomer=t.ODataP.idCustomer,t.fn_getElectronicMoneyListWithPage(),t.nextInputFocus(t.tbxDescription,500)})()}changePagination(t){this.pagination=t,this.fn_getElectronicMoneyListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getElectronicMoneyListWithPage()}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}fn_insertElectronicMoney(){this.electronicMoneyForm.idCustomer>0&&this.electronicMoneyForm.amount>0&&!this.bInsertElectronicMoney&&(this.bInsertElectronicMoney=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de agregar dinero electr\xf3nico al cliente","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{this.bInsertElectronicMoney=!1,t&&(this.bShowSpinner=!0,this.electronicMoneyServ.CInsertElectronicMoney(this.electronicMoneyForm).subscribe({next:i=>{0===i.status?this.servicesGServ.showAlert("S","OK!",i.message,!0):this.servicesGServ.showAlert("W","Alerta!",i.message,!0),this.bShowSpinner=!1,this.event_clear()},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}}))}fn_getElectronicMoneyListWithPage(){console.log("Before"),console.log(this.electronicMoneyForm),console.log("After"),this.bShowSpinner=!0,this.electronicMoneyServ.CGetElectronicMoneyListWithPage(this.pagination,this.electronicMoneyForm.idCustomer).subscribe({next:t=>{this.electronicMoneyList=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_deleteElectronicMoney(t){this.bDeleteElectronicMoney||(this.bDeleteElectronicMoney=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de Eliminar dinero electr\xf3nico al cliente","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{this.bDeleteElectronicMoney=!1,i&&(this.bShowSpinner=!0,this.electronicMoneyServ.CDeleteElectronicMoney(t).subscribe({next:o=>{0===o.status?this.servicesGServ.showAlert("S","OK!",o.message,!0):this.servicesGServ.showAlert("W","Alerta!",o.message,!0),this.bShowSpinner=!1,this.event_clear()},error:o=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}}))}fn_CerrarMDL(){this.dialogRef.close(!0)}event_clear(){this.electronicMoneyForm.description="",this.electronicMoneyForm.amount=0,this.fn_getElectronicMoneyListWithPage(),this.nextInputFocus(this.tbxDescription,500)}ev_fn_description_keyup_enter(t){13==t.keyCode&&this.electronicMoneyForm.description.length>0&&this.nextInputFocus(this.tbxMonto,0)}ev_fn_amount_keyup_enter(t){13==t.keyCode&&this.electronicMoneyForm.amount>0&&this.fn_insertElectronicMoney()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.so),e.Y36(q.WI),e.Y36(v.$),e.Y36(h._A),e.Y36(h.Ad),e.Y36(S.e),e.Y36(Tt))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-electronic-money-mdl"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ft,5),e.Gf(yt,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.tbxDescription=o.first),e.iGM(o=e.CRH())&&(i.tbxMonto=o.first)}},decls:50,vars:5,consts:[[2,"padding","10px"],[1,"row","top20px"],[1,"col-md-12"],[1,"row"],[1,"col-md-6"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese el motivo",3,"ngModel","ngModelChange","keyup"],["tbxDescription",""],[1,"with100"],["matInput","","currencyMask","","placeholder","Monto",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxMonto",""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft"],[1,"textAlingRight"],[1,"textAlingCenter"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[2,"width","80px"],["class","material-icons manitaSobre colorRed",3,"click",4,"ngIf"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[1,"material-icons","manitaSobre","colorRed",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"EL dinero electr\xf3nico se puede utilizar en las compras"),e.qZA()()(),e.TgZ(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Descripci\xf3n"),e.qZA(),e.TgZ(10,"textarea",6,7),e.NdJ("ngModelChange",function(n){return i.electronicMoneyForm.description=n})("keyup",function(n){return i.ev_fn_description_keyup_enter(n)}),e.qZA()()(),e.TgZ(12,"div",4)(13,"mat-form-field",8)(14,"mat-label"),e._uU(15,"Monto"),e.qZA(),e.TgZ(16,"input",9,10),e.NdJ("ngModelChange",function(n){return i.electronicMoneyForm.amount=n})("keyup",function(n){return i.ev_fn_amount_keyup_enter(n)}),e.qZA()()()(),e.TgZ(18,"div",11)(19,"div",2)(20,"div",12)(21,"button",13),e.NdJ("click",function(){return i.fn_insertElectronicMoney()}),e.TgZ(22,"mat-icon",14),e._uU(23,"save"),e.qZA(),e._uU(24," Guardar"),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){return i.event_clear()}),e.TgZ(26,"mat-icon",14),e._uU(27,"close"),e.qZA(),e._uU(28," Limpiar"),e.qZA(),e.TgZ(29,"button",15),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(30,"mat-icon",14),e._uU(31,"close"),e.qZA(),e._uU(32," Cerrar"),e.qZA()()()(),e.TgZ(33,"div",1)(34,"div",2)(35,"div",16)(36,"table",17)(37,"thead")(38,"th",18),e._uU(39,"Acciones"),e.qZA(),e.TgZ(40,"th",19),e._uU(41,"Descripci\xf3n"),e.qZA(),e.TgZ(42,"th",20),e._uU(43,"Monto"),e.qZA(),e.TgZ(44,"th",21),e._uU(45,"Fecha"),e.qZA()(),e.TgZ(46,"tbody"),e.YNc(47,Ut,17,9,"tr",22),e.qZA()()(),e.YNc(48,Pt,1,1,"app-pagination",23),e.qZA()()(),e._UZ(49,"app-spinner",24)),2&t&&(e.xp6(10),e.Q6J("ngModel",i.electronicMoneyForm.description),e.xp6(6),e.Q6J("ngModel",i.electronicMoneyForm.amount),e.xp6(31),e.Q6J("ngForOf",i.electronicMoneyList),e.xp6(1),e.Q6J("ngIf",i.electronicMoneyList),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.sg,m.O5,c.Fj,c.JJ,c.On,g.lW,p.KE,p.hX,p.qo,P.Nt,ae.IC,U.Hw,O.g1,w.O,k,m.H9,m.uU]}),a})();function Nt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",33)(2,"div",34)(3,"span",35),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.showCustomerCat(n.idCustomer))}),e._uU(4," edit "),e.qZA(),e.TgZ(5,"span",36),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.fn_ShowAddElectronicMoney(n.idCustomer))}),e._uU(6," attach_money "),e.qZA(),e.TgZ(7,"span",37),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.fn_deleteCustomer(n.idCustomer))}),e._uU(8," delete_outline "),e.qZA()()(),e.TgZ(9,"td",38),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"td",39),e._uU(13),e.qZA(),e.TgZ(14,"td",39),e._uU(15),e.qZA(),e.TgZ(16,"td",33),e._uU(17),e.qZA(),e.TgZ(18,"td",39),e._uU(19),e.qZA(),e.TgZ(20,"td",39),e._uU(21),e.qZA(),e.TgZ(22,"td",33),e._uU(23),e.ALo(24,"date"),e.qZA(),e.TgZ(25,"td",33)(26,"mat-checkbox",40),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.active=o)}),e.qZA()()()}if(2&a){const t=s.$implicit;e.xp6(10),e.Oqu(e.lcZ(11,8,t.electronicMoneySum)),e.xp6(3),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.tel),e.xp6(2),e.Oqu(t.eMail),e.xp6(2),e.Oqu(t.address),e.xp6(2),e.Oqu(e.xi3(24,10,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngModel",t.active)}}function qt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",41),e.NdJ("OPagination",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.changePagination(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Dt=(()=>{class a{constructor(t,i,o,n,r,l){this.servicesGServ=t,this.fb=i,this._adapter=o,this._locale=n,this.authServ=r,this.customersServ=l,this._appMain=_.N.appMain,this.title="Lista de Clientes",this.bShowSpinner=!1,this.catlist=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm=this.fb.group({createDateStart:"",createDateEnd:"",name:"",lastName:""})}ngOnInit(){this.authServ.checkSession(),this._locale="mx",this._adapter.setLocale(this._locale),this.fn_getCustomersListWithPage()}changePagination(t){this.pagination=t,this.fn_getCustomersListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getCustomersListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}showCustomerCat(t){this.servicesGServ.showModalWithParams(de,{id:t},"1500px").afterClosed().subscribe({next:o=>{this.fn_getCustomersListWithPage()}})}fn_getCustomersListWithPage(){this.bShowSpinner=!0,this.customersServ.CGetCustomersListWithPage(this.pagination,this.parametersForm.value).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_deleteCustomer(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de borrar el cliente","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.customersServ.CDeleteCustomer(t).subscribe({next:o=>{0===o.status&&this.fn_getCustomersListWithPage(),this.servicesGServ.showSnakbar(o.message),this.bShowSpinner=!1},error:o=>{console.log(o),this.servicesGServ.showSnakbar(o.error.data),this.bShowSpinner=!1}}))}})}parametersForm_Clear(){this.parametersForm.get("createDateStart")?.setValue(""),this.parametersForm.get("createDateEnd")?.setValue(""),this.parametersForm.get("name")?.setValue(""),this.parametersForm.get("lastName")?.setValue(""),this.fn_getCustomersListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editCustomer`,t)}fn_ShowAddElectronicMoney(t){this.servicesGServ.showModalWithParams(wt,{idCustomer:t},"1500px").afterClosed().subscribe({next:o=>{this.fn_getCustomersListWithPage()}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.$),e.Y36(c.qu),e.Y36(h._A),e.Y36(h.Ad),e.Y36(S.e),e.Y36(Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-customer-list"]],decls:77,vars:7,consts:[[1,"divMain",3,"opened","closed"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"formGroup","rangePicker","click"],["matStartDate","","formControlName","createDateStart","placeholder","Start date"],["matEndDate","","formControlName","createDateEnd","placeholder","End date"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","top20px"],[1,"col-md-8"],["matInput","","placeholder","Ingrese los apellidos","formControlName","lastName"],[1,"col-md-4"],["matInput","","placeholder","Ingrese un nombre","formControlName","name"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],[1,"divMain",2,"width","100%","margin-top","50px !important"],[1,"col-md-1"],[1,"divSearch"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Editar Paciente",1,"material-icons","manitaSobre","colorGreen",3,"click"],["title","Abonar",1,"material-icons","manitaSobre","colorGreen",3,"click"],["matTooltip","Eliminar Paciente",1,"material-icons","manitaSobre","colorRed",3,"click"],[1,"textAlingRight"],[1,"textAlingLeft"],[1,"example-margin",3,"ngModel","ngModelChange"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header")(3,"mat-panel-title",1),e._uU(4," Filtros de clientes "),e.qZA()(),e.TgZ(5,"div",2)(6,"div",3),e._UZ(7,"br"),e.TgZ(8,"form",4)(9,"div",2)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),e._uU(13,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(14,"mat-date-range-input",7),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(21);return e.KtG(r.open())}),e._UZ(15,"input",8)(16,"input",9),e.qZA(),e.TgZ(17,"mat-hint"),e._uU(18,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(19,"mat-datepicker-toggle",10)(20,"mat-date-range-picker",null,11),e.qZA()()(),e.TgZ(22,"div",12)(23,"div",13)(24,"mat-form-field",6)(25,"mat-label"),e._uU(26,"Apellidos"),e.qZA(),e._UZ(27,"input",14),e.qZA()(),e.TgZ(28,"div",15)(29,"mat-form-field",6)(30,"mat-label"),e._uU(31,"Nombre"),e.qZA(),e._UZ(32,"input",16),e.qZA()()(),e.TgZ(33,"div",17)(34,"div",3)(35,"div",18)(36,"button",19),e.NdJ("click",function(){return i.fn_getCustomersListWithPage()}),e.TgZ(37,"mat-icon",20),e._uU(38,"search"),e.qZA(),e._uU(39," Buscar"),e.qZA(),e.TgZ(40,"button",21),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(41,"mat-icon",20),e._uU(42,"clear"),e.qZA(),e._uU(43," limpiar"),e.qZA()()()()()()()()(),e.TgZ(44,"div",22)(45,"div",2)(46,"div",23)(47,"div",24)(48,"span",25),e.NdJ("click",function(){return i.showCustomerCat(0)}),e._uU(49," add_circle_outline "),e.qZA()()()(),e.TgZ(50,"div",12)(51,"div",3)(52,"div",26)(53,"table",27)(54,"thead")(55,"th",28),e._uU(56,"Acciones"),e.qZA(),e.TgZ(57,"th",29),e._uU(58,"Dinero Electr\xf3nico"),e.qZA(),e.TgZ(59,"th",29),e._uU(60,"Apellidos"),e.qZA(),e.TgZ(61,"th",29),e._uU(62,"Nombre"),e.qZA(),e.TgZ(63,"th",28),e._uU(64,"Tel\xe9fono"),e.qZA(),e.TgZ(65,"th",29),e._uU(66,"Correo electr\xf3nico"),e.qZA(),e.TgZ(67,"th",29),e._uU(68,"Direcci\xf3n"),e.qZA(),e.TgZ(69,"th",28),e._uU(70,"Creado"),e.qZA(),e.TgZ(71,"th",28),e._uU(72,"Activo"),e.qZA()(),e.TgZ(73,"tbody"),e.YNc(74,Nt,27,13,"tr",30),e.qZA()()(),e.YNc(75,qt,1,1,"app-pagination",31),e.qZA()()(),e._UZ(76,"app-spinner",32)}if(2&t){const o=e.MAs(21);e.xp6(8),e.Q6J("formGroup",i.parametersForm),e.xp6(6),e.Q6J("formGroup",i.parametersForm)("rangePicker",o),e.xp6(5),e.Q6J("for",o),e.xp6(55),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.On,g.lW,M.oG,N.nW,N.wx,N.zY,N.By,N._g,x.pp,x.ib,x.yz,x.yK,p.KE,p.hX,p.bx,p.qo,p.R9,P.Nt,U.Hw,w.O,k,m.H9,m.uU]}),a})(),It=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=_.N.baseUrl,this.idSucursal=_.N.idSucursal,this._api="api/fxRate"}CGetFxRateListWithPage(t){return this.http.post(`${this.baseURL}/${this._api}/getFxRateListWithPage`,{search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CInsertFxRate(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertFxRate`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN),e.LFG(S.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Lt=d(8525);function kt(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td",20),e._uU(2),e.qZA(),e.TgZ(3,"td",21),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td",22)(7,"div",4)(8,"div",3)(9,"mat-icon",26),e._uU(10,"calendar_today"),e.qZA(),e.TgZ(11,"label",27),e._uU(12),e.ALo(13,"date"),e.qZA()()()()()),2&a){const t=s.$implicit;e.xp6(2),e.Oqu(t.referencia),e.xp6(2),e.Oqu(e.lcZ(5,3,t.fxRate)),e.xp6(8),e.Oqu(e.xi3(13,5,t.createDate,"dd-MM-yyyy h:mm:ss a"))}}function Gt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",28),e.NdJ("OPagination",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.changePagination(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Mt=(()=>{class a{constructor(t,i,o,n,r){this.servicesGServ=t,this._adapter=i,this._locale=o,this.authServ=n,this.fxRateServ=r,this._appMain=_.N.appMain,this.title="Tipos de cambio",this.bShowSpinner=!1,this.idUserLogON=0,this.fxRateForm={referencia:"",fxRate:0},this.fxRatelist=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getFxRateListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getFxRateListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getFxRateListWithPage()}fn_insertFxRate(){this.fxRateForm.referencia.length>0&&this.fxRateForm.fxRate>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de agregar un tipo de cambio","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.fxRateServ.CInsertFxRate(this.fxRateForm).subscribe({next:i=>{0===i.status?this.servicesGServ.showAlert("S","OK!",i.message,!0):this.servicesGServ.showAlert("W","Alerta!",i.message,!0),this.bShowSpinner=!1,this.event_clear()},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_getFxRateListWithPage(){this.bShowSpinner=!0,this.fxRateServ.CGetFxRateListWithPage(this.pagination).subscribe({next:t=>{this.fxRatelist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}event_clear(){this.fxRateForm.referencia="",this.fxRateForm.fxRate=0,this.fn_getFxRateListWithPage()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.$),e.Y36(h._A),e.Y36(h.Ad),e.Y36(S.e),e.Y36(It))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-fxrate"]],decls:49,vars:6,consts:[[1,"divMain",2,"padding","30px","padding-top","60px"],[1,"divTitle-center"],[1,"row","top20px"],[1,"col-md-12"],[1,"row"],[1,"col-md-6"],[1,"with100"],[3,"ngModel","ngModelChange"],["value","D\xf3lares"],["value","Gramo"],["value","Plata"],[1,"with100","top20px"],["matInput","","currencyMask","","placeholder","Tipo de cambio",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange"],["tbxPaga",""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["mat-raised-button","","type","button",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft"],[1,"textAlingRight"],[1,"textAlingCenter"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"h1"),e._uU(6,"Siempre se tomar\xe1 el \xfaltimo Tipo de Cambio cargado"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"mat-label"),e._uU(10,"Referencia: "),e.qZA(),e.TgZ(11,"mat-form-field",6)(12,"mat-label"),e._uU(13,"Selecciona una opci\xf3n"),e.qZA(),e.TgZ(14,"mat-select",7),e.NdJ("ngModelChange",function(n){return i.fxRateForm.referencia=n}),e.TgZ(15,"mat-option",8),e._uU(16,"D\xf3lares"),e.qZA(),e.TgZ(17,"mat-option",9),e._uU(18,"Gramo"),e.qZA(),e.TgZ(19,"mat-option",10),e._uU(20,"Plata"),e.qZA()()()(),e.TgZ(21,"div",5)(22,"mat-form-field",11)(23,"mat-label"),e._uU(24,"Tipo de cambio"),e.qZA(),e.TgZ(25,"input",12,13),e.NdJ("ngModelChange",function(n){return i.fxRateForm.fxRate=n}),e.qZA()()()(),e.TgZ(27,"div",14)(28,"div",3)(29,"div",15)(30,"button",16),e.NdJ("click",function(){return i.fn_insertFxRate()}),e._uU(31,"Guardar"),e.qZA(),e.TgZ(32,"button",17),e.NdJ("click",function(){return i.event_clear()}),e._uU(33,"Limpiar"),e.qZA()()()(),e.TgZ(34,"div",2)(35,"div",3)(36,"div",18)(37,"table",19)(38,"thead")(39,"th",20),e._uU(40,"Referencia"),e.qZA(),e.TgZ(41,"th",21),e._uU(42,"Tipo De Cambio"),e.qZA(),e.TgZ(43,"th",22),e._uU(44,"Fecha"),e.qZA()(),e.TgZ(45,"tbody"),e.YNc(46,kt,14,8,"tr",23),e.qZA()()(),e.YNc(47,Gt,1,1,"app-pagination",24),e.qZA()()(),e._UZ(48,"app-spinner",25)),2&t&&(e.xp6(2),e.hij(" ",i.title," "),e.xp6(12),e.Q6J("ngModel",i.fxRateForm.referencia),e.xp6(11),e.Q6J("ngModel",i.fxRateForm.fxRate),e.xp6(21),e.Q6J("ngForOf",i.fxRatelist),e.xp6(1),e.Q6J("ngIf",i.fxRatelist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.sg,m.O5,c.Fj,c.JJ,c.On,h.ey,g.lW,p.KE,p.hX,p.qo,P.Nt,U.Hw,Lt.gD,O.g1,w.O,k,m.H9,m.uU]}),a})();var _e=d(8645),he=d(3620);let J=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=_.N.baseUrl,this.idSucursal=_.N.idSucursal,this._api="api/sales"}CInsertSale(t){const i={idCaja:t.idCaja,idSeller_idUser:t.idSeller_idUser,idCustomer:t.idCustomer,idSaleType:t.idSaleType,saleDetail:t.saleDetail};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertSale`,i)}CGetVentasListWithPage(t,i){const r={idUser:i.idUser,createDateStart:i.createDateStart,createDateEnd:i.createDateEnd,idCustomer:i.idCustomer,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize};return r.idUserLogON=this.authServ.getIdUserSession(),r.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getVentasListWithPage`,r)}CGetSaleByID(t){return this.http.post(`${this.baseURL}/${this._api}/getSaleByID`,{idSale:t})}CGetSaleByIDPromise(t){var i=this;return(0,f.Z)(function*(){const o={idSale:t};return new Promise((n,r)=>{i.http.post(`${i.baseURL}/${i._api}/getSaleByID`,o).subscribe({next:l=>{n(l)},error:l=>{r(l)}})})})()}CInsertPayments(t,i,o){const n={idCaja:i,idCustomer:o,paymentList:t};return n.idUserLogON=this.authServ.getIdUserSession(),n.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertPayments`,n)}CGetPaymentsByIdSaleListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getPaymentsByIdSaleListWithPage`,{idSale:i,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CInsertSaleByConsignation(t){return this.http.post(`${this.baseURL}/${this._api}/insertSaleByConsignation`,t)}CRegresarProductoDeConsignacion(t){return this.http.post(`${this.baseURL}/${this._api}/regresarProductoDeConsignacion`,t)}CGetPreCorteCaja(t){const i={idCaja:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getPreCorteCaja`,i)}CInsertCorteCaja(t){const i={idCaja:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertCorteCaja`,i)}CGetPreEgresosCorteCaja(t){const i={idCaja:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getPreEgresosCorteCaja`,i)}CInsertEgresos(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertEgresos`,t)}CDisabledEgresos(t){return this.http.post(`${this.baseURL}/${this._api}/disabledEgresos`,{idEgreso:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN),e.LFG(S.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),oe=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/formaPago"}CCbxGetFormaPagoCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetFormaPagoCombo`,{idCustomer:i,search:t})}CCbxGetFormaPagoCorteCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetFormaPagoCorteCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ne=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=_.N.baseUrl,this.idSucursal=_.N.idSucursal,this._api="api/cajas"}CGetCajasBySec(t,i){return this.http.post(`${this.baseURL}/${this._api}/getCajasBySec`,{idUser:i,search:t})}CGetSelectCajaByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/getSelectCajaByIdUser`,{idUser:t})}CInsertSelectCaja(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertSelectCaja`,t)}CDeleteSelectCaja(t){return this.http.post(`${this.baseURL}/${this._api}/deleteSelectCaja`,t)}CGetCajaByID(t){var i={idCaja:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getCajaByID`,i)}CGetCajaByIDPromise(t){var i=this;return(0,f.Z)(function*(){var o={idCaja:t};return o.idUserLogON=i.authServ.getIdUserSession(),o.idSucursalLogON=i.idSucursal,new Promise((n,r)=>{i.http.post(`${i.baseURL}/${i._api}/getCajaByID`,o).subscribe({next:l=>{n(l)},error:l=>{r(l)}})})})()}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN),e.LFG(S.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),B=(()=>{class a{constructor(t,i,o,n,r,l){this.http=t,this.sucursalesServ=i,this.salesServ=o,this.customersServ=n,this.servicesG=r,this.cajasServ=l,this._api="http://localhost/printT/Print",this.idSucursal=_.N.idSucursal}printTicket(t,i,o){var n=this;return(0,f.Z)(function*(){if("Venta"==t){const C=yield n.salesServ.CGetSaleByIDPromise(i);console.log(C);const K=yield n.sucursalesServ.CGetPrintTicketSuc(n.idSucursal,"Header");for(var l=[],u=0;u<K.length;u++)l.push({aling:K[u].aling,size:K[u].size,text:K[u].text});var y=[];const j=yield n.customersServ.CGetCustomerByIDPromise(C.data.idCustomer);null!=j&&(y.push(b={aling:"Left",size:7,text:"CLIENTE: "+j.lastName+" "+j.name}),y.push(b={aling:"Left",size:7,text:"DIRECCI\xd3N: "+j.address}),y.push(b={aling:"Left",size:7,text:"TELEFONO: "+j.tel}),y.push(b={aling:"Left",size:7,text:""}));var T=[];null!=C&&(T.push(b={aling:"Center",size:7,text:"OPERACI\xd3N: Venta de "+C.data.saleTypeDesc}),T.push(b={aling:"Left",size:7,text:"Folio: #"+C.data.idSale}),T.push(b={aling:"Left",size:7,text:"FECHA: "+C.data.createDateString}),T.push(b={aling:"Left",size:7,text:"ATENDI\xd3: "+C.data.sellerDesc}),T.push(b={aling:"Center",size:10,text:"---------------------------------------------------------"}));let L=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});var I=[];for(u=0;u<C.dataDetail.length;u++){var G=C.dataDetail[u],E={productDesc:G.productDesc,cantidad:G.cantidad,precio:L.format(G.precio),importe:L.format(G.importe)};I.push(E)}var R=[],b={aling:"Right",size:7,text:"SUBTOTAL:",importe:L.format(C.data.saleTotal)};R.push(b),b={aling:"Right",size:7,text:"IVA:",importe:L.format(0)},R.push(b),b={aling:"Right",size:7,text:"TOTAL:",importe:L.format(C.data.saleTotal)},R.push(b);const W=yield n.sucursalesServ.CGetPrintTicketSuc(n.idSucursal,"footer");var ge=[];for(u=0;u<W.length;u++)ge.push({aling:W[u].aling,size:W[u].size,text:W[u].text});if(2==C.data.idSaleType){var fe=[];for(u=0;u<C.dataPayments.length;u++){var za={aling:"Right",size:7,text:C.dataPayments[u].formaPagoDesc,importe:L.format(C.dataPayments[u].pago)};fe.push(za)}}else{var V=[];for(u=0;u<C.dataPayments.length;u++){var H={size:7,text:C.dataPayments[u].formaPagoDesc,importe:L.format(C.dataPayments[u].pago),fecha:C.dataPayments[u].createDateString};V.push(H)}H={size:7,text:"PAGADO",importe:L.format(C.data.pagado),fecha:""},V.push(H),H={size:7,text:"PENDIENTE",importe:L.format(C.data.pendingAmount),fecha:""},V.push(H)}const be=yield n.cajasServ.CGetCajaByIDPromise(o.idCaja);return console.log(be.data),console.log({type:t,PrinterName:be.data.impresoraName,oData:{headerData:l,customerData:y,operacionData:T,productsDetail:I,totales:R,payments:fe,payments2:V,footerSucData:ge}}),new Promise((eo,ao)=>{eo(!0)})}})()}CPrintTicketAwait(t){return new Promise((i,o)=>{this.http.post(`${this._api}/printTicket`,t).subscribe({next:n=>{i(n)},error:n=>{o(n)}})})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN),e.LFG(Q),e.LFG(J),e.LFG(Y),e.LFG(v.$),e.LFG(ne))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Ot=["cbxFormasPagoC"],Jt=["tbxPaga"],Rt=["tbxPagaCon"],Qt=["tbxReferencia"],Yt=["tbxCambio"],Et=["btnSaveSale"];function Ht(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxFormasPago_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function jt(a,s){if(1&a&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function $t(a,s){1&a&&(e.TgZ(0,"mat-option",32),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Bt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Referencia"),e.qZA(),e.TgZ(4,"input",33,34),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.paymentForm.referencia=o)})("keyup",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.event_fn_Referencia(o))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.paymentForm.referencia)}}function Vt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"PAGA CON "),e.TgZ(4,"strong"),e._uU(5),e.qZA()(),e.TgZ(6,"input",35,36),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.paymentForm.pagaCon=o)})("keyup",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.event_fn_PagaCon_GetCambio(o))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Oqu(t.paymentForm.needFxRate?" TC: "+t.paymentForm.fxRate:""),e.xp6(1),e.Q6J("ngModel",t.paymentForm.pagaCon)}}const Kt=function(a){return{colorRed:a}};function Wt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"CAMBIO"),e.qZA(),e.TgZ(4,"input",37,38),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.paymentForm.cambio=o)})("keyup",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.event_fn_Cambio(o))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(2,Kt,t.paymentForm.cambio<0))("ngModel",t.paymentForm.cambio)}}function zt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_savePayment())}),e.TgZ(1,"mat-icon",20),e._uU(2,"save"),e.qZA(),e._uU(3," Guardar e imprimir ticket"),e.qZA()}}function Xt(a,s){1&a&&(e.TgZ(0,"th",24),e._uU(1,"Paga EXT"),e.qZA())}function ei(a,s){1&a&&(e.TgZ(0,"th",24),e._uU(1,"Tipo de cambio"),e.qZA())}function ti(a,s){1&a&&(e.TgZ(0,"th",24),e._uU(1,"Referencia"),e.qZA())}function ii(a,s){if(1&a&&(e.TgZ(0,"td",44),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.pagaF))}}function ai(a,s){if(1&a&&(e.TgZ(0,"td",44),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.fxRate))}}function oi(a,s){if(1&a&&(e.TgZ(0,"td",44),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.referencia)}}function ni(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",40)(2,"div",41)(3,"span",42),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.event_fnClick_DeleteSalesPaymentFromList(n))}),e._uU(4," delete_outline "),e.qZA()()(),e.TgZ(5,"td",43),e._uU(6),e.qZA(),e.TgZ(7,"td",44),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.YNc(10,ii,3,3,"td",45),e.YNc(11,ai,3,3,"td",45),e.YNc(12,oi,2,1,"td",45),e.qZA()}if(2&a){const t=s.$implicit,i=e.oxw();e.xp6(6),e.Oqu(t.formaPagoDesc),e.xp6(2),e.Oqu(e.lcZ(9,5,t.paga)),e.xp6(2),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showReferencia)}}function si(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",46,47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveAndPrint())}),e._uU(3,"Guardar e imprimir ticket"),e.qZA(),e.TgZ(4,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(5,"Salir"),e.qZA()()}}let ri=(()=>{class a{constructor(t,i,o,n,r,l,u){this.dialogRef=t,this.ODataP=i,this.servicesGServ=o,this.authServ=n,this.salesServ=r,this.formaPagoServ=l,this.printTicketServ=u,this.bShowSpinner=!1,this.bPago=!1,this.pendingAmount=0,this.saldoACubrir=0,this.showPending=!1,this.idRelation=0,this.paymentList=[],this.paymentForm={idCaja:0,idCustomer:0,idFormaPago:0,formaPagoDesc:"",needRef:0,needFxRate:0,idFxRate:0,fxRate:0,electronicMoneySum:0,paga:0,pagaF:0,pagaCon:0,cambio:0,referencia:""},this.interface={showReferencia:!1,showFxRate:!1},this.selectCajas={idSucursal:0,idCaja:0,cajaDesc:"",impresoraName:""},this.cbxFormasPago=[]}ngOnInit(){console.log(this.ODataP),this.paymentList=[],this.idRelation=this.ODataP.idRelation,this.paymentForm.idCaja=this.ODataP.idCaja,this.paymentForm.idCustomer=this.ODataP.idCustomer,this.ODataP.pendingAmount>0&&(this.pendingAmount=this.ODataP.pendingAmount,this.saldoACubrir=this.ODataP.pendingAmount,this.showPending=!0),setTimeout(()=>{this.cbxFormasPagoC.nativeElement.focus()},1e3),this.selectCajas=this.ODataP.selectCajas}fn_savePayment(){var t=this;return(0,f.Z)(function*(){var i;t.bPago||(t.bPago=!0,t.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar el pago","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:(i=(0,f.Z)(function*(o){var n;o?(t.bShowSpinner=!0,t.salesServ.CInsertPayments(t.paymentList,t.paymentForm.idCaja,t.paymentForm.idCustomer).subscribe({next:(n=(0,f.Z)(function*(r){0===r.status&&(t.printTicketServ.printTicket("Venta",t.idRelation,t.selectCajas),t.dialogRef.close(t.idRelation)),t.servicesGServ.showSnakbar(r.message),t.bShowSpinner=!1}),function(l){return n.apply(this,arguments)}),error:n=>{t.servicesGServ.showSnakbar(n.error.message),t.bShowSpinner=!1}})):t.bPago=!1}),function(n){return i.apply(this,arguments)})}))})()}saveAndPrint(){}close(){this.dialogRef.close()}inputFocus(t){t?.focus()}addPayment(){this.paymentList.push({idRelation:this.ODataP.idRelation,relationType:this.ODataP.relationType,idSeller_idUser:this.ODataP.idSeller_idUser,idFormaPago:this.paymentForm.idFormaPago,formaPagoDesc:this.paymentForm.formaPagoDesc,paga:this.paymentForm.paga,pagaF:this.paymentForm.pagaF,referencia:this.paymentForm.referencia,description:"Pago",idFxRate:this.paymentForm.idFxRate,fxRate:this.paymentForm.fxRate}),this.ev_showInterface()}fn_CerrarMDL(){this.dialogRef.close(this.ODataP.idRelation)}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}event_fn_Paga(t){13==t.keyCode&&(this.paymentForm.paga>0&&this.pendingAmount>0&&this.paymentForm.paga<=this.pendingAmount?1==this.paymentForm.idFormaPago||3==this.paymentForm.idFormaPago?this.tbxPagaCon.nativeElement.focus():1==this.paymentForm.needRef?this.tbxReferencia.nativeElement.focus():5==this.paymentForm.idFormaPago&&(this.ev_getSumElectronicCurrency()>=this.paymentForm.paga?(this.pendingAmount-=this.paymentForm.paga,this.addPayment(),this.paymentForm.idFormaPago=0,this.paymentForm.formaPagoDesc="",this.paymentForm.needRef=0,this.paymentForm.needFxRate=0,this.paymentForm.idFxRate=0,this.paymentForm.fxRate=0,this.paymentForm.electronicMoneySum=0,this.paymentForm.paga=0,this.paymentForm.pagaF=0,this.paymentForm.pagaCon=0,this.paymentForm.cambio=0,this.paymentForm.referencia="",this.fn_savePayment()):this.servicesGServ.showAlert("W","Alerta!","Solo tienes "+this.ev_getSumElectronicCurrency()+" de dinero electr\xf3nico",!0)):this.servicesGServ.showAlert("W","Alerta!","Saldas con "+this.pendingAmount,!0))}event_fn_PagaCon_GetCambio(t){13==t.keyCode&&(this.paymentForm.needFxRate&&this.paymentForm.pagaCon>0&&this.paymentForm.paga>0&&(this.paymentForm.pagaF=this.paymentForm.pagaCon,this.paymentForm.pagaCon=this.paymentForm.pagaCon*this.paymentForm.fxRate),this.paymentForm.paga>0&&this.paymentForm.pagaCon>=this.paymentForm.paga&&this.paymentForm.paga<=this.pendingAmount?(this.paymentForm.cambio=this.paymentForm.pagaCon-this.paymentForm.paga,this.pendingAmount-=this.paymentForm.paga,this.addPayment(),this.tbxCambio.nativeElement.focus()):this.servicesGServ.showAlert("W","Alerta!",this.paymentForm.pagaCon>=this.paymentForm.paga?0==this.paymentForm.paga?"Debe indicar cuanto paga":this.paymentForm.paga>this.pendingAmount?"Saldas con "+this.pendingAmount:"":"No est\xe1 cubriendo el monto a pagar: "+this.paymentForm.paga,!0))}event_fn_Referencia(t){13==t.keyCode&&""!=this.paymentForm.referencia&&(this.paymentForm.idFormaPago>0&&this.paymentForm.paga>0&&this.paymentForm.paga<=this.pendingAmount?(this.pendingAmount-=this.paymentForm.paga,this.addPayment(),this.paymentForm.idFormaPago=0,this.paymentForm.formaPagoDesc="",this.paymentForm.needRef=0,this.paymentForm.needFxRate=0,this.paymentForm.idFxRate=0,this.paymentForm.fxRate=0,this.paymentForm.electronicMoneySum=0,this.paymentForm.paga=0,this.paymentForm.pagaF=0,this.paymentForm.pagaCon=0,this.paymentForm.cambio=0,this.paymentForm.referencia="",this.fn_savePayment()):this.servicesGServ.showAlert("W","Alerta!",0==this.paymentForm.idFormaPago?"Selecciona forma de pago":0==this.paymentForm.paga?"Debe indicar cuanto paga":this.paymentForm.paga>this.pendingAmount?"Saldas con "+this.pendingAmount:"",!0))}event_fn_Cambio(t){13==t.keyCode&&(this.paymentForm.idFormaPago=0,this.paymentForm.formaPagoDesc="",this.paymentForm.needRef=0,this.paymentForm.needFxRate=0,this.paymentForm.idFxRate=0,this.paymentForm.fxRate=0,this.paymentForm.electronicMoneySum=0,this.paymentForm.paga=0,this.paymentForm.pagaF=0,this.paymentForm.pagaCon=0,this.paymentForm.cambio=0,this.paymentForm.referencia="",this.fn_savePayment())}event_fnClick_DeleteSalesPaymentFromList(t){this.paymentList.splice(t,1);var i=this.paymentList.reduce((o,n)=>o+n.paga,0);this.pendingAmount=this.saldoACubrir-i}ev_showInterface(){this.interface.showReferencia=this.paymentList.filter(function(t){return t.referencia.length>0}).length>0,this.interface.showFxRate=this.paymentList.filter(function(t){return t.idFxRate>0}).length>0}ev_getSumElectronicCurrency(){var t;return t=this.paymentList.filter(function(o){return 5==o.idFormaPago}).reduce((o,n)=>o+n.paga,0),this.paymentForm.electronicMoneySum-t}cbxFormasPago_Search(){this.formaPagoServ.CCbxGetFormaPagoCombo(this.paymentForm.formaPagoDesc,this.paymentForm.idCustomer).subscribe({next:t=>{this.cbxFormasPago=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFormasPago_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.paymentForm.idFormaPago=i.id,this.paymentForm.formaPagoDesc=i.name,this.paymentForm.needRef=i.needRef,this.paymentForm.needFxRate=i.needFxRate,this.paymentForm.idFxRate=i.idFxRate,this.paymentForm.fxRate=i.fxRate,this.paymentForm.electronicMoneySum=i.electronicMoneySum,setTimeout(()=>{this.tbxPaga.nativeElement.focus()},500)}cbxFormasPago_Clear(){this.paymentForm.idFormaPago=0,this.paymentForm.formaPagoDesc="",this.paymentForm.needRef=0,this.paymentForm.needFxRate=0,this.paymentForm.idFxRate=0,this.paymentForm.fxRate=0,this.paymentForm.paga=0,this.paymentForm.pagaF=0,this.paymentForm.pagaCon=0,this.paymentForm.cambio=0,this.paymentForm.referencia=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.so),e.Y36(q.WI),e.Y36(v.$),e.Y36(S.e),e.Y36(J),e.Y36(oe),e.Y36(B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-payments"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ot,5),e.Gf(Jt,5),e.Gf(Rt,5),e.Gf(Qt,5),e.Gf(Yt,5),e.Gf(Et,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.cbxFormasPagoC=o.first),e.iGM(o=e.CRH())&&(i.tbxPaga=o.first),e.iGM(o=e.CRH())&&(i.tbxPagaCon=o.first),e.iGM(o=e.CRH())&&(i.tbxReferencia=o.first),e.iGM(o=e.CRH())&&(i.tbxCambio=o.first),e.iGM(o=e.CRH())&&(i.btnSaveSale=o.first)}},decls:61,vars:27,consts:[[2,"padding","10px"],[1,"row"],[1,"col-md-12"],[1,"col-md-3"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",1,"colorGreen","fontSize",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus"],["cbxFormasPagoC",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxFormaPago","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"with100","top20px"],["matInput","","currencyMask","","placeholder","PAGA",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxPaga",""],["class","col-md-3",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],["class","textAlingCenter padding-th",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["type","text","matInput","","placeholder","Referencia",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxReferencia",""],["matInput","","currencyMask","","placeholder","PAGA CON",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxPagaCon",""],["matInput","","currencyMask","","placeholder","CAMBIO","readonly","true",1,"textAlingRight","colorGreen",2,"font-size","25px",3,"ngClass","ngModel","ngModelChange","keyup"],["tbxCambio",""],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],[1,"textAlingCenter"],[2,"width","50px"],[1,"material-icons","manitaSobre","colorRed",3,"click"],[2,"text-align","left"],[2,"text-align","right"],["style","text-align: right;",4,"ngIf"],["mat-button","","color","warn",3,"click"],["btnSaveSale",""],["mat-button","",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4),e.ALo(5,"currency"),e.ALo(6,"currency"),e.qZA()()(),e.TgZ(7,"div",1)(8,"div",3)(9,"mat-label"),e._uU(10,"Forma de pago: "),e.TgZ(11,"strong"),e._uU(12),e.qZA(),e.TgZ(13,"strong"),e._uU(14),e.ALo(15,"currency"),e.qZA()(),e.TgZ(16,"mat-form-field",4),e.NdJ("click",function(){return i.cbxFormasPago_Search()}),e.TgZ(17,"input",5,6),e.NdJ("ngModelChange",function(n){return i.paymentForm.formaPagoDesc=n})("input",function(){return i.cbxFormasPago_Search()})("focus",function(){return i.cbxFormasPago_Search()}),e.qZA(),e.YNc(19,Ht,3,0,"button",7),e.TgZ(20,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(n){return i.cbxFormasPago_SelectedOption(n)}),e.YNc(22,jt,2,2,"mat-option",10),e.YNc(23,$t,2,0,"mat-option",11),e.qZA()()(),e.TgZ(24,"div",3)(25,"mat-form-field",12)(26,"mat-label"),e._uU(27,"PAGA"),e.qZA(),e.TgZ(28,"input",13,14),e.NdJ("ngModelChange",function(n){return i.paymentForm.paga=n})("keyup",function(n){return i.event_fn_Paga(n)}),e.qZA()()(),e.YNc(30,Bt,6,1,"div",15),e.YNc(31,Vt,8,2,"div",15),e.YNc(32,Wt,6,4,"div",15),e.qZA(),e.TgZ(33,"div",16)(34,"div",2)(35,"div",17),e.YNc(36,zt,4,0,"button",18),e.TgZ(37,"button",19),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(38,"mat-icon",20),e._uU(39,"close"),e.qZA(),e._uU(40," Cerrar"),e.qZA()()()(),e.TgZ(41,"div",21)(42,"div",2)(43,"div",22)(44,"table",23)(45,"thead")(46,"th",24),e._uU(47,"Acciones"),e.qZA(),e.TgZ(48,"th",25),e._uU(49,"Forma de pago"),e.qZA(),e.TgZ(50,"th",24),e._uU(51,"Paga"),e.qZA(),e.YNc(52,Xt,2,0,"th",26),e.YNc(53,ei,2,0,"th",26),e.YNc(54,ti,2,0,"th",26),e.qZA(),e.TgZ(55,"tbody"),e.YNc(56,ni,13,7,"tr",27),e.qZA()()()()(),e.TgZ(57,"div",21)(58,"div",2),e.YNc(59,si,6,0,"div",28),e.qZA()()(),e._UZ(60,"app-spinner",29)),2&t){const o=e.MAs(21);e.xp6(4),e.lnq("Venta de ",i.ODataP.saleTypeDesc," por ",e.lcZ(5,21,i.ODataP.total),", Saldo a cubrir ",e.lcZ(6,23,i.pendingAmount),""),e.xp6(8),e.Oqu(i.paymentForm.needFxRate?" TC: "+i.paymentForm.fxRate:""),e.xp6(2),e.Oqu(i.paymentForm.electronicMoneySum>0?" D.E: "+e.lcZ(15,25,i.ev_getSumElectronicCurrency()):""),e.xp6(3),e.Q6J("ngModel",i.paymentForm.formaPagoDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.paymentForm.formaPagoDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFormasPago),e.xp6(1),e.Q6J("ngIf",0==i.cbxFormasPago.length&&i.paymentForm.formaPagoDesc),e.xp6(5),e.Q6J("ngModel",i.paymentForm.paga),e.xp6(2),e.Q6J("ngIf",1==i.paymentForm.needRef),e.xp6(1),e.Q6J("ngIf",1==i.paymentForm.idFormaPago||3==i.paymentForm.idFormaPago),e.xp6(1),e.Q6J("ngIf",1==i.paymentForm.idFormaPago||3==i.paymentForm.idFormaPago),e.xp6(4),e.Q6J("ngIf",i.paymentList.length>0),e.xp6(16),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showReferencia),e.xp6(2),e.Q6J("ngForOf",i.paymentList),e.xp6(3),e.Q6J("ngIf",0==i.paymentForm.saldoACubrir),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.mk,m.sg,m.O5,c.Fj,c.JJ,c.On,Z.XC,h.ey,Z.ZL,g.lW,g.RK,p.KE,p.hX,p.qo,p.R9,P.Nt,U.Hw,O.g1,w.O,m.H9]}),a})(),ci=(()=>{class a{constructor(t){this.http=t,this.baseURL=_.N.baseUrl,this._api="api/salesType"}CCbxGetSalesTypeCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetSalesTypeCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const li=["cbxSellerCBX"],ui=["cbxCustomerCBX"],pi=["cbxSaleTypeCBX"],mi=["barCode"],di=["tbxCantidad"],_i=["cbxDescuento"],hi=["total"];function gi(a,s){if(1&a&&(e.TgZ(0,"div",45),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.AsE(" Venta #",t.salesHeaderForm.idSale," ",0==t.salesHeaderForm.pendingAmount?" - PAGADO":"- PENDIENTE: "+e.lcZ(2,2,t.salesHeaderForm.pendingAmount)," ")}}function fi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSellers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function bi(a,s){if(1&a&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Si(a,s){if(1&a&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.salesHeaderForm.sellerResp," ")}}function Ci(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxCustomers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function vi(a,s){if(1&a&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function xi(a,s){if(1&a&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.salesHeaderForm.customerResp," ")}}function Zi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSalesType_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ti(a,s){if(1&a&&(e.TgZ(0,"mat-option",47),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Fi(a,s){1&a&&(e.TgZ(0,"mat-option",48),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function yi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cbxProducts_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ai(a,s){if(1&a&&(e.TgZ(0,"mat-option",47)(1,"mat-icon",28),e._uU(2,"qr_code"),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(3),e.hij("",t.nameConcat," ")}}function Ui(a,s){1&a&&(e.TgZ(0,"mat-option",48),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Pi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",39)(2,"mat-form-field",49)(3,"mat-label"),e._uU(4,"C\xf3digo de barras"),e.qZA(),e.TgZ(5,"mat-icon",28),e._uU(6,"qr_code"),e.qZA(),e.TgZ(7,"input",50,51),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.salesDetailForm.barCode=o)})("keyup.enter",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.ev_fn_barCode_keyup_enter(o))})("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxProducts_Clear())}),e.qZA()()(),e.TgZ(9,"div",38)(10,"mat-form-field",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxProducts_Search())}),e.TgZ(11,"input",52,53),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.salesDetailForm.productDesc=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxProducts_Search())})("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxProducts_Clear())}),e.qZA(),e.YNc(13,yi,3,0,"button",7),e.TgZ(14,"mat-autocomplete",8,54),e.NdJ("optionSelected",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxProducts_SelectedOption(o))}),e.YNc(16,Ai,4,2,"mat-option",10),e.YNc(17,Ui,2,0,"mat-option",11),e.qZA()()()()}if(2&a){const t=e.MAs(15),i=e.oxw();e.xp6(7),e.Q6J("ngModel",i.salesDetailForm.barCode),e.xp6(4),e.Q6J("ngModel",i.salesDetailForm.productDesc)("matAutocomplete",t),e.xp6(2),e.Q6J("ngIf",i.salesDetailForm.productDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxProducts),e.xp6(1),e.Q6J("ngIf",0==i.cbxProducts.length&&i.salesDetailForm.productDesc)}}function wi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",39)(2,"mat-form-field",55)(3,"mat-label"),e._uU(4,"Cantidad"),e.qZA(),e.TgZ(5,"input",56,57),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.salesDetailForm.cantidad=o)})("keyup.enter",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.ev_fn_cbxCantidad_keyup_enter(o))}),e.qZA()()(),e.TgZ(7,"div",39)(8,"mat-form-field",55)(9,"mat-label"),e._uU(10,"Precio unitario"),e.qZA(),e.TgZ(11,"input",58,59),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.salesDetailForm.precioUnitario=o)}),e.qZA()()(),e.TgZ(13,"div",39)(14,"mat-form-field",55)(15,"mat-label"),e._uU(16,"Descuento"),e.qZA(),e.TgZ(17,"input",60,61),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.salesDetailForm.descuento=o)})("keyup.enter",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addSaleDetail())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.salesDetailForm.cantidad),e.xp6(6),e.Q6J("ngModel",t.salesDetailForm.precioUnitario),e.xp6(6),e.Q6J("ngModel",t.salesDetailForm.descuento)}}function Ni(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addSaleDetail())}),e.TgZ(1,"mat-icon",28),e._uU(2,"add"),e.qZA(),e._uU(3," Agregar"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",!t.ev_fnShowBtnAddSaleDetail())}}function qi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fnClearSalesDetailForm())}),e.TgZ(1,"mat-icon",28),e._uU(2,"clear"),e.qZA(),e._uU(3," limpiar"),e.qZA()}}function Di(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_ShowPaymentCreateSale(!1))}),e.TgZ(1,"mat-icon",28),e._uU(2,"save"),e.qZA(),e._uU(3," Guardar sin anticipo"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",!t.ev_fnShowBtnGuardarSinAnticipo())}}function Ii(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_ShowPaymentCreateSale(!0))}),e._uU(1),e.ALo(2,"currency"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",!t.ev_fnShowBtnPagar()),e.xp6(1),e.hij(" Pagar ",e.lcZ(2,2,t.salesHeaderForm.pendingAmount),"")}}function Li(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_CrearVentaApartirDeConsignacion(!0))}),e.TgZ(1,"mat-icon",28),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Crear venta a cr\xe9dito"),e.qZA()}}function ki(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_CrearVentaApartirDeConsignacion(!1))}),e.TgZ(1,"mat-icon",28),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Crear venta de contado"),e.qZA()}}function Gi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_RegresarProductoDeConsignacion())}),e.TgZ(1,"mat-icon",28),e._uU(2,"arrow_back"),e.qZA(),e._uU(3," Regresar producto"),e.qZA()}}function Mi(a,s){1&a&&(e.TgZ(0,"th",35),e._uU(1,"Precio Unitario"),e.qZA())}function Oi(a,s){1&a&&(e.TgZ(0,"th",35),e._uU(1,"Descuento"),e.qZA())}function Ji(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-checkbox",74),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw().$implicit;return e.KtG(n.select=o)}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("ngModel",t.select)}}function Ri(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"span",75),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,n=e.oxw();return e.KtG(n.event_fnClick_DeleteProductFromList(o))}),e._uU(1," delete_outline "),e.qZA()}}function Qi(a,s){if(1&a&&(e.TgZ(0,"td",72),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.precioUnitario))}}function Yi(a,s){if(1&a&&(e.TgZ(0,"td",72),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.descuento))}}function Ei(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td",63)(2,"div",64),e.YNc(3,Ji,1,1,"mat-checkbox",65),e.YNc(4,Ri,2,0,"span",66),e.qZA()(),e.TgZ(5,"td",67)(6,"div",2)(7,"div",68)(8,"mat-icon",69),e._uU(9,"qr_code"),e.qZA()(),e.TgZ(10,"div",12)(11,"label",70),e._uU(12),e.qZA()()()(),e.TgZ(13,"td",71),e._uU(14),e.qZA(),e.TgZ(15,"td",72),e._uU(16),e.qZA(),e.YNc(17,Qi,3,3,"td",73),e.YNc(18,Yi,3,3,"td",73),e.TgZ(19,"td",72),e._uU(20),e.ALo(21,"currency"),e.qZA(),e.TgZ(22,"td",72),e._uU(23),e.ALo(24,"currency"),e.qZA()()),2&a){const t=s.$implicit,i=e.oxw();e.xp6(3),e.Q6J("ngIf",4==i.dataStone.idSaleType),e.xp6(1),e.Q6J("ngIf",0==i.idSale),e.xp6(8),e.Oqu(t.barCode),e.xp6(2),e.Oqu(t.productDesc),e.xp6(2),e.Oqu(t.cantidad),e.xp6(1),e.Q6J("ngIf",i.interface.showDescuento),e.xp6(1),e.Q6J("ngIf",i.interface.showDescuento),e.xp6(2),e.Oqu(e.lcZ(21,9,t.precio)),e.xp6(3),e.Oqu(e.lcZ(24,11,t.importe))}}function Hi(a,s){1&a&&(e.TgZ(0,"th",78),e._uU(1,"Pago EXT"),e.qZA())}function ji(a,s){1&a&&(e.TgZ(0,"th",78),e._uU(1,"Tipo de cambio"),e.qZA())}function $i(a,s){1&a&&(e.TgZ(0,"th",78),e._uU(1,"Referencia"),e.qZA())}function Bi(a,s){if(1&a&&(e.TgZ(0,"td",72),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.pagoF))}}function Vi(a,s){if(1&a&&(e.TgZ(0,"td",72),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.fxRate))}}function Ki(a,s){if(1&a&&(e.TgZ(0,"td",72),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.referencia)}}function Wi(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td",71),e._uU(2),e.qZA(),e.TgZ(3,"td",72),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.YNc(6,Bi,3,3,"td",73),e.YNc(7,Vi,3,3,"td",73),e.YNc(8,Ki,2,1,"td",73),e.TgZ(9,"td",71),e._uU(10),e.qZA(),e.TgZ(11,"td",63)(12,"div",2)(13,"div",3)(14,"mat-icon",69),e._uU(15,"calendar_today"),e.qZA(),e.TgZ(16,"label",70),e._uU(17),e.ALo(18,"date"),e.qZA()()()()()),2&a){const t=s.$implicit,i=e.oxw(2);e.xp6(2),e.Oqu(t.formaPagoDesc),e.xp6(2),e.Oqu(e.lcZ(5,7,t.pago)),e.xp6(2),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showReferencia),e.xp6(2),e.Oqu(t.sellerName),e.xp6(7),e.Oqu(e.xi3(18,9,t.createDate,"dd-MM-yyyy h:mm:ss a"))}}function zi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",81),e.NdJ("OPagination",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.changePagination(o))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("IPagination",t.pagination)}}function Xi(a,s){if(1&a&&(e.TgZ(0,"div",76)(1,"div",3)(2,"div",33)(3,"table",34)(4,"thead")(5,"th",77),e._uU(6,"Forma de pago"),e.qZA(),e.TgZ(7,"th",78),e._uU(8,"Pago"),e.qZA(),e.YNc(9,Hi,2,0,"th",79),e.YNc(10,ji,2,0,"th",79),e.YNc(11,$i,2,0,"th",79),e.TgZ(12,"th",77),e._uU(13,"Vendedor"),e.qZA(),e.TgZ(14,"th",35),e._uU(15,"Fecha"),e.qZA()(),e.TgZ(16,"tbody"),e.YNc(17,Wi,19,12,"tr",37),e.qZA()()(),e.YNc(18,zi,1,1,"app-pagination",80),e.qZA()()),2&a){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",t.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",t.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",t.interface.showReferencia),e.xp6(6),e.Q6J("ngForOf",t.salesHeaderForm.paymentList),e.xp6(1),e.Q6J("ngIf",t.salesHeaderForm.paymentList)}}let ea=(()=>{class a{constructor(t,i,o,n,r,l,u,F,y,T,I,G,E,R){this.dialogRef=t,this.ODataP=i,this.servicesGServ=o,this.fb=n,this._adapter=r,this._locale=l,this.authServ=u,this.productsServ=F,this.customersServ=y,this.salesTypeServ=T,this.formaPagoServ=I,this.saleServ=G,this.userServ=E,this.printTicketServ=R,this._appMain=_.N.appMain,this.timeCBXskeyup=new _e.x,this.title="Venta",this.bShowSpinner=!1,this.idSale=0,this.idUserLogON=0,this.dataStone={idSale:0,idCaja:0,idSeller_idUser:0,sellerDesc:"",sellerResp:"",idCustomer:0,customerDesc:"",customerResp:"",idSaleType:0,saleTypeDesc:"",total:0,pendingAmount:0,pagado:0},this.salesHeaderForm={idSale:0,idCaja:0,idSeller_idUser:0,sellerDesc:"",sellerResp:"",idCustomer:0,customerDesc:"",customerResp:"",idSaleType:0,saleTypeDesc:"",total:0,pendingAmount:0,pagado:0,saleDetail:[],paymentList:[]},this.salesDetailForm={barCode:"",idProduct:0,productDesc:"",catInventary:0,cantidad:1,precioUnitario:0,descuento:0,precio:0,importe:0},this.interface={showDescuento:!1,showReferencia:!1,showFxRate:!1},this.selectCajas={idSucursal:0,idCaja:0,cajaDesc:"",impresoraName:""},this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.cbxCustomers=[],this.cbxProducts=[],this.cbxSalesType=[],this.cbxSellers=[]}ngOnInit(){var t=this;return(0,f.Z)(function*(){console.log(t.ODataP),t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.timeCBXskeyup.pipe((0,he.b)(500)).subscribe(i=>{1==i.iOption?t.cbxCustomers_Search():2==i.iOption&&t.cbxSellers_Search()}),t.nextInputFocus(t.cbxSellerCBX,500),t.ODataP.idSale>0&&t.fn_getSaleByID(t.ODataP.idSale),t.salesHeaderForm.idCaja=t.ODataP.selectCajas.idCaja,t.selectCajas=t.ODataP.selectCajas})()}changePagination(t){this.pagination=t,this.fn_getPaymentsByIdSaleListWithPage(this.idSale)}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getPaymentsByIdSaleListWithPage(this.idSale)}fn_getProductByBarCode(){this.salesDetailForm.barCode.length>0&&(this.bShowSpinner=!0,this.productsServ.CGetProductByBarCode(this.salesDetailForm.barCode,this.idUserLogON).subscribe({next:t=>{0===t.status&&(this.salesDetailForm.idProduct=t.data.idProduct,this.salesDetailForm.productDesc=t.data.name,this.salesDetailForm.precioUnitario=t.data.price,this.salesDetailForm.catInventary=t.data.catInventary,this.nextInputFocus(this.tbxCantidad,500)),this.servicesGServ.showSnakbar(t.message),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}fn_getSaleByID(t){this.bShowSpinner=!0,this.saleServ.CGetSaleByID(t).subscribe(i=>{0==i.status?(this.idSale=i.data.idSale,this.salesHeaderForm.idSale=i.data.idSale,this.salesHeaderForm.idCaja=i.data.idCaja,this.salesHeaderForm.idSeller_idUser=i.data.idSeller_idUser,this.salesHeaderForm.sellerDesc=i.data.sellerDesc,this.salesHeaderForm.sellerResp="",this.salesHeaderForm.idCustomer=i.data.idCustomer,this.salesHeaderForm.customerDesc=i.data.customerDesc,this.salesHeaderForm.customerResp="",this.salesHeaderForm.idSaleType=i.data.idSaleType,this.salesHeaderForm.saleTypeDesc=i.data.saleTypeDesc,this.salesHeaderForm.pendingAmount=i.data.pendingAmount,this.salesHeaderForm.pagado=i.data.pagado,this.salesHeaderForm.saleDetail=i.dataDetail,this.salesHeaderForm.total=this.salesHeaderForm.saleDetail.reduce((o,n)=>o+n.importe,0),this.dataStone.idSale=i.data.idSale,this.dataStone.idCaja=i.data.idCaja,this.dataStone.idSeller_idUser=i.data.idSeller_idUser,this.dataStone.sellerDesc=i.data.sellerDesc,this.dataStone.sellerResp="",this.dataStone.idCustomer=i.data.idCustomer,this.dataStone.customerDesc=i.data.customerDesc,this.dataStone.customerResp="",this.dataStone.idSaleType=i.data.idSaleType,this.dataStone.saleTypeDesc=i.data.saleTypeDesc,this.dataStone.pendingAmount=i.data.pendingAmount,this.dataStone.pagado=i.data.pagado,this.fn_getPaymentsByIdSaleListWithPage(this.idSale)):this.servicesGServ.showSnakbar(i.message),this.bShowSpinner=!1})}fn_getPaymentsByIdSaleListWithPage(t){this.bShowSpinner=!0,this.saleServ.CGetPaymentsByIdSaleListWithPage(this.pagination,t).subscribe(i=>{0==i.status?(this.salesHeaderForm.paymentList=i.data.rows,this.pagination.length=i.data.count,this.ev_showInterface()):this.salesHeaderForm.paymentList=[],this.bShowSpinner=!1})}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}addSaleDetail(){if(this.ev_fnShowBtnAddSaleDetail())if(0==this.salesHeaderForm.saleDetail.filter(u=>u.idProduct==this.salesDetailForm.idProduct).length)if(this.salesDetailForm.catInventary>=this.salesDetailForm.cantidad){var o=this.salesDetailForm.descuento/100*this.salesDetailForm.precioUnitario,n=this.salesDetailForm.precioUnitario-o,l={select:!1,barCode:this.salesDetailForm.barCode,idProduct:this.salesDetailForm.idProduct,productDesc:this.salesDetailForm.productDesc,cantidad:this.salesDetailForm.cantidad,precioUnitario:this.salesDetailForm.precioUnitario,descuento:o,precio:n,importe:n*this.salesDetailForm.cantidad};this.salesHeaderForm.saleDetail.push(l),console.log(l),o>0&&(this.interface.showDescuento=!0),this.salesHeaderForm.total=this.salesHeaderForm.saleDetail.reduce((u,F)=>u+F.importe,0),this.salesHeaderForm.pendingAmount=this.salesHeaderForm.total,this.fnClearSalesDetailForm()}else this.servicesGServ.showAlert("W","Alerta!","Solo hay "+this.salesDetailForm.catInventary+" en existencia.",!0);else this.servicesGServ.showAlert("W","Alerta!","Este producto ya est\xe1 en la lista.",!0)}fnClearSalesDetailForm(){this.salesDetailForm.idProduct=0,this.salesDetailForm.barCode="",this.salesDetailForm.productDesc="",this.salesDetailForm.cantidad=1,this.salesDetailForm.precioUnitario=0,this.salesDetailForm.descuento=0,this.salesDetailForm.precio=0,this.salesDetailForm.importe=0,this.nextInputFocus(this.barCode,0)}fn_ShowPayments(){this.event_fnAllOKSaleHeader()&&this.servicesGServ.showModalWithParams(ri,{idCaja:this.ODataP.selectCajas.idCaja,idCustomer:this.salesHeaderForm.idCustomer,idRelation:this.salesHeaderForm.idSale,relationType:"V",idSeller_idUser:this.salesHeaderForm.idSeller_idUser,saleTypeDesc:this.salesHeaderForm.saleTypeDesc,total:this.salesHeaderForm.total,pendingAmount:this.salesHeaderForm.pendingAmount,selectCajas:this.ODataP.selectCajas},"1500px").afterClosed().subscribe({next:i=>{i>0&&(this.fn_NuevaVenta(),this.fn_getSaleByID(i))}})}fn_ShowPaymentCreateSale(t){0==this.idSale?this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar la venta","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.saleServ.CInsertSale(this.salesHeaderForm).subscribe({next:o=>{0===o.status&&(this.idSale=o.insertID,this.salesHeaderForm.idSale=o.insertID,this.salesHeaderForm.pendingAmount=this.salesHeaderForm.total,this.salesHeaderForm.pagado=0,t?this.fn_ShowPayments():this.ev_PrintTicket()),this.servicesGServ.showSnakbar(o.message),this.bShowSpinner=!1},error:o=>{this.servicesGServ.showSnakbar(o.error.message),this.bShowSpinner=!1}}))}}):this.fn_ShowPayments()}showCustomerCat(t){this.servicesGServ.showModalWithParams(de,{id:t},"1500px").afterClosed().subscribe({next:o=>{o.bOK&&(this.salesHeaderForm.idCustomer=o.id,this.salesHeaderForm.customerDesc=o.name,this.salesHeaderForm.customerResp="")}})}fn_QuestionPayment(){this.ev_fnAllOKToSave()&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de pagar","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.saleServ.CInsertSale(this.salesHeaderForm).subscribe({next:i=>{0===i.status&&(this.salesHeaderForm.idSale=i.insertID,this.salesHeaderForm.pendingAmount=this.salesHeaderForm.total,this.salesHeaderForm.pagado=0),this.servicesGServ.showSnakbar(i.message),this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}}))}})}fn_CerrarMDL(){this.dialogRef.close(!0)}fn_NuevaVenta(){this.idSale=0,this.salesHeaderForm.idSale=0,this.salesHeaderForm.idCaja=0,this.salesHeaderForm.idSeller_idUser=0,this.salesHeaderForm.sellerDesc="",this.salesHeaderForm.sellerResp="",this.salesHeaderForm.idCustomer=0,this.salesHeaderForm.customerDesc="",this.salesHeaderForm.customerResp="",this.salesHeaderForm.idSaleType=0,this.salesHeaderForm.saleTypeDesc="",this.salesHeaderForm.total=0,this.salesHeaderForm.pendingAmount=0,this.salesHeaderForm.pagado=0,this.salesHeaderForm.saleDetail=[],this.salesHeaderForm.paymentList=[],this.salesDetailForm.barCode="",this.salesDetailForm.idProduct=0,this.salesDetailForm.productDesc="",this.salesDetailForm.catInventary=0,this.salesDetailForm.cantidad=1,this.salesDetailForm.precioUnitario=0,this.salesDetailForm.descuento=0,this.salesDetailForm.precio=0,this.salesDetailForm.importe=0,this.interface.showDescuento=!1,this.dataStone.idSale=0,this.dataStone.idSeller_idUser=0,this.dataStone.sellerDesc="",this.dataStone.sellerResp="",this.dataStone.idCustomer=0,this.dataStone.customerDesc="",this.dataStone.customerResp="",this.dataStone.idSaleType=0,this.dataStone.saleTypeDesc="",this.dataStone.total=0,this.dataStone.pendingAmount=0,this.dataStone.pagado=0}fn_CrearVentaApartirDeConsignacion(t){let i=this.salesHeaderForm.saleDetail.filter(function(o){return 1==o.select});i.length>0?this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de crear una venta "+(t?"a Cr\xe9dito":"de Contado"),"\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:o=>{if(o){var n=i.reduce((l,u)=>l+u.importe,0);let r={idSeller_idUser:this.dataStone.idSeller_idUser,idCustomer:this.dataStone.idCustomer,idSaleType:t?1:2,total:n,saleDetail:i};console.log(r),this.bShowSpinner=!0,this.saleServ.CInsertSaleByConsignation(r).subscribe({next:l=>{0===l.status&&(1==l.bBorro?this.fn_CerrarMDL():this.fn_getSaleByID(this.idSale)),this.servicesGServ.showSnakbar(l.message),this.bShowSpinner=!1},error:l=>{this.servicesGServ.showSnakbar(l.error.message),this.bShowSpinner=!1}})}}}):this.servicesGServ.showAlert("W","Alerta!","Selecciona almenos un producto de la lista.",!0)}fn_RegresarProductoDeConsignacion(){let t=this.salesHeaderForm.saleDetail.filter(function(i){return 1==i.select});t.length>0?this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de regresar "+(t.length>1?"los productos":"el producto")+" al inventario","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{if(i){let o={idSeller_idUser:this.dataStone.idSeller_idUser,saleDetail:t};console.log(o),this.bShowSpinner=!0,this.saleServ.CRegresarProductoDeConsignacion(o).subscribe({next:n=>{0===n.status&&(1==n.bBorro?this.fn_CerrarMDL():this.fn_getSaleByID(this.idSale)),this.servicesGServ.showSnakbar(n.message),this.bShowSpinner=!1},error:n=>{this.servicesGServ.showSnakbar(n.error.message),this.bShowSpinner=!1}})}}}):this.servicesGServ.showAlert("W","Alerta!","Selecciona almenos un producto de la lista.",!0)}ev_fnShowBtnAddSaleDetail(){let t=!1;return this.salesDetailForm.idProduct>0&&this.salesDetailForm.barCode.length>0&&this.salesDetailForm.cantidad>0&&this.salesDetailForm.precioUnitario>0&&(t=!0),t}ev_fnShowBtnGuardarSinAnticipo(){let t=!1;return this.salesHeaderForm.idCustomer>0&&(1==this.salesHeaderForm.idSaleType||3==this.salesHeaderForm.idSaleType||4==this.salesHeaderForm.idSaleType)&&this.salesHeaderForm.saleDetail.length>0&&(t=!0),t}ev_fnShowBtnPagar(){let t=!1;return this.salesHeaderForm.idCustomer>0&&this.salesHeaderForm.saleDetail.length>0&&(t=!0),t}ev_fn_barCode_keyup_enter(t){13==t.keyCode&&(this.salesDetailForm.barCode.length>0?this.fn_getProductByBarCode():this.salesHeaderForm.saleDetail.length>0&&0==this.salesDetailForm.barCode.length&&this.fn_ShowPaymentCreateSale(3!=this.salesDetailForm.idSaleType||4!=this.salesDetailForm.idSaleType))}ev_fn_cbxCantidad_keyup_enter(t){13==t.keyCode&&this.salesDetailForm.cantidad>0&&this.nextInputFocus(this.cbxDescuento,0)}event_fnAllOKSaleHeader(){let t=!1;return this.salesHeaderForm.idCustomer>0&&this.salesHeaderForm.idSaleType>0&&this.salesHeaderForm.saleDetail.length>0&&this.salesHeaderForm.total>0&&(t=!0),t}event_fnClick_DeleteProductFromList(t){this.salesHeaderForm.saleDetail.splice(t,1),this.salesHeaderForm.total=this.salesHeaderForm.saleDetail.reduce((i,o)=>i+o.importe,0)}ev_fnAllOKToSave(){let t=!1;return this.salesHeaderForm.idCustomer>0&&this.salesHeaderForm.idSaleType>0&&this.salesHeaderForm.saleDetail.length>0&&this.salesHeaderForm.total>0&&(t=!0),t}ev_showInterface(){this.salesHeaderForm.paymentList?.length>0?(this.interface.showReferencia=this.salesHeaderForm.paymentList.filter(function(t){return t.referencia?.length>0}).length>0,this.interface.showFxRate=this.salesHeaderForm.paymentList.filter(function(t){return t.fxRate>0}).length>0):(this.interface.showReferencia=!1,this.interface.showFxRate=!1)}ev_PrintTicket(){var t=this;return(0,f.Z)(function*(){t.printTicketServ.printTicket("Venta",t.idSale,t.selectCajas)})()}CBXskeyup(t,i){this.timeCBXskeyup.next({iOption:t,txt:i})}cbxCustomers_Search(){this.customersServ.CCbxGetCustomersCombo(this.salesHeaderForm.customerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxCustomers=t.data,this.salesHeaderForm.customerResp=""):(this.cbxCustomers=[],this.salesHeaderForm.customerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxCustomers_SelectedOption(t,i){if(!t.option.value)return;const o=t.option.value;console.log(o),this.salesHeaderForm.idCustomer=o.idCustomer,this.salesHeaderForm.customerDesc=o.name,this.nextInputFocus(this.cbxSaleTypeCBX,500)}cbxCustomers_Clear(){this.salesHeaderForm.idCustomer=0,this.salesHeaderForm.customerDesc="",this.salesHeaderForm.customerResp=""}cbxProducts_Search(){this.productsServ.CCbxGetProductsCombo(this.salesDetailForm.productDesc,this.idUserLogON).subscribe({next:t=>{this.cbxProducts=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxProducts_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.salesDetailForm.idProduct=i.idProduct,this.salesDetailForm.productDesc=i.name,this.salesDetailForm.barCode=i.barCode,this.salesDetailForm.precioUnitario=i.price,this.salesDetailForm.catInventary=i.catInventary,this.nextInputFocus(this.tbxCantidad,500)}cbxProducts_Clear(){this.salesDetailForm.idProduct=0,this.salesDetailForm.productDesc="",this.salesDetailForm.barCode="",this.salesDetailForm.precioUnitario=0,this.salesDetailForm.catInventary=0}cbxSalesType_Search(){this.salesTypeServ.CCbxGetSalesTypeCombo(this.salesHeaderForm.saleTypeDesc).subscribe({next:t=>{this.cbxSalesType=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSalesType_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.salesHeaderForm.idSaleType=i.id,this.salesHeaderForm.saleTypeDesc=i.name,this.nextInputFocus(this.barCode,500)}cbxSalesType_Clear(){this.salesHeaderForm.idSaleType=0,this.salesHeaderForm.saleTypeDesc=""}cbxSellers_Search(){this.userServ.CCbxGetSellersCombo(this.salesHeaderForm.sellerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxSellers=t.data,this.salesHeaderForm.sellerResp=""):(this.cbxSellers=[],this.salesHeaderForm.sellerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSellers_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.salesHeaderForm.idSeller_idUser=i.idUser,this.salesHeaderForm.sellerDesc=i.name,this.salesHeaderForm.sellerResp="",this.nextInputFocus(this.cbxCustomerCBX,500)}cbxSellers_Clear(){this.salesHeaderForm.idSeller_idUser=0,this.salesHeaderForm.sellerDesc="",this.salesHeaderForm.sellerResp=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.so),e.Y36(q.WI),e.Y36(v.$),e.Y36(c.qu),e.Y36(h._A),e.Y36(h.Ad),e.Y36(S.e),e.Y36($),e.Y36(Y),e.Y36(ci),e.Y36(oe),e.Y36(J),e.Y36(z),e.Y36(B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-nsale"]],viewQuery:function(t,i){if(1&t&&(e.Gf(li,5),e.Gf(ui,5),e.Gf(pi,5),e.Gf(mi,5),e.Gf(di,5),e.Gf(_i,5),e.Gf(hi,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.cbxSellerCBX=o.first),e.iGM(o=e.CRH())&&(i.cbxCustomerCBX=o.first),e.iGM(o=e.CRH())&&(i.cbxSaleTypeCBX=o.first),e.iGM(o=e.CRH())&&(i.barCode=o.first),e.iGM(o=e.CRH())&&(i.tbxCantidad=o.first),e.iGM(o=e.CRH())&&(i.cbxDescuento=o.first),e.iGM(o=e.CRH())&&(i.total=o.first)}},decls:101,vars:31,consts:[[2,"padding","30px"],["class","divTitle-center","style","margin-top: 0px;",4,"ngIf"],[1,"row"],[1,"col-md-12"],[2,"width","100%"],["type","text","id","cbxSeller","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxSellerCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSeller","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-10"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],["type","text","id","cbxCustomer","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxCustomerCBX",""],["cbxCustomer","matAutocomplete"],[1,"col-md-2"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","click","focus"],["cbxSaleTypeCBX",""],["cbxSaleType","matAutocomplete"],["class","row",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","class","marginRight10px",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],[1,"divSection"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],["class","textAlingCenter padding-th",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-md-8"],[1,"col-md-4"],[1,"with100","top20px"],["matInput","","currencyMask","","placeholder","TOTAL","readonly","true",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange"],["total",""],["class","row divSection",4,"ngIf"],[3,"hidden"],[1,"divTitle-center",2,"margin-top","0px"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["fxLayout.xs","column",1,"with100"],["matInput","","placeholder","Ingrese un C\xf3digo de barras",3,"ngModel","ngModelChange","keyup.enter","click"],["barCode",""],["type","text","id","cbxProduct","placeholder","Selecciona un producto...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","click"],["cbxProductss",""],["cbxProduct","matAutocomplete"],[1,"with100"],["matInput","","placeholder","Ingrese la cantidad","type","number",1,"textAlingRight",3,"ngModel","ngModelChange","keyup.enter"],["tbxCantidad",""],["matInput","","currencyMask","","placeholder","Ingrese el precio unitario","readonly","true",1,"textAlingRight",3,"ngModel","ngModelChange"],["precioUnitario",""],["matInput","","placeholder","Ingrese un descuento","type","number",1,"textAlingRight",3,"ngModel","ngModelChange","keyup.enter"],["cbxDescuento",""],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],[1,"textAlingCenter"],[2,"width","80px"],["class","manitaSobre",3,"ngModel","ngModelChange",4,"ngIf"],["class","material-icons manitaSobre colorRed",3,"click",4,"ngIf"],[1,"textAlingLeft"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[2,"text-align","left"],[2,"text-align","right"],["style","text-align: right;",4,"ngIf"],[1,"manitaSobre",3,"ngModel","ngModelChange"],[1,"material-icons","manitaSobre","colorRed",3,"click"],[1,"row","divSection"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],["class","textAlingRight padding-th",4,"ngIf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.YNc(1,gi,3,4,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",3)(6,"mat-label"),e._uU(7,"Vendedor: "),e.qZA(),e.TgZ(8,"mat-form-field",4)(9,"input",5,6),e.NdJ("ngModelChange",function(r){return i.salesHeaderForm.sellerDesc=r})("keyup",function(){e.CHM(o);const r=e.MAs(10);return e.KtG(i.CBXskeyup(2,r.value))})("click",function(){return i.cbxSellers_Clear()}),e.qZA(),e.YNc(11,fi,3,0,"button",7),e.TgZ(12,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(r){return i.cbxSellers_SelectedOption(r)}),e.YNc(14,bi,2,2,"mat-option",10),e.YNc(15,Si,2,1,"mat-option",11),e.qZA()()()(),e.TgZ(16,"div",2)(17,"div",12)(18,"mat-label"),e._uU(19,"Cliente: "),e.qZA(),e.TgZ(20,"span",13),e.NdJ("click",function(){return i.showCustomerCat(0)}),e._uU(21," add_circle_outline "),e.qZA(),e.TgZ(22,"mat-form-field",4)(23,"input",14,15),e.NdJ("ngModelChange",function(r){return i.salesHeaderForm.customerDesc=r})("keyup",function(){e.CHM(o);const r=e.MAs(24);return e.KtG(i.CBXskeyup(1,r.value))})("click",function(){return i.cbxCustomers_Clear()}),e.qZA(),e.YNc(25,Ci,3,0,"button",7),e.TgZ(26,"mat-autocomplete",8,16),e.NdJ("optionSelected",function(r){e.CHM(o);const l=e.MAs(35);return e.KtG(i.cbxCustomers_SelectedOption(r,l))}),e.YNc(28,vi,2,2,"mat-option",10),e.YNc(29,xi,2,1,"mat-option",11),e.qZA()()(),e.TgZ(30,"div",17)(31,"mat-label"),e._uU(32,"Condici\xf3n de pago: "),e.qZA(),e.TgZ(33,"mat-form-field",18),e.NdJ("click",function(){return i.cbxSalesType_Search()}),e.TgZ(34,"input",19,20),e.NdJ("ngModelChange",function(r){return i.salesHeaderForm.saleTypeDesc=r})("input",function(){return i.cbxSalesType_Search()})("click",function(){return i.cbxSalesType_Clear()})("focus",function(){return i.cbxSalesType_Search()}),e.qZA(),e.YNc(36,Zi,3,0,"button",7),e.TgZ(37,"mat-autocomplete",8,21),e.NdJ("optionSelected",function(r){return i.cbxSalesType_SelectedOption(r)}),e.YNc(39,Ti,2,2,"mat-option",10),e.YNc(40,Fi,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(41,"div",2)(42,"div",3),e.YNc(43,Pi,18,6,"div",22),e.YNc(44,wi,19,3,"div",22),e.TgZ(45,"div",23)(46,"div",3)(47,"div",24),e.YNc(48,Ni,4,1,"button",25),e.YNc(49,qi,4,0,"button",26),e.YNc(50,Di,4,1,"button",25),e.YNc(51,Ii,3,4,"button",25),e.TgZ(52,"button",27),e.NdJ("click",function(){return i.fn_NuevaVenta()}),e.TgZ(53,"mat-icon",28),e._uU(54,"add_circle_outline"),e.qZA(),e._uU(55," Nueva venta"),e.qZA(),e.TgZ(56,"button",29),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(57,"mat-icon",28),e._uU(58,"close"),e.qZA(),e._uU(59," Cerrar"),e.qZA(),e.YNc(60,Li,4,0,"button",30),e.YNc(61,ki,4,0,"button",30),e.YNc(62,Gi,4,0,"button",30),e.TgZ(63,"button",27),e.NdJ("click",function(){return i.ev_PrintTicket()}),e.TgZ(64,"mat-icon",28),e._uU(65,"print"),e.qZA(),e._uU(66," Imprimir"),e.qZA()()()(),e.TgZ(67,"div",31)(68,"div",32)(69,"div",3)(70,"div",33)(71,"table",34)(72,"thead")(73,"th",35),e._uU(74,"Acciones"),e.qZA(),e.TgZ(75,"th",35),e._uU(76,"C\xf3digo"),e.qZA(),e.TgZ(77,"th",35),e._uU(78,"Descripci\xf3n"),e.qZA(),e.TgZ(79,"th",35),e._uU(80,"Cantidad"),e.qZA(),e.YNc(81,Mi,2,0,"th",36),e.YNc(82,Oi,2,0,"th",36),e.TgZ(83,"th",35),e._uU(84,"Precio"),e.qZA(),e.TgZ(85,"th",35),e._uU(86,"Importe"),e.qZA()(),e.TgZ(87,"tbody"),e.YNc(88,Ei,25,13,"tr",37),e.qZA()()()()(),e.TgZ(89,"div",2),e._UZ(90,"div",38),e.TgZ(91,"div",39)(92,"div",2)(93,"div",3)(94,"mat-form-field",40)(95,"mat-label"),e._uU(96,"TOTAL"),e.qZA(),e.TgZ(97,"input",41,42),e.NdJ("ngModelChange",function(r){return i.salesHeaderForm.total=r}),e.qZA()()()()()()(),e.YNc(99,Xi,19,5,"div",43),e.qZA()()()()(),e._UZ(100,"app-spinner",44)}if(2&t){const o=e.MAs(13),n=e.MAs(27),r=e.MAs(38);e.xp6(1),e.Q6J("ngIf",i.salesHeaderForm.idSale>0),e.xp6(8),e.Q6J("ngModel",i.salesHeaderForm.sellerDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.salesHeaderForm.sellerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSellers),e.xp6(1),e.Q6J("ngIf",i.salesHeaderForm.sellerDesc.length>0&&i.salesHeaderForm.sellerResp.length>0),e.xp6(8),e.Q6J("ngModel",i.salesHeaderForm.customerDesc)("matAutocomplete",n),e.xp6(2),e.Q6J("ngIf",i.salesHeaderForm.customerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxCustomers),e.xp6(1),e.Q6J("ngIf",i.salesHeaderForm.customerResp.length>0&&i.salesHeaderForm.customerResp.length>0),e.xp6(5),e.Q6J("ngModel",i.salesHeaderForm.saleTypeDesc)("matAutocomplete",r),e.xp6(2),e.Q6J("ngIf",i.salesHeaderForm.saleTypeDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSalesType),e.xp6(1),e.Q6J("ngIf",0==i.cbxSalesType.length&&i.salesHeaderForm.saleTypeDesc),e.xp6(3),e.Q6J("ngIf",0==i.salesHeaderForm.idSale),e.xp6(1),e.Q6J("ngIf",0==i.salesHeaderForm.idSale),e.xp6(4),e.Q6J("ngIf",0==i.salesHeaderForm.idSale),e.xp6(1),e.Q6J("ngIf",0==i.salesHeaderForm.idSale),e.xp6(1),e.Q6J("ngIf",(1==i.salesHeaderForm.idSaleType||3==i.salesHeaderForm.idSaleType||4==i.salesHeaderForm.idSaleType)&&0==i.salesHeaderForm.idSale),e.xp6(1),e.Q6J("ngIf",i.salesHeaderForm.pendingAmount>0&&4!=i.dataStone.idSaleType&&4!=i.salesHeaderForm.idSaleType),e.xp6(9),e.Q6J("ngIf",4==i.dataStone.idSaleType),e.xp6(1),e.Q6J("ngIf",4==i.dataStone.idSaleType),e.xp6(1),e.Q6J("ngIf",4==i.dataStone.idSaleType),e.xp6(19),e.Q6J("ngIf",i.interface.showDescuento),e.xp6(1),e.Q6J("ngIf",i.interface.showDescuento),e.xp6(6),e.Q6J("ngForOf",i.salesHeaderForm.saleDetail),e.xp6(9),e.Q6J("ngModel",i.salesHeaderForm.total),e.xp6(2),e.Q6J("ngIf",(null==i.salesHeaderForm.paymentList?null:i.salesHeaderForm.paymentList.length)>0),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.sg,m.O5,c.Fj,c.wV,c.JJ,c.On,Z.XC,h.ey,Z.ZL,g.lW,g.RK,M.oG,p.KE,p.hX,p.qo,p.R9,P.Nt,U.Hw,O.g1,w.O,k,m.H9,m.uU]}),a})();const ta=["cbxCajasCBX"];function ia(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxCajas_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function aa(a,s){if(1&a&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function oa(a,s){1&a&&(e.TgZ(0,"mat-option",19),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function na(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_insertSelectCaja())}),e.TgZ(1,"mat-icon",15),e._uU(2,"save"),e.qZA(),e._uU(3," Seleccionar caja "),e.qZA()}}let sa=(()=>{class a{constructor(t,i,o,n,r){this.dialogRef=t,this.ODataP=i,this.servicesGServ=o,this.authServ=n,this.cajasServ=r,this.bShowSpinner=!1,this.selectCajaForm={idUser:0,idCaja:0,cajaDesc:""},this.bQuestion=!1,this.cbxCajas=[]}ngOnInit(){this.selectCajaForm.idUser=this.ODataP.idUser,setTimeout(()=>{this.cbxCajasCBX.nativeElement.focus()},1e3)}fn_insertSelectCaja(){var t=this;return(0,f.Z)(function*(){var i;t.bQuestion||(t.bQuestion=!0,t.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de seleccionar una caja","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:(i=(0,f.Z)(function*(o){var n;o?(t.bShowSpinner=!0,t.cajasServ.CInsertSelectCaja(t.selectCajaForm).subscribe({next:(n=(0,f.Z)(function*(r){0===r.status&&t.fn_CerrarMDL(r.insertID),t.servicesGServ.showSnakbar(r.message),t.bShowSpinner=!1}),function(l){return n.apply(this,arguments)}),error:n=>{t.servicesGServ.showSnakbar(n.error.message),t.bShowSpinner=!1}})):t.bQuestion=!1}),function(n){return i.apply(this,arguments)})}))})()}fn_CerrarMDL(t){this.dialogRef.close(t)}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}cbxCajas_Search(){this.cajasServ.CGetCajasBySec(this.selectCajaForm.cajaDesc,this.selectCajaForm.idUser).subscribe({next:t=>{this.cbxCajas=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxCajas_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.selectCajaForm.idCaja=i.idCaja,this.selectCajaForm.cajaDesc=i.name}cbxCajas_Clear(){this.selectCajaForm.idCaja=0,this.selectCajaForm.cajaDesc=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.so),e.Y36(q.WI),e.Y36(v.$),e.Y36(S.e),e.Y36(ne))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-select-caja"]],viewQuery:function(t,i){if(1&t&&e.Gf(ta,5),2&t){let o;e.iGM(o=e.CRH())&&(i.cbxCajasCBX=o.first)}},decls:22,vars:7,consts:[[2,"padding","10px"],[1,"row"],[1,"col-md-12"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",1,"colorGreen","fontSize",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus"],["cbxCajasCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxCaja","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-label"),e._uU(4,"Seleccione una caja:"),e.qZA(),e.TgZ(5,"mat-form-field",3),e.NdJ("click",function(){return i.cbxCajas_Search()}),e.TgZ(6,"input",4,5),e.NdJ("ngModelChange",function(n){return i.selectCajaForm.cajaDesc=n})("input",function(){return i.cbxCajas_Search()})("focus",function(){return i.cbxCajas_Search()}),e.qZA(),e.YNc(8,ia,3,0,"button",6),e.TgZ(9,"mat-autocomplete",7,8),e.NdJ("optionSelected",function(n){return i.cbxCajas_SelectedOption(n)}),e.YNc(11,aa,2,2,"mat-option",9),e.YNc(12,oa,2,0,"mat-option",10),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",2)(15,"div",12),e.YNc(16,na,4,0,"button",13),e.TgZ(17,"button",14),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(18,"mat-icon",15),e._uU(19,"close"),e.qZA(),e._uU(20," Cerrar"),e.qZA()()()()(),e._UZ(21,"app-spinner",16)),2&t){const o=e.MAs(10);e.xp6(6),e.Q6J("ngModel",i.selectCajaForm.cajaDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.selectCajaForm.cajaDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxCajas),e.xp6(1),e.Q6J("ngIf",0==i.cbxCajas.length&&i.selectCajaForm.cajaDesc),e.xp6(4),e.Q6J("ngIf",i.selectCajaForm.idCaja>0),e.xp6(5),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.sg,m.O5,c.Fj,c.JJ,c.On,Z.XC,h.ey,Z.ZL,g.lW,g.RK,p.KE,p.hX,p.qo,p.R9,P.Nt,U.Hw,w.O]}),a})();function ra(a,s){1&a&&(e.TgZ(0,"span",21),e._uU(1," check_circle "),e.qZA())}function ca(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",16),e.YNc(2,ra,2,0,"span",17),e._uU(3),e.qZA(),e.TgZ(4,"td",18),e._uU(5),e.qZA(),e.TgZ(6,"td",19),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"td",19),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"td",19),e._uU(13),e.ALo(14,"currency"),e.qZA(),e.TgZ(15,"td",19)(16,"input",20),e.NdJ("ngModelChange",function(o){const r=e.CHM(t).$implicit;return e.KtG(r.saldoCaja=o)}),e.qZA()(),e.TgZ(17,"td",19),e._uU(18),e.ALo(19,"currency"),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(2),e.Q6J("ngIf",t.saldo-t.egresos==t.saldoCaja),e.xp6(1),e.hij(" ",t.formaPagoDesc,""),e.xp6(2),e.Oqu(t.numPagos),e.xp6(2),e.Oqu(e.lcZ(8,8,t.saldo)),e.xp6(3),e.Oqu(e.lcZ(11,10,t.egresos)),e.xp6(3),e.Oqu(e.lcZ(14,12,t.saldo-t.egresos)),e.xp6(3),e.Q6J("ngModel",t.saldoCaja),e.xp6(2),e.Oqu(e.lcZ(19,14,t.valorMXN))}}let la=(()=>{class a{constructor(t,i,o,n,r,l){this.dialogRef=t,this.ODataP=i,this.servicesGServ=o,this.authServ=n,this.salesServ=r,this.printTicketServ=l,this.bShowSpinner=!1,this.idCaja=0,this.paymentList=[]}ngOnInit(){console.log(this.ODataP),this.idCaja=this.ODataP.idCaja,this.ODataP.idCaja>0&&this.fn_getPreCorteCaja(this.ODataP.idCaja)}fn_getPreCorteCaja(t){this.paymentList=[],this.bShowSpinner=!0,this.salesServ.CGetPreCorteCaja(t).subscribe(i=>{0==i.status&&(this.paymentList=i.data.rows),this.bShowSpinner=!1})}fn_InsertCorteCaja(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar el corte de caja","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.salesServ.CInsertCorteCaja(this.idCaja).subscribe({next:i=>{0===i.status&&this.fn_CerrarMDL(i.insertID),this.servicesGServ.showAlertIA(i),this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}}))}})}fn_CerrarMDL(t){this.dialogRef.close(t)}event_checkCorte(){var t=this.paymentList.reduce((i,o)=>i+(o.saldo-o.egresos-o.saldoCaja),0);return console.log(t),0==t}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.so),e.Y36(q.WI),e.Y36(v.$),e.Y36(S.e),e.Y36(J),e.Y36(B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-corte-caja"]],decls:38,vars:3,consts:[[2,"padding","10px"],[1,"row"],[1,"col-md-12"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft","padding-th"],[1,"textAlingCenter","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"hidden"],[2,"text-align","left"],["class","material-icons manitaSobre colorGreen","title","Pagado",4,"ngIf"],[2,"text-align","center"],[2,"text-align","right"],["matInput","","currencyMask","","placeholder","PAGA",1,"textAlingRight","colorGreen",3,"ngModel","ngModelChange"],["title","Pagado",1,"material-icons","manitaSobre","colorGreen"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",2)(5,"div",4)(6,"button",5),e.NdJ("click",function(){return i.fn_InsertCorteCaja()}),e.TgZ(7,"mat-icon",6),e._uU(8,"save"),e.qZA(),e._uU(9," Guardar Corte de Caja"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(11,"mat-icon",6),e._uU(12,"close"),e.qZA(),e._uU(13," Cerrar"),e.qZA()()()(),e.TgZ(14,"div",8)(15,"div",2)(16,"div",9)(17,"table",10)(18,"thead")(19,"th",11),e._uU(20,"Forma de pago"),e.qZA(),e.TgZ(21,"th",12),e._uU(22,"N\xfamero de pagos"),e.qZA(),e.TgZ(23,"th",13),e._uU(24,"Saldo"),e.qZA(),e.TgZ(25,"th",13),e._uU(26,"Egresos"),e.qZA(),e.TgZ(27,"th",13),e._uU(28,"Saldo Pendiente"),e.qZA(),e.TgZ(29,"th",13),e._uU(30,"Saldo en Caja"),e.qZA(),e.TgZ(31,"th",13),e._uU(32,"Saldo en MXN"),e.qZA()(),e.TgZ(33,"tbody"),e.YNc(34,ca,20,16,"tr",14),e.qZA()()()()(),e.TgZ(35,"div",8),e._UZ(36,"div",2),e.qZA()(),e._UZ(37,"app-spinner",15)),2&t&&(e.xp6(6),e.Q6J("disabled",!i.event_checkCorte()),e.xp6(28),e.Q6J("ngForOf",i.paymentList),e.xp6(3),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.sg,m.O5,c.Fj,c.JJ,c.On,g.lW,p.qo,P.Nt,U.Hw,O.g1,w.O,m.H9]}),a})();const ua=["cbxFormasPagoC"],pa=["tbxDesc"],ma=["tbxMonto"];function da(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxFormasPago_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function _a(a,s){if(1&a&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ha(a,s){1&a&&(e.TgZ(0,"mat-option",33),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function ga(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",34)(2,"div",35)(3,"span",36),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.fn_disabledEgresos(n.idEgreso))}),e._uU(4," delete_outline "),e.qZA()()(),e.TgZ(5,"td",37),e._uU(6),e.qZA(),e.TgZ(7,"td",37),e._uU(8),e.qZA(),e.TgZ(9,"td",38),e._uU(10),e.ALo(11,"currency"),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(6),e.Oqu(t.formaPagoDesc),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(11,3,t.amount))}}let fa=(()=>{class a{constructor(t,i,o,n,r,l,u){this.dialogRef=t,this.ODataP=i,this.servicesGServ=o,this.authServ=n,this.salesServ=r,this.printTicketServ=l,this.formaPagoServ=u,this.bShowSpinner=!1,this.bPago=!1,this.egresosList=[],this.egresoForm={idCaja:0,idFormaPago:0,formaPagoDesc:"",amount:0,description:""},this.bInsertEgreso=!1,this.cbxFormasPago=[]}ngOnInit(){console.log(this.ODataP),this.egresosList=[],this.egresoForm.idCaja=this.ODataP.idCaja,this.ODataP.idCaja>0&&this.fn_getPreEgresosCorteCaja(this.ODataP.idCaja),setTimeout(()=>{this.cbxFormasPagoC.nativeElement.focus()},1e3)}fn_getPreEgresosCorteCaja(t){this.egresosList=[],this.bShowSpinner=!0,this.salesServ.CGetPreEgresosCorteCaja(t).subscribe({next:i=>{0==i.status&&(this.egresosList=i.data.rows),this.bShowSpinner=!1},error:i=>{this.bShowSpinner=!1}})}fn_InsertEgreso(){this.bInsertEgreso||(this.bInsertEgreso=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar el Egreso","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t?(this.bShowSpinner=!0,this.salesServ.CInsertEgresos(this.egresoForm).subscribe({next:i=>{0===i.status&&(this.egresoForm.idFormaPago=0,this.egresoForm.formaPagoDesc="",this.egresoForm.amount=0,this.egresoForm.description="",this.fn_CerrarMDL()),this.servicesGServ.showSnakbar(i.message),this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}})):this.bInsertEgreso=!1}}))}fn_disabledEgresos(t){console.log(t),this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deshabilitar el Egreso","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.salesServ.CDisabledEgresos(t).subscribe({next:o=>{this.fn_getPreEgresosCorteCaja(this.ODataP.idCaja),this.servicesGServ.showAlertIA(o),this.bShowSpinner=!1},error:o=>{console.log(o),this.servicesGServ.showSnakbar(o.error.data),this.bShowSpinner=!1}}))}})}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}fn_CerrarMDL(){this.dialogRef.close(!1)}ev_fn_description_keyup_enter(t){13==t.keyCode&&this.nextInputFocus(this.tbxMonto,0)}event_fn_Amount(t){13==t.keyCode&&this.egresoForm.amount>0&&this.fn_InsertEgreso()}ev_fn_enableBtnSave(){return this.egresoForm.idFormaPago>0&&this.egresoForm.amount>0}cbxFormasPago_Search(){this.formaPagoServ.CCbxGetFormaPagoCorteCombo(this.egresoForm.formaPagoDesc).subscribe({next:t=>{this.cbxFormasPago=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFormasPago_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.egresoForm.idFormaPago=i.id,this.egresoForm.formaPagoDesc=i.name,setTimeout(()=>{this.tbxDesc.nativeElement.focus()},500)}cbxFormasPago_Clear(){this.egresoForm.idFormaPago=0,this.egresoForm.formaPagoDesc=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(q.so),e.Y36(q.WI),e.Y36(v.$),e.Y36(S.e),e.Y36(J),e.Y36(B),e.Y36(oe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-egresos"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ua,5),e.Gf(pa,5),e.Gf(ma,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.cbxFormasPagoC=o.first),e.iGM(o=e.CRH())&&(i.tbxDesc=o.first),e.iGM(o=e.CRH())&&(i.tbxMonto=o.first)}},decls:52,vars:10,consts:[[2,"padding","10px"],[1,"row"],[1,"col-md-3"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",1,"colorGreen",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus"],["cbxFormasPagoC",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxFormaPago","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-4"],[1,"example-full-width","with100","top20px"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese una descripci\xf3n",3,"ngModel","ngModelChange","keyup"],["tbxDesc",""],[1,"with100","top20px"],["matInput","","currencyMask","","placeholder","PAGA",1,"textAlingRight","colorGreen",3,"ngModel","ngModelChange","keyup"],["tbxMonto",""],[1,"row","top10px"],[1,"col-md-12"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"textAlingCenter"],[2,"width","50px"],[1,"material-icons","manitaSobre","colorRed",3,"click"],[2,"text-align","left"],[2,"text-align","right"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-label"),e._uU(4,"Forma de pago:"),e.qZA(),e.TgZ(5,"mat-form-field",3),e.NdJ("click",function(){return i.cbxFormasPago_Search()}),e.TgZ(6,"input",4,5),e.NdJ("ngModelChange",function(n){return i.egresoForm.formaPagoDesc=n})("input",function(){return i.cbxFormasPago_Search()})("focus",function(){return i.cbxFormasPago_Search()}),e.qZA(),e.YNc(8,da,3,0,"button",6),e.TgZ(9,"mat-autocomplete",7,8),e.NdJ("optionSelected",function(n){return i.cbxFormasPago_SelectedOption(n)}),e.YNc(11,_a,2,2,"mat-option",9),e.YNc(12,ha,2,0,"mat-option",10),e.qZA()()(),e.TgZ(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Descripci\xf3n"),e.qZA(),e.TgZ(17,"textarea",13,14),e.NdJ("ngModelChange",function(n){return i.egresoForm.description=n})("keyup",function(n){return i.ev_fn_description_keyup_enter(n)}),e.qZA()()(),e.TgZ(19,"div",2)(20,"mat-form-field",15)(21,"mat-label"),e._uU(22,"Monto"),e.qZA(),e.TgZ(23,"input",16,17),e.NdJ("ngModelChange",function(n){return i.egresoForm.amount=n})("keyup",function(n){return i.event_fn_Amount(n)}),e.qZA()()()(),e.TgZ(25,"div",18)(26,"div",19)(27,"div",20)(28,"button",21),e.NdJ("click",function(){return i.fn_InsertEgreso()}),e.TgZ(29,"mat-icon",22),e._uU(30,"save"),e.qZA(),e._uU(31," Guardar e imprimir ticket"),e.qZA(),e.TgZ(32,"button",23),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(33,"mat-icon",22),e._uU(34,"close"),e.qZA(),e._uU(35," Cerrar"),e.qZA()()()(),e.TgZ(36,"div",24)(37,"div",19)(38,"div",25)(39,"table",26)(40,"thead")(41,"th",27),e._uU(42,"Acciones"),e.qZA(),e.TgZ(43,"th",28),e._uU(44,"Forma de pago"),e.qZA(),e.TgZ(45,"th",28),e._uU(46,"Descripci\xf3n"),e.qZA(),e.TgZ(47,"th",27),e._uU(48,"Monto"),e.qZA()(),e.TgZ(49,"tbody"),e.YNc(50,ga,12,5,"tr",29),e.qZA()()()()()(),e._UZ(51,"app-spinner",30)),2&t){const o=e.MAs(10);e.xp6(6),e.Q6J("ngModel",i.egresoForm.formaPagoDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.egresoForm.formaPagoDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFormasPago),e.xp6(1),e.Q6J("ngIf",0==i.cbxFormasPago.length&&i.egresoForm.formaPagoDesc),e.xp6(5),e.Q6J("ngModel",i.egresoForm.description),e.xp6(6),e.Q6J("ngModel",i.egresoForm.amount),e.xp6(5),e.Q6J("disabled",!i.ev_fn_enableBtnSave()),e.xp6(22),e.Q6J("ngForOf",i.egresosList),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.sg,m.O5,c.Fj,c.JJ,c.On,Z.XC,h.ey,Z.ZL,g.lW,g.RK,p.KE,p.hX,p.qo,p.R9,P.Nt,ae.IC,U.Hw,O.g1,w.O,m.H9]}),a})();const ba=["cbxCustomerCBX"];function Sa(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxCustomers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ca(a,s){if(1&a&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function va(a,s){if(1&a&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.parametersForm.customerResp," ")}}function xa(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",38)(2,"div",20)(3,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_ShowSale(0))}),e.TgZ(4,"mat-icon",22),e._uU(5,"add_circle_outline"),e.qZA(),e._uU(6," Nueva venta"),e.qZA(),e.TgZ(7,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_ShowCorteCajaSale())}),e.TgZ(8,"mat-icon",22),e._uU(9,"add_circle_outline"),e.qZA(),e._uU(10," Corte de Caja"),e.qZA(),e.TgZ(11,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_ShowEgresos())}),e.TgZ(12,"mat-icon",22),e._uU(13,"add_circle_outline"),e.qZA(),e._uU(14," Egresos"),e.qZA()()(),e.TgZ(15,"div",39),e._UZ(16,"img",40),e.TgZ(17,"div",41),e._uU(18),e.qZA(),e._UZ(19,"img",42),e.TgZ(20,"div",41),e._uU(21),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(18),e.hij(" ",t.selectCajas.cajaDesc," "),e.xp6(3),e.hij(" ",t.selectCajas.impresoraName," ")}}function Za(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",3)(2,"div",20)(3,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fn_ShowSelectCaja())}),e.TgZ(4,"mat-icon",22),e._uU(5,"add_circle_outline"),e.qZA(),e._uU(6," Seleccionar caja"),e.qZA()()()()}}function Ta(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"span",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.fn_ShowSale(o.idSale))}),e._uU(1," remove_red_eye "),e.qZA()}}function Fa(a,s){1&a&&(e.TgZ(0,"span",54),e._uU(1," check_circle "),e.qZA())}function ya(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td",43)(2,"div",44),e.YNc(3,Ta,2,0,"span",45),e.YNc(4,Fa,2,0,"span",46),e.qZA()(),e.TgZ(5,"td",47),e._uU(6),e.qZA(),e.TgZ(7,"td",48),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.TgZ(10,"td",48),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"td",48),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"td",43)(17,"div",49)(18,"div",2)(19,"div",3)(20,"mat-icon",50),e._uU(21,"calendar_today"),e.qZA(),e.TgZ(22,"label",51),e._uU(23),e.ALo(24,"date"),e.qZA()()(),e.TgZ(25,"div",2)(26,"div",3)(27,"label",51),e._uU(28),e.ALo(29,"date"),e.qZA()()()()(),e.TgZ(30,"td",47)(31,"div",52),e._uU(32),e.qZA()(),e.TgZ(33,"td",47),e._uU(34),e.qZA(),e.TgZ(35,"td",47),e._uU(36),e.qZA()()),2&a){const t=s.$implicit,i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.selectCajas.idCaja>0),e.xp6(1),e.Q6J("ngIf",t.pendingAmount<1),e.xp6(2),e.Oqu(t.saleTypeDesc),e.xp6(2),e.Oqu(e.lcZ(9,11,t.total)),e.xp6(3),e.Oqu(e.lcZ(12,13,t.abonado)),e.xp6(3),e.Oqu(e.lcZ(15,15,t.pendingAmount)),e.xp6(9),e.Oqu(e.xi3(24,17,t.createDate,"dd-MM-yyyy")),e.xp6(5),e.Oqu(e.xi3(29,20,t.createDate,"h:mm:ss a")),e.xp6(4),e.hij(" ",t.ventaDesc," "),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(t.sellerName)}}function Aa(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",55),e.NdJ("OPagination",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.changePagination(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}function Pa(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function wa(a,s){if(1&a&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Na(a,s){1&a&&(e.TgZ(0,"mat-option",45),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function qa(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxGroups_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Da(a,s){if(1&a&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ia(a,s){1&a&&(e.TgZ(0,"mat-option",45),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function La(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxFamilies_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function ka(a,s){if(1&a&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ga(a,s){1&a&&(e.TgZ(0,"mat-option",45),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ma(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxQuality_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Oa(a,s){if(1&a&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ja(a,s){1&a&&(e.TgZ(0,"mat-option",45),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ra(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxOrigin_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Qa(a,s){if(1&a&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ya(a,s){1&a&&(e.TgZ(0,"mat-option",45),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ea(a,s){if(1&a&&(e.TgZ(0,"div",46)(1,"div",47)(2,"div",3)(3,"div",48),e._uU(4),e.qZA()()(),e.TgZ(5,"div",2)(6,"div",49)(7,"h1"),e._uU(8),e.qZA()(),e.TgZ(9,"div",50),e._UZ(10,"img",51),e.TgZ(11,"h2",52),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.TgZ(14,"div",50),e._UZ(15,"img",51),e.TgZ(16,"h2",52),e._uU(17),e.ALo(18,"currency"),e.qZA()()()()),2&a){const t=s.$implicit;e.xp6(4),e.hij(" ",t.sucursalDesc," "),e.xp6(4),e.hij("",t.sumPiezas," Piezas"),e.xp6(4),e.hij("Costo Total: ",e.lcZ(13,4,t.sumCost),""),e.xp6(5),e.hij("Importe Total: ",e.lcZ(18,6,t.sumPrice),"")}}function Ha(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td",53)(2,"div",54)(3,"div",55)(4,"mat-icon",56),e._uU(5,"qr_code"),e.qZA()(),e.TgZ(6,"div",57)(7,"label",58),e._uU(8),e.qZA()()()(),e.TgZ(9,"td",53),e._uU(10),e.qZA(),e.TgZ(11,"td",59),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",59),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.TgZ(17,"td",59),e._uU(18),e.qZA(),e.TgZ(19,"td",53),e._uU(20),e.qZA(),e.TgZ(21,"td",59),e._uU(22),e.ALo(23,"currency"),e.qZA(),e.TgZ(24,"td",59),e._uU(25),e.ALo(26,"currency"),e.qZA(),e.TgZ(27,"td",53),e._uU(28),e.qZA(),e.TgZ(29,"td",53),e._uU(30),e.qZA(),e.TgZ(31,"td",53),e._uU(32),e.qZA(),e.TgZ(33,"td",53),e._uU(34),e.qZA(),e.TgZ(35,"td",53),e._uU(36),e.qZA()()),2&a){const t=s.$implicit;e.xp6(8),e.Oqu(t.barCode),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.lcZ(13,13,t.cost)),e.xp6(3),e.Oqu(e.lcZ(16,15,t.price)),e.xp6(3),e.hij("",t.catInventary," piezas"),e.xp6(2),e.Oqu(t.gramos),e.xp6(2),e.Oqu(e.lcZ(23,17,t.costoT)),e.xp6(3),e.Oqu(e.lcZ(26,19,t.importeT)),e.xp6(3),e.Oqu(t.sucursalDesc),e.xp6(2),e.Oqu(t.familyDesc),e.xp6(2),e.Oqu(t.groupDesc),e.xp6(2),e.Oqu(t.qualityDesc),e.xp6(2),e.Oqu(t.originDesc)}}function ja(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",60),e.NdJ("OPagination",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.changePagination(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}const $a=[{path:"",component:Fe,children:[{path:"dashboard",component:Ce},{path:"users",component:ue},{path:"editUser/:id",component:ue},{path:"userList",component:Qe},{path:"product",component:me},{path:"editProduct/:id",component:me},{path:"productList",component:rt},{path:"customerList",component:Dt},{path:"saleList",component:(()=>{class a{constructor(t,i,o,n,r,l,u){this.servicesGServ=t,this._adapter=i,this._locale=o,this.authServ=n,this.customersServ=r,this.salesServ=l,this.cajasServ=u,this._appMain=_.N.appMain,this.timeCBXskeyup=new _e.x,this.title="Ventas",this.bShowSpinner=!1,this.panelOpenState=!1,this.idUserLogON=0,this.saleslist=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={idSucursal:0,sucursalDesc:"",createDateStart:"",createDateEnd:"",idCustomer:0,customerDesc:"",customerResp:""},this.selectCajas={idSucursal:0,idCaja:0,cajaDesc:"",impresoraName:""},this.cbxCustomers=[]}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.timeCBXskeyup.pipe((0,he.b)(500)).subscribe(i=>{1==i.iOption&&t.cbxCustomers_Search()}),t.fn_getVentasListWithPage(),t.fn_getSelectCajaByIdUser(t.idUserLogON)})()}changePagination(t){this.pagination=t,this.fn_getVentasListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getVentasListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_getVentasListWithPage(){let t={idUser:this.idUserLogON,createDateStart:this.parametersForm.createDateStart,createDateEnd:this.parametersForm.createDateEnd,idCustomer:this.parametersForm.idCustomer};this.bShowSpinner=!0,this.salesServ.CGetVentasListWithPage(this.pagination,t).subscribe({next:i=>{this.saleslist=i.data.rows,this.pagination.length=i.data.count,this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.data),this.bShowSpinner=!1}})}fn_getSelectCajaByIdUser(t){this.cajasServ.CGetSelectCajaByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectCajas.idSucursal=i.data.idSucursal,this.selectCajas.idCaja=i.data.idCaja,this.selectCajas.cajaDesc=i.data.name,this.selectCajas.impresoraName=i.data.impresoraName):(this.selectCajas.idSucursal=0,this.selectCajas.idCaja=0,this.selectCajas.cajaDesc="",this.selectCajas.impresoraName=""),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}fn_cerrarCaja(){var i,t=this;this.selectCajas.idUser=this.idUserLogON,this.cajasServ.CDeleteSelectCaja(this.selectCajas).subscribe({next:(i=(0,f.Z)(function*(o){0===o.status&&t.fn_getSelectCajaByIdUser(t.idUserLogON),t.servicesGServ.showSnakbar(o.message),t.bShowSpinner=!1}),function(n){return i.apply(this,arguments)}),error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}})}fn_ShowSale(t){this.servicesGServ.showModalWithParams(ea,{idSale:t,selectCajas:this.selectCajas},"2000px").afterClosed().subscribe({next:o=>{this.fn_getVentasListWithPage()}})}fn_ShowSelectCaja(){this.servicesGServ.showModalWithParams(sa,{idUser:this.idUserLogON},"2000px").afterClosed().subscribe({next:i=>{this.fn_getSelectCajaByIdUser(this.idUserLogON)}})}fn_ShowCorteCajaSale(){this.servicesGServ.showModalWithParams(la,{idCaja:this.selectCajas.idCaja},"2000px").afterClosed().subscribe({next:i=>{i>0&&this.fn_cerrarCaja(),this.fn_getVentasListWithPage()}})}fn_ShowEgresos(){this.servicesGServ.showModalWithParams(fa,{idCaja:this.selectCajas.idCaja},"2000px").afterClosed().subscribe({next:i=>{this.fn_getVentasListWithPage()}})}CBXskeyup(t,i){this.timeCBXskeyup.next({iOption:t,txt:i})}cbxCustomers_Search(){this.customersServ.CCbxGetCustomersCombo(this.parametersForm.customerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxCustomers=t.data,this.parametersForm.customerResp=""):(this.cbxCustomers=[],this.parametersForm.customerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxCustomers_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.idCustomer=i.idCustomer,this.parametersForm.customerDesc=i.name}cbxCustomers_Clear(){this.parametersForm.idCustomer=0,this.parametersForm.customerDesc="",this.parametersForm.customerResp=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.$),e.Y36(h._A),e.Y36(h.Ad),e.Y36(S.e),e.Y36(Y),e.Y36(J),e.Y36(ne))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sale-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(ba,5),2&t){let o;e.iGM(o=e.CRH())&&(i.cbxCustomerCBX=o.first)}},decls:75,vars:14,consts:[[1,"divMain",3,"opened","closed"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[2,"width","100%"],["type","text","id","cbxCustomer","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxCustomerCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxCustomer","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button"],[1,"divMain",2,"width","100%"],["class","row",4,"ngIf"],["class","row top10px",4,"ngIf"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"col-md-5"],[1,"col-md-7",2,"position","relative"],["width","50","src","assets/img/icons/cajaRegistradora.gif","alt","",1,"marginRight10px",2,"display","inline-block"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],["width","50","src","assets/img/icons/printIco.gif","alt","",1,"marginRight10px",2,"display","inline-block"],[1,"textAlingCenter"],[2,"width","50px"],["class","material-icons manitaSobre colorGreen","title","Pagado",3,"click",4,"ngIf"],["class","material-icons manitaSobre colorGreen","title","Pagado",4,"ngIf"],[2,"text-align","left"],[2,"text-align","right"],[2,"width","100px"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[2,"width","150px"],["title","Pagado",1,"material-icons","manitaSobre","colorGreen",3,"click"],["title","Pagado",1,"material-icons","manitaSobre","colorGreen"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header")(3,"mat-panel-title",1),e._uU(4," Filtros de Ventas "),e.qZA()(),e.TgZ(5,"div",2)(6,"div",3)(7,"div",2)(8,"div",4)(9,"mat-form-field",5)(10,"mat-label"),e._uU(11,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(12,"mat-date-range-input",6),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(19);return e.KtG(r.open())}),e.TgZ(13,"input",7),e.NdJ("ngModelChange",function(r){return i.parametersForm.createDateStart=r}),e.qZA(),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(r){return i.parametersForm.createDateEnd=r}),e.qZA()(),e.TgZ(15,"mat-hint"),e._uU(16,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(17,"mat-datepicker-toggle",9)(18,"mat-date-range-picker",null,10),e.qZA()()(),e.TgZ(20,"div",2)(21,"div",3)(22,"mat-label"),e._uU(23,"Cliente: "),e.qZA(),e.TgZ(24,"mat-form-field",11)(25,"input",12,13),e.NdJ("ngModelChange",function(r){return i.parametersForm.customerDesc=r})("keyup",function(){e.CHM(o);const r=e.MAs(26);return e.KtG(i.CBXskeyup(1,r.value))})("click",function(){return i.cbxCustomers_Clear()}),e.qZA(),e.YNc(27,Sa,3,0,"button",14),e.TgZ(28,"mat-autocomplete",15,16),e.NdJ("optionSelected",function(r){return i.cbxCustomers_SelectedOption(r)}),e.YNc(30,Ca,2,2,"mat-option",17),e.YNc(31,va,2,1,"mat-option",18),e.qZA()()()(),e.TgZ(32,"div",19)(33,"div",3)(34,"div",20)(35,"button",21),e.NdJ("click",function(){return i.fn_getVentasListWithPage()}),e.TgZ(36,"mat-icon",22),e._uU(37,"search"),e.qZA(),e._uU(38," Buscar"),e.qZA(),e.TgZ(39,"button",23)(40,"mat-icon",22),e._uU(41,"clear"),e.qZA(),e._uU(42," limpiar"),e.qZA()()()()()()()(),e.TgZ(43,"div",24),e.YNc(44,xa,22,2,"div",25),e.YNc(45,Za,7,0,"div",26),e.TgZ(46,"div",2)(47,"div",3)(48,"div",27)(49,"div",3)(50,"div",28)(51,"table",29)(52,"thead")(53,"th",30),e._uU(54,"Acciones"),e.qZA(),e.TgZ(55,"th",30),e._uU(56,"Condici\xf3n de pago"),e.qZA(),e.TgZ(57,"th",30),e._uU(58,"Total"),e.qZA(),e.TgZ(59,"th",30),e._uU(60,"Pagado"),e.qZA(),e.TgZ(61,"th",30),e._uU(62,"Pendiente"),e.qZA(),e.TgZ(63,"th",30),e._uU(64,"Fecha"),e.qZA(),e.TgZ(65,"th",31),e._uU(66,"Descripci\xf3n"),e.qZA(),e.TgZ(67,"th",30),e._uU(68,"Cliente"),e.qZA(),e.TgZ(69,"th",30),e._uU(70,"Vendedor"),e.qZA()(),e.TgZ(71,"tbody"),e.YNc(72,ya,37,23,"tr",32),e.qZA()()(),e.YNc(73,Aa,1,1,"app-pagination",33),e.qZA()()()()(),e._UZ(74,"app-spinner",34)}if(2&t){const o=e.MAs(19),n=e.MAs(29);e.xp6(12),e.Q6J("rangePicker",o),e.xp6(1),e.Q6J("ngModel",i.parametersForm.createDateStart),e.xp6(1),e.Q6J("ngModel",i.parametersForm.createDateEnd),e.xp6(3),e.Q6J("for",o),e.xp6(8),e.Q6J("ngModel",i.parametersForm.customerDesc)("matAutocomplete",n),e.xp6(2),e.Q6J("ngIf",i.parametersForm.customerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxCustomers),e.xp6(1),e.Q6J("ngIf",i.parametersForm.customerResp.length>0),e.xp6(13),e.Q6J("ngIf",i.selectCajas.idCaja>0),e.xp6(1),e.Q6J("ngIf",0==i.selectCajas.idCaja),e.xp6(27),e.Q6J("ngForOf",i.saleslist),e.xp6(1),e.Q6J("ngIf",i.saleslist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.sg,m.O5,c.Fj,c.JJ,c.On,Z.XC,h.ey,Z.ZL,g.lW,g.RK,N.nW,N.wx,N.zY,N.By,N._g,x.pp,x.ib,x.yz,x.yK,p.KE,p.hX,p.bx,p.qo,p.R9,P.Nt,U.Hw,w.O,k,m.H9,m.uU]}),a})()},{path:"tiposDeCambio",component:Mt},{path:"repinventario",component:(()=>{class a{constructor(t,i,o,n,r,l,u,F,y,T,I){this.servicesGServ=t,this.productsServ=i,this.fb=o,this._adapter=n,this._locale=r,this.familiesServ=l,this.groupsServ=u,this.originServ=F,this.qualityServ=y,this.sucursalesServ=T,this.authServ=I,this._appMain=_.N.appMain,this.idUserLogON=0,this.title="Lista de Products",this.bShowSpinner=!1,this.catlist=[],this.inventaryBySucursalList=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm=this.fb.group({idUser:0,idSucursal:0,sucursalDesc:"",createDateStart:"",createDateEnd:"",barCode:"",name:"",idFamily:0,familyDesc:[""],idGroup:0,groupDesc:[""],idQuality:0,qualityDesc:[""],idOrigin:0,originDesc:[""]}),this.cbxFamiliesList=[],this.cbxGroupsList=[],this.cbxQualityList=[],this.cbxOriginList=[],this.cbxSucursales=[]}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getInventaryListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getInventaryListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getInventaryListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_getInventaryListWithPage(){this.catlist=[],this.inventaryBySucursalList=[],this.parametersForm.get("idUser")?.setValue(this.idUserLogON),this.bShowSpinner=!0,this.productsServ.CGetInventaryListWithPage(this.pagination,this.parametersForm.value).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1,this.fn_getInventaryBySucursal()},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_getInventaryBySucursal(){this.parametersForm.get("idUser")?.setValue(this.idUserLogON),this.productsServ.CGetInventaryBySucursal(this.parametersForm.value).subscribe({next:t=>{console.log(t),this.inventaryBySucursalList=t.data.rows},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data)}})}parametersForm_Clear(){this.parametersForm.get("createDateStart")?.setValue(""),this.parametersForm.get("createDateEnd")?.setValue(""),this.parametersForm.get("barCode")?.setValue(""),this.parametersForm.get("name")?.setValue(""),this.parametersForm.get("description")?.setValue(""),this.parametersForm.get("idFamily")?.setValue(0),this.parametersForm.get("familyDesc")?.setValue(""),this.parametersForm.get("idGroup")?.setValue(0),this.parametersForm.get("groupDesc")?.setValue(""),this.parametersForm.get("idQuality")?.setValue(0),this.parametersForm.get("qualityDesc")?.setValue(""),this.parametersForm.get("idOrigin")?.setValue(0),this.parametersForm.get("originDesc")?.setValue(""),this.parametersForm.get("idSucursal")?.setValue(0),this.parametersForm.get("sucursalDesc")?.setValue(""),this.fn_getInventaryListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editProduct`,t)}cbxFamilies_Search(){this.familiesServ.CCbxGetFamiliesCombo(this.parametersForm.value.familyDesc).subscribe({next:t=>{this.cbxFamiliesList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFamilies_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idFamily")?.setValue(i.idFamily),this.parametersForm.get("familyDesc")?.setValue(i.name)}cbxFamilies_Clear(){this.parametersForm.get("idFamily")?.setValue(0),this.parametersForm.get("familyDesc")?.setValue("")}cbxGroups_Search(){this.groupsServ.CCbxGetGroupsCombo(this.parametersForm.value.groupDesc).subscribe({next:t=>{this.cbxGroupsList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxGroups_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idGroup")?.setValue(i.idGroup),this.parametersForm.get("groupDesc")?.setValue(i.name)}cbxGroups_Clear(){this.parametersForm.get("idGroup")?.setValue(0),this.parametersForm.get("groupDesc")?.setValue("")}cbxQuality_Search(){this.qualityServ.CCbxGetQualityCombo(this.parametersForm.value.qualityDesc).subscribe({next:t=>{this.cbxQualityList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxQuality_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idQuality")?.setValue(i.idQuality),this.parametersForm.get("qualityDesc")?.setValue(i.name)}cbxQuality_Clear(){this.parametersForm.get("idQuality")?.setValue(0),this.parametersForm.get("qualityDesc")?.setValue("")}cbxOrigin_Search(){this.originServ.CCbxGetOriginCombo(this.parametersForm.value.originDesc).subscribe({next:t=>{this.cbxOriginList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxOrigin_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idOrigin")?.setValue(i.idOrigin),this.parametersForm.get("originDesc")?.setValue(i.name)}cbxOrigin_Clear(){this.parametersForm.get("idOrigin")?.setValue(0),this.parametersForm.get("originDesc")?.setValue("")}cbxSucursales_Search(){this.sucursalesServ.CCbxGetSucursalesCombo(this.parametersForm.value.sucursalDesc,this.idUserLogON).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.parametersForm.get("idSucursal")?.setValue(i.idSucursal),this.parametersForm.get("sucursalDesc")?.setValue(i.name)}cbxSucursales_Clear(){this.parametersForm.get("idSucursal")?.setValue(0),this.parametersForm.get("sucursalDesc")?.setValue("")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.$),e.Y36($),e.Y36(c.qu),e.Y36(h._A),e.Y36(h.Ad),e.Y36(X),e.Y36(ee),e.Y36(te),e.Y36(ie),e.Y36(Q),e.Y36(S.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventary"]],decls:122,vars:25,consts:[[1,"divMain",3,"opened","closed"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","sucursalDesc",2,"width","100%",3,"matAutocomplete","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top20px"],[1,"col-md-4"],["fxLayout.xs","column",1,"with100"],["matPrefix","",1,"my-icon"],["matInput","","placeholder","Ingrese un C\xf3digo de barras","formControlName","barCode"],[1,"col-md-8"],[1,"with100"],["matInput","","placeholder","Ingrese un nombre","formControlName","name"],["text","",1,"row","top20px"],[1,"col-md-3"],["type","text","id","cbxGroups","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","groupDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxGroups","matAutocomplete"],["type","text","id","cbxFamilies","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","familyDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxFamilies","matAutocomplete"],["type","text","id","cbxQuality","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","qualityDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxQuality","matAutocomplete"],["type","text","id","cbxOrigin","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","originDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxOrigin","matAutocomplete"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["mat-raised-button","","type","button",3,"click"],["class","divSection",4,"ngFor","ngForOf"],[1,"divMain",2,"width","100%","margin-top","50px !important"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"divSection"],[1,"row",2,"margin-top","-35px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-2"],[1,"col-md-5",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],[1,"textAlingLeft"],[1,"row",2,"width","150px"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[1,"col-md-10"],[2,"margin-left","10px"],[1,"textAlingRight"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header")(3,"mat-panel-title",1),e._uU(4," Filtros del inventario "),e.qZA()(),e.TgZ(5,"div",2)(6,"div",3),e._UZ(7,"br"),e.TgZ(8,"form",4)(9,"div",2)(10,"div",3)(11,"mat-label"),e._uU(12,"Sucursal: "),e.qZA(),e.TgZ(13,"mat-form-field",5),e.NdJ("click",function(){return i.cbxSucursales_Search()}),e.TgZ(14,"input",6),e.NdJ("input",function(){return i.cbxSucursales_Search()}),e.qZA(),e.YNc(15,Pa,3,0,"button",7),e.TgZ(16,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(n){return i.cbxSucursales_SelectedOption(n)}),e.YNc(18,wa,2,2,"mat-option",10),e.YNc(19,Na,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(20,"div",12)(21,"div",13)(22,"mat-form-field",14)(23,"mat-label"),e._uU(24,"C\xf3digo de barras"),e.qZA(),e.TgZ(25,"mat-icon",15),e._uU(26,"qr_code"),e.qZA(),e._UZ(27,"input",16),e.qZA()(),e.TgZ(28,"div",17)(29,"mat-form-field",18)(30,"mat-label"),e._uU(31,"Nombre"),e.qZA(),e._UZ(32,"input",19),e.qZA()()(),e.TgZ(33,"div",20)(34,"div",21)(35,"mat-label"),e._uU(36,"Grupo: "),e.qZA(),e.TgZ(37,"mat-form-field",5),e.NdJ("click",function(){return i.cbxGroups_Search()}),e.TgZ(38,"input",22),e.NdJ("input",function(){return i.cbxGroups_Search()}),e.qZA(),e.YNc(39,qa,3,0,"button",7),e.TgZ(40,"mat-autocomplete",8,23),e.NdJ("optionSelected",function(n){return i.cbxGroups_SelectedOption(n)}),e.YNc(42,Da,2,2,"mat-option",10),e.YNc(43,Ia,2,0,"mat-option",11),e.qZA()()(),e.TgZ(44,"div",21)(45,"mat-label"),e._uU(46,"Familia: "),e.qZA(),e.TgZ(47,"mat-form-field",5),e.NdJ("click",function(){return i.cbxFamilies_Search()}),e.TgZ(48,"input",24),e.NdJ("input",function(){return i.cbxFamilies_Search()}),e.qZA(),e.YNc(49,La,3,0,"button",7),e.TgZ(50,"mat-autocomplete",8,25),e.NdJ("optionSelected",function(n){return i.cbxFamilies_SelectedOption(n)}),e.YNc(52,ka,2,2,"mat-option",10),e.YNc(53,Ga,2,0,"mat-option",11),e.qZA()()(),e.TgZ(54,"div",21)(55,"mat-label"),e._uU(56,"Calidad: "),e.qZA(),e.TgZ(57,"mat-form-field",5),e.NdJ("click",function(){return i.cbxQuality_Search()}),e.TgZ(58,"input",26),e.NdJ("input",function(){return i.cbxQuality_Search()}),e.qZA(),e.YNc(59,Ma,3,0,"button",7),e.TgZ(60,"mat-autocomplete",8,27),e.NdJ("optionSelected",function(n){return i.cbxQuality_SelectedOption(n)}),e.YNc(62,Oa,2,2,"mat-option",10),e.YNc(63,Ja,2,0,"mat-option",11),e.qZA()()(),e.TgZ(64,"div",21)(65,"mat-label"),e._uU(66,"Origen: "),e.qZA(),e.TgZ(67,"mat-form-field",5),e.NdJ("click",function(){return i.cbxOrigin_Search()}),e.TgZ(68,"input",28),e.NdJ("input",function(){return i.cbxOrigin_Search()}),e.qZA(),e.YNc(69,Ra,3,0,"button",7),e.TgZ(70,"mat-autocomplete",8,29),e.NdJ("optionSelected",function(n){return i.cbxOrigin_SelectedOption(n)}),e.YNc(72,Qa,2,2,"mat-option",10),e.YNc(73,Ya,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(74,"div",30)(75,"div",3)(76,"div",31)(77,"button",32),e.NdJ("click",function(){return i.fn_getInventaryListWithPage()}),e.TgZ(78,"mat-icon",15),e._uU(79,"search"),e.qZA(),e._uU(80," Buscar"),e.qZA(),e.TgZ(81,"button",33),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(82,"mat-icon",15),e._uU(83,"clear"),e.qZA(),e._uU(84," limpiar"),e.qZA()()()()()()()()(),e.YNc(85,Ea,19,8,"div",34),e.TgZ(86,"div",35)(87,"div",12)(88,"div",3)(89,"div",36)(90,"table",37)(91,"thead")(92,"th",38),e._uU(93,"C\xf3digo de barras"),e.qZA(),e.TgZ(94,"th",38),e._uU(95,"Nombre"),e.qZA(),e.TgZ(96,"th",39),e._uU(97,"Costo"),e.qZA(),e.TgZ(98,"th",39),e._uU(99,"Precio"),e.qZA(),e.TgZ(100,"th",39),e._uU(101,"Inventario"),e.qZA(),e.TgZ(102,"th",38),e._uU(103,"Gramos"),e.qZA(),e.TgZ(104,"th",38),e._uU(105,"Costo T"),e.qZA(),e.TgZ(106,"th",38),e._uU(107,"Precio T"),e.qZA(),e.TgZ(108,"th",38),e._uU(109,"Sucursal"),e.qZA(),e.TgZ(110,"th",38),e._uU(111,"Familia"),e.qZA(),e.TgZ(112,"th",38),e._uU(113,"Grupo"),e.qZA(),e.TgZ(114,"th",38),e._uU(115,"Calidad"),e.qZA(),e.TgZ(116,"th",38),e._uU(117,"Origen"),e.qZA()(),e.TgZ(118,"tbody"),e.YNc(119,Ha,37,21,"tr",40),e.qZA()()(),e.YNc(120,ja,1,1,"app-pagination",41),e.qZA()()(),e._UZ(121,"app-spinner",42)),2&t){const o=e.MAs(17),n=e.MAs(41),r=e.MAs(51),l=e.MAs(61),u=e.MAs(71);e.xp6(8),e.Q6J("formGroup",i.parametersForm),e.xp6(6),e.Q6J("matAutocomplete",o),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.parametersForm.value.sucursalDesc),e.xp6(19),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.groupDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxGroupsList),e.xp6(1),e.Q6J("ngIf",0==i.cbxGroupsList.length&&i.parametersForm.value.groupDesc),e.xp6(5),e.Q6J("matAutocomplete",r),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.familyDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFamiliesList),e.xp6(1),e.Q6J("ngIf",0==i.cbxFamiliesList.length&&i.parametersForm.value.familyDesc),e.xp6(5),e.Q6J("matAutocomplete",l),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.qualityDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxQualityList),e.xp6(1),e.Q6J("ngIf",0==i.cbxQualityList.length&&i.parametersForm.value.qualityDesc),e.xp6(5),e.Q6J("matAutocomplete",u),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.originDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxOriginList),e.xp6(1),e.Q6J("ngIf",0==i.cbxOriginList.length&&i.parametersForm.value.originDesc),e.xp6(12),e.Q6J("ngForOf",i.inventaryBySucursalList),e.xp6(34),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,Z.XC,h.ey,Z.ZL,g.lW,g.RK,x.pp,x.ib,x.yz,x.yK,p.KE,p.hX,p.qo,p.R9,P.Nt,U.Hw,w.O,k,m.H9]}),a})()}]}];let Ba=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[D.Bz.forChild($a),D.Bz]}),a})();var Va=d(822);let Ka=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,c.UX,c.u5,Se.q,Ba,Va.K]}),a})()}}]);
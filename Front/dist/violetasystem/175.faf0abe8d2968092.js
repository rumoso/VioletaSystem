"use strict";(self.webpackChunkvioletasystem=self.webpackChunkvioletasystem||[]).push([[175],{8175:(I,m,o)=>{o.r(m),o.d(m,{AuthModule:()=>b});var d=o(6814),i=o(6223),a=o(3403),t=o(5879),c=o(4567),p=o(4857),l=o(9157),h=o(4516),v=o(617),g=o(7290);function f(n,r){1&n&&t._UZ(0,"app-spinner")}let S=(()=>{class n{constructor(e,s,u){this.fb=e,this.authServ=s,this.servicesGServ=u,this.hidePwd=!0,this.bShowSpinner=!1,this.myLogin=this.fb.group({username:["",[i.kI.required]],pwd:["",[i.kI.required]]}),this.authServ.getIdUserSession()>0?this.servicesGServ.changeRoute("/VioletaSistem/dashboard"):this.authServ.logout(!1)}fn_login(){this.myLogin.valid&&(this.bShowSpinner=!0,this.authServ.CLogin(this.myLogin.value).subscribe({next:e=>{0===e.status&&this.servicesGServ.changeRoute("/VioletaSistem/dashboard"),this.servicesGServ.showSnakbar(e.message),this.bShowSpinner=!1},error:e=>{console.log(e),this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.qu),t.Y36(c.e),t.Y36(p.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:20,vars:5,consts:[["action","","autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12"],["fxLayout.xs","column",2,"width","90%"],["matInput","","type","text","formControlName","username"],["matInput","","formControlName","pwd",3,"type"],["matSuffix","",3,"click"],["type","submit",1,"btnLogin",3,"disabled"],[4,"ngIf"]],template:function(e,s){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return s.fn_login()}),t.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Usuario:"),t.qZA(),t._UZ(6,"input",4),t.qZA()()(),t.TgZ(7,"div",1)(8,"div",2)(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"Contrase\xf1a:"),t.qZA(),t._UZ(12,"input",5),t.TgZ(13,"mat-icon",6),t.NdJ("click",function(){return s.hidePwd=!s.hidePwd}),t._uU(14),t.qZA()()()(),t.TgZ(15,"div",1)(16,"div",2)(17,"button",7),t._uU(18," Login "),t.qZA()()()(),t.YNc(19,f,1,0,"app-spinner",8)),2&e&&(t.Q6J("formGroup",s.myLogin),t.xp6(12),t.Q6J("type",s.hidePwd?"password":"text"),t.xp6(2),t.Oqu(s.hidePwd?"visibility_off":"visibility"),t.xp6(3),t.Q6J("disabled",s.myLogin.invalid),t.xp6(2),t.Q6J("ngIf",s.bShowSpinner))},dependencies:[d.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,l.KE,l.hX,l.R9,h.Nt,v.Hw,g.O]}),n})();var y=o(2651);const C=[{path:"",component:(()=>{class n{constructor(e){this.router=e}ngOnInit(){this.router.navigate(["./auth/login"])}logout(){localStorage.setItem("token",""),localStorage.setItem("user",""),localStorage.setItem("idUser",""),this.router.navigate(["./auth"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-main"]],decls:9,vars:0,consts:[["fullscreen",""],[1,"container"],[1,"loginDiv","textAlingCenter"],[1,"row"],[1,"col-md-12"],[1,"divIconUp"],["width","60","src","assets/img/icons/VioletaIcon.png","alt",""]],template:function(e,s){1&e&&(t.TgZ(0,"mat-sidenav-container",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"img",6),t.qZA()()(),t._UZ(7,"br")(8,"router-outlet"),t.qZA()()())},dependencies:[a.lC,y.TM]}),n})(),children:[{path:"login",component:S},{path:"**",redirectTo:"home"}]}];let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.Bz.forChild(C),a.Bz]}),n})();var Z=o(7361),A=o(822);let b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,i.u5,i.UX,L,Z.q,A.K]}),n})()}}]);
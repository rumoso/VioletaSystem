"use strict";(self.webpackChunkvioletasystem=self.webpackChunkvioletasystem||[]).push([[102],{102:(tl,fe,w)=>{w.r(fe),w.d(fe,{ProtectedModule:()=>Xs});var h=w(6814),m=w(6223),Ie=w(7361),J=w(3403),Z=w(5861),C=w(553),e=w(5879),A=w(4320),T=w(4567);const Me=function(a){return{"max-width.px":a}};function qe(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.changeRoute(o.linkList))}),e.TgZ(1,"div",0)(2,"div",9),e._UZ(3,"img",10),e.qZA(),e.TgZ(4,"div",11)(5,"div",0)(6,"div",1)(7,"span",12),e._uU(8),e.qZA()()(),e.TgZ(9,"div",0)(10,"div",1)(11,"label",13),e._uU(12),e.qZA()()()()()()}if(2&a){const t=r.$implicit;e.xp6(3),e.s9C("src",t.imgDash,e.LSH),e.Q6J("ngStyle",e.VKq(4,Me,t.imgDashSize)),e.xp6(5),e.Oqu(t.name),e.xp6(4),e.Oqu(t.description)}}function De(a,r){if(1&a&&(e.TgZ(0,"div")(1,"div",5)(2,"div",1)(3,"span",6),e._uU(4),e.qZA()()(),e.YNc(5,qe,13,6,"div",7),e.qZA()),2&a){const t=r.$implicit;e.xp6(4),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.subMenus)}}let Le=(()=>{class a{constructor(t,i){this.servicesGServ=t,this.authServ=i,this._appMain=C.N.appMain,this._menuList=[],this.idUserLogON=0}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t.getMenuByPermissions(t.idUserLogON)})()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}getMenuByPermissions(t){this.authServ.getMenuByPermissions(t).subscribe(i=>{0==i.status&&(this._menuList=i.data)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-dashboard"]],decls:5,vars:1,consts:[[1,"row"],[1,"col-md-12"],["id","dashboardAutomatico",1,"row"],["id","autoDashBoard",1,"col-md-12"],[4,"ngFor","ngForOf"],[1,"row","top20px"],[1,"label","label-primary"],["class","divAutoDashBoard",3,"click",4,"ngFor","ngForOf"],[1,"divAutoDashBoard",3,"click"],[1,"col-md-3"],[1,"imgDashboard",3,"ngStyle","src"],[1,"col-md-9"],[1,"label","label-success"],[1,"LabelCountInvoicingDashboard"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,De,6,2,"div",4),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i._menuList))},dependencies:[h.sg,h.PC],styles:["#autoDashBoard[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;position:relative}.divAutoDashBoard[_ngcontent-%COMP%]{display:inline-block;margin-top:20px;width:350px;height:150px;background-color:#fff;border-radius:5px;padding:30px;margin-left:1%;box-shadow:5px 5px 10px gray;transition-property:all;transition-duration:.2s;transition-timing-function:linear}.divAutoDashBoard[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:5px 5px 10px gray}.LabelCountInvoicingDashboard[_ngcontent-%COMP%]{font-size:15px;float:right}.btnDashBoard[_ngcontent-%COMP%]{border-radius:50px;transition-property:all;transition-duration:.2s;transition-timing-function:linear}.btnDashBoard[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:5px 5px 5px gray}"]}),a})();var v=w(2296),y=w(3305),P=w(617),Ce=w(1919),be=w(2651),ke=w(1274);const Oe=["sidenav"];function Je(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"mat-nav-list")(1,"a",14),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.changeRoute(o.linkList))}),e._UZ(2,"mat-icon",15),e.TgZ(3,"span"),e._uU(4),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(4),e.Oqu(t.name)}}function Ge(a,r){if(1&a&&(e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header"),e._uU(2),e.qZA(),e.YNc(3,Je,5,1,"mat-nav-list",13),e.qZA()),2&a){const t=r.$implicit;e.ekj("mat-elevation-z0",!0),e.xp6(2),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngForOf",t.subMenus)}}let Re=(()=>{class a{constructor(t,i){this.authService=t,this.servicesGServ=i,this._appMain=C.N.appMain,this._menuList=[],this.MenusList=[]}get userLogin(){return this.authService.userLogin}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authService.checkSession();var i=yield localStorage.getItem("idUser");i?.length>0||t.servicesGServ.changeRoute("/"),yield t.getMenuByPermissions(i)})()}changeRoute(t){this.sidenav.toggle(),this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}logout(){this.authService.logout(!0)}getMenuByPermissions(t){this.authService.getMenuByPermissions(t).subscribe(i=>{0==i.status&&(this._menuList=i.data)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(T.e),e.Y36(A.$))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-main"]],viewQuery:function(t,i){if(1&t&&e.Gf(Oe,5),2&t){let n;e.iGM(n=e.CRH())&&(i.sidenav=n.first)}},decls:29,vars:2,consts:[["fullscreen",""],["mode","push"],["sidenav",""],[1,"spacer"],["mat-icon-button","",3,"click"],[3,"mat-elevation-z0",4,"ngFor","ngForOf"],["id","headerApp"],["width","60","src","assets/img/icons/VioletaIcon.png","alt","","routerLink","./dashboard",1,"manitaSobre"],["routerLink","./dashboard",1,"manitaSobre"],["src","assets/img/icons/connectUser.gif",1,"imgDashboard",2,"width","50px !important"],["mat-button","",3,"click"],["mat-list-icon",""],[1,"container",2,"margin-bottom","50px"],[4,"ngFor","ngForOf"],["mat-list-item","",3,"click"],["aria-hidden","false","aria-label","Example home icon","fontIcon","user"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"mat-toolbar")(4,"span"),e._uU(5,"Men\xfa"),e.qZA(),e._UZ(6,"span",3),e.TgZ(7,"button",4),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(2);return e.KtG(l.toggle())}),e.TgZ(8,"mat-icon"),e._uU(9,"menu"),e.qZA()()(),e.YNc(10,Ge,4,4,"mat-expansion-panel",5),e.qZA(),e.TgZ(11,"mat-toolbar",6)(12,"button",4),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(2);return e.KtG(l.toggle())}),e.TgZ(13,"mat-icon"),e._uU(14,"menu"),e.qZA()(),e._UZ(15,"img",7),e.TgZ(16,"h1",8),e._uU(17,"VioletaSistem"),e.qZA(),e._UZ(18,"span",3)(19,"span",3)(20,"img",9),e.TgZ(21,"span"),e._uU(22),e.qZA(),e.TgZ(23,"button",10),e.NdJ("click",function(){return i.logout()}),e.TgZ(24,"mat-icon",11),e._uU(25,"logout"),e.qZA(),e._uU(26," Logout "),e.qZA()(),e.TgZ(27,"div",12),e._UZ(28,"router-outlet"),e.qZA()()}2&t&&(e.xp6(10),e.Q6J("ngForOf",i._menuList),e.xp6(12),e.Oqu(i.userLogin.name))},dependencies:[h.sg,v.lW,v.RK,y.ib,y.yz,P.Hw,Ce.Hk,Ce.Tg,be.JX,be.TM,ke.Ye,J.lC,J.rH]}),a})();var f=w(3680),pe=w(4664),F=w(7700),q=w(9862);let K=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/actions"}CGetActionListWithPage(t){return this.http.post(`${this.baseURL}/${this._api}/getActionListWithPage`,{search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CInsertAction(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertAction`,t)}CDisabledActions(t){const i={idAction:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledActions`,i)}CGetActionsForAddUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/getActionsForAddUser`,{search:t,idUser:i})}CGetActionByUserListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getActionByUserListWithPage`,{idUser:t,search:i.search,start:i.pageIndex*i.pageSize,limiter:i.pageSize})}CInsertActionByIdUser(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertActionByIdUser`,t)}CDisabledActionByRelation(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledActionByRelation`,t)}CGetAllActionsByPermission(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getAllActionsByPermission`,t)}CInsertActionsPermisionsByIdRelation(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertActionsPermisionsByIdRelation`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var L=w(5986),d=w(9157),N=w(4516),Q=w(6263),U=w(7290),Se=w(1476);let D=(()=>{class a{constructor(t){this.paginator=t,this.OPagination=new e.vpe,this.pagination={search:"",length:0,pageSize:5,pageIndex:0,pageSizeOptions:[5,10,25,100]}}emitPagination(t){this.pagination.length=t.length,this.pagination.pageSize=t.pageSize,this.pagination.pageIndex=t.pageIndex,this.OPagination.emit(this.pagination)}ngOnInit(){this.paginator.itemsPerPageLabel="Registros por p\xe1gina",this.paginator.nextPageLabel="Siguiente p\xe1gina",this.paginator.previousPageLabel="P\xe1gina anterior",this.paginator.firstPageLabel="Primera P\xe1gina",this.paginator.lastPageLabel="\xdaltima P\xe1gina",this.pagination=this.IPagination}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Se.ye))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-pagination"]],inputs:{IPagination:"IPagination"},outputs:{OPagination:"OPagination"},decls:1,vars:5,consts:[["aria-label","",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-paginator",0),e.NdJ("page",function(o){return i.emitPagination(o)}),e.qZA()),2&t&&e.Q6J("length",i.pagination.length)("pageSize",i.pagination.pageSize)("pageIndex",i.pagination.pageIndex)("pageSizeOptions",i.pagination.pageSizeOptions)("showFirstLastButtons",!0)},dependencies:[Se.NW]}),a})();const Ee=["cbxName"],Qe=["tbxDesc"];function Ye(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_disabledAction(n.idAction))}),e._uU(1," delete_outline "),e.qZA()}}function je(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",20)(2,"div",25),e.YNc(3,Ye,2,0,"span",26),e.qZA()(),e.TgZ(4,"td",21),e._uU(5),e.qZA(),e.TgZ(6,"td",21),e._uU(7),e.qZA(),e.TgZ(8,"td",20)(9,"div",1)(10,"div",11)(11,"mat-icon",27),e._uU(12,"calendar_today"),e.qZA(),e.TgZ(13,"label",28),e._uU(14),e.ALo(15,"date"),e.qZA()()()(),e.TgZ(16,"td",20)(17,"mat-checkbox",29),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(3),e.Q6J("ngIf",t.active),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(7),e.Oqu(e.xi3(15,5,t.createDate,"dd-MM-yyyy h:mm:ss a")),e.xp6(3),e.Q6J("ngModel",t.active)}}function He(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",31),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let ze=(()=>{class a{constructor(t,i,n,o,l,p,_){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.authServ=p,this.actionsServ=_,this._appMain=C.N.appMain,this.title="Tipos de cambio",this.bShowSpinner=!1,this.idUserLogON=0,this.actionForm={name:"",description:""},this.actionList=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getActionListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getActionListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getActionListWithPage()}fn_insertAction(){this.actionForm.name.length>0&&this.actionForm.description.length>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de agregar una acci\xf3n","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.actionsServ.CInsertAction(this.actionForm).subscribe({next:i=>{this.servicesGServ.showAlertIA(i),this.bShowSpinner=!1,this.event_clear()},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_getActionListWithPage(){this.bShowSpinner=!0,this.actionsServ.CGetActionListWithPage(this.pagination).subscribe({next:t=>{this.actionList=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_disabledAction(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deshabilitar la acci\xf3n","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.actionsServ.CDisabledActions(t).subscribe({next:n=>{this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1,this.fn_getActionListWithPage()},error:n=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}event_clear(){this.actionForm.name="",this.actionForm.description="",this.fn_getActionListWithPage()}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}fn_CerrarMDL(){this.dialogRef.close(!1)}ev_fn_name_keyup_enter(t){13==t.keyCode&&this.nextInputFocus(this.tbxDesc,0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-actions"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ee,5),e.Gf(Qe,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.cbxName=n.first),e.iGM(n=e.CRH())&&(i.tbxDesc=n.first)}},decls:46,vars:5,consts:[[2,"padding","30px"],[1,"row"],[1,"col-md-5"],[1,"with100"],["matInput","","placeholder","Ingrese el nombre","type","text",3,"ngModel","ngModelChange","keyup"],["tbxName",""],[1,"col-md-7"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese una descripci\xf3n",3,"ngModel","ngModelChange"],["tbxDesc",""],[1,"row","top10px"],[1,"col-md-12"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["mat-raised-button","","type","button",3,"click"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter"],[1,"textAlingLeft"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[2,"width","80px"],["class","material-icons manitaSobre colorRed",3,"click",4,"ngIf"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[1,"example-margin",3,"ngModel","ngModelChange"],[1,"material-icons","manitaSobre","colorRed",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Nombre: "),e.qZA(),e.TgZ(6,"input",4,5),e.NdJ("ngModelChange",function(o){return i.actionForm.name=o})("keyup",function(o){return i.ev_fn_name_keyup_enter(o)}),e.qZA()()(),e.TgZ(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Descripci\xf3n"),e.qZA(),e.TgZ(12,"textarea",8,9),e.NdJ("ngModelChange",function(o){return i.actionForm.description=o}),e.qZA()()()(),e.TgZ(14,"div",10)(15,"div",11)(16,"div",12)(17,"button",13),e.NdJ("click",function(){return i.fn_insertAction()}),e.TgZ(18,"mat-icon",14),e._uU(19,"save"),e.qZA(),e._uU(20," Guardar"),e.qZA(),e.TgZ(21,"button",15),e.NdJ("click",function(){return i.event_clear()}),e._uU(22,"Limpiar"),e.qZA(),e.TgZ(23,"button",16),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(24,"mat-icon",14),e._uU(25,"close"),e.qZA(),e._uU(26," Cerrar"),e.qZA()()()(),e.TgZ(27,"div",17)(28,"div",11)(29,"div",18)(30,"table",19)(31,"thead")(32,"th",20),e._uU(33,"Acciones"),e.qZA(),e.TgZ(34,"th",21),e._uU(35,"Nombre"),e.qZA(),e.TgZ(36,"th",21),e._uU(37,"Descripci\xf3n"),e.qZA(),e.TgZ(38,"th",20),e._uU(39,"Creado"),e.qZA(),e.TgZ(40,"th",20),e._uU(41,"Active"),e.qZA()(),e.TgZ(42,"tbody"),e.YNc(43,je,18,8,"tr",22),e.qZA()()(),e.YNc(44,He,1,1,"app-pagination",23),e.qZA()()(),e._UZ(45,"app-spinner",24)),2&t&&(e.xp6(6),e.Q6J("ngModel",i.actionForm.name),e.xp6(6),e.Q6J("ngModel",i.actionForm.description),e.xp6(31),e.Q6J("ngForOf",i.actionList),e.xp6(1),e.Q6J("ngIf",i.actionList),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,v.lW,L.oG,d.KE,d.hX,d.qo,N.Nt,Q.IC,P.Hw,U.O,D,h.uU]}),a})(),B=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/users"}CGetUsersListWithPage(t){return this.http.post(`${this.baseURL}/${this._api}/getUsersListWithPage`,{search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CGetUserByID(t){return this.http.post(`${this.baseURL}/${this._api}/getUserByID`,{idUser:t})}CInsertUser(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertUser`,t)}CUpdateUser(t){return this.http.post(`${this.baseURL}/${this._api}/updateUser`,t)}CChangePassword(t){return this.http.post(`${this.baseURL}/${this._api}/changePassword`,t)}CDisabledUser(t){return this.http.post(`${this.baseURL}/${this._api}/disabledUser`,{idUser:t})}CCbxGetSellersCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetSellersCombo`,{idUser:i,search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ue=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/roles"}CGetRolesForAddUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/getRolesForAddUser`,{search:t,idUser:i})}CGetRolesByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/getRolesByIdUser`,{idUser:t})}CInsertRolByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/insertRolByIdUser`,t)}CDeleteRolByIdUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/deleteRolByIdUser`,{idUser:t,idRol:i})}CGetRolesListWithPage(t){return this.http.post(`${this.baseURL}/${this._api}/getRolesListWithPage`,{search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CInsertRol(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertRol`,t)}CUpdateRol(t){return this.http.post(`${this.baseURL}/${this._api}/updateRol`,t)}CGetRolByID(t){return this.http.post(`${this.baseURL}/${this._api}/getRolByID`,{idRol:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),W=(()=>{class a{constructor(t){this.http=t,this.baseURL=C.N.baseUrl,this._api="api/sucursales"}CGetSucursalesForAddUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/getSucursalesForAddUser`,{search:t,idUser:i})}CGetSucursalesByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/getSucursalesByIdUser`,{idUser:t})}CCbxGetSucursalesCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetSucursalesCombo`,{idUser:i,search:t})}CInsertSucursalByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/insertSucursalByIdUser`,t)}CDeleteSucursalByIdUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/deleteSucursalByIdUser`,{idUser:t,idSucursal:i})}CGetPrintTicketSuc(t,i){var n=this;return(0,Z.Z)(function*(){var o={idSucursal:t,type:i};return new Promise((l,p)=>{n.http.post(`${n.baseURL}/${n._api}/getPrintTicketSuc`,o).subscribe({next:_=>{l(_.data)},error:_=>{p(_)}})})})()}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var I=w(6381),O=w(2596);function $e(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",6)(1,"mat-form-field",4)(2,"mat-label"),e._uU(3,"Contrase\xf1a:"),e.qZA(),e.TgZ(4,"input",17),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.userForm.pwd=n)}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.userForm.pwd)}}function Be(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function We(a,r){if(1&a&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ke(a,r){1&a&&(e.TgZ(0,"mat-option",37),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ve(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",38)(2,"div",39)(3,"span",40),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.fn_deleteSucursalByIdUser(o.idSucursal))}),e._uU(4," delete_outline "),e.qZA()()(),e.TgZ(5,"td",41),e._uU(6),e.qZA(),e.TgZ(7,"td",38),e._uU(8),e.ALo(9,"date"),e.qZA()()}if(2&a){const t=r.$implicit;e.xp6(6),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(9,2,t.createDate,"dd-MM-yyyy h:mm:ss a"))}}function Xe(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"div",1),e._uU(3," Sucursales "),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",18),e._UZ(7,"br"),e.TgZ(8,"form",19)(9,"div",2)(10,"div",20)(11,"mat-label"),e._uU(12,"Sucursal: "),e.qZA(),e.TgZ(13,"mat-form-field",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSucursales_Search())}),e.TgZ(14,"input",22),e.NdJ("input",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSucursales_Search())}),e.qZA(),e.YNc(15,Be,3,0,"button",23),e.TgZ(16,"mat-autocomplete",24,25),e.NdJ("optionSelected",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSucursales_SelectedOption(n))}),e.YNc(18,We,2,2,"mat-option",26),e.YNc(19,Ke,2,0,"mat-option",27),e.qZA()()(),e.TgZ(20,"div",20)(21,"div",28)(22,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_insertSucursalByIdUser())}),e._uU(23,"Agregar sucursal"),e.qZA()()()()()()()(),e.TgZ(24,"div",29)(25,"div",3)(26,"div",30)(27,"table",31)(28,"thead")(29,"th",32),e._uU(30,"Acciones"),e.qZA(),e.TgZ(31,"th",33),e._uU(32,"Sucursal"),e.qZA(),e.TgZ(33,"th",32),e._uU(34,"Creado"),e.qZA()(),e.TgZ(35,"tbody"),e.YNc(36,Ve,10,5,"tr",34),e.qZA()()()()()()()}if(2&a){const t=e.MAs(17),i=e.oxw();e.xp6(8),e.Q6J("formGroup",i.addSucursalForm),e.xp6(6),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("ngIf",i.addSucursalForm.value.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.addSucursalForm.value.sucursalDesc),e.xp6(3),e.Q6J("disabled",i.addSucursalForm.invalid),e.xp6(14),e.Q6J("ngForOf",i.sucursalesByUserList)}}function et(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.cbxRolClear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function tt(a,r){if(1&a&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function it(a,r){1&a&&(e.TgZ(0,"mat-option",37),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function nt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",38)(2,"div",39)(3,"span",40),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.fn_deleteRolByIdUser(o.idRol))}),e._uU(4," delete_outline "),e.qZA()()(),e.TgZ(5,"td",41),e._uU(6),e.qZA(),e.TgZ(7,"td",38),e._uU(8),e.ALo(9,"date"),e.qZA()()}if(2&a){const t=r.$implicit;e.xp6(6),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(9,2,t.createDate,"dd-MM-yyyy"))}}function at(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"div",1),e._uU(3," Roles del usuario "),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",18),e._UZ(7,"br"),e.TgZ(8,"form",19)(9,"div",2)(10,"div",20)(11,"mat-label"),e._uU(12,"Rol: "),e.qZA(),e.TgZ(13,"mat-form-field",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSearchRol())}),e.TgZ(14,"input",42),e.NdJ("input",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSearchRol())}),e.qZA(),e.YNc(15,et,3,0,"button",23),e.TgZ(16,"mat-autocomplete",24,43),e.NdJ("optionSelected",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxSelectedOptionRol(n))}),e.YNc(18,tt,2,2,"mat-option",26),e.YNc(19,it,2,0,"mat-option",27),e.qZA()()(),e.TgZ(20,"div",20)(21,"div",28)(22,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_insertRolByIdUser())}),e._uU(23,"Agregar rol"),e.qZA()()()()()()()(),e.TgZ(24,"div",29)(25,"div",3)(26,"div",30)(27,"table",31)(28,"thead")(29,"th",32),e._uU(30,"Acciones"),e.qZA(),e.TgZ(31,"th",33),e._uU(32,"Rol"),e.qZA(),e.TgZ(33,"th",32),e._uU(34,"Creado"),e.qZA()(),e.TgZ(35,"tbody"),e.YNc(36,nt,10,5,"tr",34),e.qZA()()()()()()()}if(2&a){const t=e.MAs(17),i=e.oxw();e.xp6(8),e.Q6J("formGroup",i.addRoleForm),e.xp6(6),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("ngIf",i.addRoleForm.value.roleDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxRoles),e.xp6(1),e.Q6J("ngIf",0==i.cbxRoles.length&&i.addRoleForm.value.roleDesc),e.xp6(3),e.Q6J("disabled",i.addRoleForm.invalid),e.xp6(14),e.Q6J("ngForOf",i.rolesByUserList)}}function ot(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"div",1),e._uU(3," Cambio de contrase\xf1a "),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",38),e._UZ(7,"br"),e.TgZ(8,"form",19)(9,"div",2)(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),e._uU(13,"Contrase\xf1a:"),e.qZA(),e._UZ(14,"input",44),e.TgZ(15,"mat-icon",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.hidePwd=!n.hidePwd)}),e._uU(16),e.qZA()()()(),e.TgZ(17,"div",2)(18,"div",3)(19,"mat-form-field",4)(20,"mat-label"),e._uU(21,"Verificar contrase\xf1a:"),e.qZA(),e._UZ(22,"input",46),e.TgZ(23,"mat-icon",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.hidePwd2=!n.hidePwd2)}),e._uU(24),e.qZA()()()(),e.TgZ(25,"div",11)(26,"div",3)(27,"div",12)(28,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_changePassword())}),e._uU(29,"Guardar"),e.qZA()()()()()()()()()()}if(2&a){const t=e.oxw();e.xp6(8),e.Q6J("formGroup",t.changePwdForm),e.xp6(6),e.Q6J("type",t.hidePwd?"password":"text"),e.xp6(2),e.Oqu(t.hidePwd?"visibility_off":"visibility"),e.xp6(6),e.Q6J("type",t.hidePwd2?"password":"text"),e.xp6(2),e.Oqu(t.hidePwd2?"visibility_off":"visibility"),e.xp6(4),e.Q6J("disabled",t.changePwdForm.invalid)}}let ve=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u,s,S){this.fb=t,this.router=i,this.activatedRoute=n,this.servicesGServ=o,this._adapter=l,this._locale=p,this.usersServ=_,this.rolesServ=g,this.sucursalesServ=u,this.actionsServ=s,this.authServ=S,this._appMain=C.N.appMain,this.hidePwd=!0,this.hidePwd2=!0,this.title="Usuario",this.bShowSpinner=!1,this.idUser=0,this.rolesByUserList=[],this.sucursalesByUserList=[],this.showPwd2=!1,this.userForm={idUser:0,name:"",userName:"",pwd:"",authorizationCode:"",comision:0,active:!0},this.addRoleForm=this.fb.group({idUser:[0,[m.kI.required,m.kI.pattern(/^[1-9]\d*$/)]],idRol:[0,[m.kI.required,m.kI.pattern(/^[1-9]\d*$/)]],roleDesc:[""]}),this.addSucursalForm=this.fb.group({idUser:[0,[m.kI.required,m.kI.pattern(/^[1-9]\d*$/)]],idSucursal:[0,[m.kI.required,m.kI.pattern(/^[1-9]\d*$/)]],sucursalDesc:[""]}),this.changePwdForm=this.fb.group({idUser:[0,[m.kI.required,m.kI.pattern(/^[1-9]\d*$/)]],pwd:["",m.kI.compose([m.kI.required,m.kI.minLength(6),m.kI.pattern(/(?=.*[0-9])/),m.kI.pattern(/(?=.*[A-Z])/),m.kI.pattern(/(?=.*[a-z])/),m.kI.pattern(/(?=.*[-_.,$@^!%*?&])/)])],pwd2:["",m.kI.compose([m.kI.required,m.kI.minLength(6),m.kI.pattern(/(?=.*[0-9])/),m.kI.pattern(/(?=.*[A-Z])/),m.kI.pattern(/(?=.*[a-z])/),m.kI.pattern(/(?=.*[-_.,$@^!%*?&])/)])]}),this.ActionsByUserList=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.cbxRoles=[],this.cbxSucursales=[]}ngOnInit(){this.authServ.checkSession(),this._locale="mx",this._adapter.setLocale(this._locale),this.router.url.includes("editUser")&&(this.bShowSpinner=!0,this.activatedRoute.params.pipe((0,pe.w)(({id:t})=>this.usersServ.CGetUserByID(t))).subscribe(t=>{console.log(t),0==t.status?(this.idUser=t.data.idUser,this.userForm.idUser=t.data.idUser,this.addRoleForm.get("idUser")?.setValue(t.data.idUser),this.addSucursalForm.get("idUser")?.setValue(t.data.idUser),this.changePwdForm.get("idUser")?.setValue(t.data.idUser),this.userForm={idUser:t.data.idUser,name:t.data.name,userName:t.data.userName,pwd:"",authorizationCode:t.data.authorizationCode,comision:t.data.comision,active:t.data.active},this.fn_getRolesByIdUser(),this.fn_getSucursalesByIdUser()):this.servicesGServ.showSnakbar(t.message),this.bShowSpinner=!1}))}fn_validFormPrincipal(){var t=!1;return this.userForm.name.length>0&&this.userForm.userName.length>0&&(t=!0),t}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}hasPermissionAction(t){return this.authServ.hasPermissionAction(t)}fn_saveUser(){this.bShowSpinner=!0,this.idUser>0?this.usersServ.CUpdateUser(this.userForm).subscribe({next:t=>{this.servicesGServ.showAlertIA(t),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}):this.usersServ.CInsertUser(this.userForm).subscribe({next:t=>{0===t.status&&(this.idUser=t.insertID,this.userForm.idUser=t.insertID,this.addRoleForm.get("idUser")?.setValue(t.insertID),this.addSucursalForm.get("idUser")?.setValue(t.insertID),this.changePwdForm.get("idUser")?.setValue(t.insertID)),this.servicesGServ.showAlertIA(t),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}fn_getRolesByIdUser(){this.rolesServ.CGetRolesByIdUser(this.idUser).subscribe({next:t=>{this.rolesByUserList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio")}})}fn_insertRolByIdUser(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de asignar este rol","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.rolesServ.CInsertRolByIdUser(this.addRoleForm.value).subscribe({next:i=>{this.servicesGServ.showAlertIA(i),this.bShowSpinner=!1,this.addRoleForm.get("idRol")?.setValue(0),this.addRoleForm.get("roleDesc")?.setValue(""),this.fn_getRolesByIdUser()},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_deleteRolByIdUser(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de borrar la asignaci\xf3n del rol","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.rolesServ.CDeleteRolByIdUser(this.idUser,t).subscribe({next:n=>{this.fn_getRolesByIdUser(),this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}}))}})}fn_insertSucursalByIdUser(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de asignar esta sucursal","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.sucursalesServ.CInsertSucursalByIdUser(this.addSucursalForm.value).subscribe({next:i=>{this.bShowSpinner=!1,this.addSucursalForm.get("idSucursal")?.setValue(0),this.addSucursalForm.get("sucursalDesc")?.setValue(""),this.fn_getSucursalesByIdUser(),this.servicesGServ.showAlertIA(i)},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_deleteSucursalByIdUser(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de borrar la asignaci\xf3n de la sucursal","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.sucursalesServ.CDeleteSucursalByIdUser(this.idUser,t).subscribe({next:n=>{0===n.status&&this.fn_getSucursalesByIdUser(),this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}}))}})}fn_getSucursalesByIdUser(){this.sucursalesServ.CGetSucursalesByIdUser(this.idUser).subscribe({next:t=>{this.sucursalesByUserList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio")}})}fn_changePassword(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de cambiar la contrase\xf1a","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.usersServ.CChangePassword(this.changePwdForm.value).subscribe({next:i=>{0===i.status&&(this.changePwdForm.get("pwd")?.setValue(""),this.changePwdForm.get("pwd2")?.setValue("")),this.servicesGServ.showSnakbar(i.message),this.bShowSpinner=!1},error:i=>{console.log(i),this.servicesGServ.showSnakbar(i.error.data),this.bShowSpinner=!1}}))}})}showActionsCat(t){this.servicesGServ.showModalWithParams(ze,null,"1500px").afterClosed().subscribe({next:i=>{}})}cbxSearchRol(){this.rolesServ.CGetRolesForAddUser(this.addRoleForm.value.roleDesc,this.idUser).subscribe({next:t=>{this.cbxRoles=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSelectedOptionRol(t){if(!t.option.value)return;const i=t.option.value;this.addRoleForm.get("idRol")?.setValue(i.idRol),this.addRoleForm.get("roleDesc")?.setValue(i.name)}cbxRolClear(){this.addRoleForm.get("idRol")?.setValue(0),this.addRoleForm.get("roleDesc")?.setValue("")}cbxSucursales_Search(){this.sucursalesServ.CGetSucursalesForAddUser(this.addSucursalForm.value.sucursalDesc,this.idUser).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.addSucursalForm.get("idSucursal")?.setValue(i.idSucursal),this.addSucursalForm.get("sucursalDesc")?.setValue(i.name)}cbxSucursales_Clear(){this.addSucursalForm.get("idSucursal")?.setValue(0),this.addSucursalForm.get("sucursalDesc")?.setValue("")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.qu),e.Y36(J.F0),e.Y36(J.gz),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(B),e.Y36(ue),e.Y36(W),e.Y36(K),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user"]],decls:45,vars:14,consts:[[1,"divMain","textAlingCenter",2,"padding","30px"],[1,"divTitle-center"],[1,"row"],[1,"col-md-12"],["fxLayout.xs","column",2,"width","100%"],["matInput","","type","text",3,"ngModel","ngModelChange"],[1,"col-md-6"],["class","col-md-6",4,"ngIf"],["matInput","","type","number",3,"ngModel","ngModelChange"],[1,"col-md-1"],[1,"example-margin",3,"ngModel","disabled","ngModelChange"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["mat-raised-button","","type","button",3,"click"],[4,"ngIf"],[3,"hidden"],["matInput","","type","password",3,"ngModel","ngModelChange"],[1,""],["action","","autocomplete","off",3,"formGroup"],[1,"col-md-4"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","sucursalDesc",2,"width","100%",3,"matAutocomplete","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[2,"float","left","margin-top","30px"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Eliminar Paciente",1,"material-icons","manitaSobre","colorRed",3,"click"],[1,"textAlingLeft"],["type","text","id","cbxRol","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","roleDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxRol","matAutocomplete"],["matInput","","formControlName","pwd",3,"type"],["matSuffix","",3,"click"],["matInput","","formControlName","pwd2",3,"type"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e._UZ(5,"br"),e.TgZ(6,"div",2)(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),e._uU(10,"Nombre:"),e.qZA(),e.TgZ(11,"input",5),e.NdJ("ngModelChange",function(o){return i.userForm.name=o}),e.qZA()()()(),e.TgZ(12,"div",2)(13,"div",6)(14,"mat-form-field",4)(15,"mat-label"),e._uU(16,"Usuario:"),e.qZA(),e.TgZ(17,"input",5),e.NdJ("ngModelChange",function(o){return i.userForm.userName=o}),e.qZA()()(),e.YNc(18,$e,5,1,"div",7),e.qZA(),e.TgZ(19,"div",2)(20,"div",6)(21,"mat-form-field",4)(22,"mat-label"),e._uU(23,"C\xf3digo de autorizaci\xf3n:"),e.qZA(),e.TgZ(24,"input",5),e.NdJ("ngModelChange",function(o){return i.userForm.authorizationCode=o}),e.qZA()()(),e.TgZ(25,"div",6)(26,"mat-form-field",4)(27,"mat-label"),e._uU(28,"% de Comisi\xf3n sobre utilidad:"),e.qZA(),e.TgZ(29,"input",8),e.NdJ("ngModelChange",function(o){return i.userForm.comision=o}),e.qZA()()()(),e.TgZ(30,"div",2)(31,"div",9)(32,"mat-checkbox",10),e.NdJ("ngModelChange",function(o){return i.userForm.active=o}),e._uU(33,"Activo"),e.qZA()()(),e.TgZ(34,"div",11)(35,"div",3)(36,"div",12)(37,"button",13),e.NdJ("click",function(){return i.fn_saveUser()}),e._uU(38,"Guardar"),e.qZA(),e.TgZ(39,"button",14),e.NdJ("click",function(){return i.changeRoute("userList")}),e._uU(40,"Cancelar"),e.qZA()()()()()()(),e.YNc(41,Xe,37,7,"div",15),e.YNc(42,at,37,7,"div",15),e.YNc(43,ot,30,6,"div",15),e._UZ(44,"app-spinner",16)),2&t&&(e.xp6(2),e.AsE(" ",i.idUser?"Editar":"Nuevo"," ",i.title," "),e.xp6(9),e.Q6J("ngModel",i.userForm.name),e.xp6(6),e.Q6J("ngModel",i.userForm.userName),e.xp6(1),e.Q6J("ngIf",0==i.idUser),e.xp6(6),e.Q6J("ngModel",i.userForm.authorizationCode),e.xp6(5),e.Q6J("ngModel",i.userForm.comision),e.xp6(3),e.Q6J("ngModel",i.userForm.active)("disabled",!i.hasPermissionAction("users_Disable")),e.xp6(5),e.Q6J("disabled",!i.fn_validFormPrincipal()),e.xp6(4),e.Q6J("ngIf",i.idUser>0),e.xp6(1),e.Q6J("ngIf",i.idUser>0),e.xp6(1),e.Q6J("ngIf",i.idUser>0),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.sg,m.u,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,L.oG,d.KE,d.hX,d.R9,N.Nt,P.Hw,O.gM,U.O,h.uU]}),a})();function rt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"mat-checkbox",14),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.bPermissionAction=n)}),e._uU(3),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(2),e.Q6J("value",t.idAction)("ngModel",t.bPermissionAction)("matTooltip",t.description),e.xp6(1),e.Oqu(t.nameHtml)}}function st(a,r){1&a&&e._UZ(0,"div",15)}function lt(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"div",10)(2,"div",1)(3,"div",2)(4,"div",11),e._uU(5),e.qZA()()(),e.YNc(6,rt,4,4,"div",12),e.qZA(),e.YNc(7,st,1,0,"div",13),e.BQk()),2&a){const t=r.$implicit,i=r.index;e.xp6(5),e.Oqu(t.sectionName),e.xp6(1),e.Q6J("ngForOf",t.actions),e.xp6(1),e.Q6J("ngIf",i%2==1)}}let xe=(()=>{class a{constructor(t,i,n,o,l){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this.actionsServ=o,this.authService=l,this.title="Rol",this.bShowSpinner=!1,this.idRelation=0,this.seccionesYPermisos=[]}ngOnInit(){this.authService.checkSession(),this.fn_getAllActionsByPermission()}fn_getAllActionsByPermission(){this.bShowSpinner=!0,this.actionsServ.CGetAllActionsByPermission({relationType:this.ODataP.relationType,idRelation:this.ODataP.idRelation}).subscribe({next:i=>{this.seccionesYPermisos=i.data,console.log(this.seccionesYPermisos),this.bShowSpinner=!1},error:i=>{console.log(i.error.errors[0].msg),this.servicesGServ.showSnakbar(i.error.errors[0].msg),this.bShowSpinner=!1}})}fn_insertActionsPermisionsByIdRelation(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de asignar estos permisos","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.actionsServ.CInsertActionsPermisionsByIdRelation({relationType:this.ODataP.relationType,idRelation:this.ODataP.idRelation,seccionesYPermisos:this.seccionesYPermisos}).subscribe({next:n=>{this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}getSelectedPermission(){console.log("Permisos seleccionados:",this.seccionesYPermisos)}fn_CerrarMDL(){this.dialogRef.close(!1)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(K),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-actionsconf"]],decls:33,vars:3,consts:[[1,"",2,"padding","30px"],[1,"row"],[1,"col-md-12"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"col-md-6"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],["class","row",4,"ngFor","ngForOf"],["class","clearfix",4,"ngIf"],["matTooltipPosition","above",1,"example-margin",3,"value","ngModel","matTooltip","ngModelChange"],[1,"clearfix"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4),e.qZA()()(),e.TgZ(5,"div",3)(6,"div",2)(7,"div",4)(8,"button",5),e.NdJ("click",function(){return i.fn_insertActionsPermisionsByIdRelation()}),e.TgZ(9,"mat-icon",6),e._uU(10,"save"),e.qZA(),e._uU(11," Guardar"),e.qZA(),e.TgZ(12,"button",7),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(13,"mat-icon",6),e._uU(14,"close"),e.qZA(),e._uU(15," Cerrar"),e.qZA()()()(),e.TgZ(16,"div",1)(17,"div",2),e._UZ(18,"br"),e.TgZ(19,"div",1),e.YNc(20,lt,8,3,"ng-container",8),e.qZA()()(),e.TgZ(21,"div",3)(22,"div",2)(23,"div",4)(24,"button",5),e.NdJ("click",function(){return i.fn_insertActionsPermisionsByIdRelation()}),e.TgZ(25,"mat-icon",6),e._uU(26,"save"),e.qZA(),e._uU(27," Guardar"),e.qZA(),e.TgZ(28,"button",7),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(29,"mat-icon",6),e._uU(30,"close"),e.qZA(),e._uU(31," Cerrar"),e.qZA()()()()(),e._UZ(32,"app-spinner",9)),2&t&&(e.xp6(4),e.Oqu(i.ODataP.description),e.xp6(16),e.Q6J("ngForOf",i.seccionesYPermisos),e.xp6(12),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.JJ,m.On,v.lW,L.oG,d.qo,P.Hw,O.gM,U.O]}),a})();const ct=function(a){return{"max-width.px":a}};function pt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",1)(2,"div",16),e._UZ(3,"img",17),e.qZA(),e.TgZ(4,"div",18)(5,"div",1)(6,"div",2)(7,"mat-checkbox",19),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.bPermissionMenu=n)}),e._uU(8),e.qZA()()()()()()}if(2&a){const t=r.$implicit;e.xp6(3),e.s9C("src",t.imgDash,e.LSH),e.Q6J("ngStyle",e.VKq(5,ct,t.imgDashSize)),e.xp6(4),e.s9C("id",t.id),e.Q6J("ngModel",t.bPermissionMenu),e.xp6(1),e.Oqu(t.name)}}function ut(a,r){if(1&a&&(e.TgZ(0,"div")(1,"div",12)(2,"div",2)(3,"span",13),e._uU(4),e.qZA()()(),e.YNc(5,pt,9,7,"div",14),e.qZA()),2&a){const t=r.$implicit;e.xp6(4),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.subMenus)}}let Ze=(()=>{class a{constructor(t,i,n,o,l){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this.actionsServ=o,this.authServ=l,this.title="Rol",this.bShowSpinner=!1,this.idRelation=0,this._menuList=[],this.checkedItems=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.fn_getMenuForPermissions()})()}fn_CerrarMDL(){this.dialogRef.close(!1)}toggleCheckbox(t){this.checkedItems.includes(t)?this.checkedItems=this.checkedItems.filter(i=>i!==t):this.checkedItems.push(t)}isChecked(t){return this.checkedItems.includes(t)}fn_getMenuForPermissions(){this.bShowSpinner=!0,this.authServ.CGetMenuForPermissions({relationType:this.ODataP.relationType,idRelation:this.ODataP.idRelation}).subscribe({next:i=>{0==i.status&&(this._menuList=i.data),this.bShowSpinner=!1},error:i=>{console.log(i.error.errors[0].msg),this.servicesGServ.showSnakbar(i.error.errors[0].msg),this.bShowSpinner=!1}})}fn_insertMenusPermisionsByIdRelation(){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de asignar estos permisos","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.authServ.CInsertMenusPermisionsByIdRelation({relationType:this.ODataP.relationType,idRelation:this.ODataP.idRelation,_menuList:this._menuList}).subscribe({next:n=>{this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(K),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-menupermisos"]],decls:33,vars:3,consts:[[1,"",2,"padding","30px"],[1,"row"],[1,"col-md-12"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],["id","dashboardAutomatico",1,"row"],["id","autoDashBoard",1,"col-md-12"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"row","top20px"],[1,"label","label-primary"],["class","divAutoDashBoard",4,"ngFor","ngForOf"],[1,"divAutoDashBoard"],[1,"col-md-3"],[1,"imgDashboard",3,"ngStyle","src"],[1,"col-md-9"],[1,"example-margin",3,"id","ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4),e.qZA()()(),e.TgZ(5,"div",3)(6,"div",2)(7,"div",4)(8,"button",5),e.NdJ("click",function(){return i.fn_insertMenusPermisionsByIdRelation()}),e.TgZ(9,"mat-icon",6),e._uU(10,"save"),e.qZA(),e._uU(11," Guardar"),e.qZA(),e.TgZ(12,"button",7),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(13,"mat-icon",6),e._uU(14,"close"),e.qZA(),e._uU(15," Cerrar"),e.qZA()()()(),e.TgZ(16,"div",1)(17,"div",2)(18,"div",8)(19,"div",9),e.YNc(20,ut,6,2,"div",10),e.qZA()()()(),e.TgZ(21,"div",3)(22,"div",2)(23,"div",4)(24,"button",5),e.NdJ("click",function(){return i.fn_insertMenusPermisionsByIdRelation()}),e.TgZ(25,"mat-icon",6),e._uU(26,"save"),e.qZA(),e._uU(27," Guardar"),e.qZA(),e.TgZ(28,"button",7),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(29,"mat-icon",6),e._uU(30,"close"),e.qZA(),e._uU(31," Cerrar"),e.qZA()()()()(),e._UZ(32,"app-spinner",11)),2&t&&(e.xp6(4),e.Oqu(i.ODataP.description),e.xp6(16),e.Q6J("ngForOf",i._menuList),e.xp6(12),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.PC,m.JJ,m.On,v.lW,L.oG,d.qo,P.Hw,U.O],styles:["#autoDashBoard[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;position:relative}.divAutoDashBoard[_ngcontent-%COMP%]{display:inline-block;margin-top:20px;width:300px;height:150px;background-color:#fff;border-radius:5px;padding:30px;margin-left:1%;box-shadow:5px 5px 10px gray;transition-property:all;transition-duration:.2s;transition-timing-function:linear}.divAutoDashBoard[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:5px 5px 10px gray}.LabelCountInvoicingDashboard[_ngcontent-%COMP%]{font-size:15px;float:right}.btnDashBoard[_ngcontent-%COMP%]{border-radius:50px;transition-property:all;transition-duration:.2s;transition-timing-function:linear}.btnDashBoard[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:5px 5px 5px gray}"]}),a})();function mt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",26),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.edit(n.idUser))}),e._uU(1," edit "),e.qZA()}}function dt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_deleteUser(n.idUser))}),e._uU(1," delete_outline "),e.qZA()}}function _t(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.showActionsConf(n.idUser,n.name))}),e._uU(1," https "),e.qZA()}}function ht(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",18)(2,"div",19),e.YNc(3,mt,2,0,"span",20),e.YNc(4,dt,2,0,"span",21),e.YNc(5,_t,2,0,"span",22),e.TgZ(6,"span",23),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.showMenusPermisos(o.idUser,o.name))}),e._uU(7," menu "),e.qZA()()(),e.TgZ(8,"td",24),e._uU(9),e.qZA(),e.TgZ(10,"td",24),e._uU(11),e.qZA(),e.TgZ(12,"td",24),e._uU(13),e.qZA(),e.TgZ(14,"td",18),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"td",18)(18,"mat-checkbox",25),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit,i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.hasPermissionAction("users_CrearModificar")),e.xp6(1),e.Q6J("ngIf",i.hasPermissionAction("users_Disable")&&t.active),e.xp6(1),e.Q6J("ngIf",i.hasPermissionAction("users_actionPermission")&&t.active),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.roles),e.xp6(2),e.Oqu(e.xi3(16,8,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngModel",t.active)}}function gt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",29),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let ft=(()=>{class a{constructor(t,i,n){this.servicesGServ=t,this.usersServ=i,this.authServ=n,this._appMain=C.N.appMain,this.title="Lista de usuarios",this.bShowSpinner=!1,this.catlist=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){this.authServ.checkSession(),this.fn_getUsersListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editUser`,t)}changePagination(t){this.pagination=t,this.fn_getUsersListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getUsersListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}hasPermissionAction(t){return this.authServ.hasPermissionAction(t)}fn_getUsersListWithPage(){this.bShowSpinner=!0,this.usersServ.CGetUsersListWithPage(this.pagination).subscribe({next:t=>{this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t.error.errors[0].msg),this.servicesGServ.showSnakbar(t.error.errors[0].msg),this.bShowSpinner=!1}})}fn_deleteUser(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deshabilitar al usuario","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.usersServ.CDisabledUser(t).subscribe({next:n=>{this.fn_getUsersListWithPage(),this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}}))}})}showActionsConf(t,i){this.servicesGServ.showModalWithParams(xe,{relationType:"U",idRelation:t,description:"Permisos del Usuario: "+i},"1500px").afterClosed().subscribe({next:o=>{}})}showMenusPermisos(t,i){this.servicesGServ.showModalWithParams(Ze,{relationType:"U",idRelation:t,description:"Permisos del Usuario: "+i},"1500px").afterClosed().subscribe({next:o=>{}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(B),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-list"]],decls:36,vars:4,consts:[[1,"divMain","textAlingCenter",2,"width","100%"],[1,"row"],[1,"col-md-1"],[1,"divSearch"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],[1,"col-md-11"],[1,"divTitle-center"],[1,"row","top20px"],[1,"col-md-12"],[1,"with100"],["matInput","","placeholder","Ingrese un nombre",3,"change"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[1,"textAlingCenter"],[2,"width","100px"],["class","material-icons manitaSobre colorGreen","matTooltip","Editar Usuario",3,"click",4,"ngIf"],["class","material-icons manitaSobre colorRed","matTooltip","Eliminar Usuario",3,"click",4,"ngIf"],["class","material-icons manitaSobre","matTooltip","Configurar permisos de acciones",3,"click",4,"ngIf"],["matTooltip","Configurar permisos de menu",1,"material-icons","manitaSobre",3,"click"],[1,"textAlingLeft"],["disabled","",1,"example-margin",3,"ngModel","ngModelChange"],["matTooltip","Editar Usuario",1,"material-icons","manitaSobre","colorGreen",3,"click"],["matTooltip","Eliminar Usuario",1,"material-icons","manitaSobre","colorRed",3,"click"],["matTooltip","Configurar permisos de acciones",1,"material-icons","manitaSobre",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.NdJ("click",function(){return i.changeRoute("users")}),e._uU(5," add_circle_outline "),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6),e._uU(8),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label"),e._uU(13,"B\xfaqueda de usuario por nombre o usuario"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("change",function(o){return i.onChangeEvent(o)}),e.qZA()()()(),e.TgZ(15,"div",7)(16,"div",8)(17,"div",11)(18,"table",12)(19,"thead")(20,"th",13),e._uU(21,"Acciones"),e.qZA(),e.TgZ(22,"th",14),e._uU(23,"Nombre"),e.qZA(),e.TgZ(24,"th",14),e._uU(25,"Usuario"),e.qZA(),e.TgZ(26,"th",14),e._uU(27,"Roles"),e.qZA(),e.TgZ(28,"th",13),e._uU(29,"Creado"),e.qZA(),e.TgZ(30,"th",13),e._uU(31,"Activo"),e.qZA()(),e.TgZ(32,"tbody"),e.YNc(33,ht,19,11,"tr",15),e.qZA()()(),e.YNc(34,gt,1,1,"app-pagination",16),e.qZA()()(),e._UZ(35,"app-spinner",17)),2&t&&(e.xp6(8),e.hij(" ",i.title," "),e.xp6(25),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.JJ,m.On,L.oG,d.KE,d.hX,N.Nt,O.gM,U.O,D,h.uU]}),a})(),R=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/products"}CGetProductsListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getProductsListWithPage`,{idUser:i.idUser,idSucursal:i.idSucursal,createDateStart:i.createDateStart,createDateEnd:i.createDateEnd,barCode:i.barCode,name:i.name,description:i.description,idFamily:i.idFamily,idGroup:i.idGroup,idQuality:i.idQuality,idOrigin:i.idOrigin,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CGetProductByID(t){return this.http.post(`${this.baseURL}/${this._api}/getProductByID`,{idProduct:t})}CInsertProduct(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertProduct`,t)}CUpdateProduct(t){return this.http.post(`${this.baseURL}/${this._api}/updateProduct`,t)}CCbxGetProductsCombo(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/cbxGetProductsCombo`,t)}CGetProductByBarCode(t,i){return this.http.post(`${this.baseURL}/${this._api}/getProductByBarCode`,{idUser:i,barCode:t})}CGetInventaryListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getInventaryListWithPage`,{idUser:i.idUser,idSucursal:i.idSucursal,barCode:i.barCode,name:i.name,description:i.description,idFamily:i.idFamily,idGroup:i.idGroup,idQuality:i.idQuality,idOrigin:i.idOrigin,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CGetInventaryBySucursal(t){return this.http.post(`${this.baseURL}/${this._api}/getInventaryBySucursal`,{idUser:t.idUser,idSucursal:t.idSucursal,barCode:t.barCode,name:t.name,description:t.description,idFamily:t.idFamily,idGroup:t.idGroup,idQuality:t.idQuality,idOrigin:t.idOrigin})}CDisableProduct(t){return this.http.post(`${this.baseURL}/${this._api}/disableProduct`,{idProduct:t})}CGetInventarylogByIdProductWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getInventarylogByIdProductWithPage`,{idProduct:i,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CInsertInventaryLog(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertInventaryLog`,t)}CStartPhysicInventory(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/startPhysicInventory`,t)}CGetPhysicalInventoryListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getPhysicalInventoryListWithPage`,{startDate:i.startDate,endDate:i.endDate,idSucursal:i.idSucursal,idFamily:i.idFamily,idGroup:i.idGroup,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CGetPhysicalInventoryDetailListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getPhysicalInventoryDetailListWithPage`,{idPhysicalInventory:i,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CVerifyPhysicalInventoryDetail(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/verifyPhysicalInventoryDetail`,t)}CChangeStatusPhysicalInventory(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/changeStatusPhysicalInventory`,t)}CGetPhysicalInventoryHeader(t){return this.http.post(`${this.baseURL}/${this._api}/getPhysicalInventoryHeader`,{idPhysicalInventory:t})}CUpdateMostradorPhysicalInventoryDetail(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/updateMostradorPhysicalInventoryDetail`,t)}CGetPhysicalInventoryHeaderBySucursal(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getPhysicalInventoryHeaderBySucursal`,t)}CGetCatListWithPage(t,i){let n=t.pageIndex*t.pageSize,o=t.pageSize;return i.search=t.search,i.start=n,i.limiter=o,this.http.post(`${this.baseURL}/${this._api}/getCatListWithPage`,i)}CInsertUpdateCat(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertUpdateCat`,t)}CGetRepComprasProveedorListWithPage(t,i){let n=t.pageIndex*t.pageSize,o=t.pageSize;return i.search=t.search,i.start=n,i.limiter=o,this.http.post(`${this.baseURL}/${this._api}/getRepComprasProveedorListWithPage`,i)}CGetInventarylogParaFirmar(t,i){let n=t.pageIndex*t.pageSize,o=t.pageSize;return i.search=t.search,i.start=n,i.limiter=o,i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getInventarylogParaFirmar`,i)}CUpdateFirmaEntradaInventario(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/updateFirmaEntradaInventario`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),oe=(()=>{class a{constructor(t){this.http=t,this.baseURL=C.N.baseUrl,this._api="api/families"}CCbxGetFamiliesCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetFamiliesCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ne=(()=>{class a{constructor(t){this.http=t,this.baseURL=C.N.baseUrl,this._api="api/groups"}CCbxGetGroupsCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetGroupsCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),me=(()=>{class a{constructor(t){this.http=t,this.baseURL=C.N.baseUrl,this._api="api/origin"}CCbxGetOriginCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetOriginCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),de=(()=>{class a{constructor(t){this.http=t,this.baseURL=C.N.baseUrl,this._api="api/quality"}CCbxGetQualityCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetQualityCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var x=w(8034);function Ct(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function bt(a,r){if(1&a&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function St(a,r){1&a&&(e.TgZ(0,"mat-option",55),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function vt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxGroups_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function xt(a,r){if(1&a&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Zt(a,r){1&a&&(e.TgZ(0,"mat-option",55),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Tt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxFamilies_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function yt(a,r){if(1&a&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function At(a,r){1&a&&(e.TgZ(0,"mat-option",55),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ft(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxQuality_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ut(a,r){if(1&a&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Pt(a,r){1&a&&(e.TgZ(0,"mat-option",55),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function wt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxOrigin_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Nt(a,r){if(1&a&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function It(a,r){1&a&&(e.TgZ(0,"mat-option",55),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Mt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",66),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_disableProduct(n.idProduct))}),e._uU(1," delete_outline "),e.qZA()}}function qt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",56)(2,"div",57)(3,"span",58),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.edit(o.idProduct))}),e._uU(4," edit "),e.qZA(),e.YNc(5,Mt,2,0,"span",59),e.qZA()(),e.TgZ(6,"td",60)(7,"div",3)(8,"div",42)(9,"mat-icon",61),e._uU(10,"qr_code"),e.qZA()(),e.TgZ(11,"div",62)(12,"label",63),e._uU(13),e.qZA()()()(),e.TgZ(14,"td",60),e._uU(15),e.qZA(),e.TgZ(16,"td",64),e._uU(17),e.ALo(18,"currency"),e.qZA(),e.TgZ(19,"td",64),e._uU(20),e.ALo(21,"currency"),e.qZA(),e.TgZ(22,"td",64),e._uU(23),e.qZA(),e.TgZ(24,"td",64),e._uU(25),e.qZA(),e.TgZ(26,"td",60),e._uU(27),e.qZA(),e.TgZ(28,"td",56),e._uU(29),e.ALo(30,"date"),e.qZA(),e.TgZ(31,"td",56)(32,"mat-checkbox",65),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(5),e.Q6J("ngIf",t.active),e.xp6(8),e.Oqu(t.barCode),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.lcZ(18,10,t.cost)),e.xp6(3),e.Oqu(e.lcZ(21,12,t.price)),e.xp6(3),e.hij("",t.catInventaryVerify," piezas"),e.xp6(2),e.hij("",t.catInventary," piezas"),e.xp6(2),e.Oqu(t.gramos),e.xp6(2),e.Oqu(e.xi3(30,14,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngModel",t.active)}}function Dt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",67),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Lt=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u,s,S){this.servicesGServ=t,this.productsServ=i,this.fb=n,this._adapter=o,this._locale=l,this.familiesServ=p,this.groupsServ=_,this.originServ=g,this.qualityServ=u,this.sucursalesServ=s,this.authServ=S,this._appMain=C.N.appMain,this.idUserLogON=0,this.title="Lista de Products",this.bShowSpinner=!1,this.catlist=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm=this.fb.group({idUser:0,idSucursal:0,sucursalDesc:"",createDateStart:"",createDateEnd:"",barCode:"",name:"",idFamily:0,familyDesc:[""],idGroup:0,groupDesc:[""],idQuality:0,qualityDesc:[""],idOrigin:0,originDesc:[""]}),this.cbxFamiliesList=[],this.cbxGroupsList=[],this.cbxQualityList=[],this.cbxOriginList=[],this.cbxSucursales=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getProductsListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getProductsListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getProductsListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_getProductsListWithPage(){this.parametersForm.get("idUser")?.setValue(this.idUserLogON),this.bShowSpinner=!0,this.productsServ.CGetProductsListWithPage(this.pagination,this.parametersForm.value).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_disableProduct(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deshabilitar el producto","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.productsServ.CDisableProduct(t).subscribe({next:n=>{0===n.status&&this.fn_getProductsListWithPage(),this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}}))}})}parametersForm_Clear(){this.parametersForm.get("createDateStart")?.setValue(""),this.parametersForm.get("createDateEnd")?.setValue(""),this.parametersForm.get("barCode")?.setValue(""),this.parametersForm.get("name")?.setValue(""),this.parametersForm.get("description")?.setValue(""),this.parametersForm.get("idFamily")?.setValue(0),this.parametersForm.get("familyDesc")?.setValue(""),this.parametersForm.get("idGroup")?.setValue(0),this.parametersForm.get("groupDesc")?.setValue(""),this.parametersForm.get("idQuality")?.setValue(0),this.parametersForm.get("qualityDesc")?.setValue(""),this.parametersForm.get("idOrigin")?.setValue(0),this.parametersForm.get("originDesc")?.setValue(""),this.parametersForm.get("idSucursal")?.setValue(0),this.parametersForm.get("sucursalDesc")?.setValue(""),this.fn_getProductsListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editProduct`,t)}cbxFamilies_Search(){this.familiesServ.CCbxGetFamiliesCombo(this.parametersForm.value.familyDesc).subscribe({next:t=>{this.cbxFamiliesList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFamilies_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idFamily")?.setValue(i.idFamily),this.parametersForm.get("familyDesc")?.setValue(i.name)}cbxFamilies_Clear(){this.parametersForm.get("idFamily")?.setValue(0),this.parametersForm.get("familyDesc")?.setValue("")}cbxGroups_Search(){this.groupsServ.CCbxGetGroupsCombo(this.parametersForm.value.groupDesc).subscribe({next:t=>{this.cbxGroupsList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxGroups_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idGroup")?.setValue(i.idGroup),this.parametersForm.get("groupDesc")?.setValue(i.name)}cbxGroups_Clear(){this.parametersForm.get("idGroup")?.setValue(0),this.parametersForm.get("groupDesc")?.setValue("")}cbxQuality_Search(){this.qualityServ.CCbxGetQualityCombo(this.parametersForm.value.qualityDesc).subscribe({next:t=>{this.cbxQualityList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxQuality_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idQuality")?.setValue(i.idQuality),this.parametersForm.get("qualityDesc")?.setValue(i.name)}cbxQuality_Clear(){this.parametersForm.get("idQuality")?.setValue(0),this.parametersForm.get("qualityDesc")?.setValue("")}cbxOrigin_Search(){this.originServ.CCbxGetOriginCombo(this.parametersForm.value.originDesc).subscribe({next:t=>{this.cbxOriginList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxOrigin_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idOrigin")?.setValue(i.idOrigin),this.parametersForm.get("originDesc")?.setValue(i.name)}cbxOrigin_Clear(){this.parametersForm.get("idOrigin")?.setValue(0),this.parametersForm.get("originDesc")?.setValue("")}cbxSucursales_Search(){this.sucursalesServ.CCbxGetSucursalesCombo(this.parametersForm.value.sucursalDesc,this.idUserLogON).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.parametersForm.get("idSucursal")?.setValue(i.idSucursal),this.parametersForm.get("sucursalDesc")?.setValue(i.name)}cbxSucursales_Clear(){this.parametersForm.get("idSucursal")?.setValue(0),this.parametersForm.get("sucursalDesc")?.setValue("")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(R),e.Y36(m.qu),e.Y36(f._A),e.Y36(f.Ad),e.Y36(oe),e.Y36(ne),e.Y36(me),e.Y36(de),e.Y36(W),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-product-list"]],decls:133,vars:27,consts:[[1,"divMain",2,"margin-top","10px !important",3,"opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","sucursalDesc",2,"width","100%",3,"matAutocomplete","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"formGroup","rangePicker","click"],["matStartDate","","formControlName","createDateStart","placeholder","Start date"],["matEndDate","","formControlName","createDateEnd","placeholder","End date"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","top20px"],[1,"col-md-4"],["fxLayout.xs","column",1,"with100"],["matPrefix","",1,"my-icon"],["matInput","","placeholder","Ingrese un C\xf3digo de barras","formControlName","barCode"],[1,"col-md-8"],["matInput","","placeholder","Ingrese un nombre","formControlName","name"],["text","",1,"row","top20px"],[1,"col-md-3"],["type","text","id","cbxGroups","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","groupDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxGroups","matAutocomplete"],["type","text","id","cbxFamilies","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","familyDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxFamilies","matAutocomplete"],["type","text","id","cbxQuality","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","qualityDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxQuality","matAutocomplete"],["type","text","id","cbxOrigin","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","originDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxOrigin","matAutocomplete"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["mat-raised-button","","type","button",3,"click"],[1,"divMain",2,"width","100%","margin-top","50px !important"],[1,"col-md-1"],[1,"divSearch"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Editar Producto",1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorRed","matTooltip","Eliminar Producto",3,"click",4,"ngIf"],[1,"textAlingLeft"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[1,"col-md-10"],[2,"margin-left","10px"],[1,"textAlingRight"],["disabled","",1,"example-margin",3,"ngModel","ngModelChange"],["matTooltip","Eliminar Producto",1,"material-icons","manitaSobre","colorRed",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros de productos "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"form",5)(9,"div",3)(10,"div",4)(11,"mat-label"),e._uU(12,"Sucursal: "),e.qZA(),e.TgZ(13,"mat-form-field",6),e.NdJ("click",function(){return i.cbxSucursales_Search()}),e.TgZ(14,"input",7),e.NdJ("input",function(){return i.cbxSucursales_Search()}),e.qZA(),e.YNc(15,Ct,3,0,"button",8),e.TgZ(16,"mat-autocomplete",9,10),e.NdJ("optionSelected",function(l){return i.cbxSucursales_SelectedOption(l)}),e.YNc(18,bt,2,2,"mat-option",11),e.YNc(19,St,2,0,"mat-option",12),e.qZA()()()(),e.TgZ(20,"div",3)(21,"div",13)(22,"mat-form-field",14)(23,"mat-label"),e._uU(24,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(25,"mat-date-range-input",15),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(32);return e.KtG(l.open())}),e._UZ(26,"input",16)(27,"input",17),e.qZA(),e.TgZ(28,"mat-hint"),e._uU(29,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(30,"mat-datepicker-toggle",18)(31,"mat-date-range-picker",null,19),e.qZA()()(),e.TgZ(33,"div",20)(34,"div",21)(35,"mat-form-field",22)(36,"mat-label"),e._uU(37,"C\xf3digo de barras"),e.qZA(),e.TgZ(38,"mat-icon",23),e._uU(39,"qr_code"),e.qZA(),e._UZ(40,"input",24),e.qZA()(),e.TgZ(41,"div",25)(42,"mat-form-field",14)(43,"mat-label"),e._uU(44,"Nombre"),e.qZA(),e._UZ(45,"input",26),e.qZA()()(),e.TgZ(46,"div",27)(47,"div",28)(48,"mat-label"),e._uU(49,"Grupo: "),e.qZA(),e.TgZ(50,"mat-form-field",6),e.NdJ("click",function(){return i.cbxGroups_Search()}),e.TgZ(51,"input",29),e.NdJ("input",function(){return i.cbxGroups_Search()}),e.qZA(),e.YNc(52,vt,3,0,"button",8),e.TgZ(53,"mat-autocomplete",9,30),e.NdJ("optionSelected",function(l){return i.cbxGroups_SelectedOption(l)}),e.YNc(55,xt,2,2,"mat-option",11),e.YNc(56,Zt,2,0,"mat-option",12),e.qZA()()(),e.TgZ(57,"div",28)(58,"mat-label"),e._uU(59,"Familia: "),e.qZA(),e.TgZ(60,"mat-form-field",6),e.NdJ("click",function(){return i.cbxFamilies_Search()}),e.TgZ(61,"input",31),e.NdJ("input",function(){return i.cbxFamilies_Search()}),e.qZA(),e.YNc(62,Tt,3,0,"button",8),e.TgZ(63,"mat-autocomplete",9,32),e.NdJ("optionSelected",function(l){return i.cbxFamilies_SelectedOption(l)}),e.YNc(65,yt,2,2,"mat-option",11),e.YNc(66,At,2,0,"mat-option",12),e.qZA()()(),e.TgZ(67,"div",28)(68,"mat-label"),e._uU(69,"Calidad: "),e.qZA(),e.TgZ(70,"mat-form-field",6),e.NdJ("click",function(){return i.cbxQuality_Search()}),e.TgZ(71,"input",33),e.NdJ("input",function(){return i.cbxQuality_Search()}),e.qZA(),e.YNc(72,Ft,3,0,"button",8),e.TgZ(73,"mat-autocomplete",9,34),e.NdJ("optionSelected",function(l){return i.cbxQuality_SelectedOption(l)}),e.YNc(75,Ut,2,2,"mat-option",11),e.YNc(76,Pt,2,0,"mat-option",12),e.qZA()()(),e.TgZ(77,"div",28)(78,"mat-label"),e._uU(79,"Origen: "),e.qZA(),e.TgZ(80,"mat-form-field",6),e.NdJ("click",function(){return i.cbxOrigin_Search()}),e.TgZ(81,"input",35),e.NdJ("input",function(){return i.cbxOrigin_Search()}),e.qZA(),e.YNc(82,wt,3,0,"button",8),e.TgZ(83,"mat-autocomplete",9,36),e.NdJ("optionSelected",function(l){return i.cbxOrigin_SelectedOption(l)}),e.YNc(85,Nt,2,2,"mat-option",11),e.YNc(86,It,2,0,"mat-option",12),e.qZA()()()(),e.TgZ(87,"div",37)(88,"div",4)(89,"div",38)(90,"button",39),e.NdJ("click",function(){return i.fn_getProductsListWithPage()}),e.TgZ(91,"mat-icon",23),e._uU(92,"search"),e.qZA(),e._uU(93," Buscar"),e.qZA(),e.TgZ(94,"button",40),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(95,"mat-icon",23),e._uU(96,"clear"),e.qZA(),e._uU(97," limpiar"),e.qZA()()()()()()()()(),e.TgZ(98,"div",41)(99,"div",3)(100,"div",42)(101,"div",43)(102,"span",44),e.NdJ("click",function(){return i.changeRoute("product")}),e._uU(103," add_circle_outline "),e.qZA()()()(),e.TgZ(104,"div",20)(105,"div",4)(106,"div",45)(107,"table",46)(108,"thead")(109,"th",47),e._uU(110,"Acciones"),e.qZA(),e.TgZ(111,"th",48),e._uU(112,"C\xf3digo de barras"),e.qZA(),e.TgZ(113,"th",48),e._uU(114,"Nombre"),e.qZA(),e.TgZ(115,"th",49),e._uU(116,"Costo"),e.qZA(),e.TgZ(117,"th",49),e._uU(118,"Precio"),e.qZA(),e.TgZ(119,"th",49),e._uU(120,"Verificaci\xf3n"),e.qZA(),e.TgZ(121,"th",49),e._uU(122,"Inventario"),e.qZA(),e.TgZ(123,"th",48),e._uU(124,"Gramos"),e.qZA(),e.TgZ(125,"th",47),e._uU(126,"Creado"),e.qZA(),e.TgZ(127,"th",47),e._uU(128,"Activo"),e.qZA()(),e.TgZ(129,"tbody"),e.YNc(130,qt,33,17,"tr",50),e.qZA()()(),e.YNc(131,Dt,1,1,"app-pagination",51),e.qZA()()(),e._UZ(132,"app-spinner",52)}if(2&t){const n=e.MAs(17),o=e.MAs(32),l=e.MAs(54),p=e.MAs(64),_=e.MAs(74),g=e.MAs(84);e.xp6(8),e.Q6J("formGroup",i.parametersForm),e.xp6(6),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.parametersForm.value.sucursalDesc),e.xp6(6),e.Q6J("formGroup",i.parametersForm)("rangePicker",o),e.xp6(5),e.Q6J("for",o),e.xp6(21),e.Q6J("matAutocomplete",l),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.groupDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxGroupsList),e.xp6(1),e.Q6J("ngIf",0==i.cbxGroupsList.length&&i.parametersForm.value.groupDesc),e.xp6(5),e.Q6J("matAutocomplete",p),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.familyDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFamiliesList),e.xp6(1),e.Q6J("ngIf",0==i.cbxFamiliesList.length&&i.parametersForm.value.familyDesc),e.xp6(5),e.Q6J("matAutocomplete",_),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.qualityDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxQualityList),e.xp6(1),e.Q6J("ngIf",0==i.cbxQualityList.length&&i.parametersForm.value.qualityDesc),e.xp6(5),e.Q6J("matAutocomplete",g),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.originDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxOriginList),e.xp6(1),e.Q6J("ngIf",0==i.cbxOriginList.length&&i.parametersForm.value.originDesc),e.xp6(44),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,L.oG,x.nW,x.wx,x.zY,x.By,x._g,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,O.gM,U.O,D,h.H9,h.uU]}),a})(),Te=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/authorizationActions"}CAuthorizationActionAPI(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/authorizationActionAPI`,t)}CGetAutorizacionesByRelation(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getAutorizacionesByRelation`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const kt=["tbxAuthorizationCode"];let k=(()=>{class a{constructor(t,i,n,o,l,p,_,g){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.authServ=p,this.actionsServ=_,this.authorizationServ=g,this._appMain=C.N.appMain,this.title="Autorizacipon",this.bShowSpinner=!1,this.idUserLogON=0,this.actionForm={actionName:"",authorizationCode:""},this.bShow=!1}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.actionForm.actionName=t.ODataP.actionName,setTimeout(()=>{t.tbxAuthorizationCode.nativeElement.focus()},500)})()}fn_authorizationAction(){this.actionForm?.authorizationCode?.trim()?.length>0&&!this.bShow&&(this.bShow=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 seguro de aprobar esta acci\xf3n?","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t?(this.bShowSpinner=!0,this.authorizationServ.CAuthorizationActionAPI(this.actionForm).subscribe({next:i=>{this.ODataP.bShowAlert&&this.servicesGServ.showAlertIA(i),0==i.status&&i.insertID>0?this.fn_CerrarMDL(i.insertID):(this.servicesGServ.showAlertIA(i),this.actionForm.authorizationCode=""),this.bShowSpinner=!1,this.bShow=!1},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})):this.bShow=!1}}))}event_fn_Enter(t){13==t.keyCode&&this.fn_authorizationAction()}fn_CerrarMDL(t){this.dialogRef.close(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(K),e.Y36(Te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-action-authorization"]],viewQuery:function(t,i){if(1&t&&e.Gf(kt,5),2&t){let n;e.iGM(n=e.CRH())&&(i.tbxAuthorizationCode=n.first)}},decls:20,vars:2,consts:[[2,"padding","30px"],[1,"row"],[1,"col-md-12"],[1,"with100"],["matInput","","placeholder","Ingrese el c\xf3digo de autorizaci\xf3n","type","password",3,"ngModel","ngModelChange","keyup"],["tbxAuthorizationCode",""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],[3,"hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"C\xf3digo de autorizaci\xf3n: "),e.qZA(),e.TgZ(6,"input",4,5),e.NdJ("ngModelChange",function(o){return i.actionForm.authorizationCode=o})("keyup",function(o){return i.event_fn_Enter(o)}),e.qZA()()()(),e.TgZ(8,"div",6)(9,"div",2)(10,"div",7)(11,"button",8),e.NdJ("click",function(){return i.fn_authorizationAction()}),e.TgZ(12,"mat-icon",9),e._uU(13,"check_circle"),e.qZA(),e._uU(14," Autorizar"),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(16,"mat-icon",9),e._uU(17,"close"),e.qZA(),e._uU(18," Cerrar"),e.qZA()()()()(),e._UZ(19,"app-spinner",11)),2&t&&(e.xp6(6),e.Q6J("ngModel",i.actionForm.authorizationCode),e.xp6(13),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.Fj,m.JJ,m.On,v.lW,d.KE,d.hX,d.qo,N.Nt,P.Hw,U.O]}),a})();const Ot=["tbxNoEntrada"],Jt=["tbxDescription"],Gt=["tbxCantidad"];let Rt=(()=>{class a{constructor(t,i,n,o,l,p,_){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.authServ=p,this.productsServ=_,this._appMain=C.N.appMain,this.title="Inventario",this.bShowSpinner=!1,this.idUserLogON=0,this.inventaryLogForm={idProduct:0,cantidad:0,description:"",noEntrada:"",idUserAutorizante:0},this.bInsertInventaryLog=!1,this.bShowActionAuthorization=!1}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.inventaryLogForm.idProduct=t.ODataP.idProduct,t.nextInputFocus(t.tbxNoEntrada,500)})()}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}fn_insertInventaryLog(){this.inventaryLogForm.idProduct>0&&0!=this.inventaryLogForm.cantidad&&(this.bInsertInventaryLog=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de modificar el inventario del producto","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{this.bInsertInventaryLog=!1,t&&(this.inventaryLogForm.cantidad>0?(this.bShowSpinner=!0,this.inventaryLogForm.idUserAutorizante=0,this.productsServ.CInsertInventaryLog(this.inventaryLogForm).subscribe({next:n=>{0===n.status?(this.servicesGServ.showAlert("S","OK!",n.message,!0),this.fn_CerrarMDL()):this.servicesGServ.showAlert("W","Alerta!",n.message,!0),this.bShowSpinner=!1,this.event_clear()},error:n=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})):this.servicesGServ.showModalWithParams(k,{actionName:"prod_SalidaInventario",bShowAlert:!1},"400px").afterClosed().subscribe({next:n=>{n?(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.inventaryLogForm.idUserAutorizante=n,this.productsServ.CInsertInventaryLog(this.inventaryLogForm).subscribe({next:o=>{0===o.status?(this.servicesGServ.showAlert("S","OK!",o.message,!0),this.fn_CerrarMDL()):this.servicesGServ.showAlert("W","Alerta!",o.message,!0),this.bShowSpinner=!1,this.event_clear()},error:o=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})):this.bShowActionAuthorization=!1}}))}}))}fn_CerrarMDL(){this.dialogRef.close(!0)}event_clear(){this.inventaryLogForm.description="",this.inventaryLogForm.cantidad=0,this.nextInputFocus(this.tbxDescription,500)}ev_fn_noEntrada_keyup_enter(t){13==t.keyCode&&this.nextInputFocus(this.tbxDescription,0)}ev_fn_description_keyup_enter(t){13==t.keyCode&&this.inventaryLogForm.description.length>0&&this.nextInputFocus(this.tbxCantidad,0)}ev_fn_amount_keyup_enter(t){13==t.keyCode&&0!=this.inventaryLogForm.cantidad&&this.fn_insertInventaryLog()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventarylog"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ot,5),e.Gf(Jt,5),e.Gf(Gt,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.tbxNoEntrada=n.first),e.iGM(n=e.CRH())&&(i.tbxDescription=n.first),e.iGM(n=e.CRH())&&(i.tbxCantidad=n.first)}},decls:40,vars:4,consts:[[2,"padding","10px"],[1,"row","top20px"],[1,"col-md-12"],[1,"row"],[1,"col-md-4"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese n\xfamero de entrada",3,"ngModel","ngModelChange","keyup"],["tbxNoEntrada",""],[1,"col-md-6"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese el motivo",3,"ngModel","ngModelChange","keyup"],["tbxDescription",""],[1,"col-md-2"],[1,"with100"],["type","number","matInput","","placeholder","Cantidad",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxCantidad",""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],[3,"hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"Puedes agregar o quitar inventario"),e.qZA()()(),e.TgZ(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"# Entrada"),e.qZA(),e.TgZ(10,"input",6,7),e.NdJ("ngModelChange",function(o){return i.inventaryLogForm.noEntrada=o})("keyup",function(o){return i.ev_fn_noEntrada_keyup_enter(o)}),e.qZA()()(),e.TgZ(12,"div",8)(13,"mat-form-field",5)(14,"mat-label"),e._uU(15,"Descripci\xf3n"),e.qZA(),e.TgZ(16,"input",9,10),e.NdJ("ngModelChange",function(o){return i.inventaryLogForm.description=o})("keyup",function(o){return i.ev_fn_description_keyup_enter(o)}),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12)(20,"mat-label"),e._uU(21,"Cantidad"),e.qZA(),e.TgZ(22,"input",13,14),e.NdJ("ngModelChange",function(o){return i.inventaryLogForm.cantidad=o})("keyup",function(o){return i.ev_fn_amount_keyup_enter(o)}),e.qZA()()()(),e.TgZ(24,"div",15)(25,"div",2)(26,"div",16)(27,"button",17),e.NdJ("click",function(){return i.fn_insertInventaryLog()}),e.TgZ(28,"mat-icon",18),e._uU(29,"save"),e.qZA(),e._uU(30," Guardar"),e.qZA(),e.TgZ(31,"button",19),e.NdJ("click",function(){return i.event_clear()}),e.TgZ(32,"mat-icon",18),e._uU(33,"close"),e.qZA(),e._uU(34," Limpiar"),e.qZA(),e.TgZ(35,"button",19),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(36,"mat-icon",18),e._uU(37,"close"),e.qZA(),e._uU(38," Cerrar"),e.qZA()()()()(),e._UZ(39,"app-spinner",20)),2&t&&(e.xp6(10),e.Q6J("ngModel",i.inventaryLogForm.noEntrada),e.xp6(6),e.Q6J("ngModel",i.inventaryLogForm.description),e.xp6(6),e.Q6J("ngModel",i.inventaryLogForm.cantidad),e.xp6(17),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.Fj,m.wV,m.JJ,m.On,v.lW,d.KE,d.hX,d.qo,N.Nt,P.Hw,U.O]}),a})(),_e=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/suppliers"}CGetSupplierListWithPage(t){return this.http.post(`${this.baseURL}/${this._api}/getSupplierListWithPage`,{search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CCbxGetSuppliersCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetSuppliersCombo`,{search:t})}CInsertSupplier(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertSupplier`,t)}CDisabledActions(t){const i={idAction:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledActions`,i)}CGetActionsForAddUser(t,i){return this.http.post(`${this.baseURL}/${this._api}/getActionsForAddUser`,{search:t,idUser:i})}CGetActionByUserListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getActionByUserListWithPage`,{idUser:t,search:i.search,start:i.pageIndex*i.pageSize,limiter:i.pageSize})}CInsertActionByIdUser(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertActionByIdUser`,t)}CDisabledActionByRelation(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledActionByRelation`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Et=["cbxName"],Qt=["tbxDesc"];function Yt(a,r){1&a&&(e.TgZ(0,"span",30),e._uU(1," delete_outline "),e.qZA())}function jt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",20)(2,"div",25),e.YNc(3,Yt,2,0,"span",26),e.qZA()(),e.TgZ(4,"td",21),e._uU(5),e.qZA(),e.TgZ(6,"td",21),e._uU(7),e.qZA(),e.TgZ(8,"td",20)(9,"div",1)(10,"div",11)(11,"mat-icon",27),e._uU(12,"calendar_today"),e.qZA(),e.TgZ(13,"label",28),e._uU(14),e.ALo(15,"date"),e.qZA()()()(),e.TgZ(16,"td",20)(17,"mat-checkbox",29),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(3),e.Q6J("ngIf",t.active),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(7),e.Oqu(e.xi3(15,5,t.createDate,"dd-MM-yyyy h:mm:ss a")),e.xp6(3),e.Q6J("ngModel",t.active)}}function Ht(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",31),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let zt=(()=>{class a{constructor(t,i,n,o,l,p,_){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.authServ=p,this.supplierServ=_,this._appMain=C.N.appMain,this.title="Proveedores",this.bShowSpinner=!1,this.idUserLogON=0,this.actionForm={name:"",description:""},this.actionList=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getSupplierListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getSupplierListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getSupplierListWithPage()}fn_insertSupplier(){this.actionForm.name.length>0&&this.actionForm.description.length>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de agregar un proveedor","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.supplierServ.CInsertSupplier(this.actionForm).subscribe({next:i=>{this.servicesGServ.showAlertIA(i),this.bShowSpinner=!1,this.event_clear()},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_getSupplierListWithPage(){this.bShowSpinner=!0,this.supplierServ.CGetSupplierListWithPage(this.pagination).subscribe({next:t=>{this.actionList=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}event_clear(){this.actionForm.name="",this.actionForm.description="",this.fn_getSupplierListWithPage()}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}fn_CerrarMDL(){this.dialogRef.close(!1)}ev_fn_name_keyup_enter(t){13==t.keyCode&&this.nextInputFocus(this.tbxDesc,0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(_e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-suppliers"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Et,5),e.Gf(Qt,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.cbxName=n.first),e.iGM(n=e.CRH())&&(i.tbxDesc=n.first)}},decls:46,vars:5,consts:[[2,"padding","30px"],[1,"row"],[1,"col-md-5"],[1,"with100"],["matInput","","placeholder","Ingrese el nombre","type","text",3,"ngModel","ngModelChange","keyup"],["tbxName",""],[1,"col-md-7"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese una descripci\xf3n",3,"ngModel","ngModelChange"],["tbxDesc",""],[1,"row","top10px"],[1,"col-md-12"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["mat-raised-button","","type","button",3,"click"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter"],[1,"textAlingLeft"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[2,"width","80px"],["class","material-icons manitaSobre colorRed",4,"ngIf"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[1,"example-margin",3,"ngModel","ngModelChange"],[1,"material-icons","manitaSobre","colorRed"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Nombre: "),e.qZA(),e.TgZ(6,"input",4,5),e.NdJ("ngModelChange",function(o){return i.actionForm.name=o})("keyup",function(o){return i.ev_fn_name_keyup_enter(o)}),e.qZA()()(),e.TgZ(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Descripci\xf3n"),e.qZA(),e.TgZ(12,"textarea",8,9),e.NdJ("ngModelChange",function(o){return i.actionForm.description=o}),e.qZA()()()(),e.TgZ(14,"div",10)(15,"div",11)(16,"div",12)(17,"button",13),e.NdJ("click",function(){return i.fn_insertSupplier()}),e.TgZ(18,"mat-icon",14),e._uU(19,"save"),e.qZA(),e._uU(20," Guardar"),e.qZA(),e.TgZ(21,"button",15),e.NdJ("click",function(){return i.event_clear()}),e._uU(22,"Limpiar"),e.qZA(),e.TgZ(23,"button",16),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(24,"mat-icon",14),e._uU(25,"close"),e.qZA(),e._uU(26," Cerrar"),e.qZA()()()(),e.TgZ(27,"div",17)(28,"div",11)(29,"div",18)(30,"table",19)(31,"thead")(32,"th",20),e._uU(33,"Acciones"),e.qZA(),e.TgZ(34,"th",21),e._uU(35,"Nombre"),e.qZA(),e.TgZ(36,"th",21),e._uU(37,"Descripci\xf3n"),e.qZA(),e.TgZ(38,"th",20),e._uU(39,"Creado"),e.qZA(),e.TgZ(40,"th",20),e._uU(41,"Active"),e.qZA()(),e.TgZ(42,"tbody"),e.YNc(43,jt,18,8,"tr",22),e.qZA()()(),e.YNc(44,Ht,1,1,"app-pagination",23),e.qZA()()(),e._UZ(45,"app-spinner",24)),2&t&&(e.xp6(6),e.Q6J("ngModel",i.actionForm.name),e.xp6(6),e.Q6J("ngModel",i.actionForm.description),e.xp6(31),e.Q6J("ngForOf",i.actionList),e.xp6(1),e.Q6J("ngIf",i.actionList),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,v.lW,L.oG,d.KE,d.hX,d.qo,N.Nt,Q.IC,P.Hw,U.O,D,h.uU]}),a})();function $t(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",26)(2,"mat-form-field",5)(3,"mat-label"),e._uU(4,"Valor"),e.qZA(),e.TgZ(5,"textarea",27),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.oCatForm.valor=n)}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.oCatForm.valor)}}function Bt(a,r){1&a&&(e.TgZ(0,"th",21),e._uU(1,"Valor"),e.qZA())}function Wt(a,r){if(1&a&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.valor)}}function Kt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",20)(2,"div",28)(3,"span",29),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.fn_editData(o))}),e._uU(4," edit "),e.qZA()()(),e.TgZ(5,"td",21),e._uU(6),e.qZA(),e.TgZ(7,"td",21),e._uU(8),e.qZA(),e.YNc(9,Wt,2,1,"td",22),e.TgZ(10,"td",20)(11,"mat-checkbox",30),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit,i=e.oxw();e.xp6(6),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(1),e.Q6J("ngIf","Quality"==i.ODataP.sOption),e.xp6(2),e.Q6J("ngModel",t.active)}}function Vt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",31),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Xt=(()=>{class a{constructor(t,i,n,o,l,p,_){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.authServ=p,this.productsServ=_,this._appMain=C.N.appMain,this.title="",this.bShowSpinner=!1,this.idUserLogON=0,this.oCatForm={sOption:"",idRelation:0,name:"",description:"",valor:0,active:!0},this.oCatList=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.ODataP.sOption.length>0&&(t.title="Groups"==t.ODataP.sOption?"Cat\xe1logo de grupos":"Families"==t.ODataP.sOption?"Cat\xe1logo de familias":"Quality"==t.ODataP.sOption?"Cat\xe1logo de calidades":"Origin"==t.ODataP.sOption?"Cat\xe1logo de origenes":"",t.fn_getCatListWithPage())})()}fn_editData(t){this.oCatForm={idRelation:t.idRelation,name:t.name,description:t.description,valor:t.value,active:!0}}fn_clear(){this.oCatForm={idRelation:0,name:"",description:"",valor:0,active:!0}}fn_validForm(){var t=!1;return this.oCatForm.name.length>0&&(t=!0),t}fn_CerrarMDL(t){this.dialogRef.close(t)}changePagination(t){this.pagination=t,this.fn_getCatListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getCatListWithPage()}fn_insertUpdateCat(){this.fn_validForm()&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.oCatForm.sOption=this.ODataP.sOption,this.productsServ.CInsertUpdateCat(this.oCatForm).subscribe({next:i=>{0===i.status?this.servicesGServ.showAlert("S","OK!",i.message,!0):this.servicesGServ.showAlert("W","Alerta!",i.message,!0),this.fn_getCatListWithPage(),this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_getCatListWithPage(){this.bShowSpinner=!0,this.productsServ.CGetCatListWithPage(this.pagination,{sOption:this.ODataP.sOption}).subscribe({next:i=>{this.oCatList=i.data.rows,this.pagination.length=i.data.count,this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.data),this.bShowSpinner=!1}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-cat"]],decls:46,vars:10,consts:[[1,"",2,"padding","30px","padding-top","60px"],[1,"divTitle-center"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"row","top20px"],[1,"col-md-5"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingresa un nombre",3,"ngModel","ngModelChange"],[1,"col-md-6"],[1,"with100"],["matInput","","placeholder","Ingrese una descripci\xf3n",3,"ngModel","ngModelChange"],[1,"col-md-1"],[1,"example-margin",3,"ngModel","ngModelChange"],["class","row top20px",4,"ngIf"],[1,"row","top10px"],[1,"col-md-12"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["mat-raised-button","","type","button",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter"],[1,"textAlingLeft"],["class","textAlingLeft",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[1,"col-md-2"],["matInput","","cdkTextareaAutosize","","placeholder","Ingresa un valor",3,"ngModel","ngModelChange"],[2,"width","100px"],["matTooltip","Editar",1,"material-icons","manitaSobre","colorGreen",3,"click"],["disabled","",1,"example-margin",3,"ngModel","ngModelChange"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()(),e.TgZ(6,"div",3)(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Nombre"),e.qZA(),e.TgZ(11,"textarea",6),e.NdJ("ngModelChange",function(o){return i.oCatForm.name=o}),e.qZA()()(),e.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),e._uU(15,"Descripci\xf3n"),e.qZA(),e.TgZ(16,"input",9),e.NdJ("ngModelChange",function(o){return i.oCatForm.description=o}),e.qZA()()(),e.TgZ(17,"div",10)(18,"mat-checkbox",11),e.NdJ("ngModelChange",function(o){return i.oCatForm.active=o}),e._uU(19,"Activo"),e.qZA()()(),e.YNc(20,$t,6,1,"div",12),e.TgZ(21,"div",13)(22,"div",14)(23,"div",15)(24,"button",16),e.NdJ("click",function(){return i.fn_insertUpdateCat()}),e._uU(25,"Guardar"),e.qZA(),e.TgZ(26,"button",17),e.NdJ("click",function(){return i.fn_clear()}),e._uU(27,"Limpiar"),e.qZA()()()(),e.TgZ(28,"div",3)(29,"div",14)(30,"div",18)(31,"table",19)(32,"thead")(33,"th",20),e._uU(34,"Action"),e.qZA(),e.TgZ(35,"th",21),e._uU(36,"Nombre"),e.qZA(),e.TgZ(37,"th",21),e._uU(38,"Descripci\xf3n"),e.qZA(),e.YNc(39,Bt,2,0,"th",22),e.TgZ(40,"th",20),e._uU(41,"Activo"),e.qZA()(),e.TgZ(42,"tbody"),e.YNc(43,Kt,12,4,"tr",23),e.qZA()()(),e.YNc(44,Vt,1,1,"app-pagination",24),e.qZA()()(),e._UZ(45,"app-spinner",25)),2&t&&(e.xp6(2),e.hij(" ",i.title," "),e.xp6(9),e.Q6J("ngModel",i.oCatForm.name),e.xp6(5),e.Q6J("ngModel",i.oCatForm.description),e.xp6(2),e.Q6J("ngModel",i.oCatForm.active),e.xp6(2),e.Q6J("ngIf","Quality"==i.ODataP.sOption),e.xp6(4),e.Q6J("disabled",!i.fn_validForm()),e.xp6(15),e.Q6J("ngIf","Quality"==i.ODataP.sOption),e.xp6(4),e.Q6J("ngForOf",i.oCatList),e.xp6(1),e.Q6J("ngIf",i.oCatList),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,v.lW,v.RK,L.oG,d.KE,d.hX,N.Nt,Q.IC,P.Hw,O.gM,U.O,D]}),a})();const ei=["cbxSucursalCBX"];function ti(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function ii(a,r){if(1&a&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ni(a,r){1&a&&(e.TgZ(0,"mat-option",53),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function ai(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSupplier_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function oi(a,r){if(1&a&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ri(a,r){1&a&&(e.TgZ(0,"mat-option",53),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function si(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxGroups_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function li(a,r){if(1&a&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ci(a,r){1&a&&(e.TgZ(0,"mat-option",53),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function pi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxFamilies_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function ui(a,r){if(1&a&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function mi(a,r){1&a&&(e.TgZ(0,"mat-option",53),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function di(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxQuality_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function _i(a,r){if(1&a&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function hi(a,r){1&a&&(e.TgZ(0,"mat-option",53),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function gi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxOrigin_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function fi(a,r){if(1&a&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ci(a,r){1&a&&(e.TgZ(0,"mat-option",53),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function bi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",28)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3,"Agregar al inventario"),e.qZA(),e.TgZ(4,"input",54),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.productForm.addInv=n)})("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.ev_fn_nextInput_keyup_enter("btnSave"))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.productForm.addInv)}}function Si(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",63)(2,"div",64)(3,"div",2)(4,"div",42)(5,"mat-icon",65),e._uU(6,"calendar_today"),e.qZA()(),e.TgZ(7,"div",66)(8,"label",67),e._uU(9),e.qZA(),e.TgZ(10,"label",67),e._uU(11),e.qZA()()()()(),e.TgZ(12,"td",68),e._uU(13),e.qZA(),e.TgZ(14,"td",69),e._uU(15),e.qZA(),e.TgZ(16,"td",69),e._uU(17),e.qZA(),e.TgZ(18,"td",69),e._uU(19),e.qZA(),e.TgZ(20,"td",68),e._uU(21),e.qZA(),e.TgZ(22,"td",68)(23,"div",70),e._uU(24),e.qZA()(),e.TgZ(25,"td",68),e._uU(26),e.qZA(),e.TgZ(27,"td",68),e._uU(28),e.qZA()()),2&a){const t=r.$implicit;e.xp6(9),e.Oqu(t.createDateDate),e.xp6(2),e.Oqu(t.createDateHours),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.cantidad),e.xp6(2),e.Oqu(t.acumulado),e.xp6(2),e.Oqu(t.catInventary),e.xp6(2),e.Oqu(t.userName),e.xp6(3),e.hij(" ",t.ventaDesc," "),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(t.sellerName)}}function vi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",71),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("IPagination",t.pagination)}}function xi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",1),e._uU(2," Movimientos en el inventario "),e.qZA(),e.TgZ(3,"div",45)(4,"div",3)(5,"button",56),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowInsertInventaryLog())}),e.TgZ(6,"mat-icon",20),e._uU(7,"inbox"),e.qZA(),e._uU(8," Modificaci\xf3n de inventario"),e.qZA()()(),e.TgZ(9,"div",4)(10,"div",3)(11,"div",57)(12,"table",58)(13,"thead")(14,"th",59),e._uU(15,"Fecha"),e.qZA(),e.TgZ(16,"th",60),e._uU(17,"Descripci\xf3n"),e.qZA(),e.TgZ(18,"th",59),e._uU(19,"Cantidad"),e.qZA(),e.TgZ(20,"th",59),e._uU(21,"Acomulado"),e.qZA(),e.TgZ(22,"th",59),e._uU(23,"Inventario"),e.qZA(),e.TgZ(24,"th",59),e._uU(25,"usuario"),e.qZA()(),e.TgZ(26,"tbody"),e.YNc(27,Si,29,10,"tr",61),e.qZA()()(),e.YNc(28,vi,1,1,"app-pagination",62),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(27),e.Q6J("ngForOf",t.inventaryLoglist),e.xp6(1),e.Q6J("ngIf",t.inventaryLoglist)}}let ye=(()=>{class a{changePagination(t){this.pagination=t,this.fn_getInventarylogByIdProductWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getInventarylogByIdProductWithPage()}constructor(t,i,n,o,l,p,_,g,u,s,S,$,c,G){this.servicesGServ=t,this.productsServ=i,this.fb=n,this.router=o,this.activatedRoute=l,this._adapter=p,this._locale=_,this.familiesServ=g,this.groupsServ=u,this.originServ=s,this.qualityServ=S,this.sucursalesServ=$,this.suppliersServ=c,this.authServ=G,this._appMain=C.N.appMain,this.title="Producto",this.bShowSpinner=!1,this.idProduct=0,this.idUserLogON=0,this.inventaryLoglist=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.productForm={idSucursal:0,sucursalDesc:"",idProduct:0,createDate:"",barCode:"",name:"",gramos:0,cost:0,price:0,idFamily:0,familyDesc:"",idGroup:0,groupDesc:"",idQuality:0,qualityDesc:"",idOrigin:0,originDesc:"",idSupplier:0,supplierDesc:"",noEntrada:"",active:!0,addInv:1,idUser:0},this.cbxFamiliesList=[],this.cbxGroupsList=[],this.cbxQualityList=[],this.cbxOriginList=[],this.cbxSucursales=[],this.cbxSupplierList=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.router.url.includes("editProduct")&&(t.bShowSpinner=!0,t.activatedRoute.params.pipe((0,pe.w)(({id:i})=>t.productsServ.CGetProductByID(i))).subscribe(i=>{console.log(i),0==i.status?(t.idProduct=i.data.idProduct,t.productForm={idProduct:i.data.idProduct,idSucursal:i.data.idSucursal,sucursalDesc:i.data.sucursalDesc,createDate:i.data.createDate,barCode:i.data.barCode,name:i.data.name,gramos:i.data.gramos,cost:i.data.cost,price:i.data.price,idFamily:i.data.idFamily,familyDesc:i.data.familyDesc,idGroup:i.data.idGroup,groupDesc:i.data.groupDesc,idQuality:i.data.idQuality,qualityDesc:i.data.qualityDesc,idOrigin:i.data.idOrigin,originDesc:i.data.originDesc,idSupplier:i.data.idSupplier,supplierDesc:i.data.supplierDesc,active:i.data.active,addInv:1,idUser:t.idUserLogON},t.fn_getInventarylogByIdProductWithPage()):t.servicesGServ.showSnakbar(i.message),t.bShowSpinner=!1}))})()}fn_ClearForm(){this.idProduct=0,this.productForm.idProduct=0,this.productForm.createDate="",this.productForm.barCode="",this.productForm.name="",this.productForm.gramos=0,this.productForm.cost=0,this.productForm.price=0,this.productForm.idFamily=0,this.productForm.familyDesc="",this.productForm.idGroup=0,this.productForm.groupDesc="",this.productForm.idQuality=0,this.productForm.qualityDesc="",this.productForm.idOrigin=0,this.productForm.originDesc="",this.productForm.active=!0,this.productForm.addInv=1,setTimeout(()=>{this.ev_fn_nextInput_keyup_enter("barCode")},3e3)}ev_fn_nextInput_keyup_enter(t){setTimeout(()=>{document.getElementById(t).focus()},100)}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}showCat(t){this.servicesGServ.showModalWithParams(Xt,{sOption:t},"1500px").afterClosed().subscribe({next:n=>{}})}fn_validForm(){var t=!1;return this.productForm.idSucursal>0&&this.productForm.idFamily>0&&this.productForm.idGroup>0&&this.productForm.idQuality>0&&this.productForm.idOrigin>0&&this.productForm.barCode.length>0&&this.productForm.name.length>0&&this.productForm.cost>=0&&this.productForm.price>0&&(t=!0),t}fn_saveProduct(){this.productForm.idUser=this.idUserLogON,this.bShowSpinner=!0,this.idProduct>0?this.productsServ.CUpdateProduct(this.productForm).subscribe({next:t=>{0===t.status?this.servicesGServ.showAlert("S","OK!",t.message,!0):this.servicesGServ.showAlert("W","Alerta!",t.message,!0),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}):this.productsServ.CInsertProduct(this.productForm).subscribe({next:t=>{0===t.status?(this.idProduct=t.insertID,this.productForm.idProduct=t.insertID,this.servicesGServ.showAlert("S","OK!",t.message,!0),this.fn_ClearForm()):this.servicesGServ.showAlert("W","Alerta!",t.message,!0),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}fn_getInventarylogByIdProductWithPage(){this.bShowSpinner=!0,this.productsServ.CGetInventarylogByIdProductWithPage(this.pagination,this.idProduct).subscribe({next:t=>{console.log(t),this.inventaryLoglist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_getProductByBarCode(){0==this.productForm.idProduct&&this.productForm.barCode.length>0&&(this.bShowSpinner=!0,this.productsServ.CGetProductByBarCode(this.productForm.barCode,this.idUserLogON).subscribe({next:t=>{0===t.status&&this.servicesGServ.showAlert("W","Alerta!","Ese c\xf3digo de barras ya existe.",!1),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}cbxFamilies_Search(){this.familiesServ.CCbxGetFamiliesCombo(this.productForm.familyDesc).subscribe({next:t=>{this.cbxFamiliesList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFamilies_SelectedOption(t){this.cbxFamilies_Clear(),setTimeout(()=>{const i=t.option.value;this.productForm.idFamily=i.idFamily,this.productForm.familyDesc=i.name,this.ev_fn_nextInput_keyup_enter("cbxQuality")},1)}cbxFamilies_Clear(){this.productForm.idFamily=0,this.productForm.familyDesc=""}cbxGroups_Search(){this.groupsServ.CCbxGetGroupsCombo(this.productForm.groupDesc).subscribe({next:t=>{this.cbxGroupsList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxGroups_SelectedOption(t){this.cbxGroups_Clear(),setTimeout(()=>{const i=t.option.value;this.productForm.idGroup=i.idGroup,this.productForm.groupDesc=i.name,this.ev_fn_nextInput_keyup_enter("cbxFamilies")},1)}cbxGroups_Clear(){this.productForm.idGroup=0,this.productForm.groupDesc=""}cbxQuality_Search(){this.qualityServ.CCbxGetQualityCombo(this.productForm.qualityDesc).subscribe({next:t=>{this.cbxQualityList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxQuality_SelectedOption(t){this.cbxQuality_Clear(),setTimeout(()=>{const i=t.option.value;this.productForm.idQuality=i.idQuality,this.productForm.qualityDesc=i.name,this.ev_fn_nextInput_keyup_enter("cbxOrigin")},1)}cbxQuality_Clear(){this.productForm.idQuality=0,this.productForm.qualityDesc=""}cbxOrigin_Search(){this.originServ.CCbxGetOriginCombo(this.productForm.originDesc).subscribe({next:t=>{this.cbxOriginList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxOrigin_SelectedOption(t){this.cbxOrigin_Clear(),setTimeout(()=>{const i=t.option.value;this.productForm.idOrigin=i.idOrigin,this.productForm.originDesc=i.name,this.ev_fn_nextInput_keyup_enter("tbxAddInv")},1)}cbxOrigin_Clear(){this.productForm.idOrigin=0,this.productForm.originDesc=""}cbxSucursales_Search(){this.sucursalesServ.CCbxGetSucursalesCombo(this.productForm.sucursalDesc,this.idUserLogON).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){this.cbxSucursales_Clear(),setTimeout(()=>{const i=t.option.value;this.productForm.idSucursal=i.idSucursal,this.productForm.sucursalDesc=i.name,this.ev_fn_nextInput_keyup_enter("cbxSupplier")},1)}cbxSucursales_Clear(){this.productForm.idSucursal=0,this.productForm.sucursalDesc=""}cbxSupplier_Search(){this.suppliersServ.CCbxGetSuppliersCombo(this.productForm.supplierDesc).subscribe({next:t=>{this.cbxSupplierList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSupplier_SelectedOption(t){this.cbxSupplier_Clear(),setTimeout(()=>{const i=t.option.value;this.productForm.idSupplier!=i.idSupplier&&(this.productForm.idSupplier=i.idSupplier,this.productForm.supplierDesc=i.name),this.ev_fn_nextInput_keyup_enter("tbxNoEntrada")},1)}cbxSupplier_Clear(){this.productForm.idSupplier=0,this.productForm.supplierDesc=""}fn_ShowInsertInventaryLog(){this.servicesGServ.showModalWithParams(Rt,{idProduct:this.idProduct},"1500px").afterClosed().subscribe({next:i=>{this.fn_getInventarylogByIdProductWithPage()}})}showSuppliersCat(){this.servicesGServ.showModalWithParams(zt,null,"1500px").afterClosed().subscribe({next:t=>{}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(R),e.Y36(m.qu),e.Y36(J.F0),e.Y36(J.gz),e.Y36(f._A),e.Y36(f.Ad),e.Y36(oe),e.Y36(ne),e.Y36(me),e.Y36(de),e.Y36(W),e.Y36(_e),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-product"]],viewQuery:function(t,i){if(1&t&&e.Gf(ei,5),2&t){let n;e.iGM(n=e.CRH())&&(i.cbxSucursalCBX=n.first)}},decls:135,vars:43,consts:[[1,"divMain","textAlingCenter",2,"padding","30px"],[1,"divTitle-center"],[1,"row"],[1,"col-md-12"],[1,"row","top20px"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus","click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-8"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],["type","text","id","cbxSupplier","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus","click"],["cbxSupplier","matAutocomplete"],[1,"col-md-4","top30px"],[1,"with100"],["id","tbxNoEntrada","matInput","","placeholder","Ingrese n\xfamero de entrada",3,"ngModel","ngModelChange","keyup.enter"],[1,"col-md-4"],["matPrefix","",1,"my-icon"],["id","barCode","matInput","","placeholder","Ingrese un C\xf3digo de barras",3,"ngModel","ngModelChange","keyup.enter"],["id","tbxCost","matInput","","placeholder","Ingrese un costo","type","number",3,"ngModel","ngModelChange","keyup.enter"],["id","tbxPrice","matInput","","placeholder","Ingrese un precio","type","number",3,"ngModel","ngModelChange","keyup.enter"],[1,"col-md-6"],["id","tbxName","matInput","","placeholder","Ingrese un nombre",3,"ngModel","ngModelChange","keyup.enter"],["id","tbxGramos","matInput","","placeholder","Ingrese los gramos","type","number",3,"ngModel","ngModelChange","keyup.enter"],["text","",1,"row","top20px"],[1,"col-md-3"],["type","text","id","cbxGroups","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus","click"],["cbxGroupsCBX",""],["autoActiveFirstOption","",3,"optionSelected","click"],["cbxGroups","matAutocomplete"],["type","text","id","cbxFamilies","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus","click"],["cbxFamiliesCBX",""],["cbxFamilies","matAutocomplete"],["type","text","id","cbxQuality","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus","click"],["cbxQualityCBX",""],["cbxQuality","matAutocomplete"],["type","text","id","cbxOrigin","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus","click"],["cbxOriginCBX",""],["cbxOrigin","matAutocomplete"],[1,"col-md-1"],[1,"example-margin",3,"ngModel","ngModelChange"],["class","col-md-3",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["id","btnSave","mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["class","divMain","style","padding: 30px;",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["id","tbxAddInv","matInput","","placeholder","Ingrese una cantidad","type","number",3,"ngModel","ngModelChange","keyup.enter"],[1,"divMain",2,"padding","30px"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px","top10px700",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[1,"textAlingCenter"],[2,"width","120px"],["matPrefix","",1,"my-icon",2,"margin-top","5px"],[1,"col-md-10"],[2,"margin-left","10px"],[2,"text-align","left"],[1,"textAlingRight"],[2,"width","150px"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e._UZ(5,"br"),e.TgZ(6,"div",4)(7,"div",3)(8,"mat-label"),e._uU(9,"Sucursal: "),e.qZA(),e.TgZ(10,"mat-form-field",5),e.NdJ("click",function(){return i.cbxSucursales_Clear(),i.cbxSucursales_Search()}),e.TgZ(11,"input",6),e.NdJ("ngModelChange",function(o){return i.productForm.sucursalDesc=o})("input",function(){return i.cbxSucursales_Search()})("focus",function(){return i.cbxSucursales_Clear(),i.cbxSucursales_Search()})("click",function(){return i.cbxSucursales_Clear()}),e.qZA(),e.YNc(12,ti,3,0,"button",7),e.TgZ(13,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(o){return i.cbxSucursales_SelectedOption(o)}),e.YNc(15,ii,2,2,"mat-option",10),e.YNc(16,ni,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(17,"div",2)(18,"div",12)(19,"mat-label"),e._uU(20,"Proveedor: "),e.qZA(),e.TgZ(21,"span",13),e.NdJ("click",function(){return i.showSuppliersCat()}),e._uU(22," add_circle_outline "),e.qZA(),e.TgZ(23,"mat-form-field",5),e.NdJ("click",function(){return i.cbxSupplier_Clear(),i.cbxSupplier_Search()}),e.TgZ(24,"input",14),e.NdJ("ngModelChange",function(o){return i.productForm.supplierDesc=o})("input",function(){return i.cbxSupplier_Search()})("focus",function(){return i.cbxSupplier_Clear(),i.cbxSupplier_Search()})("click",function(){return i.cbxSupplier_Clear()}),e.qZA(),e.YNc(25,ai,3,0,"button",7),e.TgZ(26,"mat-autocomplete",8,15),e.NdJ("optionSelected",function(o){return i.cbxSupplier_SelectedOption(o)}),e.YNc(28,oi,2,2,"mat-option",10),e.YNc(29,ri,2,0,"mat-option",11),e.qZA()()(),e.TgZ(30,"div",16)(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"# Entrada"),e.qZA(),e.TgZ(34,"input",18),e.NdJ("ngModelChange",function(o){return i.productForm.noEntrada=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("barCode")}),e.qZA()()()(),e.TgZ(35,"div",2)(36,"div",19)(37,"mat-form-field",17)(38,"mat-label"),e._uU(39,"C\xf3digo de barras"),e.qZA(),e.TgZ(40,"mat-icon",20),e._uU(41,"qr_code"),e.qZA(),e.TgZ(42,"input",21),e.NdJ("ngModelChange",function(o){return i.productForm.barCode=o})("keyup.enter",function(){return i.fn_getProductByBarCode(),i.ev_fn_nextInput_keyup_enter("tbxCost")}),e.qZA()()(),e.TgZ(43,"div",19)(44,"mat-form-field",17)(45,"mat-label"),e._uU(46,"Costo: "),e.qZA(),e.TgZ(47,"mat-icon",20),e._uU(48,"monetization_on"),e.qZA(),e.TgZ(49,"input",22),e.NdJ("ngModelChange",function(o){return i.productForm.cost=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("tbxPrice")}),e.qZA()()(),e.TgZ(50,"div",19)(51,"mat-form-field",17)(52,"mat-label"),e._uU(53,"Precio: "),e.qZA(),e.TgZ(54,"mat-icon",20),e._uU(55,"monetization_on"),e.qZA(),e.TgZ(56,"input",23),e.NdJ("ngModelChange",function(o){return i.productForm.price=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("tbxName")}),e.qZA()()()(),e.TgZ(57,"div",4)(58,"div",24)(59,"mat-form-field",17)(60,"mat-label"),e._uU(61,"Nombre"),e.qZA(),e.TgZ(62,"input",25),e.NdJ("ngModelChange",function(o){return i.productForm.name=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("tbxGramos")}),e.qZA()()(),e.TgZ(63,"div",24)(64,"mat-form-field",17)(65,"mat-label"),e._uU(66,"Gramos"),e.qZA(),e.TgZ(67,"input",26),e.NdJ("ngModelChange",function(o){return i.productForm.gramos=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("cbxGroups")}),e.qZA()()()(),e.TgZ(68,"div",27)(69,"div",28)(70,"mat-label"),e._uU(71,"Grupo: "),e.qZA(),e.TgZ(72,"span",13),e.NdJ("click",function(){return i.showCat("Groups")}),e._uU(73," add_circle_outline "),e.qZA(),e.TgZ(74,"mat-form-field",5),e.NdJ("click",function(){return i.cbxGroups_Clear(),i.cbxGroups_Search()}),e.TgZ(75,"input",29,30),e.NdJ("ngModelChange",function(o){return i.productForm.groupDesc=o})("input",function(){return i.cbxGroups_Search()})("focus",function(){return i.cbxGroups_Clear(),i.cbxGroups_Search()})("click",function(){return i.cbxGroups_Clear()}),e.qZA(),e.YNc(77,si,3,0,"button",7),e.TgZ(78,"mat-autocomplete",31,32),e.NdJ("optionSelected",function(o){return i.cbxGroups_SelectedOption(o)})("click",function(){return i.cbxGroups_Clear()}),e.YNc(80,li,2,2,"mat-option",10),e.YNc(81,ci,2,0,"mat-option",11),e.qZA()()(),e.TgZ(82,"div",28)(83,"mat-label"),e._uU(84,"Familia: "),e.qZA(),e.TgZ(85,"span",13),e.NdJ("click",function(){return i.showCat("Families")}),e._uU(86," add_circle_outline "),e.qZA(),e.TgZ(87,"mat-form-field",5),e.NdJ("click",function(){return i.cbxFamilies_Clear(),i.cbxFamilies_Search()}),e.TgZ(88,"input",33,34),e.NdJ("ngModelChange",function(o){return i.productForm.familyDesc=o})("input",function(){return i.cbxFamilies_Search()})("focus",function(){return i.cbxFamilies_Clear(),i.cbxFamilies_Search()})("click",function(){return i.cbxFamilies_Clear()}),e.qZA(),e.YNc(90,pi,3,0,"button",7),e.TgZ(91,"mat-autocomplete",8,35),e.NdJ("optionSelected",function(o){return i.cbxFamilies_SelectedOption(o)}),e.YNc(93,ui,2,2,"mat-option",10),e.YNc(94,mi,2,0,"mat-option",11),e.qZA()()(),e.TgZ(95,"div",28)(96,"mat-label"),e._uU(97,"Calidad: "),e.qZA(),e.TgZ(98,"span",13),e.NdJ("click",function(){return i.showCat("Quality")}),e._uU(99," add_circle_outline "),e.qZA(),e.TgZ(100,"mat-form-field",5),e.NdJ("click",function(){return i.cbxQuality_Clear(),i.cbxQuality_Search()}),e.TgZ(101,"input",36,37),e.NdJ("ngModelChange",function(o){return i.productForm.qualityDesc=o})("input",function(){return i.cbxQuality_Search()})("focus",function(){return i.cbxQuality_Clear(),i.cbxQuality_Search()})("click",function(){return i.cbxQuality_Clear()}),e.qZA(),e.YNc(103,di,3,0,"button",7),e.TgZ(104,"mat-autocomplete",8,38),e.NdJ("optionSelected",function(o){return i.cbxQuality_SelectedOption(o)}),e.YNc(106,_i,2,2,"mat-option",10),e.YNc(107,hi,2,0,"mat-option",11),e.qZA()()(),e.TgZ(108,"div",28)(109,"mat-label"),e._uU(110,"Origen: "),e.qZA(),e.TgZ(111,"span",13),e.NdJ("click",function(){return i.showCat("Origin")}),e._uU(112," add_circle_outline "),e.qZA(),e.TgZ(113,"mat-form-field",5),e.NdJ("click",function(){return i.cbxOrigin_Clear(),i.cbxOrigin_Search()}),e.TgZ(114,"input",39,40),e.NdJ("ngModelChange",function(o){return i.productForm.originDesc=o})("input",function(){return i.cbxOrigin_Search()})("focus",function(){return i.cbxOrigin_Clear(),i.cbxOrigin_Search()})("click",function(){return i.cbxOrigin_Clear()}),e.qZA(),e.YNc(116,gi,3,0,"button",7),e.TgZ(117,"mat-autocomplete",8,41),e.NdJ("optionSelected",function(o){return i.cbxOrigin_SelectedOption(o)}),e.YNc(119,fi,2,2,"mat-option",10),e.YNc(120,Ci,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(121,"div",2)(122,"div",42)(123,"mat-checkbox",43),e.NdJ("ngModelChange",function(o){return i.productForm.active=o}),e._uU(124,"Activo"),e.qZA()(),e.YNc(125,bi,5,1,"div",44),e.qZA(),e.TgZ(126,"div",45)(127,"div",3)(128,"div",46)(129,"button",47),e.NdJ("click",function(){return i.fn_saveProduct()}),e._uU(130,"Guardar"),e.qZA(),e.TgZ(131,"button",48),e.NdJ("click",function(){return i.changeRoute("productList")}),e._uU(132,"Cancelar"),e.qZA()()()()()()(),e.YNc(133,xi,29,2,"div",49),e._UZ(134,"app-spinner",50)),2&t){const n=e.MAs(14),o=e.MAs(27),l=e.MAs(79),p=e.MAs(92),_=e.MAs(105),g=e.MAs(118);e.xp6(2),e.AsE(" ",i.idProduct?"Editar":"Nuevo"," ",i.title," "),e.xp6(9),e.Q6J("ngModel",i.productForm.sucursalDesc)("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",i.productForm.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.productForm.sucursalDesc),e.xp6(8),e.Q6J("ngModel",i.productForm.supplierDesc)("matAutocomplete",o),e.xp6(1),e.Q6J("ngIf",i.productForm.supplierDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSupplierList),e.xp6(1),e.Q6J("ngIf",0==i.cbxSupplierList.length&&i.productForm.supplierDesc),e.xp6(5),e.Q6J("ngModel",i.productForm.noEntrada),e.xp6(8),e.Q6J("ngModel",i.productForm.barCode),e.xp6(7),e.Q6J("ngModel",i.productForm.cost),e.xp6(7),e.Q6J("ngModel",i.productForm.price),e.xp6(6),e.Q6J("ngModel",i.productForm.name),e.xp6(5),e.Q6J("ngModel",i.productForm.gramos),e.xp6(8),e.Q6J("ngModel",i.productForm.groupDesc)("matAutocomplete",l),e.xp6(2),e.Q6J("ngIf",i.productForm.groupDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxGroupsList),e.xp6(1),e.Q6J("ngIf",0==i.cbxGroupsList.length&&i.productForm.groupDesc),e.xp6(7),e.Q6J("ngModel",i.productForm.familyDesc)("matAutocomplete",p),e.xp6(2),e.Q6J("ngIf",i.productForm.familyDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFamiliesList),e.xp6(1),e.Q6J("ngIf",0==i.cbxFamiliesList.length&&i.productForm.familyDesc),e.xp6(7),e.Q6J("ngModel",i.productForm.qualityDesc)("matAutocomplete",_),e.xp6(2),e.Q6J("ngIf",i.productForm.qualityDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxQualityList),e.xp6(1),e.Q6J("ngIf",0==i.cbxQualityList.length&&i.productForm.qualityDesc),e.xp6(7),e.Q6J("ngModel",i.productForm.originDesc)("matAutocomplete",g),e.xp6(2),e.Q6J("ngIf",i.productForm.originDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxOriginList),e.xp6(1),e.Q6J("ngIf",0==i.cbxOriginList.length&&i.productForm.originDesc),e.xp6(3),e.Q6J("ngModel",i.productForm.active),e.xp6(2),e.Q6J("ngIf",0==i.idProduct),e.xp6(4),e.Q6J("disabled",!i.fn_validForm()),e.xp6(4),e.Q6J("ngIf",i.idProduct>0),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.wV,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,L.oG,d.KE,d.hX,d.qo,d.R9,N.Nt,P.Hw,U.O,D]}),a})(),V=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/customers"}CGetCustomersListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getCustomersListWithPage`,{createDateStart:i.createDateStart,createDateEnd:i.createDateEnd,name:i.name,lastName:i.lastName,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CCbxGetCustomersCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetCustomersCombo`,{idUser:i,search:t})}CGetCustomerByID(t){return this.http.post(`${this.baseURL}/${this._api}/getCustomerByID`,{idCustomer:t})}CGetCustomerByIDPromise(t){var i=this;return(0,Z.Z)(function*(){var n={idCustomer:t};return new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getCustomerByID`,n).subscribe({next:p=>{o(p.data)},error:p=>{l(p)}})})})()}CInsertCustomer(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertCustomer`,t)}CUpdateCustomer(t){return this.http.post(`${this.baseURL}/${this._api}/updateCustomer`,t)}CDeleteCustomer(t){return this.http.post(`${this.baseURL}/${this._api}/deleteCustomer`,{idCustomer:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Ae=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u,s){this.dialogRef=t,this.OParamsData=i,this.servicesGServ=n,this.customerServ=o,this.fb=l,this.router=p,this.activatedRoute=_,this._adapter=g,this._locale=u,this.authServ=s,this._appMain=C.N.appMain,this.title="Cliente",this.bShowSpinner=!1,this.id=0,this.name="",this.idUserLogON=0,this.isMDL=!1,this.customerForm={idCustomer:0,createDate:"",name:"",lastName:"",address:"",tel:"",eMail:"",active:!0,idUser:0}}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.OParamsData.id>0&&(t.bShowSpinner=!0,t.customerServ.CGetCustomerByID(t.OParamsData.id).subscribe(i=>{0==i.status?(t.id=i.data.idCustomer,t.customerForm={idCustomer:i.data.idCustomer,createDate:i.data.createDate,name:i.data.name,lastName:i.data.lastName,address:i.data.address,tel:i.data.tel,eMail:i.data.eMail,active:i.data.active,idUser:t.idUserLogON},t.name=t.event_getDescCustomer()):t.servicesGServ.showSnakbar(i.message),t.bShowSpinner=!1})),setTimeout(()=>{t.ev_fn_nextInput_keyup_enter("tbxLastName")},500)})()}ev_fn_nextInput_keyup_enter(t){setTimeout(()=>{document.getElementById(t).focus()},100)}fn_validForm(){var t=!1;return this.customerForm.name.length>0&&(t=!0),t}close(){this.dialogRef.close({bOK:this.id>0,id:this.id,name:this.name})}inputFocus(t){t?.focus()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_saveCustomer(){this.customerForm.idUser=this.idUserLogON,this.bShowSpinner=!0,this.id>0?this.customerServ.CUpdateCustomer(this.customerForm).subscribe({next:t=>{0===t.status&&(this.servicesGServ.showAlertIA(t),this.name=this.event_getDescCustomer()),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}):this.customerServ.CInsertCustomer(this.customerForm).subscribe({next:t=>{0===t.status&&(this.id=t.insertID,this.name=this.event_getDescCustomer(),this.customerForm.idCustomer=t.insertID,this.servicesGServ.showAlertIA(t)),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}event_getDescCustomer(){return this.customerForm.lastName+" "+this.customerForm.name+" - "+this.customerForm.tel+" - "+this.customerForm.address}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(V),e.Y36(m.qu),e.Y36(J.F0),e.Y36(J.gz),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-customer"]],decls:50,vars:10,consts:[[1,"textAlingCenter",2,"padding","30px","padding-top","60px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"divTitle-center"],[1,"row"],[1,"col-md-12"],[1,"row","top20px"],[1,"col-md-4"],[1,"with100"],["id","tbxLastName","matInput","","placeholder","Ingrese los apellidos",3,"ngModel","ngModelChange","keyup.enter"],["id","tbxName","matInput","","placeholder","Ingrese el nombre","type","text",3,"ngModel","ngModelChange","keyup.enter"],["matPrefix","",1,"my-icon"],["id","tbxTel","matInput","","placeholder","Ingrese un tel\xe9fono","type","text",3,"ngModel","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"example-full-width","with100"],["id","tbxAddress","matInput","","cdkTextareaAutosize","","placeholder","Ingrese la direcci\xf3n",3,"ngModel","ngModelChange","keyup.enter"],["id","tbxEmail","matInput","","placeholder","Ingrese un correo electr\xf3nico",3,"ngModel","ngModelChange","keyup.enter"],[1,"col-md-1"],[1,"example-margin",3,"ngModel","ngModelChange"],[1,"row","top10px"],[2,"float","left"],["id","btnSave","mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["mat-raised-button","","type","button",3,"click"],[3,"hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.close()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",2),e._uU(5),e.qZA(),e.TgZ(6,"div",3)(7,"div",4),e._UZ(8,"br"),e.TgZ(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Apellidos"),e.qZA(),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(o){return i.customerForm.lastName=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("tbxName")}),e.qZA()()(),e.TgZ(15,"div",6)(16,"mat-form-field",7)(17,"mat-label"),e._uU(18,"Nombre: "),e.qZA(),e.TgZ(19,"input",9),e.NdJ("ngModelChange",function(o){return i.customerForm.name=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("tbxTel")}),e.qZA()()(),e.TgZ(20,"div",6)(21,"mat-form-field",7)(22,"mat-label"),e._uU(23,"Tel\xe9fono: "),e.qZA(),e.TgZ(24,"mat-icon",10),e._uU(25,"phone"),e.qZA(),e.TgZ(26,"input",11),e.NdJ("ngModelChange",function(o){return i.customerForm.tel=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("tbxAddress")}),e.qZA()()()(),e.TgZ(27,"div",5)(28,"div",12)(29,"mat-form-field",13)(30,"mat-label"),e._uU(31,"Direcci\xf3n"),e.qZA(),e.TgZ(32,"input",14),e.NdJ("ngModelChange",function(o){return i.customerForm.address=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("tbxEmail")}),e.qZA()()(),e.TgZ(33,"div",12)(34,"mat-form-field",7)(35,"mat-label"),e._uU(36,"Correo electr\xf3nico"),e.qZA(),e.TgZ(37,"input",15),e.NdJ("ngModelChange",function(o){return i.customerForm.eMail=o})("keyup.enter",function(){return i.ev_fn_nextInput_keyup_enter("btnSave")}),e.qZA()()()(),e.TgZ(38,"div",3)(39,"div",16)(40,"mat-checkbox",17),e.NdJ("ngModelChange",function(o){return i.customerForm.active=o}),e._uU(41,"Activo"),e.qZA()()(),e.TgZ(42,"div",18)(43,"div",4)(44,"div",19)(45,"button",20),e.NdJ("click",function(){return i.fn_saveCustomer()}),e._uU(46,"Guardar"),e.qZA(),e.TgZ(47,"button",21),e.NdJ("click",function(){return i.close()}),e._uU(48,"Cerrar"),e.qZA()()()()()()(),e._UZ(49,"app-spinner",22)),2&t&&(e.xp6(5),e.AsE(" ",i.id?"Editar":"Nuevo"," ",i.title," "),e.xp6(9),e.Q6J("ngModel",i.customerForm.lastName),e.xp6(5),e.Q6J("ngModel",i.customerForm.name),e.xp6(7),e.Q6J("ngModel",i.customerForm.tel),e.xp6(6),e.Q6J("ngModel",i.customerForm.address),e.xp6(5),e.Q6J("ngModel",i.customerForm.eMail),e.xp6(3),e.Q6J("ngModel",i.customerForm.active),e.xp6(5),e.Q6J("disabled",!i.fn_validForm()),e.xp6(4),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.Fj,m.JJ,m.On,v.lW,v.RK,L.oG,d.KE,d.hX,d.qo,N.Nt,P.Hw,U.O]}),a})(),Fe=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/electronicMoney"}CGetElectronicMoneyListWithPage(t,i){return this.http.post(`${this.baseURL}/${this._api}/getElectronicMoneyListWithPage`,{idCustomer:i,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CInsertElectronicMoney(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertElectronicMoney`,t)}CDeleteElectronicMoney(t){return this.http.post(`${this.baseURL}/${this._api}/deleteElectronicMoney`,{idElectronicMoney:t})}CGetRepElectronicMoneyListWithPage(t,i){let n=t.pageIndex*t.pageSize,o=t.pageSize;return i.search=t.search,i.start=n,i.limiter=o,i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getRepElectronicMoneyListWithPage`,i)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Y=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/sales"}CInsertSale(t){const i={idSeller_idUser:t.idSeller_idUser,idCustomer:t.idCustomer,idSaleType:t.idSaleType,saleDetail:t.saleDetail};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertSale`,i)}CGetVentasListWithPage(t,i){const _={idUser:i.idUser,createDateStart:i.createDateStart,createDateEnd:i.createDateEnd,idCustomer:i.idCustomer,idSaleType:i.idSaleType,bCancel:i.bCancel,bPending:i.bPending,bPagada:i.bPagada,search:i.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize};return _.idUserLogON=this.authServ.getIdUserSession(),_.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getVentasListWithPage`,_)}CGetSaleByID(t){var i={idSale:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getSaleByID`,i)}CGetSaleByIDPromise(t){var i=this;return(0,Z.Z)(function*(){var n={idSale:t};return n.idUserLogON=i.authServ.getIdUserSession(),n.idSucursalLogON=i.idSucursal,new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getSaleByID`,n).subscribe({next:p=>{o(p)},error:p=>{l(p)}})})})()}CInsertPayments(t,i,n){const o={idCaja:i,idCustomer:n,paymentList:t};return o.idUserLogON=this.authServ.getIdUserSession(),o.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertPayments`,o)}CGetPaymentsByIdSaleListWithPage(t,i){var l={idSale:i,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize};return l.idUserLogON=this.authServ.getIdUserSession(),l.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getPaymentsByIdSaleListWithPage`,l)}CInsertSaleByConsignation(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertSaleByConsignation`,t)}CRegresarProductoDeConsignacion(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/regresarProductoDeConsignacion`,t)}CGetPreCorteCaja(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getPreCorteCaja`,t)}CInsertCorteCaja(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertCorteCaja`,t)}CGetPreEgresosCorteCaja(t){const i={idCaja:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getPreEgresosCorteCaja`,i)}CInsertEgresos(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertEgresos`,t)}CDisabledEgresos(t){var i={idEgreso:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledEgresos`,i)}CGetCorteCajaByIDPromise(t){var i=this;return(0,Z.Z)(function*(){var n={idCorteCaja:t};return n.idUserLogON=i.authServ.getIdUserSession(),n.idSucursalLogON=i.idSucursal,new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getCorteCajaByID`,n).subscribe({next:p=>{o(p)},error:p=>{l(p)}})})})()}CGetCorteCajaDetailByIDPromise(t){var i=this;return(0,Z.Z)(function*(){var n={idCorteCaja:t};return n.idUserLogON=i.authServ.getIdUserSession(),n.idSucursalLogON=i.idSucursal,new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getCorteCajaDetailByID`,n).subscribe({next:p=>{o(p)},error:p=>{l(p)}})})})()}CGetEgresosByIDCorteCaja(t){var i=this;return(0,Z.Z)(function*(){var n={idCorteCaja:t};return n.idUserLogON=i.authServ.getIdUserSession(),n.idSucursalLogON=i.idSucursal,new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getEgresosByIDCorteCaja`,n).subscribe({next:p=>{o(p)},error:p=>{l(p)}})})})()}CGetCorteCajaListWithPage(t,i){const l={createDateStart:i.createDateStart,createDateEnd:i.createDateEnd,idSucursal:i.idSucursal,idCaja:i.idCaja,search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize};return l.idUserLogON=this.authServ.getIdUserSession(),l.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getCorteCajaListWithPage`,l)}CDisabledSale(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledSale`,t)}CGetCorteCajaByID(t){var i={idCorteCaja:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getCorteCajaByID`,i)}CGetConsHistory(t){var i={idSale:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getConsHistory`,i)}CGetConsHistoryPromise(t){var i=this;return(0,Z.Z)(function*(){var n={idSale:t};return n.idUserLogON=i.authServ.getIdUserSession(),n.idSucursalLogON=i.idSucursal,new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getConsHistory`,n).subscribe({next:p=>{o(p)},error:p=>{l(p)}})})})()}CGetEgresoByIDPromise(t){var i=this;return(0,Z.Z)(function*(){var n={idEgreso:t};return n.idUserLogON=i.authServ.getIdUserSession(),n.idSucursalLogON=i.idSucursal,new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getEgresoByID`,n).subscribe({next:p=>{o(p)},error:p=>{l(p)}})})})()}CDisabledPayment(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledPayment`,t)}CGetEgresosListWithPage(t,i){let n=t.pageIndex*t.pageSize,o=t.pageSize;return i.search=t.search,i.start=n,i.limiter=o,this.http.post(`${this.baseURL}/${this._api}/getEgresosListWithPage`,i)}CDisableSaleDetail(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disableSaleDetail`,t)}CEditSobreTaller(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/editSobreTaller`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),re=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/cajas"}CGetCajasBySec(t,i){var n={idUser:i,search:t};return n.idUserLogON=this.authServ.getIdUserSession(),n.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getCajasBySec`,n)}CGetSelectCajaByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/getSelectCajaByIdUser`,{idUser:t})}CInsertSelectCaja(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertSelectCaja`,t)}CDeleteSelectCaja(t){return this.http.post(`${this.baseURL}/${this._api}/deleteSelectCaja`,t)}CGetCajaByID(t){var i={idCaja:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getCajaByID`,i)}CGetCajaByIDPromise(t){var i=this;return(0,Z.Z)(function*(){var n={idCaja:t};return n.idUserLogON=i.authServ.getIdUserSession(),n.idSucursalLogON=i.idSucursal,new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getCajaByID`,n).subscribe({next:p=>{o(p)},error:p=>{l(p)}})})})()}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),H=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/printers"}CGetPrintersBySec(t,i){return this.http.post(`${this.baseURL}/${this._api}/getPrintersBySec`,{idUser:i,search:t})}CGetSelectPrinterByIdUser(t){return this.http.post(`${this.baseURL}/${this._api}/getSelectPrinterByIdUser`,{idUser:t})}CInsertSelectPrinter(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertSelectPrinter`,t)}CDeleteSelectPrinter(t){return this.http.post(`${this.baseURL}/${this._api}/deleteSelectPrinter`,t)}CGetPrinterByID(t){var i={idCaja:t};return i.idUserLogON=this.authServ.getIdUserSession(),i.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getPrinterByID`,i)}CGetPrinterByIDPromise(t){var i=this;return(0,Z.Z)(function*(){var n={idPrinter:t};return n.idUserLogON=i.authServ.getIdUserSession(),n.idSucursalLogON=i.idSucursal,new Promise((o,l)=>{i.http.post(`${i.baseURL}/${i._api}/getPrinterByID`,n).subscribe({next:p=>{o(p)},error:p=>{l(p)}})})})()}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),j=(()=>{class a{constructor(t,i,n,o,l,p,_){this.http=t,this.sucursalesServ=i,this.salesServ=n,this.customersServ=o,this.servicesG=l,this.cajasServ=p,this.printersServ=_,this._api="http://localhost/printT/Print"}printTicket(t,i,n,o=0,l=""){var p=this;return(0,Z.Z)(function*(){var _=!1;let g=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});var u=[];if("Venta"==t){const b=yield p.salesServ.CGetSaleByIDPromise(i);console.log(b);const M=yield p.sucursalesServ.CGetPrintTicketSuc(b.data.idSucursal,"Header");var s=[];(s=[]).push(c={aling:"Center",size:20,text:"NOTA"}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s});for(var S=0;S<M.length;S++)(s=[]).push(c={aling:M[S].aling,size:M[S].size,text:M[S].text}),u.push({oLines:s});const z=yield p.customersServ.CGetCustomerByIDPromise(b.data.idCustomer);for(null!=z&&((s=[]).push(c={aling:"Left",size:7,text:"CLIENTE: "+z.lastName+" "+z.name}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"DIRECCI\xd3N: "+z.address}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"TELEFONO: "+z.tel}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s})),null!=b&&((s=[]).push(c={aling:"Center",size:7,text:"OPERACI\xd3N: Venta de "+b.data.saleTypeDesc}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"Folio: #"+b.data.idSale}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"FECHA: "+b.data.createDateString}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"ATENDI\xd3: "+b.data.sellerDesc}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s})),(s=[]).push(c={aling:"Left",size:5,style:"Bold",text:"DESCRIPCI\xd3N",iWith:35}),s.push(c={aling:"Center",size:5,style:"Bold",text:"CANTIDAD",iWith:15}),s.push(c={aling:"Right",size:5,style:"Bold",text:"PRECIO",iWith:25}),s.push(c={aling:"Right",size:5,style:"Bold",text:"IMPORTE",iWith:25}),u.push({oLines:s}),S=0;S<b.dataDetail.length;S++){var $=b.dataDetail[S];(s=[]).push(c={aling:"Left",size:7,text:$.productDesc,iWith:35}),s.push(c={aling:"Center",size:7,text:$.cantidad,iWith:15});var c={aling:"Right",size:7,text:g.format($.precio),iWith:25};s.push(c);c={aling:"Right",size:7,text:g.format($.importe),iWith:25};s.push(c),u.push({oLines:s})}(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Right",size:7,style:"Bold",text:"SUBTOTAL:",iWith:75}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.saleTotal),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Right",size:7,style:"Bold",text:"IVA:",iWith:75}),c={aling:"Right",size:7,style:"Bold",text:g.format(0),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Right",size:7,style:"Bold",text:"TOTAL:",iWith:75}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.saleTotal),iWith:25},s.push(c),u.push({oLines:s}),(4==b.data.idSaleType||1==b.data.idSaleType)&&((s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,text:"---------------------------------------------------- "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,text:"CLIENTE: "+z.lastName+" "+z.name}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}));const E=yield p.sucursalesServ.CGetPrintTicketSuc(b.data.idSucursal,"footer");for((s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),S=0;S<E.length;S++)(s=[]).push(c={aling:E[S].aling,size:E[S].size,text:E[S].text}),u.push({oLines:s})}else if("Payments"==t||"RePayment"==t){const b=yield p.salesServ.CGetSaleByIDPromise(i);console.log(b);const M=yield p.sucursalesServ.CGetPrintTicketSuc(b.data.idSucursal,"Header");for(s=[],(s=[]).push(c={aling:"Center",size:20,text:"PAGO"}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s}),S=0;S<M.length;S++)(s=[]).push(c={aling:M[S].aling,size:M[S].size,text:M[S].text}),u.push({oLines:s});const E=yield p.customersServ.CGetCustomerByIDPromise(b.data.idCustomer);null!=E&&((s=[]).push(c={aling:"Left",size:7,text:"CLIENTE: "+E.lastName+" "+E.name}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"DIRECCI\xd3N: "+E.address}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"TELEFONO: "+E.tel}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s})),null!=b&&((s=[]).push(c={aling:"Center",size:7,text:"OPERACI\xd3N: "+("1"==b.data.idSaleType?"Abono al cr\xe9dito #":"2"==b.data.idSaleType?"Pago de la venta #":"3"==b.data.idSaleType?"Abono al apartado #":"Pago al #")+b.data.idSale}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"FECHA: "+b.dataPayments[0].createDateString}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s})),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:5,style:"Bold",text:"# PAGO",iWith:25}),s.push(c={aling:"Center",size:5,style:"Bold",text:"FORMA DE PAGO",iWith:45}),s.push(c={aling:"Right",size:5,style:"Bold",text:"PAGO",iWith:30}),u.push({oLines:s});var G;for(G="RePayment"==t?b.dataPayments.filter(el=>el.idPayment===l):b.dataPayments,S=0;S<o;S++)(s=[]).push(c={aling:"Center",size:7,text:G[S].idPayment,iWith:20}),c={aling:"Center",size:7,text:G[S].fxRate>0?G[S].formaPagoDesc+"("+g.format(G[S].pagoF)+")":G[S].formaPagoDesc,iWith:50},s.push(c),c={aling:"Right",size:7,text:g.format(G[S].pago),iWith:30},s.push(c),u.push({oLines:s});(s=[]).push(c={aling:"Right",size:7,style:"Bold",text:"PAGADO:",iWith:75}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.pagado),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Right",size:7,style:"Bold",text:"PENDIENTE:",iWith:75}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.pendingAmount),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,text:"GRACIAS POR SU PAGO"}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,text:"CONSERVE SU TICKET PARA DECLARACIONES"}),u.push({oLines:s})}else if("CorteCaja"==t){var ae=i;const b=yield p.salesServ.CGetCorteCajaByIDPromise(ae);console.log(b);const M=yield p.sucursalesServ.CGetPrintTicketSuc(b.data.idSucursal,"Header");for(s=[],S=0;S<M.length;S++)(s=[]).push(c={aling:M[S].aling,size:M[S].size,text:M[S].text}),u.push({oLines:s});if(null!=b){(s=[]).push(c={aling:"Center",size:7,text:"OPERACI\xd3N: Corte de Caja"}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"Folio: #"+ae}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"FECHA: "+b.data.createDateString}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"CREADO POR: "+b.data.createUserName}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,style:"Bold",text:"INGRESOS:",iWith:100}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,style:"Bold",text:"VENTA:",iWith:50}),s.push(c={aling:"Center",size:7,style:"Bold",text:"EGRESOS:",iWith:50}),u.push({oLines:s}),s=[],c={aling:"Center",size:7,style:"Bold",text:g.format(b.data.sales),iWith:50},s.push(c),c={aling:"Center",size:7,style:"Bold",text:g.format(b.data.egresos),iWith:50},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:9,style:"Bold",text:"INGRESO TOTAL:",iWith:100}),u.push({oLines:s}),s=[],c={aling:"Center",size:9,style:"Bold",text:g.format(b.data.ingresoTotal),iWith:100},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,style:"Bold",text:"DESGLOSE SISTEMA",iWith:50}),s.push(c={aling:"Left",size:7,style:"Bold",text:"EXISTENCIA EN CAJA",iWith:50}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:6,style:"Bold",text:"PESOS",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.pesos),iWith:25},s.push(c),s.push(c={aling:"Left",size:6,style:"Bold",text:"PESOS",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.pesosCaja),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:6,style:"Bold",text:"D\xd3LARES (TC: "+b.data.fxRate+")",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.dolares),iWith:25},s.push(c),s.push(c={aling:"Left",size:6,style:"Bold",text:"D\xd3LARES",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.dolaresCaja),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:6,style:"Bold",text:"VOUCHERS",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.vouchers),iWith:25},s.push(c),s.push(c={aling:"Left",size:6,style:"Bold",text:"VOUCHERS",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.vouchersCaja),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:6,style:"Bold",text:"TRANSFER",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.transferencias),iWith:25},s.push(c),s.push(c={aling:"Left",size:6,style:"Bold",text:"TRANSFER",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.transferenciasCaja),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:6,style:"Bold",text:" ",iWith:25}),s.push(c={aling:"Right",size:7,style:"Bold",text:" ",iWith:25}),s.push(c={aling:"Left",size:6,style:"Bold",text:"DIFERENCIA",iWith:25}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.diferencia),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,style:"Bold",text:"SI CUADR\xd3",iWith:50}),s.push(c={aling:"Center",size:7,style:"Bold",text:"NO CUADR\xd3",iWith:50}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,style:"Bold",text:1==b.data.bCuadro?"X":" ",iWith:50}),s.push(c={aling:"Center",size:7,style:"Bold",text:2==b.data.bCuadro?"X":" ",iWith:50}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,style:"Bold",text:"COMENTARIOS:",iWith:100}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,style:"Bold",text:b.data.observaciones,iWith:100}),u.push({oLines:s});const ie=yield p.salesServ.CGetEgresosByIDCorteCaja(ae);if(console.log(ie),ie.data.length>0)for((s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,style:"Bold",text:"LISTA DE EGRESOS:",iWith:100}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:5,style:"Bold",text:"# EGRESO",iWith:20}),s.push(c={aling:"Left",size:5,style:"Bold",text:"DESCRIPCI\xd3N",iWith:50}),s.push(c={aling:"Right",size:5,style:"Bold",text:"MONTO",iWith:30}),u.push({oLines:s}),S=0;S<ie.data.length;S++)(s=[]).push(c={aling:"Left",size:7,text:ie.data[S].idEgreso,iWith:20}),s.push(c={aling:"Left",size:7,text:ie.data[S].description,iWith:50}),c={aling:"Right",size:7,text:g.format(ie.data[S].amount),iWith:30},s.push(c),u.push({oLines:s})}}else if("Egreso"==t){const b=yield p.salesServ.CGetEgresoByIDPromise(i);console.log(b);const M=yield p.sucursalesServ.CGetPrintTicketSuc(b.data.idSucursal,"Header");for(s=[],S=0;S<M.length;S++)(s=[]).push(c={aling:M[S].aling,size:M[S].size,text:M[S].text}),u.push({oLines:s});null!=b&&((s=[]).push(c={aling:"Center",size:7,text:"OPERACI\xd3N: EGRESO #"+b.data.idEgreso}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"FECHA: "+b.data.createDateString}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s})),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:5,style:"Bold",text:"DESCRIPCI\xd3N",iWith:75}),s.push(c={aling:"Right",size:5,style:"Bold",text:"MONTO",iWith:25}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,style:"Bold",text:b.data.description,iWith:75}),c={aling:"Right",size:7,style:"Bold",text:g.format(b.data.amount),iWith:25},s.push(c),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,text:"---------------------------------------------------- "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,text:"FIRMA DE QUIEN EXPIDE"}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,text:"---------------------------------------------------- "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:7,text:"FIRMA DE QUIEN RECIBE"}),u.push({oLines:s})}else if("ConsHistory"==t){const b=yield p.salesServ.CGetSaleByIDPromise(i),M=yield p.sucursalesServ.CGetPrintTicketSuc(b.data.idSucursal,"Header");for(s=[],S=0;S<M.length;S++)(s=[]).push(c={aling:M[S].aling,size:M[S].size,text:M[S].text}),u.push({oLines:s});var se=yield p.salesServ.CGetConsHistoryPromise(i);if(null!=se)for((s=[]).push(c={aling:"Center",size:7,text:"OPERACI\xd3N: Movimientos de #"+b.data.idSale}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:6,style:"Bold",text:"PRODUCTO",iWith:25}),s.push(c={aling:"Center",size:6,style:"Bold",text:"CANT",iWith:10}),s.push(c={aling:"Left",size:6,style:"Bold",text:"DESCRIPCI\xd3N",iWith:40}),s.push(c={aling:"Left",size:6,style:"Bold",text:"FECHA",iWith:25}),u.push({oLines:s}),S=0;S<se.data.rows.length;S++){var le=se.data.rows[S];(s=[]).push(c={aling:"Left",size:7,text:le.name,iWith:25}),s.push(c={aling:"Center",size:7,text:le.consCantidad,iWith:10}),s.push(c={aling:"Left",size:7,text:le.description,iWith:40}),s.push(c={aling:"Left",size:7,text:le.createDateString,iWith:25}),u.push({oLines:s})}}else if("DineroElectronico"==t){const b=yield p.customersServ.CGetCustomerByIDPromise(i);null!=b&&((s=[]).push(c={aling:"Left",size:7,text:"CLIENTE: "+b.lastName+" "+b.name}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"DIRECCI\xd3N: "+b.address}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:"TELEFONO: "+b.tel}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:7,text:" "}),u.push({oLines:s}),(s=[]).push(c={aling:"Center",size:10,text:"---------------------------------------------------------"}),u.push({oLines:s})),(s=[]).push(c={aling:"Left",size:7,style:"Bold",text:"DESCRIPCI\xd3N",iWith:60}),s.push(c={aling:"Right",size:7,style:"Bold",text:"SALDO",iWith:40}),u.push({oLines:s}),(s=[]).push(c={aling:"Left",size:9,text:"Dinero Electr\xf3nico",iWith:60}),c={aling:"Right",size:9,text:g.format(o),iWith:40},s.push(c),u.push({oLines:s})}if(n>0){var ce=yield p.printersServ.CGetPrinterByIDPromise(n);if(0==ce.status&&u.length>0){let M={oPrinter:{printerName:ce.data.printerName},oLinesP:u};return console.log(M),_=yield p.CPrintTicketAwait(ce.data._api,M),_=yield p.CPrintTicketAwait(ce.data._api,M),new Promise((z,E)=>{z(_)})}}})()}CPrintTicketAwait(t,i){return new Promise((n,o)=>{this.http.post(`${t}/printTicket`,i).subscribe({next:l=>{n(l)},error:l=>{o(l)}})})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(W),e.LFG(Y),e.LFG(V),e.LFG(A.$),e.LFG(re),e.LFG(H))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var X=w(6262);const Zi=["tbxDescription"],Ti=["tbxMonto"];function yi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_deleteElectronicMoney(n.idElectronicMoney))}),e._uU(1," delete_outline "),e.qZA()}}function Ai(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",23)(2,"div",27),e.YNc(3,yi,2,0,"span",28),e.qZA()(),e.TgZ(4,"td",21),e._uU(5),e.qZA(),e.TgZ(6,"td",22),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"td",23)(10,"div",4)(11,"div",3)(12,"mat-icon",29),e._uU(13,"calendar_today"),e.qZA(),e.TgZ(14,"label",30),e._uU(15),e.ALo(16,"date"),e.qZA()()()()()),2&a){const t=r.$implicit;e.xp6(3),e.Q6J("ngIf",0==t.idRelation),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(8,4,t.amount)),e.xp6(8),e.Oqu(e.xi3(16,6,t.createDate,"dd-MM-yyyy h:mm:ss a"))}}function Fi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",32),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Ui=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.authServ=p,this.electronicMoneyServ=_,this.printTicketServ=g,this.printersServ=u,this._appMain=C.N.appMain,this.title="Dinero electr\xf3nico",this.bShowSpinner=!1,this.idUserLogON=0,this.electronicMoneyForm={idCustomer:0,amount:0,description:""},this.electronicMoneyList=[],this.electronicMoneySum=0,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.selectPrinter={idSucursal:0,idPrinter:0,printerName:""},this.bInsertElectronicMoney=!1,this.bDeleteElectronicMoney=!1}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.electronicMoneyForm.idCustomer=t.ODataP.idCustomer,t.fn_getElectronicMoneyListWithPage(),t.nextInputFocus(t.tbxDescription,500),t.fn_getSelectPrintByIdUser(t.idUserLogON)})()}ev_PrintTicket(){var t=this;return(0,Z.Z)(function*(){t.printTicketServ.printTicket("DineroElectronico",t.electronicMoneyForm.idCustomer,t.selectPrinter.idPrinter,t.electronicMoneySum)})()}changePagination(t){this.pagination=t,this.fn_getElectronicMoneyListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getElectronicMoneyListWithPage()}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}fn_getSelectPrintByIdUser(t){this.printersServ.CGetSelectPrinterByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectPrinter.idSucursal=i.data.idSucursal,this.selectPrinter.idPrinter=i.data.idPrinter,this.selectPrinter.printerName=i.data.printerName):(this.selectPrinter.idSucursal=0,this.selectPrinter.idPrinter=0,this.selectPrinter.printerName=""),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}fn_insertElectronicMoney(){this.electronicMoneyForm.idCustomer>0&&this.electronicMoneyForm.amount>0&&!this.bInsertElectronicMoney&&(this.bInsertElectronicMoney=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de agregar dinero electr\xf3nico al cliente","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{this.bInsertElectronicMoney=!1,t&&(this.bShowSpinner=!0,this.electronicMoneyServ.CInsertElectronicMoney(this.electronicMoneyForm).subscribe({next:i=>{0===i.status?this.servicesGServ.showAlert("S","OK!",i.message,!0):this.servicesGServ.showAlert("W","Alerta!",i.message,!0),this.bShowSpinner=!1,this.event_clear()},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}}))}fn_getElectronicMoneyListWithPage(){console.log("Before"),console.log(this.electronicMoneyForm),console.log("After"),this.bShowSpinner=!0,this.electronicMoneyServ.CGetElectronicMoneyListWithPage(this.pagination,this.electronicMoneyForm.idCustomer).subscribe({next:t=>{this.electronicMoneyList=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1,this.electronicMoneySum=t.data.count>0?this.electronicMoneyList[0].electronicMoneySum:0},error:t=>{this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_deleteElectronicMoney(t){this.bDeleteElectronicMoney||(this.bDeleteElectronicMoney=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de Eliminar dinero electr\xf3nico al cliente","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{this.bDeleteElectronicMoney=!1,i&&(this.bShowSpinner=!0,this.electronicMoneyServ.CDeleteElectronicMoney(t).subscribe({next:n=>{0===n.status?this.servicesGServ.showAlert("S","OK!",n.message,!0):this.servicesGServ.showAlert("W","Alerta!",n.message,!0),this.bShowSpinner=!1,this.event_clear()},error:n=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}}))}fn_CerrarMDL(){this.dialogRef.close(!0)}event_clear(){this.electronicMoneyForm.description="",this.electronicMoneyForm.amount=0,this.fn_getElectronicMoneyListWithPage(),this.nextInputFocus(this.tbxDescription,500)}ev_fn_description_keyup_enter(t){13==t.keyCode&&this.electronicMoneyForm.description.length>0&&this.nextInputFocus(this.tbxMonto,0)}ev_fn_amount_keyup_enter(t){13==t.keyCode&&this.electronicMoneyForm.amount>0&&this.fn_insertElectronicMoney()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(Fe),e.Y36(j),e.Y36(H))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-electronic-money-mdl"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Zi,5),e.Gf(Ti,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.tbxDescription=n.first),e.iGM(n=e.CRH())&&(i.tbxMonto=n.first)}},decls:60,vars:9,consts:[[2,"padding","10px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"row","top20px"],[1,"col-md-12"],[1,"row"],[1,"col-md-6"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese el motivo",3,"ngModel","ngModelChange","keyup"],["tbxDescription",""],[1,"with100"],["matInput","","currencyMask","","placeholder","Monto",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxMonto",""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft"],[1,"textAlingRight"],[1,"textAlingCenter"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[2,"width","80px"],["class","material-icons manitaSobre colorRed",3,"click",4,"ngIf"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[1,"material-icons","manitaSobre","colorRed",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"h1"),e._uU(7,"EL dinero electr\xf3nico se puede utilizar en las compras"),e.qZA(),e.TgZ(8,"h1"),e._uU(9),e.ALo(10,"currency"),e.qZA()()(),e.TgZ(11,"div",4)(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),e._uU(15,"Descripci\xf3n"),e.qZA(),e.TgZ(16,"textarea",7,8),e.NdJ("ngModelChange",function(o){return i.electronicMoneyForm.description=o})("keyup",function(o){return i.ev_fn_description_keyup_enter(o)}),e.qZA()()(),e.TgZ(18,"div",5)(19,"mat-form-field",9)(20,"mat-label"),e._uU(21,"Monto"),e.qZA(),e.TgZ(22,"input",10,11),e.NdJ("ngModelChange",function(o){return i.electronicMoneyForm.amount=o})("keyup",function(o){return i.ev_fn_amount_keyup_enter(o)}),e.qZA()()()(),e.TgZ(24,"div",12)(25,"div",3)(26,"div",13)(27,"button",14),e.NdJ("click",function(){return i.fn_insertElectronicMoney()}),e.TgZ(28,"mat-icon",15),e._uU(29,"save"),e.qZA(),e._uU(30," Guardar"),e.qZA(),e.TgZ(31,"button",16),e.NdJ("click",function(){return i.ev_PrintTicket()}),e.TgZ(32,"mat-icon",15),e._uU(33,"print"),e.qZA(),e._uU(34," Imprimir comprobante de acomulado"),e.qZA(),e.TgZ(35,"button",17),e.NdJ("click",function(){return i.event_clear()}),e.TgZ(36,"mat-icon",15),e._uU(37,"close"),e.qZA(),e._uU(38," Limpiar"),e.qZA(),e.TgZ(39,"button",17),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(40,"mat-icon",15),e._uU(41,"close"),e.qZA(),e._uU(42," Cerrar"),e.qZA()()()(),e.TgZ(43,"div",2)(44,"div",3)(45,"div",18)(46,"table",19)(47,"thead")(48,"th",20),e._uU(49,"Acciones"),e.qZA(),e.TgZ(50,"th",21),e._uU(51,"Descripci\xf3n"),e.qZA(),e.TgZ(52,"th",22),e._uU(53,"Monto"),e.qZA(),e.TgZ(54,"th",23),e._uU(55,"Fecha"),e.qZA()(),e.TgZ(56,"tbody"),e.YNc(57,Ai,17,9,"tr",24),e.qZA()()(),e.YNc(58,Fi,1,1,"app-pagination",25),e.qZA()()(),e._UZ(59,"app-spinner",26)),2&t&&(e.xp6(9),e.hij("EL dinero electr\xf3nico acomulado: ",e.lcZ(10,7,i.electronicMoneySum),""),e.xp6(7),e.Q6J("ngModel",i.electronicMoneyForm.description),e.xp6(6),e.Q6J("ngModel",i.electronicMoneyForm.amount),e.xp6(9),e.Q6J("disabled",0==i.selectPrinter.idPrinter),e.xp6(26),e.Q6J("ngForOf",i.electronicMoneyList),e.xp6(1),e.Q6J("ngIf",i.electronicMoneyList),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,v.lW,v.RK,d.KE,d.hX,d.qo,N.Nt,Q.IC,P.Hw,X.g1,U.O,D,h.H9,h.uU]}),a})();function Pi(a,r){if(1&a&&(e.TgZ(0,"div",35)(1,"div",36)(2,"div",4)(3,"div",37),e._uU(4," Suma de Dinero electr\xf3nico "),e.qZA()()(),e.TgZ(5,"div",3)(6,"div",38),e._UZ(7,"img",39),e.TgZ(8,"h2",40),e._uU(9),e.ALo(10,"currency"),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(9),e.Oqu(e.lcZ(10,1,t.oCustomerHeader.sumDineroElectronico))}}function wi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",41)(2,"div",42)(3,"span",43),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.showCustomerCat(o.idCustomer))}),e._uU(4," edit "),e.qZA(),e.TgZ(5,"span",44),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.fn_ShowAddElectronicMoney(o.idCustomer))}),e._uU(6," attach_money "),e.qZA(),e.TgZ(7,"span",45),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.fn_deleteCustomer(o.idCustomer))}),e._uU(8," delete_outline "),e.qZA()()(),e.TgZ(9,"td",46),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"td",47),e._uU(13),e.qZA(),e.TgZ(14,"td",47),e._uU(15),e.qZA(),e.TgZ(16,"td",41),e._uU(17),e.qZA(),e.TgZ(18,"td",47),e._uU(19),e.qZA(),e.TgZ(20,"td",47),e._uU(21),e.qZA(),e.TgZ(22,"td",41)(23,"div",48)(24,"div",3)(25,"div",25)(26,"mat-icon",49),e._uU(27,"calendar_today"),e.qZA()(),e.TgZ(28,"div",50)(29,"label",51),e._uU(30),e.ALo(31,"date"),e.qZA(),e.TgZ(32,"label",51),e._uU(33),e.ALo(34,"date"),e.qZA()()()()(),e.TgZ(35,"td",41)(36,"mat-checkbox",52),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(10),e.Oqu(e.lcZ(11,9,t.electronicMoneySum)),e.xp6(3),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.tel),e.xp6(2),e.Oqu(t.eMail),e.xp6(2),e.Oqu(t.address),e.xp6(9),e.Oqu(e.xi3(31,11,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Oqu(e.xi3(34,14,t.createDate,"h:mm:ss a")),e.xp6(3),e.Q6J("ngModel",t.active)}}function Ni(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",53),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Ii=(()=>{class a{constructor(t,i,n,o,l,p){this.servicesGServ=t,this.fb=i,this._adapter=n,this._locale=o,this.authServ=l,this.customersServ=p,this._appMain=C.N.appMain,this.title="Lista de Clientes",this.bShowSpinner=!1,this.catlist=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm=this.fb.group({createDateStart:"",createDateEnd:"",name:"",lastName:""}),this.oCustomerHeader={sumDineroElectronico:0}}ngOnInit(){this.authServ.checkSession(),this._locale="mx",this._adapter.setLocale(this._locale),this.fn_getCustomersListWithPage()}changePagination(t){this.pagination=t,this.fn_getCustomersListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getCustomersListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}showCustomerCat(t){this.servicesGServ.showModalWithParams(Ae,{id:t},"1500px").afterClosed().subscribe({next:n=>{this.fn_getCustomersListWithPage()}})}fn_getCustomersListWithPage(){this.bShowSpinner=!0,this.customersServ.CGetCustomersListWithPage(this.pagination,this.parametersForm.value).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1,this.oCustomerHeader.sumDineroElectronico=t.data.header.sumDineroElectronico},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_deleteCustomer(t){this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de borrar el cliente","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.customersServ.CDeleteCustomer(t).subscribe({next:n=>{0===n.status&&this.fn_getCustomersListWithPage(),this.servicesGServ.showSnakbar(n.message),this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}}))}})}parametersForm_Clear(){this.parametersForm.get("createDateStart")?.setValue(""),this.parametersForm.get("createDateEnd")?.setValue(""),this.parametersForm.get("name")?.setValue(""),this.parametersForm.get("lastName")?.setValue(""),this.fn_getCustomersListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editCustomer`,t)}fn_ShowAddElectronicMoney(t){this.servicesGServ.showModalWithParams(Ui,{idCustomer:t},"1500px").afterClosed().subscribe({next:n=>{this.fn_getCustomersListWithPage()}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(m.qu),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-customer-list"]],decls:78,vars:8,consts:[[1,"divMain",2,"margin-top","10px !important",3,"opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"formGroup","rangePicker","click"],["matStartDate","","formControlName","createDateStart","placeholder","Start date"],["matEndDate","","formControlName","createDateEnd","placeholder","End date"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","top20px"],[1,"col-md-8"],["matInput","","placeholder","Ingrese los apellidos","formControlName","lastName"],[1,"col-md-4"],["matInput","","placeholder","Ingrese un nombre","formControlName","name"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],["class","divSection",4,"ngIf"],[1,"divMain",2,"width","100%","margin-top","50px !important"],[1,"col-md-1"],[1,"divSearch"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[1,"divSection"],[1,"row",2,"margin-top","-35px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-3",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Editar Cliente",1,"material-icons","manitaSobre","colorGreen",3,"click"],["title","Abonar",1,"material-icons","manitaSobre","colorGreen",3,"click"],["matTooltip","Eliminar Cliente",1,"material-icons","manitaSobre","colorRed",3,"click"],[1,"textAlingRight"],[1,"textAlingLeft"],[2,"width","120px"],["matPrefix","",1,"my-icon",2,"margin-top","5px"],[1,"col-md-10"],[2,"margin-left","10px"],["disabled","",1,"example-margin",3,"ngModel","ngModelChange"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros de clientes "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"form",5)(9,"div",3)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(14,"mat-date-range-input",8),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(21);return e.KtG(l.open())}),e._UZ(15,"input",9)(16,"input",10),e.qZA(),e.TgZ(17,"mat-hint"),e._uU(18,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(19,"mat-datepicker-toggle",11)(20,"mat-date-range-picker",null,12),e.qZA()()(),e.TgZ(22,"div",13)(23,"div",14)(24,"mat-form-field",7)(25,"mat-label"),e._uU(26,"Apellidos"),e.qZA(),e._UZ(27,"input",15),e.qZA()(),e.TgZ(28,"div",16)(29,"mat-form-field",7)(30,"mat-label"),e._uU(31,"Nombre"),e.qZA(),e._UZ(32,"input",17),e.qZA()()(),e.TgZ(33,"div",18)(34,"div",4)(35,"div",19)(36,"button",20),e.NdJ("click",function(){return i.fn_getCustomersListWithPage()}),e.TgZ(37,"mat-icon",21),e._uU(38,"search"),e.qZA(),e._uU(39," Buscar"),e.qZA(),e.TgZ(40,"button",22),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(41,"mat-icon",21),e._uU(42,"clear"),e.qZA(),e._uU(43," limpiar"),e.qZA()()()()()()()()(),e.YNc(44,Pi,11,3,"div",23),e.TgZ(45,"div",24)(46,"div",3)(47,"div",25)(48,"div",26)(49,"span",27),e.NdJ("click",function(){return i.showCustomerCat(0)}),e._uU(50," add_circle_outline "),e.qZA()()()(),e.TgZ(51,"div",13)(52,"div",4)(53,"div",28)(54,"table",29)(55,"thead")(56,"th",30),e._uU(57,"Acciones"),e.qZA(),e.TgZ(58,"th",31),e._uU(59,"Dinero Electr\xf3nico"),e.qZA(),e.TgZ(60,"th",31),e._uU(61,"Apellidos"),e.qZA(),e.TgZ(62,"th",31),e._uU(63,"Nombre"),e.qZA(),e.TgZ(64,"th",30),e._uU(65,"Tel\xe9fono"),e.qZA(),e.TgZ(66,"th",31),e._uU(67,"Correo electr\xf3nico"),e.qZA(),e.TgZ(68,"th",31),e._uU(69,"Direcci\xf3n"),e.qZA(),e.TgZ(70,"th",30),e._uU(71,"Creado"),e.qZA(),e.TgZ(72,"th",30),e._uU(73,"Activo"),e.qZA()(),e.TgZ(74,"tbody"),e.YNc(75,wi,37,17,"tr",32),e.qZA()()(),e.YNc(76,Ni,1,1,"app-pagination",33),e.qZA()()(),e._UZ(77,"app-spinner",34)}if(2&t){const n=e.MAs(21);e.xp6(8),e.Q6J("formGroup",i.parametersForm),e.xp6(6),e.Q6J("formGroup",i.parametersForm)("rangePicker",n),e.xp6(5),e.Q6J("for",n),e.xp6(25),e.Q6J("ngIf",i.oCustomerHeader.sumDineroElectronico>0),e.xp6(31),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.On,v.lW,L.oG,x.nW,x.wx,x.zY,x.By,x._g,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,O.gM,U.O,D,h.H9,h.uU]}),a})(),Mi=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/fxRate"}CGetFxRateListWithPage(t){return this.http.post(`${this.baseURL}/${this._api}/getFxRateListWithPage`,{search:t.search,start:t.pageIndex*t.pageSize,limiter:t.pageSize})}CInsertFxRate(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/insertFxRate`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var qi=w(8525);function Di(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",20),e._uU(2),e.qZA(),e.TgZ(3,"td",21),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td",22)(7,"div",4)(8,"div",3)(9,"mat-icon",26),e._uU(10,"calendar_today"),e.qZA(),e.TgZ(11,"label",27),e._uU(12),e.ALo(13,"date"),e.qZA()()()()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.referencia),e.xp6(2),e.Oqu(e.lcZ(5,3,t.fxRate)),e.xp6(8),e.Oqu(e.xi3(13,5,t.createDate,"dd-MM-yyyy h:mm:ss a"))}}function Li(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",28),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let ki=(()=>{class a{constructor(t,i,n,o,l){this.servicesGServ=t,this._adapter=i,this._locale=n,this.authServ=o,this.fxRateServ=l,this._appMain=C.N.appMain,this.title="Tipos de cambio",this.bShowSpinner=!1,this.idUserLogON=0,this.fxRateForm={referencia:"",fxRate:0},this.fxRatelist=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getFxRateListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getFxRateListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getFxRateListWithPage()}fn_insertFxRate(){this.fxRateForm.referencia.length>0&&this.fxRateForm.fxRate>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de agregar un tipo de cambio","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.fxRateServ.CInsertFxRate(this.fxRateForm).subscribe({next:i=>{0===i.status?this.servicesGServ.showAlert("S","OK!",i.message,!0):this.servicesGServ.showAlert("W","Alerta!",i.message,!0),this.bShowSpinner=!1,this.event_clear()},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}})}fn_getFxRateListWithPage(){this.bShowSpinner=!0,this.fxRateServ.CGetFxRateListWithPage(this.pagination).subscribe({next:t=>{this.fxRatelist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}event_clear(){this.fxRateForm.referencia="",this.fxRateForm.fxRate=0,this.fn_getFxRateListWithPage()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(Mi))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-fxrate"]],decls:49,vars:6,consts:[[1,"divMain",2,"padding","30px","padding-top","60px"],[1,"divTitle-center"],[1,"row","top20px"],[1,"col-md-12"],[1,"row"],[1,"col-md-6"],[1,"with100"],[3,"ngModel","ngModelChange"],["value","D\xf3lares"],["value","Gramo"],["value","Plata"],[1,"with100","top20px"],["matInput","","currencyMask","","placeholder","Tipo de cambio",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange"],["tbxPaga",""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["mat-raised-button","","type","button",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft"],[1,"textAlingRight"],[1,"textAlingCenter"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"h1"),e._uU(6,"Siempre se tomar\xe1 el \xfaltimo Tipo de Cambio cargado"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"mat-label"),e._uU(10,"Referencia: "),e.qZA(),e.TgZ(11,"mat-form-field",6)(12,"mat-label"),e._uU(13,"Selecciona una opci\xf3n"),e.qZA(),e.TgZ(14,"mat-select",7),e.NdJ("ngModelChange",function(o){return i.fxRateForm.referencia=o}),e.TgZ(15,"mat-option",8),e._uU(16,"D\xf3lares"),e.qZA(),e.TgZ(17,"mat-option",9),e._uU(18,"Gramo"),e.qZA(),e.TgZ(19,"mat-option",10),e._uU(20,"Plata"),e.qZA()()()(),e.TgZ(21,"div",5)(22,"mat-form-field",11)(23,"mat-label"),e._uU(24,"Tipo de cambio"),e.qZA(),e.TgZ(25,"input",12,13),e.NdJ("ngModelChange",function(o){return i.fxRateForm.fxRate=o}),e.qZA()()()(),e.TgZ(27,"div",14)(28,"div",3)(29,"div",15)(30,"button",16),e.NdJ("click",function(){return i.fn_insertFxRate()}),e._uU(31,"Guardar"),e.qZA(),e.TgZ(32,"button",17),e.NdJ("click",function(){return i.event_clear()}),e._uU(33,"Limpiar"),e.qZA()()()(),e.TgZ(34,"div",2)(35,"div",3)(36,"div",18)(37,"table",19)(38,"thead")(39,"th",20),e._uU(40,"Referencia"),e.qZA(),e.TgZ(41,"th",21),e._uU(42,"Tipo De Cambio"),e.qZA(),e.TgZ(43,"th",22),e._uU(44,"Fecha"),e.qZA()(),e.TgZ(45,"tbody"),e.YNc(46,Di,14,8,"tr",23),e.qZA()()(),e.YNc(47,Li,1,1,"app-pagination",24),e.qZA()()(),e._UZ(48,"app-spinner",25)),2&t&&(e.xp6(2),e.hij(" ",i.title," "),e.xp6(12),e.Q6J("ngModel",i.fxRateForm.referencia),e.xp6(11),e.Q6J("ngModel",i.fxRateForm.fxRate),e.xp6(21),e.Q6J("ngForOf",i.fxRatelist),e.xp6(1),e.Q6J("ngIf",i.fxRatelist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,f.ey,v.lW,d.KE,d.hX,d.qo,N.Nt,P.Hw,qi.gD,X.g1,U.O,D,h.H9,h.uU]}),a})();var ee=w(8645),te=w(3620);let he=(()=>{class a{constructor(t){this.http=t,this.baseURL=C.N.baseUrl,this._api="api/formaPago"}CCbxGetFormaPagoCombo(t,i){return this.http.post(`${this.baseURL}/${this._api}/cbxGetFormaPagoCombo`,{idCustomer:i,search:t})}CCbxGetFormaPagoCorteCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetFormaPagoCorteCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Oi=["cbxFormasPagoC"],Ji=["tbxPaga"],Gi=["tbxPagaCon"],Ri=["tbxReferencia"],Ei=["tbxCambio"],Qi=["btnSaveSale"];function Yi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxFormasPago_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function ji(a,r){if(1&a&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Hi(a,r){1&a&&(e.TgZ(0,"mat-option",33),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function zi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"mat-form-field",13)(2,"mat-label"),e._uU(3,"Referencia"),e.qZA(),e.TgZ(4,"input",34,35),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.paymentForm.referencia=n)})("keyup",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.event_fn_Referencia(n))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.paymentForm.referencia)}}function $i(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"mat-form-field",13)(2,"mat-label"),e._uU(3,"PAGA CON "),e.TgZ(4,"strong"),e._uU(5),e.qZA()(),e.TgZ(6,"input",36,37),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.paymentForm.pagaCon=n)})("keyup",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.event_fn_PagaCon_GetCambio(n))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Oqu(t.paymentForm.needFxRate?" TC: "+t.paymentForm.fxRate:""),e.xp6(1),e.Q6J("ngModel",t.paymentForm.pagaCon)}}const Bi=function(a){return{colorRed:a}};function Wi(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"mat-form-field",13)(2,"mat-label"),e._uU(3,"CAMBIO"),e.qZA(),e.TgZ(4,"input",38,39),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.paymentForm.cambio=n)})("keyup",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.event_fn_Cambio(n))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(2,Bi,t.paymentForm.cambio<0))("ngModel",t.paymentForm.cambio)}}function Ki(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_savePayment())}),e.TgZ(1,"mat-icon",21),e._uU(2,"save"),e.qZA(),e._uU(3," Guardar e imprimir ticket"),e.qZA()}}function Vi(a,r){1&a&&(e.TgZ(0,"th",25),e._uU(1,"Paga EXT"),e.qZA())}function Xi(a,r){1&a&&(e.TgZ(0,"th",25),e._uU(1,"Tipo de cambio"),e.qZA())}function en(a,r){1&a&&(e.TgZ(0,"th",25),e._uU(1,"Referencia"),e.qZA())}function tn(a,r){if(1&a&&(e.TgZ(0,"td",45),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.pagaF))}}function nn(a,r){if(1&a&&(e.TgZ(0,"td",45),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.fxRate))}}function an(a,r){if(1&a&&(e.TgZ(0,"td",45),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.referencia)}}function on(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",41)(2,"div",42)(3,"span",43),e.NdJ("click",function(){const o=e.CHM(t).index,l=e.oxw();return e.KtG(l.event_fnClick_DeleteSalesPaymentFromList(o))}),e._uU(4," delete_outline "),e.qZA()()(),e.TgZ(5,"td",44),e._uU(6),e.qZA(),e.TgZ(7,"td",45),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.YNc(10,tn,3,3,"td",46),e.YNc(11,nn,3,3,"td",46),e.YNc(12,an,2,1,"td",46),e.qZA()}if(2&a){const t=r.$implicit,i=e.oxw();e.xp6(6),e.Oqu(t.formaPagoDesc),e.xp6(2),e.Oqu(e.lcZ(9,5,t.paga)),e.xp6(2),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showReferencia)}}function rn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",47,48),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveAndPrint())}),e._uU(3,"Guardar e imprimir ticket"),e.qZA(),e.TgZ(4,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.close())}),e._uU(5,"Salir"),e.qZA()()}}let sn=(()=>{class a{constructor(t,i,n,o,l,p,_){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this.authServ=o,this.salesServ=l,this.formaPagoServ=p,this.printTicketServ=_,this.bShowSpinner=!1,this.bPago=!1,this.pendingAmount=0,this.saldoACubrir=0,this.showPending=!1,this.idSale=0,this.paymentList=[],this.paymentForm={idCaja:0,idCustomer:0,idFormaPago:0,formaPagoDesc:"",needRef:0,needFxRate:0,idFxRate:0,fxRate:0,electronicMoneySum:0,paga:0,pagaF:0,pagaCon:0,cambio:0,referencia:""},this.interface={showReferencia:!1,showFxRate:!1},this.selectCajas={idSucursal:0,idCaja:0,cajaDesc:"",impresoraName:""},this.cbxFormasPago=[]}ngOnInit(){console.log(this.ODataP),this.paymentList=[],this.idSale=this.ODataP.idSale,this.paymentForm.idCaja=this.ODataP.idCaja,this.paymentForm.idCustomer=this.ODataP.idCustomer,this.ODataP.pendingAmount>0&&(this.pendingAmount=this.ODataP.pendingAmount,this.saldoACubrir=this.ODataP.pendingAmount,this.showPending=!0),setTimeout(()=>{this.cbxFormasPagoC.nativeElement.focus()},1e3),this.selectCajas=this.ODataP.selectCajas}fn_savePayment(){var t=this;return(0,Z.Z)(function*(){var i;(2!=t.ODataP.idSaleType||0==t.pendingAmount)&&(t.bPago||(t.bPago=!0,t.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar el pago","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:(i=(0,Z.Z)(function*(n){var o;n?(t.bPago=!1,t.bShowSpinner=!0,t.salesServ.CInsertPayments(t.paymentList,t.paymentForm.idCaja,t.paymentForm.idCustomer).subscribe({next:(o=(0,Z.Z)(function*(l){0===l.status&&(t.printTicketServ.printTicket("Payments",t.idSale,t.selectCajas.idPrinter,t.paymentList.length),console.log(t.idSale),t.dialogRef.close(t.idSale)),t.servicesGServ.showAlertIA(l),t.bShowSpinner=!1}),function(p){return o.apply(this,arguments)}),error:o=>{t.servicesGServ.showSnakbar(o.error.message),t.bShowSpinner=!1}})):t.bPago=!1}),function(o){return i.apply(this,arguments)})})))})()}saveAndPrint(){}close(){this.dialogRef.close()}inputFocus(t){t?.focus()}addPayment(){this.paymentList.push({idRelation:this.ODataP.idSale,relationType:this.ODataP.relationType,idSeller_idUser:this.ODataP.idSeller_idUser,idFormaPago:this.paymentForm.idFormaPago,formaPagoDesc:this.paymentForm.formaPagoDesc,paga:this.paymentForm.paga,pagaF:this.paymentForm.pagaF,referencia:this.paymentForm.referencia,description:"Pago",idFxRate:this.paymentForm.idFxRate,fxRate:this.paymentForm.fxRate}),this.ev_showInterface()}fn_CerrarMDL(){this.dialogRef.close(this.ODataP.idSale)}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}event_fn_Paga(t){13==t.keyCode&&(this.paymentForm.paga>0&&this.pendingAmount>0&&this.paymentForm.paga<=this.pendingAmount?1==this.paymentForm.idFormaPago||3==this.paymentForm.idFormaPago?this.tbxPagaCon.nativeElement.focus():1==this.paymentForm.needRef?this.tbxReferencia.nativeElement.focus():5==this.paymentForm.idFormaPago&&(this.ev_getSumElectronicCurrency()>=this.paymentForm.paga?(this.pendingAmount-=this.paymentForm.paga,this.addPayment(),this.paymentForm.idFormaPago=0,this.paymentForm.formaPagoDesc="",this.paymentForm.needRef=0,this.paymentForm.needFxRate=0,this.paymentForm.idFxRate=0,this.paymentForm.fxRate=0,this.paymentForm.electronicMoneySum=0,this.paymentForm.paga=0,this.paymentForm.pagaF=0,this.paymentForm.pagaCon=0,this.paymentForm.cambio=0,this.paymentForm.referencia="",this.fn_savePayment()):this.servicesGServ.showAlert("W","Alerta!","Solo tienes "+this.ev_getSumElectronicCurrency()+" de dinero electr\xf3nico",!0)):this.servicesGServ.showAlert("W","Alerta!","Saldas con "+this.pendingAmount,!0))}event_fn_PagaCon_GetCambio(t){13==t.keyCode&&(this.paymentForm.needFxRate&&this.paymentForm.pagaCon>0&&this.paymentForm.paga>0&&(this.paymentForm.pagaF=this.paymentForm.pagaCon,this.paymentForm.pagaCon=this.paymentForm.pagaCon*this.paymentForm.fxRate),this.paymentForm.paga>0&&this.paymentForm.pagaCon>=this.paymentForm.paga&&this.paymentForm.paga<=this.pendingAmount?(this.paymentForm.cambio=this.paymentForm.pagaCon-this.paymentForm.paga,this.pendingAmount-=this.paymentForm.paga,this.addPayment(),this.paymentForm.paga=0,this.paymentForm.pagaCon=0,this.tbxCambio.nativeElement.focus()):this.servicesGServ.showAlert("W","Alerta!",this.paymentForm.pagaCon>=this.paymentForm.paga?0==this.paymentForm.paga?"Debe indicar cuanto paga":this.paymentForm.paga>this.pendingAmount?"Saldas con "+this.pendingAmount:"":"No est\xe1 cubriendo el monto a pagar: "+this.paymentForm.paga,!0))}event_fn_Referencia(t){13==t.keyCode&&""!=this.paymentForm.referencia&&(this.paymentForm.idFormaPago>0&&this.paymentForm.paga>0&&this.paymentForm.paga<=this.pendingAmount?(this.pendingAmount-=this.paymentForm.paga,this.addPayment(),this.paymentForm.idFormaPago=0,this.paymentForm.formaPagoDesc="",this.paymentForm.needRef=0,this.paymentForm.needFxRate=0,this.paymentForm.idFxRate=0,this.paymentForm.fxRate=0,this.paymentForm.electronicMoneySum=0,this.paymentForm.paga=0,this.paymentForm.pagaF=0,this.paymentForm.pagaCon=0,this.paymentForm.cambio=0,this.paymentForm.referencia="",this.fn_savePayment()):this.servicesGServ.showAlert("W","Alerta!",0==this.paymentForm.idFormaPago?"Selecciona forma de pago":0==this.paymentForm.paga?"Debe indicar cuanto paga":this.paymentForm.paga>this.pendingAmount?"Saldas con "+this.pendingAmount:"",!0))}event_fn_Cambio(t){13==t.keyCode&&(this.paymentForm.idFormaPago=0,this.paymentForm.formaPagoDesc="",this.paymentForm.needRef=0,this.paymentForm.needFxRate=0,this.paymentForm.idFxRate=0,this.paymentForm.fxRate=0,this.paymentForm.electronicMoneySum=0,this.paymentForm.paga=0,this.paymentForm.pagaF=0,this.paymentForm.pagaCon=0,this.paymentForm.cambio=0,this.paymentForm.referencia="",this.fn_savePayment())}event_fnClick_DeleteSalesPaymentFromList(t){this.paymentList.splice(t,1);var i=this.paymentList.reduce((n,o)=>n+o.paga,0);this.pendingAmount=this.saldoACubrir-i}ev_showInterface(){this.interface.showReferencia=this.paymentList.filter(function(t){return t.referencia.length>0}).length>0,this.interface.showFxRate=this.paymentList.filter(function(t){return t.idFxRate>0}).length>0}ev_getSumElectronicCurrency(){var t;return t=this.paymentList.filter(function(n){return 5==n.idFormaPago}).reduce((n,o)=>n+o.paga,0),this.paymentForm.electronicMoneySum-t}cbxFormasPago_Search(){this.formaPagoServ.CCbxGetFormaPagoCombo(this.paymentForm.formaPagoDesc,this.paymentForm.idCustomer).subscribe({next:t=>{this.cbxFormasPago=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFormasPago_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.paymentForm.idFormaPago=i.id,this.paymentForm.formaPagoDesc=i.name,this.paymentForm.needRef=i.needRef,this.paymentForm.needFxRate=i.needFxRate,this.paymentForm.idFxRate=i.idFxRate,this.paymentForm.fxRate=i.fxRate,this.paymentForm.electronicMoneySum=i.electronicMoneySum,setTimeout(()=>{this.tbxPaga.nativeElement.focus()},500)}cbxFormasPago_Clear(){this.paymentForm.idFormaPago=0,this.paymentForm.formaPagoDesc="",this.paymentForm.needRef=0,this.paymentForm.needFxRate=0,this.paymentForm.idFxRate=0,this.paymentForm.fxRate=0,this.paymentForm.paga=0,this.paymentForm.pagaF=0,this.paymentForm.pagaCon=0,this.paymentForm.cambio=0,this.paymentForm.referencia=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(T.e),e.Y36(Y),e.Y36(he),e.Y36(j))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-payments"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Oi,5),e.Gf(Ji,5),e.Gf(Gi,5),e.Gf(Ri,5),e.Gf(Ei,5),e.Gf(Qi,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.cbxFormasPagoC=n.first),e.iGM(n=e.CRH())&&(i.tbxPaga=n.first),e.iGM(n=e.CRH())&&(i.tbxPagaCon=n.first),e.iGM(n=e.CRH())&&(i.tbxReferencia=n.first),e.iGM(n=e.CRH())&&(i.tbxCambio=n.first),e.iGM(n=e.CRH())&&(i.btnSaveSale=n.first)}},decls:64,vars:27,consts:[[2,"padding","10px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"row"],[1,"col-md-12"],[1,"col-md-3"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",1,"colorGreen","fontSize",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus"],["cbxFormasPagoC",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxFormaPago","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"with100","top20px"],["matInput","","currencyMask","","placeholder","PAGA",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxPaga",""],["class","col-md-3",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],["class","textAlingCenter padding-th",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["type","text","matInput","","placeholder","Referencia",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxReferencia",""],["matInput","","currencyMask","","placeholder","PAGA CON",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange","keyup"],["tbxPagaCon",""],["matInput","","currencyMask","","placeholder","CAMBIO","readonly","true",1,"textAlingRight","colorGreen",2,"font-size","25px",3,"ngClass","ngModel","ngModelChange","keyup"],["tbxCambio",""],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],[1,"textAlingCenter"],[2,"width","50px"],[1,"material-icons","manitaSobre","colorRed",3,"click"],[2,"text-align","left"],[2,"text-align","right"],["style","text-align: right;",4,"ngIf"],["mat-button","","color","warn",3,"click"],["btnSaveSale",""],["mat-button","",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"h1"),e._uU(7),e.ALo(8,"currency"),e.ALo(9,"currency"),e.qZA()()(),e.TgZ(10,"div",2)(11,"div",4)(12,"mat-label"),e._uU(13,"Forma de pago: "),e.TgZ(14,"strong"),e._uU(15),e.qZA(),e.TgZ(16,"strong"),e._uU(17),e.ALo(18,"currency"),e.qZA()(),e.TgZ(19,"mat-form-field",5),e.NdJ("click",function(){return i.cbxFormasPago_Search()}),e.TgZ(20,"input",6,7),e.NdJ("ngModelChange",function(o){return i.paymentForm.formaPagoDesc=o})("input",function(){return i.cbxFormasPago_Search()})("focus",function(){return i.cbxFormasPago_Search()}),e.qZA(),e.YNc(22,Yi,3,0,"button",8),e.TgZ(23,"mat-autocomplete",9,10),e.NdJ("optionSelected",function(o){return i.cbxFormasPago_SelectedOption(o)}),e.YNc(25,ji,2,2,"mat-option",11),e.YNc(26,Hi,2,0,"mat-option",12),e.qZA()()(),e.TgZ(27,"div",4)(28,"mat-form-field",13)(29,"mat-label"),e._uU(30,"PAGA"),e.qZA(),e.TgZ(31,"input",14,15),e.NdJ("ngModelChange",function(o){return i.paymentForm.paga=o})("keyup",function(o){return i.event_fn_Paga(o)}),e.qZA()()(),e.YNc(33,zi,6,1,"div",16),e.YNc(34,$i,8,2,"div",16),e.YNc(35,Wi,6,4,"div",16),e.qZA(),e.TgZ(36,"div",17)(37,"div",3)(38,"div",18),e.YNc(39,Ki,4,0,"button",19),e.TgZ(40,"button",20),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(41,"mat-icon",21),e._uU(42,"close"),e.qZA(),e._uU(43," Cerrar"),e.qZA()()()(),e.TgZ(44,"div",22)(45,"div",3)(46,"div",23)(47,"table",24)(48,"thead")(49,"th",25),e._uU(50,"Acciones"),e.qZA(),e.TgZ(51,"th",26),e._uU(52,"Forma de pago"),e.qZA(),e.TgZ(53,"th",25),e._uU(54,"Paga"),e.qZA(),e.YNc(55,Vi,2,0,"th",27),e.YNc(56,Xi,2,0,"th",27),e.YNc(57,en,2,0,"th",27),e.qZA(),e.TgZ(58,"tbody"),e.YNc(59,on,13,7,"tr",28),e.qZA()()()()(),e.TgZ(60,"div",22)(61,"div",3),e.YNc(62,rn,6,0,"div",29),e.qZA()()(),e._UZ(63,"app-spinner",30)),2&t){const n=e.MAs(24);e.xp6(7),e.lnq("Venta de ",i.ODataP.saleTypeDesc," por ",e.lcZ(8,21,i.ODataP.total),", Saldo a cubrir ",e.lcZ(9,23,i.pendingAmount),""),e.xp6(8),e.Oqu(i.paymentForm.needFxRate?" TC: "+i.paymentForm.fxRate:""),e.xp6(2),e.Oqu(i.paymentForm.electronicMoneySum>0?" D.E: "+e.lcZ(18,25,i.ev_getSumElectronicCurrency()):""),e.xp6(3),e.Q6J("ngModel",i.paymentForm.formaPagoDesc)("matAutocomplete",n),e.xp6(2),e.Q6J("ngIf",i.paymentForm.formaPagoDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFormasPago),e.xp6(1),e.Q6J("ngIf",0==i.cbxFormasPago.length&&i.paymentForm.formaPagoDesc),e.xp6(5),e.Q6J("ngModel",i.paymentForm.paga),e.xp6(2),e.Q6J("ngIf",1==i.paymentForm.needRef),e.xp6(1),e.Q6J("ngIf",1==i.paymentForm.idFormaPago||3==i.paymentForm.idFormaPago),e.xp6(1),e.Q6J("ngIf",1==i.paymentForm.idFormaPago||3==i.paymentForm.idFormaPago),e.xp6(4),e.Q6J("ngIf",i.paymentList.length>0),e.xp6(16),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showReferencia),e.xp6(2),e.Q6J("ngForOf",i.paymentList),e.xp6(3),e.Q6J("ngIf",0==i.paymentForm.saldoACubrir),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.mk,h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,d.KE,d.hX,d.qo,d.R9,N.Nt,P.Hw,X.g1,U.O,h.H9]}),a})();var Ue=w(7466);let ln=(()=>{class a{constructor(t,i,n,o){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this.authServ=o,this.bShowSpinner=!1,this.paramsForm={sOption:""}}fn_CerrarMDL(t){this.dialogRef.close(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-question-cancel-payment"]],decls:25,vars:3,consts:[[2,"padding","30px"],[1,"row"],[1,"col-md-12"],[3,"ngModel","ngModelChange"],["value","EM",1,""],["value","E",1,""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[3,"hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4),e.qZA(),e.TgZ(5,"h1"),e._uU(6,"Selecciona una opci\xf3n si deseas hacer lo siguiente:"),e.qZA()()(),e.TgZ(7,"div",1)(8,"div",2)(9,"mat-radio-group",3),e.NdJ("ngModelChange",function(o){return i.paramsForm.sOption=o}),e.TgZ(10,"mat-radio-button",4),e._uU(11,"Agregarlo como Dinero electr\xf3nico al cliente"),e.qZA(),e.TgZ(12,"mat-radio-button",5),e._uU(13,"Crear un Egreso por el mismo importe ya que se le devolver\xe1 en efectivo"),e.qZA()()()(),e.TgZ(14,"div",6)(15,"div",2)(16,"div",7)(17,"button",8),e.NdJ("click",function(){return i.fn_CerrarMDL(i.paramsForm.sOption)}),e.TgZ(18,"mat-icon",9),e._uU(19,"check_circle"),e.qZA(),e._uU(20," Seleccionar"),e.qZA()(),e.TgZ(21,"div",7)(22,"button",8),e.NdJ("click",function(){return i.fn_CerrarMDL("")}),e._uU(23," Cerrar"),e.qZA()()()()(),e._UZ(24,"app-spinner",10)),2&t&&(e.xp6(4),e.hij("Est\xe1s cancelando un pago por : $",i.ODataP.pago," "),e.xp6(5),e.Q6J("ngModel",i.paramsForm.sOption),e.xp6(15),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.JJ,m.On,v.lW,d.qo,P.Hw,Ue.VQ,Ue.U0,U.O]}),a})(),Pe=(()=>{class a{constructor(t){this.http=t,this.baseURL=C.N.baseUrl,this._api="api/salesType"}CCbxGetSalesTypeCombo(t){return this.http.post(`${this.baseURL}/${this._api}/cbxGetSalesTypeCombo`,{search:t})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const cn=["cbxSellerCBX"],pn=["cbxCustomerCBX"],un=["cbxSaleTypeCBX"],mn=["barCode"],dn=["tbxCantidad"],_n=["cbxDescuento"],hn=["total"];function gn(a,r){if(1&a&&(e.TgZ(0,"div",51)(1,"h4"),e._uU(2),e.ALo(3,"currency"),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.AsE("#",t.salesHeaderForm.idSale," ",0==t.salesHeaderForm.pendingAmount?" - PAGADO":"- PENDIENTE: "+e.lcZ(3,2,t.salesHeaderForm.pendingAmount),"")}}function fn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSellers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Cn(a,r){if(1&a&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function bn(a,r){if(1&a&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.salesHeaderForm.sellerResp," ")}}function Sn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.showCustomerCat(n.salesHeaderForm.idCustomer))}),e._uU(1," edit "),e.qZA()}}function vn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxCustomers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function xn(a,r){if(1&a&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Zn(a,r){if(1&a&&(e.TgZ(0,"mat-option",54),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.salesHeaderForm.customerResp," ")}}function Tn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSalesType_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function yn(a,r){if(1&a&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function An(a,r){1&a&&(e.TgZ(0,"mat-option",54),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Fn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",13)(2,"mat-form-field",55)(3,"mat-label"),e._uU(4,"Descripci\xf3n"),e.qZA(),e.TgZ(5,"textarea",56),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.salesDetailForm.description=n)}),e.qZA()()(),e.TgZ(6,"div",19)(7,"mat-form-field",57)(8,"mat-label"),e._uU(9,"Precio del sobre"),e.qZA(),e.TgZ(10,"input",58),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.salesDetailForm.precioSobre=n)})("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addSaleDetail())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.salesDetailForm.description),e.xp6(5),e.Q6J("ngModel",t.salesDetailForm.precioSobre)}}function Un(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.cbxProducts_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Pn(a,r){if(1&a&&(e.TgZ(0,"mat-option",53)(1,"mat-icon",31),e._uU(2,"qr_code"),e.qZA(),e._uU(3),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(3),e.hij("",t.nameConcat," ")}}function wn(a,r){1&a&&(e.TgZ(0,"mat-option",54),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Nn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",45)(2,"mat-form-field",59)(3,"mat-label"),e._uU(4,"C\xf3digo de barras"),e.qZA(),e.TgZ(5,"mat-icon",31),e._uU(6,"qr_code"),e.qZA(),e.TgZ(7,"input",60,61),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.salesDetailForm.barCode=n)})("keyup.enter",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.ev_fn_barCode_keyup_enter(n))})("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxProducts_Clear())}),e.qZA()()(),e.TgZ(9,"div",44)(10,"mat-form-field",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxProducts_Search())}),e.TgZ(11,"input",62,63),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.salesDetailForm.productDesc=n)})("input",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxProducts_Search())})("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxProducts_Clear())}),e.qZA(),e.YNc(13,Un,3,0,"button",8),e.TgZ(14,"mat-autocomplete",9,64),e.NdJ("optionSelected",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.cbxProducts_SelectedOption(n))}),e.YNc(16,Pn,4,2,"mat-option",11),e.YNc(17,wn,2,0,"mat-option",12),e.qZA()()()()}if(2&a){const t=e.MAs(15),i=e.oxw();e.xp6(7),e.Q6J("ngModel",i.salesDetailForm.barCode),e.xp6(4),e.Q6J("ngModel",i.salesDetailForm.productDesc)("matAutocomplete",t),e.xp6(2),e.Q6J("ngIf",i.salesDetailForm.productDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxProducts),e.xp6(1),e.Q6J("ngIf",0==i.cbxProducts.length&&i.salesDetailForm.productDesc)}}function In(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",45)(2,"mat-form-field",57)(3,"mat-label"),e._uU(4,"Cantidad"),e.qZA(),e.TgZ(5,"input",65,66),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.salesDetailForm.cantidad=n)})("keyup.enter",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.ev_fn_cbxCantidad_keyup_enter(n))}),e.qZA()()(),e.TgZ(7,"div",45)(8,"mat-form-field",57)(9,"mat-label"),e._uU(10,"Precio unitario"),e.qZA(),e.TgZ(11,"input",67,68),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.salesDetailForm.precioUnitario=n)}),e.qZA()()(),e.TgZ(13,"div",45)(14,"mat-form-field",57)(15,"mat-label"),e._uU(16,"Descuento"),e.qZA(),e.TgZ(17,"input",69,70),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.salesDetailForm.descuento=n)})("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addSaleDetail())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.salesDetailForm.cantidad),e.xp6(6),e.Q6J("ngModel",t.salesDetailForm.precioUnitario),e.xp6(6),e.Q6J("ngModel",t.salesDetailForm.descuento)}}function Mn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addSaleDetail())}),e.TgZ(1,"mat-icon",31),e._uU(2,"add"),e.qZA(),e._uU(3," Agregar"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",!t.ev_fnShowBtnAddSaleDetail())}}function qn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fnClearSalesDetailForm())}),e.TgZ(1,"mat-icon",31),e._uU(2,"clear"),e.qZA(),e._uU(3," limpiar"),e.qZA()}}function Dn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowPaymentCreateSale(!1))}),e.TgZ(1,"mat-icon",31),e._uU(2,"save"),e.qZA(),e._uU(3," Guardar"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal||!t.ev_fnShowBtnGuardarSinAnticipo())}}function Ln(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowPayments())}),e._uU(1),e.ALo(2,"currency"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal||!t.ev_fnShowBtnPagar()),e.xp6(1),e.hij(" Pagar ",e.lcZ(2,2,t.salesHeaderForm.pendingAmount),"")}}function kn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",72),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_NuevaVenta())}),e.TgZ(1,"mat-icon",31),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Nueva venta"),e.qZA()}}function On(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_CrearVentaApartirDeConsignacion(1))}),e.TgZ(1,"mat-icon",31),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Crear venta a cr\xe9dito"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal)}}function Jn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_CrearVentaApartirDeConsignacion(2))}),e.TgZ(1,"mat-icon",31),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Crear venta de contado"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal)}}function Gn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_CrearVentaApartirDeConsignacion(3))}),e.TgZ(1,"mat-icon",31),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Crear venta de apartado"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal)}}function Rn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_RegresarProductoDeConsignacion())}),e.TgZ(1,"mat-icon",31),e._uU(2,"arrow_back"),e.qZA(),e._uU(3," Regresar producto"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal)}}function En(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",72),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.ev_PrintTicket())}),e.TgZ(1,"mat-icon",31),e._uU(2,"print"),e.qZA(),e._uU(3," Imprimir"),e.qZA()}}function Qn(a,r){1&a&&(e.TgZ(0,"th",38),e._uU(1,"Cantidad"),e.qZA())}function Yn(a,r){1&a&&(e.TgZ(0,"th",38),e._uU(1,"Descuento"),e.qZA())}function jn(a,r){1&a&&(e.TgZ(0,"th",41),e._uU(1,"Precio Unitario"),e.qZA())}function Hn(a,r){1&a&&(e.TgZ(0,"th",41),e._uU(1,"Descuento"),e.qZA())}function zn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"mat-checkbox",79),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.select=n)}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("ngModel",t.select)}}function $n(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",80),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,o=e.oxw();return e.KtG(o.event_fnClick_DeleteProductFromList(n))}),e._uU(1," delete_outline "),e.qZA()}}function Bn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",80),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_disableSaleDetail(n))}),e._uU(1," delete_outline "),e.qZA()}}function Wn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"td",38)(1,"input",81),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.consCantidad=n)}),e.qZA()()}if(2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.consCantidad)}}function Kn(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"td",38)(1,"input",82),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.consDescuento=n)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw();return e.KtG(l.onConsDescuentoChange(n,o))}),e.qZA()()}if(2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.consDescuento)}}function Vn(a,r){if(1&a&&(e.TgZ(0,"td",41),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.precioUnitario))}}function Xn(a,r){if(1&a&&(e.TgZ(0,"td",41),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.descuento))}}function ea(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",38)(2,"div",73),e.YNc(3,zn,1,1,"mat-checkbox",74),e.YNc(4,$n,2,0,"span",75),e.YNc(5,Bn,2,0,"span",75),e.qZA()(),e.YNc(6,Wn,2,1,"td",39),e.YNc(7,Kn,2,1,"td",39),e.TgZ(8,"td",40)(9,"div",3)(10,"div",76)(11,"mat-icon",77),e._uU(12,"qr_code"),e.qZA()(),e.TgZ(13,"div",13)(14,"label",78),e._uU(15),e.qZA()()()(),e.TgZ(16,"td",40),e._uU(17),e.qZA(),e.TgZ(18,"td",41),e._uU(19),e.qZA(),e.YNc(20,Vn,3,3,"td",42),e.YNc(21,Xn,3,3,"td",42),e.TgZ(22,"td",41),e._uU(23),e.ALo(24,"currency"),e.qZA(),e.TgZ(25,"td",41),e._uU(26),e.ALo(27,"currency"),e.qZA()()),2&a){const t=r.$implicit,i=e.oxw();e.xp6(3),e.Q6J("ngIf",4==i.dataStone.idSaleType&&t.cantidad>=t.consCantidad&&t.consCantidad>0),e.xp6(1),e.Q6J("ngIf",0==i.idSale.length),e.xp6(1),e.Q6J("ngIf",i.idSale.length>0),e.xp6(1),e.Q6J("ngIf",i.idSale.length>0&&4==i.salesHeaderForm.idSaleType),e.xp6(1),e.Q6J("ngIf",i.idSale.length>0&&4==i.salesHeaderForm.idSaleType),e.xp6(8),e.Oqu(t.barCode),e.xp6(2),e.Oqu(t.productDesc),e.xp6(2),e.Oqu(t.cantidad),e.xp6(1),e.Q6J("ngIf",i.interface.showDescuento),e.xp6(1),e.Q6J("ngIf",i.interface.showDescuento),e.xp6(2),e.Oqu(e.lcZ(24,12,t.precio)),e.xp6(3),e.Oqu(e.lcZ(27,14,t.importe))}}function ta(a,r){1&a&&(e.TgZ(0,"th",41),e._uU(1,"Pago EXT"),e.qZA())}function ia(a,r){1&a&&(e.TgZ(0,"th",41),e._uU(1,"Tipo de cambio"),e.qZA())}function na(a,r){1&a&&(e.TgZ(0,"th",41),e._uU(1,"Referencia"),e.qZA())}function aa(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",95),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.fn_disablePayment(n))}),e._uU(1," delete_outline "),e.qZA()}}function oa(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",96),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.fn_disablePayment(n))}),e._uU(1," backspace "),e.qZA()}}function ra(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",97),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.fn_btnRePrinter(n.idPayment))}),e._uU(1," print "),e.qZA()}}function sa(a,r){if(1&a&&(e.TgZ(0,"td",92),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.pagoF))}}function la(a,r){if(1&a&&(e.TgZ(0,"td",92),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.fxRate))}}function ca(a,r){if(1&a&&(e.TgZ(0,"td",92),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.referencia)}}function pa(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",86)(2,"div",87),e.YNc(3,aa,2,0,"span",88),e.YNc(4,oa,2,0,"span",89),e.YNc(5,ra,2,0,"span",90),e._uU(6),e.qZA()(),e.TgZ(7,"td",91),e._uU(8),e.qZA(),e.TgZ(9,"td",92),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.YNc(12,sa,3,3,"td",93),e.YNc(13,la,3,3,"td",93),e.YNc(14,ca,2,1,"td",93),e.TgZ(15,"td",91),e._uU(16),e.qZA(),e.TgZ(17,"td",94)(18,"div",3)(19,"div",4)(20,"mat-icon",77),e._uU(21,"calendar_today"),e.qZA(),e.TgZ(22,"label",78),e._uU(23),e.qZA()()()()()),2&a){const t=r.$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.active&&0==t.iPagoCortado),e.xp6(1),e.Q6J("ngIf",t.active&&t.iPagoCortado>0),e.xp6(1),e.Q6J("ngIf",t.active),e.xp6(1),e.hij(" ",t.idPayment," "),e.xp6(2),e.Oqu(t.formaPagoDesc),e.xp6(2),e.Oqu(e.lcZ(11,11,t.pago)),e.xp6(2),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",i.interface.showReferencia),e.xp6(2),e.Oqu(t.sellerName),e.xp6(7),e.Oqu(t.createDateString)}}function ua(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",98),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("IPagination",t.pagination)}}function ma(a,r){if(1&a&&(e.TgZ(0,"div",83)(1,"div",4)(2,"div",84)(3,"div",4)(4,"div",35),e._uU(5," Lista de pagos "),e.qZA()()(),e.TgZ(6,"div",36)(7,"table",37)(8,"thead")(9,"th",40),e._uU(10,"N\xfamero #"),e.qZA(),e.TgZ(11,"th",40),e._uU(12,"Forma de pago"),e.qZA(),e.TgZ(13,"th",41),e._uU(14,"Pago"),e.qZA(),e.YNc(15,ta,2,0,"th",42),e.YNc(16,ia,2,0,"th",42),e.YNc(17,na,2,0,"th",42),e.TgZ(18,"th",40),e._uU(19,"Vendedor"),e.qZA(),e.TgZ(20,"th",38),e._uU(21,"Fecha"),e.qZA()(),e.TgZ(22,"tbody"),e.YNc(23,pa,24,13,"tr",43),e.qZA()()(),e.YNc(24,ua,1,1,"app-pagination",85),e.qZA()()),2&a){const t=e.oxw();e.xp6(15),e.Q6J("ngIf",t.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",t.interface.showFxRate),e.xp6(1),e.Q6J("ngIf",t.interface.showReferencia),e.xp6(6),e.Q6J("ngForOf",t.salesHeaderForm.paymentList),e.xp6(1),e.Q6J("ngIf",t.salesHeaderForm.paymentList)}}function da(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",72),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.ev_PrintTicketConsHistoryList())}),e.TgZ(1,"mat-icon",31),e._uU(2,"print"),e.qZA(),e._uU(3," Imprimir"),e.qZA()}}function _a(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",40),e._uU(2),e.qZA(),e.TgZ(3,"td",41),e._uU(4),e.qZA(),e.TgZ(5,"td",40),e._uU(6),e.qZA(),e.TgZ(7,"td",38)(8,"div",3)(9,"div",4)(10,"mat-icon",77),e._uU(11,"calendar_today"),e.qZA(),e.TgZ(12,"label",78),e._uU(13),e.qZA()()()()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.consCantidad),e.xp6(2),e.Oqu(t.description),e.xp6(7),e.Oqu(t.createDateString)}}function ha(a,r){if(1&a&&(e.TgZ(0,"div",83)(1,"div",4)(2,"div",84)(3,"div",4)(4,"div",35),e._uU(5," Movimientos de consignaci\xf3n "),e.qZA()()(),e.TgZ(6,"div",25)(7,"div",4)(8,"div",26),e.YNc(9,da,4,0,"button",29),e.qZA()()(),e.TgZ(10,"div",99)(11,"table",37)(12,"thead")(13,"th",40),e._uU(14,"Producto"),e.qZA(),e.TgZ(15,"th",41),e._uU(16,"Cantidad"),e.qZA(),e.TgZ(17,"th",40),e._uU(18,"Descripci\xf3n"),e.qZA(),e.TgZ(19,"th",38),e._uU(20,"Fecha"),e.qZA()(),e.TgZ(21,"tbody"),e.YNc(22,_a,14,4,"tr",43),e.qZA()()()()()),2&a){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",t.idSale.length>0&&t.selectPrinter.idPrinter>0),e.xp6(13),e.Q6J("ngForOf",t.salesHeaderForm.ConsHistoryList)}}function ga(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",40),e._uU(2),e.qZA(),e.TgZ(3,"td",40),e._uU(4),e.qZA(),e.TgZ(5,"td",38)(6,"div",3)(7,"div",4)(8,"mat-icon",77),e._uU(9,"calendar_today"),e.qZA(),e.TgZ(10,"label",78),e._uU(11),e.qZA()()()()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.userName),e.xp6(7),e.Oqu(t.createDateString)}}function fa(a,r){if(1&a&&(e.TgZ(0,"div",83)(1,"div",4)(2,"div",84)(3,"div",4)(4,"div",35),e._uU(5," Autorizaciones "),e.qZA()()(),e.TgZ(6,"div",99)(7,"table",37)(8,"thead")(9,"th",40),e._uU(10,"Descripci\xf3n"),e.qZA(),e.TgZ(11,"th",40),e._uU(12,"Usuario"),e.qZA(),e.TgZ(13,"th",38),e._uU(14,"Fecha"),e.qZA()(),e.TgZ(15,"tbody"),e.YNc(16,ga,12,3,"tr",43),e.qZA()()()()()),2&a){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",t.salesHeaderForm.autorizacionesList)}}let Ca=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u,s,S,$,c,G,ae){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this.fb=o,this._adapter=l,this._locale=p,this.authServ=_,this.productsServ=g,this.customersServ=u,this.salesTypeServ=s,this.formaPagoServ=S,this.saleServ=$,this.userServ=c,this.authorizationActionServ=G,this.printTicketServ=ae,this._appMain=C.N.appMain,this._idSucursal=C.N.idSucursal,this.timeCBXskeyup=new ee.x,this.title="Venta",this.bShowSpinner=!1,this.idSale="",this.showPaymentsAtStart=!0,this.idUserLogON=0,this.dataStone={idSale:"",idSeller_idUser:0,sellerDesc:"",sellerResp:"",idCustomer:0,customerDesc:"",customerResp:"",idSaleType:0,saleTypeDesc:"",total:0,pendingAmount:0,pagado:0},this.salesHeaderForm={idSale:"",idSeller_idUser:0,sellerDesc:"",sellerResp:"",idCustomer:0,customerDesc:"",customerResp:"",idSaleType:0,saleTypeDesc:"",total:0,pendingAmount:0,pagado:0,saleDetail:[],paymentList:[],ConsHistoryList:[],autorizacionesList:[]},this.salesDetailForm={barCode:"",idProduct:0,productDesc:"",catInventary:0,cantidad:1,precioUnitario:0,descuento:0,cost:0,precio:0,importe:0,description:"",precioSobre:0},this.interface={showDescuento:!1,showReferencia:!1,showFxRate:!1},this.selectCajas={idSucursal:0,idCaja:0,cajaDesc:"",idPrinter:0},this.selectPrinter={idSucursal:0,idPrinter:0,printerName:""},this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.bShowAction=!1,this.bShowActionAuthorization=!1,this.bSaveSale=!1,this.cbxCustomers=[],this.cbxProducts=[],this.cbxSalesType=[],this.cbxSellers=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.timeCBXskeyup.pipe((0,te.b)(500)).subscribe(i=>{1==i.iOption?t.cbxCustomers_Search():2==i.iOption&&t.cbxSellers_Search()}),t.nextInputFocus(t.cbxSellerCBX,500),t.ODataP.idSale.length>0&&(t.fn_getSaleByID(t.ODataP.idSale),t.fn_getAutorizacionesByRelation(t.ODataP.idSale)),t.selectCajas=t.ODataP.selectCajas,t.selectPrinter=t.ODataP.selectPrinter})()}changePagination(t){this.pagination=t,this.fn_getPaymentsByIdSaleListWithPage(this.idSale)}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getPaymentsByIdSaleListWithPage(this.idSale)}hasPermissionAction(t){return this.authServ.hasPermissionAction(t)}fn_disableSaleDetail(t){this.bShowAction||(this.bShowAction=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 apunto de eliminar el producto: "+t.productDesc+" de la venta #"+this.idSale,"\xbfDesea continuar?","Si","No","500px").afterClosed().subscribe({next:i=>{i?this.servicesGServ.showModalWithParams(k,{actionName:"ventas_CancelarSaleDetail",bShowAlert:!1},"400px").afterClosed().subscribe({next:o=>{o?(this.bShowAction=!1,this.bShowSpinner=!0,this.saleServ.CDisableSaleDetail({idSaleDetail:t.idSaleDetail}).subscribe({next:p=>{0===p.status&&this.fn_getSaleByID(this.idSale),this.servicesGServ.showAlertIA(p),this.bShowSpinner=!1},error:p=>{this.servicesGServ.showSnakbar(p.error.message),this.bShowSpinner=!1}})):this.bShowAction=!1}}):this.bShowAction=!1}}))}fn_disablePayment(t){this.bShowActionAuthorization||(this.bShowActionAuthorization=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 apunto de cancelar el pago #"+t.idPayment,"\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i?(this.bShowActionAuthorization=!1,t.iPagoCortado>0?this.servicesGServ.showModalWithParams(ln,t,"600px").afterClosed().subscribe({next:o=>{this.servicesGServ.showModalWithParams(k,{actionName:t.iPagoCortado>0?"ventas_CancelarPagoCortado":"ventas_CancelarPago",bShowAlert:!1},"400px").afterClosed().subscribe({next:p=>{p&&(this.bShowSpinner=!0,this.saleServ.CDisabledPayment({idSale:this.idSale,idPayment:t.idPayment,sOption:o}).subscribe({next:g=>{0===g.status&&this.fn_getSaleByID(this.idSale),this.servicesGServ.showAlertIA(g),this.bShowSpinner=!1},error:g=>{this.servicesGServ.showSnakbar(g.error.message),this.bShowSpinner=!1}}))}})}}):this.servicesGServ.showModalWithParams(k,{actionName:t.iPagoCortado>0?"ventas_CancelarPagoCortado":"ventas_CancelarPago",bShowAlert:!1},"400px").afterClosed().subscribe({next:o=>{o?(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.saleServ.CDisabledPayment({idSale:this.idSale,idPayment:t.idPayment,sOption:""}).subscribe({next:p=>{0===p.status&&this.fn_getSaleByID(this.idSale),this.servicesGServ.showAlertIA(p),this.bShowSpinner=!1},error:p=>{this.servicesGServ.showSnakbar(p.error.message),this.bShowSpinner=!1}})):this.bShowActionAuthorization=!1}})):this.bShowActionAuthorization=!1}}))}fn_getProductByBarCode(){this.salesDetailForm.barCode.length>0&&(this.bShowSpinner=!0,this.productsServ.CGetProductByBarCode(this.salesDetailForm.barCode,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.salesDetailForm.idProduct=t.data.idProduct,this.salesDetailForm.productDesc=t.data.name,this.salesDetailForm.cost=t.data.cost,this.salesDetailForm.precioUnitario=t.data.price,this.salesDetailForm.catInventary=t.data.catInventary,this.nextInputFocus(this.tbxCantidad,500)):(this.salesDetailForm.barCode="",this.salesDetailForm.idProduct=0,this.salesDetailForm.productDesc="",this.salesDetailForm.cost=0,this.salesDetailForm.precioUnitario=0,this.salesDetailForm.catInventary=0),this.servicesGServ.showAlertIA(t,!1),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}fn_getSaleByID(t){this.bShowSpinner=!0,this.saleServ.CGetSaleByID(t).subscribe(i=>{if(console.log(i),0==i.status){this.idSale=i.data.idSale,this.salesHeaderForm.idSale=i.data.idSale,this.salesHeaderForm.idSeller_idUser=i.data.idSeller_idUser,this.salesHeaderForm.sellerDesc=i.data.sellerDesc,this.salesHeaderForm.sellerResp="",this.salesHeaderForm.idCustomer=i.data.idCustomer,this.salesHeaderForm.customerDesc=i.data.customerDesc,this.salesHeaderForm.customerResp="",this.salesHeaderForm.idSaleType=i.data.idSaleType,this.salesHeaderForm.saleTypeDesc=i.data.saleTypeDesc,this.salesHeaderForm.pendingAmount=i.data.pendingAmount,this.salesHeaderForm.pagado=i.data.pagado,this.salesHeaderForm.saleDetail=i.dataDetail,this.salesHeaderForm.total=this.salesHeaderForm.saleDetail.reduce((o,l)=>o+l.importe,0);var n=this.salesHeaderForm.saleDetail.reduce((o,l)=>o+l.descuento,0);this.interface.showDescuento=n>0,this.dataStone.idSale=i.data.idSale,this.dataStone.idSeller_idUser=i.data.idSeller_idUser,this.dataStone.sellerDesc=i.data.sellerDesc,this.dataStone.sellerResp="",this.dataStone.idCustomer=i.data.idCustomer,this.dataStone.customerDesc=i.data.customerDesc,this.dataStone.customerResp="",this.dataStone.idSaleType=i.data.idSaleType,this.dataStone.saleTypeDesc=i.data.saleTypeDesc,this.dataStone.pendingAmount=i.data.pendingAmount,this.dataStone.pagado=i.data.pagado,this.fn_getPaymentsByIdSaleListWithPage(this.idSale),4!=this.salesHeaderForm.idSaleType&&this.showPaymentsAtStart&&this.dataStone.pendingAmount>0&&this._idSucursal>0&&(this.showPaymentsAtStart=!1,this.fn_ShowPayments()),4==this.salesHeaderForm.idSaleType&&this.fn_getConsHistory(this.salesHeaderForm.idSale)}else this.servicesGServ.showSnakbar(i.message);this.bShowSpinner=!1})}fn_getAutorizacionesByRelation(t){this.bShowSpinner=!0,this.authorizationActionServ.CGetAutorizacionesByRelation({idRelation:t,idRelation2:"",relationType:"Sales"}).subscribe(n=>{0==n.status?(this.salesHeaderForm.autorizacionesList=n.data.rows,console.log(n)):this.servicesGServ.showSnakbar(n.message),this.bShowSpinner=!1})}fn_getPaymentsByIdSaleListWithPage(t){this.bShowSpinner=!0,this.saleServ.CGetPaymentsByIdSaleListWithPage(this.pagination,t).subscribe(i=>{0==i.status?(this.salesHeaderForm.paymentList=i.data.rows,this.pagination.length=i.data.count,this.ev_showInterface()):this.salesHeaderForm.paymentList=[],this.bShowSpinner=!1})}fn_getConsHistory(t){this.bShowSpinner=!0,this.saleServ.CGetConsHistory(t).subscribe(i=>{this.salesHeaderForm.ConsHistoryList=0==i.status?i.data.rows:[],this.bShowSpinner=!1})}fn_btnRePrinter(t){this.selectPrinter.idPrinter>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1s apunto de reimprimir este Pago","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&this.printTicketServ.printTicket("RePayment",this.idSale,this.selectPrinter.idPrinter,1,t)}})}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}addSaleDetail(){if(this.ev_fnShowBtnAddSaleDetail())if(5!=this.salesHeaderForm.idSaleType)if(0==this.salesHeaderForm.saleDetail.filter(_=>_.idProduct==this.salesDetailForm.idProduct).length)if(this.salesDetailForm.catInventary>=this.salesDetailForm.cantidad){var n=this.salesDetailForm.descuento/100*this.salesDetailForm.precioUnitario,o=this.salesDetailForm.precioUnitario-n;o>this.salesDetailForm.cost?(this.salesHeaderForm.saleDetail.push({select:!1,barCode:this.salesDetailForm.barCode,idProduct:this.salesDetailForm.idProduct,productDesc:this.salesDetailForm.productDesc,cantidad:this.salesDetailForm.cantidad,cost:this.salesDetailForm.cost,precioUnitario:this.salesDetailForm.precioUnitario,descuento:n,precio:o,importe:o*this.salesDetailForm.cantidad}),n>0&&(this.interface.showDescuento=!0),this.salesHeaderForm.total=this.salesHeaderForm.saleDetail.reduce((_,g)=>_+g.importe,0),this.salesHeaderForm.pendingAmount=this.salesHeaderForm.total,this.fnClearSalesDetailForm()):this.servicesGServ.showAlert("W","Alerta!","No se puede aplicar tanto descuento.",!1)}else this.servicesGServ.showAlert("W","Alerta!","Solo hay "+this.salesDetailForm.catInventary+" en existencia.",!0);else this.servicesGServ.showAlert("W","Alerta!","Este producto ya est\xe1 en la lista.",!0);else 0==this.salesHeaderForm?.saleDetail?.length&&(this.salesHeaderForm.saleDetail.push({select:!1,barCode:"SOBRE001",idProduct:0,productDesc:this.salesDetailForm.description,cantidad:1,cost:this.salesDetailForm.precioSobre,precioUnitario:this.salesDetailForm.precioSobre,descuento:0,precio:this.salesDetailForm.precioSobre,importe:this.salesDetailForm.precioSobre}),this.interface.showDescuento=!1,this.salesHeaderForm.total=this.salesHeaderForm.saleDetail.reduce((g,u)=>g+u.importe,0),this.salesHeaderForm.pendingAmount=this.salesHeaderForm.total,this.fnClearSalesDetailForm())}fnClearSalesDetailForm(){this.salesDetailForm.idProduct=0,this.salesDetailForm.barCode="",this.salesDetailForm.productDesc="",this.salesDetailForm.cantidad=1,this.salesDetailForm.precioUnitario=0,this.salesDetailForm.descuento=0,this.salesDetailForm.cost=0,this.salesDetailForm.precio=0,this.salesDetailForm.importe=0,this.salesDetailForm.description="",this.salesDetailForm.precioSobre=0,this.nextInputFocus(this.barCode,0)}fn_ShowPayments(){this.event_fnAllOKSaleHeader()&&this.selectCajas.idCaja>0&&this.servicesGServ.showModalWithParams(sn,{idCaja:this.ODataP.selectCajas.idCaja,idCustomer:this.salesHeaderForm.idCustomer,idSale:this.salesHeaderForm.idSale,relationType:"V",idSeller_idUser:this.salesHeaderForm.idSeller_idUser,idSaleType:this.dataStone.idSaleType,saleTypeDesc:this.salesHeaderForm.saleTypeDesc,total:this.salesHeaderForm.total,pendingAmount:this.salesHeaderForm.pendingAmount,selectCajas:this.ODataP.selectCajas},"1500px").afterClosed().subscribe({next:i=>{i.length>0&&(this.fn_NuevaVenta(),this.fn_getSaleByID(i))}})}fn_ShowPaymentCreateSale(t){0==this.idSale.length&&!this.bSaveSale&&(this.bSaveSale=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar la venta","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i?(this.bShowSpinner=!0,this.saleServ.CInsertSale(this.salesHeaderForm).subscribe({next:n=>{0===n.status&&(this.idSale=n.insertID,this.salesHeaderForm.idSale=n.insertID,this.salesHeaderForm.pendingAmount=this.salesHeaderForm.total,this.salesHeaderForm.pagado=0,this.ev_PrintTicket(),this.servicesGServ.showAlertIA(n)),this.bShowSpinner=!1,this.bSaveSale=!1},error:n=>{this.servicesGServ.showSnakbar(n.error.message),this.bShowSpinner=!1}})):this.bSaveSale=!1}}))}showCustomerCat(t){this.servicesGServ.showModalWithParams(Ae,{id:t},"1500px").afterClosed().subscribe({next:n=>{n.bOK&&(this.salesHeaderForm.idCustomer=n.id,this.salesHeaderForm.customerDesc=n.name,this.salesHeaderForm.customerResp="")}})}fn_QuestionPayment(){this.ev_fnAllOKToSave()&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de pagar","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.saleServ.CInsertSale(this.salesHeaderForm).subscribe({next:i=>{0===i.status&&(this.salesHeaderForm.idSale=i.insertID,this.salesHeaderForm.pendingAmount=this.salesHeaderForm.total,this.salesHeaderForm.pagado=0),this.servicesGServ.showSnakbar(i.message),this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}}))}})}fn_CerrarMDL(){this.dialogRef.close(!0)}fn_NuevaVenta(){this.idSale="",this.salesHeaderForm.idSale="",this.salesHeaderForm.idSeller_idUser=0,this.salesHeaderForm.sellerDesc="",this.salesHeaderForm.sellerResp="",this.salesHeaderForm.idCustomer=0,this.salesHeaderForm.customerDesc="",this.salesHeaderForm.customerResp="",this.salesHeaderForm.idSaleType=0,this.salesHeaderForm.saleTypeDesc="",this.salesHeaderForm.total=0,this.salesHeaderForm.pendingAmount=0,this.salesHeaderForm.pagado=0,this.salesHeaderForm.saleDetail=[],this.salesHeaderForm.paymentList=[],this.salesDetailForm.barCode="",this.salesDetailForm.idProduct=0,this.salesDetailForm.productDesc="",this.salesDetailForm.catInventary=0,this.salesDetailForm.cantidad=1,this.salesDetailForm.precioUnitario=0,this.salesDetailForm.descuento=0,this.salesDetailForm.cost=0,this.salesDetailForm.precio=0,this.salesDetailForm.importe=0,this.interface.showDescuento=!1,this.dataStone.idSale="",this.dataStone.idSeller_idUser=0,this.dataStone.sellerDesc="",this.dataStone.sellerResp="",this.dataStone.idCustomer=0,this.dataStone.customerDesc="",this.dataStone.customerResp="",this.dataStone.idSaleType=0,this.dataStone.saleTypeDesc="",this.dataStone.total=0,this.dataStone.pendingAmount=0,this.dataStone.pagado=0}fn_CrearVentaApartirDeConsignacion(t){let i=this.salesHeaderForm.saleDetail.filter(function(n){return 1==n.select&&n.cantidad>=n.consCantidad&&n.consCantidad>0});i.length>0?this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de crear una venta "+(1==t?"a Cr\xe9dito":2==t?"de Contado":3==t?"de apartado":""),"\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:n=>{n&&this.servicesGServ.showModalWithParams(k,{actionName:1==t?"ventas_consVentaCredito":2==t?"ventas_consVentaContado":3==t?"ventas_consApartado":""},"400px").afterClosed().subscribe({next:l=>{if(l){let p={idSaleOld:this.dataStone.idSale,idSeller_idUser:this.dataStone.idSeller_idUser,idCustomer:this.dataStone.idCustomer,idSaleType:t,saleDetail:i};this.bShowSpinner=!0,this.saleServ.CInsertSaleByConsignation(p).subscribe({next:_=>{0===_.status&&(this.fn_getSaleByID(this.idSale),this.selectPrinter.idPrinter>0&&this.printTicketServ.printTicket("Venta",_.idSaleNew,this.selectPrinter.idPrinter)),this.servicesGServ.showAlertIA(_),this.bShowSpinner=!1},error:_=>{this.servicesGServ.showSnakbar(_.error.message),this.bShowSpinner=!1}})}}})}}):this.servicesGServ.showAlert("W","Alerta!","Selecciona almenos un producto de la lista.",!1)}fn_RegresarProductoDeConsignacion(){let t=this.salesHeaderForm.saleDetail.filter(function(i){return 1==i.select});t.length>0?this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de regresar "+(t.length>1?"los productos":"el producto")+" al inventario","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&this.servicesGServ.showModalWithParams(k,{actionName:"ventas_consRegresarAInventario"},"400px").afterClosed().subscribe({next:o=>{if(o){let l={idSaleOld:this.dataStone.idSale,idSeller_idUser:this.dataStone.idSeller_idUser,saleDetail:t};this.bShowSpinner=!0,this.saleServ.CRegresarProductoDeConsignacion(l).subscribe({next:p=>{0===p.status&&(1==p.bBorro?this.fn_CerrarMDL():this.fn_getSaleByID(this.idSale)),this.servicesGServ.showAlertIA(p),this.bShowSpinner=!1},error:p=>{this.servicesGServ.showSnakbar(p.error.message),this.bShowSpinner=!1}})}}})}}):this.servicesGServ.showAlert("W","Alerta!","Selecciona almenos un producto de la lista.",!0)}onConsDescuentoChange(t,i){i.precioUnitario-t/100*i.precioUnitario<i.cost&&(this.servicesGServ.showAlert("W","Alerta!","No se puede aplicar tanto descuento.",!1),i.consDescuento=0)}ev_fnShowBtnAddSaleDetail(){let t=!1;return(5==this.salesHeaderForm.idSaleType&&this.salesDetailForm.description.length>0&&this.salesDetailForm.precioSobre>0&&0==this.salesHeaderForm?.saleDetail?.length||5!=this.salesHeaderForm.idSaleType&&this.salesDetailForm.idProduct>0&&this.salesDetailForm.barCode.length>0&&this.salesDetailForm.cantidad>0&&this.salesDetailForm.precioUnitario>0)&&(t=!0),t}ev_fnShowBtnGuardarSinAnticipo(){let t=!1;return this.salesHeaderForm.idSeller_idUser>0&&this.salesHeaderForm.idCustomer>0&&this.salesHeaderForm.idSaleType>0&&this.salesHeaderForm.saleDetail.length>0&&(t=!0),t}ev_fnShowBtnPagar(){let t=!1;return this.salesHeaderForm.idCustomer>0&&this.salesHeaderForm.saleDetail.length>0&&(t=!0),t}ev_fn_barCode_keyup_enter(t){13==t.keyCode&&this.salesDetailForm.barCode.length>0&&this.fn_getProductByBarCode()}ev_fn_cbxCantidad_keyup_enter(t){13==t.keyCode&&this.salesDetailForm.cantidad>0&&this.nextInputFocus(this.cbxDescuento,0)}event_fnAllOKSaleHeader(){let t=!1;return this.salesHeaderForm.idCustomer>0&&this.salesHeaderForm.idSaleType>0&&this.salesHeaderForm.saleDetail.length>0&&this.salesHeaderForm.total>0&&(t=!0),t}event_fnClick_DeleteProductFromList(t){this.salesHeaderForm.saleDetail.splice(t,1),this.salesHeaderForm.total=this.salesHeaderForm.saleDetail.reduce((i,n)=>i+n.importe,0)}ev_fnAllOKToSave(){let t=!1;return this.salesHeaderForm.idCustomer>0&&this.salesHeaderForm.idSaleType>0&&this.salesHeaderForm.saleDetail.length>0&&this.salesHeaderForm.total>0&&(t=!0),t}ev_showInterface(){this.salesHeaderForm.paymentList?.length>0?(this.interface.showReferencia=this.salesHeaderForm.paymentList.filter(function(t){return t.referencia?.length>0}).length>0,this.interface.showFxRate=this.salesHeaderForm.paymentList.filter(function(t){return t.fxRate>0}).length>0):(this.interface.showReferencia=!1,this.interface.showFxRate=!1)}ev_PrintTicket(){var t=this;return(0,Z.Z)(function*(){t.printTicketServ.printTicket("Venta",t.idSale,t.selectPrinter.idPrinter)})()}ev_PrintTicketConsHistoryList(){var t=this;return(0,Z.Z)(function*(){t.printTicketServ.printTicket("ConsHistory",t.idSale,t.selectPrinter.idPrinter)})()}CBXskeyup(t,i){this.timeCBXskeyup.next({iOption:t,txt:i})}cbxCustomers_Search(){this.customersServ.CCbxGetCustomersCombo(this.salesHeaderForm.customerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxCustomers=t.data,this.salesHeaderForm.customerResp=""):(this.cbxCustomers=[],this.salesHeaderForm.customerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxCustomers_SelectedOption(t,i){setTimeout(()=>{const n=t.option.value;this.salesHeaderForm.idCustomer=n.idCustomer,this.salesHeaderForm.customerDesc=n.name,this.nextInputFocus(this.cbxSaleTypeCBX,500)},1)}cbxCustomers_Clear(){this.salesHeaderForm.idCustomer=0,this.salesHeaderForm.customerDesc="",this.salesHeaderForm.customerResp=""}cbxProducts_Search(){this.productsServ.CCbxGetProductsCombo({iOption:2,search:this.salesDetailForm.productDesc}).subscribe({next:i=>{this.cbxProducts=0===i.status?i.data:[]},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxProducts_SelectedOption(t){this.cbxProducts_Clear(),setTimeout(()=>{const i=t.option.value;this.salesDetailForm.idProduct=i.idProduct,this.salesDetailForm.productDesc=i.name,this.salesDetailForm.barCode=i.barCode,this.salesDetailForm.cost=i.cost,this.salesDetailForm.precioUnitario=i.price,this.salesDetailForm.catInventary=i.catInventary,this.nextInputFocus(this.tbxCantidad,500)},1)}cbxProducts_Clear(){this.salesDetailForm.idProduct=0,this.salesDetailForm.productDesc="",this.salesDetailForm.barCode="",this.salesDetailForm.precioUnitario=0,this.salesDetailForm.catInventary=0,this.salesDetailForm.cost=0}cbxSalesType_Search(){this.salesTypeServ.CCbxGetSalesTypeCombo(this.salesHeaderForm.saleTypeDesc).subscribe({next:t=>{this.cbxSalesType=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSalesType_SelectedOption(t){this.cbxSalesType_Clear(),setTimeout(()=>{const i=t.option.value;this.salesHeaderForm.idSaleType=i.id,this.salesHeaderForm.saleTypeDesc=i.name,5==this.salesHeaderForm.idSaleType?setTimeout(()=>{var n=document.getElementById("tbxDescription");n?.focus()},500):this.nextInputFocus(this.barCode,500)},1)}cbxSalesType_Clear(){this.salesHeaderForm.idSaleType=0,this.salesHeaderForm.saleTypeDesc=""}cbxSellers_Search(){this.userServ.CCbxGetSellersCombo(this.salesHeaderForm.sellerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxSellers=t.data,this.salesHeaderForm.sellerResp=""):(this.cbxSellers=[],this.salesHeaderForm.sellerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSellers_SelectedOption(t){this.cbxSellers_Clear(),setTimeout(()=>{const i=t.option.value;this.salesHeaderForm.idSeller_idUser=i.idUser,this.salesHeaderForm.sellerDesc=i.name,this.salesHeaderForm.sellerResp="",this.nextInputFocus(this.cbxCustomerCBX,500)},1)}cbxSellers_Clear(){this.salesHeaderForm.idSeller_idUser=0,this.salesHeaderForm.sellerDesc="",this.salesHeaderForm.sellerResp=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(m.qu),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(R),e.Y36(V),e.Y36(Pe),e.Y36(he),e.Y36(Y),e.Y36(B),e.Y36(Te),e.Y36(j))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-nsale"]],viewQuery:function(t,i){if(1&t&&(e.Gf(cn,5),e.Gf(pn,5),e.Gf(un,5),e.Gf(mn,5),e.Gf(dn,5),e.Gf(_n,5),e.Gf(hn,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.cbxSellerCBX=n.first),e.iGM(n=e.CRH())&&(i.cbxCustomerCBX=n.first),e.iGM(n=e.CRH())&&(i.cbxSaleTypeCBX=n.first),e.iGM(n=e.CRH())&&(i.barCode=n.first),e.iGM(n=e.CRH())&&(i.tbxCantidad=n.first),e.iGM(n=e.CRH())&&(i.cbxDescuento=n.first),e.iGM(n=e.CRH())&&(i.total=n.first)}},decls:109,vars:40,consts:[[2,"padding","30px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],["class","divTitle-center","style","margin-top: 0px;",4,"ngIf"],[1,"row"],[1,"col-md-12"],[2,"width","100%"],["type","text","id","cbxSeller","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxSellerCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSeller","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-10"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorGreen",3,"click",4,"ngIf"],["type","text","id","cbxCustomer","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxCustomerCBX",""],["cbxCustomer","matAutocomplete"],[1,"col-md-2"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","click","focus"],["cbxSaleTypeCBX",""],["cbxSaleType","matAutocomplete"],["class","row",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px top10px",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","class","marginRight10px top10px",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px top10px",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px","top10px",3,"click"],["matPrefix","",1,"my-icon"],[1,"divSection"],[1,"row","top20px"],[1,"row",2,"margin-top","-55px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px","background-color","#3f51b5 !important"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],["class","textAlingCenter padding-th",4,"ngIf"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],["class","textAlingRight padding-th",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-md-8"],[1,"col-md-4"],[1,"with100","top20px"],["matInput","","currencyMask","","placeholder","TOTAL","readonly","true",1,"textAlingRight","colorGreen","fontSize",3,"ngModel","ngModelChange"],["total",""],["class","row divSection",4,"ngIf"],[3,"hidden"],[1,"divTitle-center",2,"margin-top","0px"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"example-full-width","with100"],["id","tbxDescription","matInput","","cdkTextareaAutosize","","placeholder","Ingrese una descripci\xf3n",3,"ngModel","ngModelChange"],[1,"with100"],["id","tbxPrecioSobre","matInput","","currencyMask","","placeholder","Ingrese el precio unitario",1,"textAlingRight",3,"ngModel","ngModelChange","keyup.enter"],["fxLayout.xs","column",1,"with100"],["matInput","","placeholder","Ingrese un C\xf3digo de barras",3,"ngModel","ngModelChange","keyup.enter","click"],["barCode",""],["type","text","id","cbxProduct","placeholder","Selecciona un producto...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","click"],["cbxProductss",""],["cbxProduct","matAutocomplete"],["matInput","","placeholder","Ingrese la cantidad","type","number",1,"textAlingRight",3,"ngModel","ngModelChange","keyup.enter"],["tbxCantidad",""],["matInput","","currencyMask","","placeholder","Ingrese el precio unitario","readonly","true",1,"textAlingRight",3,"ngModel","ngModelChange"],["precioUnitario",""],["matInput","","placeholder","Ingrese un descuento","type","number",1,"textAlingRight",3,"ngModel","ngModelChange","keyup.enter"],["cbxDescuento",""],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px","top10px",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px","top10px",3,"click"],[2,"width","80px"],["style","margin-top: -50px;","class","manitaSobre",3,"ngModel","ngModelChange",4,"ngIf"],["class","material-icons manitaSobre colorRed",3,"click",4,"ngIf"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[2,"margin-left","10px"],[1,"manitaSobre",2,"margin-top","-50px",3,"ngModel","ngModelChange"],[1,"material-icons","manitaSobre","colorRed",3,"click"],["matInput","","type","number",1,"textAlingCenter","colorGreen",2,"width","60px",3,"ngModel","ngModelChange"],["matInput","","type","number",1,"textAlingCenter","colorGreen",2,"width","50px",3,"ngModel","ngModelChange"],[1,"row","divSection"],[1,"row",2,"margin-top","-30px"],[3,"IPagination","OPagination",4,"ngIf"],[1,"textAlingLeft"],[2,"width","150px"],["class","material-icons manitaSobre colorRed","matTooltip","Cancelar pago",3,"click",4,"ngIf"],["class","material-icons manitaSobre colorRed","matTooltip","Devoluci\xf3n de pago",3,"click",4,"ngIf"],["class","material-icons manitaSobre colorGreen","matTooltip","Imprimir",3,"click",4,"ngIf"],[2,"text-align","left"],[2,"text-align","right"],["style","text-align: right;",4,"ngIf"],[1,"textAlingCenter"],["matTooltip","Cancelar pago",1,"material-icons","manitaSobre","colorRed",3,"click"],["matTooltip","Devoluci\xf3n de pago",1,"material-icons","manitaSobre","colorRed",3,"click"],["matTooltip","Imprimir",1,"material-icons","manitaSobre","colorGreen",3,"click"],[3,"IPagination","OPagination"],[1,"table-responsive","top10px"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.YNc(4,gn,4,4,"div",2),e.TgZ(5,"div",3)(6,"div",4)(7,"div",3)(8,"div",4)(9,"mat-label"),e._uU(10,"Vendedor: "),e.qZA(),e.TgZ(11,"mat-form-field",5)(12,"input",6,7),e.NdJ("ngModelChange",function(l){return i.salesHeaderForm.sellerDesc=l})("keyup",function(){e.CHM(n);const l=e.MAs(13);return e.KtG(i.CBXskeyup(2,l.value))})("click",function(){return i.cbxSellers_Clear()}),e.qZA(),e.YNc(14,fn,3,0,"button",8),e.TgZ(15,"mat-autocomplete",9,10),e.NdJ("optionSelected",function(l){return i.cbxSellers_SelectedOption(l)}),e.YNc(17,Cn,2,2,"mat-option",11),e.YNc(18,bn,2,1,"mat-option",12),e.qZA()()()(),e.TgZ(19,"div",3)(20,"div",13)(21,"mat-label"),e._uU(22,"Cliente: "),e.qZA(),e.TgZ(23,"span",14),e.NdJ("click",function(){return i.showCustomerCat(0)}),e._uU(24," add_circle_outline "),e.qZA(),e.YNc(25,Sn,2,0,"span",15),e.TgZ(26,"mat-form-field",5)(27,"input",16,17),e.NdJ("ngModelChange",function(l){return i.salesHeaderForm.customerDesc=l})("keyup",function(){e.CHM(n);const l=e.MAs(28);return e.KtG(i.CBXskeyup(1,l.value))})("click",function(){return i.cbxCustomers_Clear()}),e.qZA(),e.YNc(29,vn,3,0,"button",8),e.TgZ(30,"mat-autocomplete",9,18),e.NdJ("optionSelected",function(l){e.CHM(n);const p=e.MAs(39);return e.KtG(i.cbxCustomers_SelectedOption(l,p))}),e.YNc(32,xn,2,2,"mat-option",11),e.YNc(33,Zn,2,1,"mat-option",12),e.qZA()()(),e.TgZ(34,"div",19)(35,"mat-label"),e._uU(36,"Tipo de venta: "),e.qZA(),e.TgZ(37,"mat-form-field",20),e.NdJ("click",function(){return i.cbxSalesType_Clear(),i.cbxSalesType_Search()}),e.TgZ(38,"input",21,22),e.NdJ("ngModelChange",function(l){return i.salesHeaderForm.saleTypeDesc=l})("input",function(){return i.cbxSalesType_Search()})("click",function(){return i.cbxSalesType_Clear()})("focus",function(){return i.cbxSalesType_Clear(),i.cbxSalesType_Search()}),e.qZA(),e.YNc(40,Tn,3,0,"button",8),e.TgZ(41,"mat-autocomplete",9,23),e.NdJ("optionSelected",function(l){return i.cbxSalesType_SelectedOption(l)}),e.YNc(43,yn,2,2,"mat-option",11),e.YNc(44,An,2,0,"mat-option",12),e.qZA()()()(),e.TgZ(45,"div",3)(46,"div",4),e.YNc(47,Fn,11,2,"div",24),e.YNc(48,Nn,18,6,"div",24),e.YNc(49,In,19,3,"div",24),e.TgZ(50,"div",25)(51,"div",4)(52,"div",26),e.YNc(53,Mn,4,1,"button",27),e.YNc(54,qn,4,0,"button",28),e.YNc(55,Dn,4,1,"button",27),e.YNc(56,Ln,3,4,"button",27),e.YNc(57,kn,4,0,"button",29),e.TgZ(58,"button",30),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(59,"mat-icon",31),e._uU(60,"close"),e.qZA(),e._uU(61," Cerrar"),e.qZA(),e.YNc(62,On,4,1,"button",27),e.YNc(63,Jn,4,1,"button",27),e.YNc(64,Gn,4,1,"button",27),e.YNc(65,Rn,4,1,"button",27),e.YNc(66,En,4,0,"button",29),e.qZA()()(),e.TgZ(67,"div",32)(68,"div",33)(69,"div",4)(70,"div",34)(71,"div",4)(72,"div",35),e._uU(73," Lista de productos "),e.qZA()()(),e.TgZ(74,"div",36)(75,"table",37)(76,"thead")(77,"th",38),e._uU(78,"Acciones"),e.qZA(),e.YNc(79,Qn,2,0,"th",39),e.YNc(80,Yn,2,0,"th",39),e.TgZ(81,"th",40),e._uU(82,"C\xf3digo"),e.qZA(),e.TgZ(83,"th",40),e._uU(84,"Descripci\xf3n"),e.qZA(),e.TgZ(85,"th",41),e._uU(86,"Cantidad"),e.qZA(),e.YNc(87,jn,2,0,"th",42),e.YNc(88,Hn,2,0,"th",42),e.TgZ(89,"th",41),e._uU(90,"Precio"),e.qZA(),e.TgZ(91,"th",41),e._uU(92,"Importe"),e.qZA()(),e.TgZ(93,"tbody"),e.YNc(94,ea,28,16,"tr",43),e.qZA()()()()(),e.TgZ(95,"div",3),e._UZ(96,"div",44),e.TgZ(97,"div",45)(98,"div",3)(99,"div",4)(100,"mat-form-field",46)(101,"mat-label"),e._uU(102,"TOTAL"),e.qZA(),e.TgZ(103,"input",47,48),e.NdJ("ngModelChange",function(l){return i.salesHeaderForm.total=l}),e.qZA()()()()()()(),e.YNc(105,ma,25,5,"div",49),e.YNc(106,ha,23,2,"div",49),e.YNc(107,fa,17,1,"div",49),e.qZA()()()()(),e._UZ(108,"app-spinner",50)}if(2&t){const n=e.MAs(16),o=e.MAs(31),l=e.MAs(42);e.xp6(4),e.Q6J("ngIf",i.salesHeaderForm.idSale.length>0),e.xp6(8),e.Q6J("ngModel",i.salesHeaderForm.sellerDesc)("matAutocomplete",n),e.xp6(2),e.Q6J("ngIf",i.salesHeaderForm.sellerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSellers),e.xp6(1),e.Q6J("ngIf",i.salesHeaderForm.sellerDesc.length>0&&i.salesHeaderForm.sellerResp.length>0),e.xp6(7),e.Q6J("ngIf",i.salesHeaderForm.idCustomer>0),e.xp6(2),e.Q6J("ngModel",i.salesHeaderForm.customerDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.salesHeaderForm.customerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxCustomers),e.xp6(1),e.Q6J("ngIf",i.salesHeaderForm.customerResp.length>0&&i.salesHeaderForm.customerResp.length>0),e.xp6(5),e.Q6J("ngModel",i.salesHeaderForm.saleTypeDesc)("matAutocomplete",l),e.xp6(2),e.Q6J("ngIf",i.salesHeaderForm.saleTypeDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSalesType),e.xp6(1),e.Q6J("ngIf",0==i.cbxSalesType.length&&i.salesHeaderForm.saleTypeDesc),e.xp6(3),e.Q6J("ngIf",5==i.salesHeaderForm.idSaleType),e.xp6(1),e.Q6J("ngIf",0==i.salesHeaderForm.idSale.length&&5!=i.salesHeaderForm.idSaleType),e.xp6(1),e.Q6J("ngIf",0==i.salesHeaderForm.idSale.length&&5!=i.salesHeaderForm.idSaleType),e.xp6(4),e.Q6J("ngIf",0==i.salesHeaderForm.idSale.length),e.xp6(1),e.Q6J("ngIf",0==i.salesHeaderForm.idSale.length),e.xp6(1),e.Q6J("ngIf",0==i.salesHeaderForm.idSale.length&&i.hasPermissionAction("ventas_Crear")),e.xp6(1),e.Q6J("ngIf",i.hasPermissionAction("ventas_RegistrarPagos")&&i.salesHeaderForm.idSale.length>0&&i.salesHeaderForm.pendingAmount>0&&4!=i.dataStone.idSaleType&&4!=i.salesHeaderForm.idSaleType&&i.selectCajas.idCaja>0),e.xp6(1),e.Q6J("ngIf",i.hasPermissionAction("ventas_Crear")),e.xp6(5),e.Q6J("ngIf",4==i.dataStone.idSaleType),e.xp6(1),e.Q6J("ngIf",4==i.dataStone.idSaleType),e.xp6(1),e.Q6J("ngIf",4==i.dataStone.idSaleType),e.xp6(1),e.Q6J("ngIf",4==i.dataStone.idSaleType),e.xp6(1),e.Q6J("ngIf",i.idSale.length>0&&i.selectPrinter.idPrinter>0),e.xp6(13),e.Q6J("ngIf",i.idSale.length>0&&4==i.salesHeaderForm.idSaleType),e.xp6(1),e.Q6J("ngIf",i.idSale.length>0&&4==i.salesHeaderForm.idSaleType),e.xp6(7),e.Q6J("ngIf",i.interface.showDescuento),e.xp6(1),e.Q6J("ngIf",i.interface.showDescuento),e.xp6(6),e.Q6J("ngForOf",i.salesHeaderForm.saleDetail),e.xp6(9),e.Q6J("ngModel",i.salesHeaderForm.total),e.xp6(2),e.Q6J("ngIf",(null==i.salesHeaderForm.paymentList?null:i.salesHeaderForm.paymentList.length)>0),e.xp6(1),e.Q6J("ngIf",(null==i.salesHeaderForm.ConsHistoryList?null:i.salesHeaderForm.ConsHistoryList.length)>0),e.xp6(1),e.Q6J("ngIf",(null==i.salesHeaderForm.autorizacionesList?null:i.salesHeaderForm.autorizacionesList.length)>0),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.wV,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,L.oG,d.KE,d.hX,d.qo,d.R9,N.Nt,Q.IC,P.Hw,O.gM,X.g1,U.O,D,h.H9]}),a})();const ba=["cbxCajasCBX"];function Sa(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxCajas_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function va(a,r){if(1&a&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function xa(a,r){1&a&&(e.TgZ(0,"mat-option",20),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Za(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_insertSelectCaja())}),e.TgZ(1,"mat-icon",16),e._uU(2,"save"),e.qZA(),e._uU(3," Seleccionar caja "),e.qZA()}}let Ta=(()=>{class a{constructor(t,i,n,o,l){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this.authServ=o,this.cajasServ=l,this.bShowSpinner=!1,this.selectCajaForm={idUser:0,idCaja:0,cajaDesc:""},this.bQuestion=!1,this.cbxCajas=[]}ngOnInit(){this.selectCajaForm.idUser=this.ODataP.idUser,setTimeout(()=>{this.cbxCajasCBX.nativeElement.focus()},1e3)}fn_insertSelectCaja(){var t=this;return(0,Z.Z)(function*(){var i;t.bQuestion||(t.bQuestion=!0,t.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de seleccionar una caja","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:(i=(0,Z.Z)(function*(n){var o;n?(t.bShowSpinner=!0,t.cajasServ.CInsertSelectCaja(t.selectCajaForm).subscribe({next:(o=(0,Z.Z)(function*(l){0===l.status&&t.fn_CerrarMDL(l.insertID),t.servicesGServ.showSnakbar(l.message),t.bShowSpinner=!1}),function(p){return o.apply(this,arguments)}),error:o=>{t.servicesGServ.showSnakbar(o.error.message),t.bShowSpinner=!1}})):t.bQuestion=!1}),function(o){return i.apply(this,arguments)})}))})()}fn_CerrarMDL(t){this.dialogRef.close(t)}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}cbxCajas_Search(){this.cajasServ.CGetCajasBySec(this.selectCajaForm.cajaDesc,this.selectCajaForm.idUser).subscribe({next:t=>{this.cbxCajas=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxCajas_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.selectCajaForm.idCaja=i.idCaja,this.selectCajaForm.cajaDesc=i.name}cbxCajas_Clear(){this.selectCajaForm.idCaja=0,this.selectCajaForm.cajaDesc=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(T.e),e.Y36(re))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-select-caja"]],viewQuery:function(t,i){if(1&t&&e.Gf(ba,5),2&t){let n;e.iGM(n=e.CRH())&&(i.cbxCajasCBX=n.first)}},decls:27,vars:7,consts:[[2,"padding","10px"],[1,"row"],[1,"col-md-12"],["mat-icon-button","",2,"float","right",3,"click"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",1,"colorGreen","fontSize",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus"],["cbxCajasCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxCaja","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()()(),e.TgZ(6,"div",1)(7,"div",2)(8,"mat-label"),e._uU(9,"Seleccione una caja:"),e.qZA(),e.TgZ(10,"mat-form-field",4),e.NdJ("click",function(){return i.cbxCajas_Search()}),e.TgZ(11,"input",5,6),e.NdJ("ngModelChange",function(o){return i.selectCajaForm.cajaDesc=o})("input",function(){return i.cbxCajas_Search()})("focus",function(){return i.cbxCajas_Search()}),e.qZA(),e.YNc(13,Sa,3,0,"button",7),e.TgZ(14,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(o){return i.cbxCajas_SelectedOption(o)}),e.YNc(16,va,2,2,"mat-option",10),e.YNc(17,xa,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(18,"div",12)(19,"div",2)(20,"div",13),e.YNc(21,Za,4,0,"button",14),e.TgZ(22,"button",15),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(23,"mat-icon",16),e._uU(24,"close"),e.qZA(),e._uU(25," Cerrar"),e.qZA()()()()(),e._UZ(26,"app-spinner",17)),2&t){const n=e.MAs(15);e.xp6(11),e.Q6J("ngModel",i.selectCajaForm.cajaDesc)("matAutocomplete",n),e.xp6(2),e.Q6J("ngIf",i.selectCajaForm.cajaDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxCajas),e.xp6(1),e.Q6J("ngIf",0==i.cbxCajas.length&&i.selectCajaForm.cajaDesc),e.xp6(4),e.Q6J("ngIf",i.selectCajaForm.idCaja>0),e.xp6(5),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,d.KE,d.hX,d.qo,d.R9,N.Nt,P.Hw,U.O]}),a})();const ya=["tbxPesosCaja"],Aa=["tbxDolaresCaja"],Fa=["tbxVouchersCaja"],Ua=["tbxTransferenciasCaja"],Pa=["tbxTotalCaja"],wa=["tbxDiferencia"],Na=["tbxComentarios"];function Ia(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_InsertCorteCaja())}),e.TgZ(1,"mat-icon",13),e._uU(2,"save"),e.qZA(),e._uU(3," Guardar Corte de Caja"),e.qZA()}}function Ma(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_InsertCorteCaja())}),e.TgZ(1,"mat-icon",13),e._uU(2,"save"),e.qZA(),e._uU(3," Guardar Corte de Caja"),e.qZA()}}let qa=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u,s){this.dialogRef=t,this.ODataP=i,this._adapter=n,this._locale=o,this.datePipe=l,this.servicesGServ=p,this.authServ=_,this.salesServ=g,this.printTicketServ=u,this.printersServ=s,this.idUserLogON=0,this.bShowSpinner=!1,this.idCaja=0,this.selectedDate="",this.preCorteCaja={sales:0,tallerSales:0,egresos:0,ingresoTotal:0,pesos:0,pesosCaja:0,dolares:0,dolaresF:0,dolaresCaja:0,fxRate:0,dolaresMNX:0,vouchers:0,vouchersCaja:0,transferencias:0,transferenciasCaja:0,dineroElectronico:0,totalCaja:0,diferencia:0,observaciones:""},this.selectPrinter={idSucursal:0,idPrinter:0,printerName:""}}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.selectedDate=t.datePipe.transform(new Date,"yyyy-MM-dd")+"T00:00:00",console.log(t.ODataP),t.idCaja=t.ODataP.idCaja,t.ODataP.idCaja>0&&(t.fn_getSelectPrintByIdUser(t.idUserLogON),t.fn_getPreCorteCaja(t.ODataP.idCaja))})()}fn_getPreCorteCaja(t){this.bShowSpinner=!0,this.salesServ.CGetPreCorteCaja({idCaja:t,selectedDate:this.selectedDate}).subscribe(n=>{0==n.status&&(this.preCorteCaja=n.data.rows,this.nextInputFocus(this.tbxPesosCaja,500)),this.bShowSpinner=!1})}fn_InsertCorteCaja(){this.fn_SUMAll(),this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar el corte de caja","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&(this.bShowSpinner=!0,this.salesServ.CInsertCorteCaja({idCaja:this.idCaja,selectedDate:this.selectedDate,preCorteCaja:this.preCorteCaja}).subscribe({next:n=>{0===n.status&&(this.selectPrinter.idPrinter>0&&this.printTicketServ.printTicket("CorteCaja",n.insertID,this.selectPrinter.idPrinter),this.fn_CerrarMDL(n.insertID)),this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{this.servicesGServ.showSnakbar(n.error.message),this.bShowSpinner=!1}}))}})}fn_getSelectPrintByIdUser(t){this.printersServ.CGetSelectPrinterByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectPrinter.idSucursal=i.data.idSucursal,this.selectPrinter.idPrinter=i.data.idPrinter,this.selectPrinter.printerName=i.data.printerName):(this.selectPrinter.idSucursal=0,this.selectPrinter.idPrinter=0,this.selectPrinter.printerName=""),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}fn_SUMAll(){this.preCorteCaja.totalCaja=(parseFloat(this.preCorteCaja.pesosCaja??0)+parseFloat(this.preCorteCaja.dolaresCaja??0)+parseFloat(this.preCorteCaja.vouchersCaja??0)+parseFloat(this.preCorteCaja.transferenciasCaja??0)).toFixed(2),this.preCorteCaja.diferencia=((this.preCorteCaja.totalCaja??0)-(this.preCorteCaja.ingresoTotal??0)).toFixed(2)}fn_CerrarMDL(t){this.dialogRef.close(t)}onDateChange(t){t.value?this.fn_getPreCorteCaja(this.ODataP.idCaja):(this.servicesGServ.showAlert("W","Alerta!","Formato de fecha incorrecta.",!1),this.preCorteCaja.selectedDate="")}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}ev_fn_tbxPesosCaja_keyup_enter(t){13==t.keyCode&&(this.preCorteCaja.pesosCaja>0?this.nextInputFocus(this.tbxDolaresCaja,0):0==this.preCorteCaja.pesos&&(this.preCorteCaja.pesosCaja=0,this.nextInputFocus(this.tbxDolaresCaja,0)),this.fn_SUMAll())}ev_fn_tbxDolaresCaja_keyup_enter(t){13==t.keyCode&&(this.preCorteCaja.dolaresCaja>0?(this.preCorteCaja.dolaresF=this.preCorteCaja.dolaresCaja,this.preCorteCaja.dolaresCaja=(this.preCorteCaja.dolaresCaja*this.preCorteCaja.fxRate).toFixed(2),this.nextInputFocus(this.tbxVouchersCaja,0)):0==this.preCorteCaja.dolares&&(this.preCorteCaja.dolaresCaja=0,this.nextInputFocus(this.tbxVouchersCaja,0)),this.fn_SUMAll())}ev_fn_tbxVouchersCaja_keyup_enter(t){13==t.keyCode&&(this.preCorteCaja.vouchersCaja||(this.preCorteCaja.vouchersCaja=this.preCorteCaja.vouchers),this.nextInputFocus(this.tbxTransferenciasCaja,0),this.fn_SUMAll())}ev_fn_tbxTransferenciasCaja_keyup_enter(t){13==t.keyCode&&(this.preCorteCaja.transferenciasCaja||(this.preCorteCaja.transferenciasCaja=this.preCorteCaja.transferencias),this.nextInputFocus(this.tbxTotalCaja,0),this.fn_SUMAll())}ev_fn_tbxTotalCaja_keyup_enter(t){13==t.keyCode&&(this.nextInputFocus(this.tbxDiferencia,0),this.fn_SUMAll())}ev_fn_tbxDiferencia_keyup_enter(t){13==t.keyCode&&(this.nextInputFocus(this.tbxComentarios,0),this.fn_SUMAll())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(f._A),e.Y36(f.Ad),e.Y36(h.uU),e.Y36(A.$),e.Y36(T.e),e.Y36(Y),e.Y36(j),e.Y36(H))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-corte-caja"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ya,5),e.Gf(Aa,5),e.Gf(Fa,5),e.Gf(Ua,5),e.Gf(Pa,5),e.Gf(wa,5),e.Gf(Na,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.tbxPesosCaja=n.first),e.iGM(n=e.CRH())&&(i.tbxDolaresCaja=n.first),e.iGM(n=e.CRH())&&(i.tbxVouchersCaja=n.first),e.iGM(n=e.CRH())&&(i.tbxTransferenciasCaja=n.first),e.iGM(n=e.CRH())&&(i.tbxTotalCaja=n.first),e.iGM(n=e.CRH())&&(i.tbxDiferencia=n.first),e.iGM(n=e.CRH())&&(i.tbxComentarios=n.first)}},features:[e._Bn([h.uU])],decls:177,vars:31,consts:[[2,"padding","10px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"row"],[1,"col-md-12"],[1,"row","top10px"],[1,"col-md-12",2,"text-align","center"],[1,""],["matInput","","placeholder","Seleccione una fecha",1,"textAlingCenter",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["matSuffix","",3,"for"],["picker",""],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px","background-color","#3f51b5 !important"],[1,"col-md-6"],["fxLayout.xs","column",1,"with100"],["matInput","","readonly","",1,"textAlingRight",3,"ngModel","ngModelChange"],["matInput","","type","number",1,"textAlingRight",3,"ngModel","ngModelChange","keyup.enter"],["tbxPesosCaja",""],["matInput","","type","number","readonly","",1,"textAlingRight",3,"ngModel","ngModelChange"],["tbxDolaresCaja",""],["tbxVouchersCaja",""],["tbxTransferenciasCaja",""],["tbxTotalCaja",""],["matInput","","readonly","",1,"textAlingRight",3,"ngModel","ngModelChange","keyup.enter"],["tbxDiferencia",""],[1,"example-full-width","with100","top20px"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese un comentario",3,"ngModel","ngModelChange"],["tbxComentarios",""],[3,"hidden"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Fecha de corte:"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(o){return i.selectedDate=o})("dateChange",function(o){return i.onDateChange(o)}),e.qZA(),e._UZ(12,"mat-datepicker-toggle",8)(13,"mat-datepicker",null,9),e.qZA()()(),e.TgZ(15,"div",4)(16,"div",3)(17,"div",10),e.YNc(18,Ia,4,0,"button",11),e.TgZ(19,"button",12),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(20,"mat-icon",13),e._uU(21,"close"),e.qZA(),e._uU(22," Cerrar"),e.qZA()()()(),e.TgZ(23,"div",4)(24,"div",3)(25,"div",14),e._uU(26," INGRESOS SEG\xdaN REGISTROS "),e.qZA()()(),e.TgZ(27,"div",4)(28,"div",15)(29,"mat-form-field",16)(30,"mat-label"),e._uU(31,"VENTA"),e.qZA(),e.TgZ(32,"mat-icon",13),e._uU(33,"attach_money"),e.qZA(),e.TgZ(34,"input",17),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.sales=o}),e.qZA()()(),e.TgZ(35,"div",15)(36,"mat-form-field",16)(37,"mat-label"),e._uU(38,"TALLER"),e.qZA(),e.TgZ(39,"mat-icon",13),e._uU(40,"attach_money"),e.qZA(),e.TgZ(41,"input",17),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.tallerSales=o}),e.qZA()()()(),e.TgZ(42,"div",4)(43,"div",15)(44,"mat-form-field",16)(45,"mat-label"),e._uU(46,"EGRESOS"),e.qZA(),e.TgZ(47,"mat-icon",13),e._uU(48,"attach_money"),e.qZA(),e.TgZ(49,"input",17),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.egresos=o}),e.qZA()()(),e.TgZ(50,"div",15)(51,"mat-form-field",16)(52,"mat-label"),e._uU(53,"INGRESO TOTAL"),e.qZA(),e.TgZ(54,"mat-icon",13),e._uU(55,"attach_money"),e.qZA(),e.TgZ(56,"input",17),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.ingresoTotal=o}),e.qZA()()()(),e.TgZ(57,"div",2)(58,"div",15)(59,"div",14),e._uU(60," DESGLOSE SISTEMA "),e.qZA()(),e.TgZ(61,"div",15)(62,"div",14),e._uU(63," EXISTENCIA EN CAJA "),e.qZA()()(),e.TgZ(64,"div",4)(65,"div",15)(66,"mat-form-field",16)(67,"mat-label"),e._uU(68,"PESOS"),e.qZA(),e.TgZ(69,"mat-icon",13),e._uU(70,"attach_money"),e.qZA(),e.TgZ(71,"input",17),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.pesos=o}),e.qZA()()(),e.TgZ(72,"div",15)(73,"mat-form-field",16)(74,"mat-label"),e._uU(75,"PESOS"),e.qZA(),e.TgZ(76,"mat-icon",13),e._uU(77,"attach_money"),e.qZA(),e.TgZ(78,"input",18,19),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.pesosCaja=o})("keyup.enter",function(o){return i.ev_fn_tbxPesosCaja_keyup_enter(o)}),e.qZA()()()(),e.TgZ(80,"div",4)(81,"div",15)(82,"mat-form-field",16)(83,"mat-label"),e._uU(84),e.ALo(85,"currency"),e.ALo(86,"currency"),e.qZA(),e.TgZ(87,"mat-icon",13),e._uU(88,"attach_money"),e.qZA(),e.TgZ(89,"input",20),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.dolaresMNX=o}),e.qZA()()(),e.TgZ(90,"div",15)(91,"mat-form-field",16)(92,"mat-label"),e._uU(93),e.ALo(94,"currency"),e.qZA(),e.TgZ(95,"mat-icon",13),e._uU(96,"attach_money"),e.qZA(),e.TgZ(97,"input",18,21),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.dolaresCaja=o})("keyup.enter",function(o){return i.ev_fn_tbxDolaresCaja_keyup_enter(o)}),e.qZA()()()(),e.TgZ(99,"div",4)(100,"div",15)(101,"mat-form-field",16)(102,"mat-label"),e._uU(103,"VOUCHERS"),e.qZA(),e.TgZ(104,"mat-icon",13),e._uU(105,"attach_money"),e.qZA(),e.TgZ(106,"input",20),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.vouchers=o}),e.qZA()()(),e.TgZ(107,"div",15)(108,"mat-form-field",16)(109,"mat-label"),e._uU(110,"VOUCHERS"),e.qZA(),e.TgZ(111,"mat-icon",13),e._uU(112,"attach_money"),e.qZA(),e.TgZ(113,"input",18,22),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.vouchersCaja=o})("keyup.enter",function(o){return i.ev_fn_tbxVouchersCaja_keyup_enter(o)}),e.qZA()()()(),e.TgZ(115,"div",4)(116,"div",15)(117,"mat-form-field",16)(118,"mat-label"),e._uU(119,"TRANSFERENCIAS"),e.qZA(),e.TgZ(120,"mat-icon",13),e._uU(121,"attach_money"),e.qZA(),e.TgZ(122,"input",20),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.transferencias=o}),e.qZA()()(),e.TgZ(123,"div",15)(124,"mat-form-field",16)(125,"mat-label"),e._uU(126,"TRANSFERENCIAS"),e.qZA(),e.TgZ(127,"mat-icon",13),e._uU(128,"attach_money"),e.qZA(),e.TgZ(129,"input",18,23),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.transferenciasCaja=o})("keyup.enter",function(o){return i.ev_fn_tbxTransferenciasCaja_keyup_enter(o)}),e.qZA()()()(),e.TgZ(131,"div",4)(132,"div",15)(133,"mat-form-field",16)(134,"mat-label"),e._uU(135,"DINERO ELECTR\xd3NICO"),e.qZA(),e.TgZ(136,"mat-icon",13),e._uU(137,"attach_money"),e.qZA(),e.TgZ(138,"input",20),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.dineroElectronico=o}),e.qZA()()(),e.TgZ(139,"div",15)(140,"mat-form-field",16)(141,"mat-label"),e._uU(142,"TOTAL CAJA"),e.qZA(),e.TgZ(143,"mat-icon",13),e._uU(144,"attach_money"),e.qZA(),e.TgZ(145,"input",18,24),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.totalCaja=o})("keyup.enter",function(o){return i.ev_fn_tbxTotalCaja_keyup_enter(o)}),e.qZA()()()(),e.TgZ(147,"div",2)(148,"div",3)(149,"div",14),e._uU(150," CONCLUSI\xd3N "),e.qZA()()(),e.TgZ(151,"div",4),e._UZ(152,"div",15),e.TgZ(153,"div",15)(154,"mat-form-field",16)(155,"mat-label"),e._uU(156,"DIFERENCIA"),e.qZA(),e.TgZ(157,"mat-icon",13),e._uU(158,"attach_money"),e.qZA(),e.TgZ(159,"input",25,26),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.diferencia=o})("keyup.enter",function(o){return i.ev_fn_tbxDiferencia_keyup_enter(o)}),e.qZA()()()(),e.TgZ(161,"div",2)(162,"div",3)(163,"mat-form-field",27)(164,"mat-label"),e._uU(165,"Comentarios"),e.qZA(),e.TgZ(166,"textarea",28,29),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.observaciones=o}),e.qZA()()()(),e.TgZ(168,"div",4)(169,"div",3)(170,"div",10),e.YNc(171,Ma,4,0,"button",11),e.TgZ(172,"button",12),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(173,"mat-icon",13),e._uU(174,"close"),e.qZA(),e._uU(175," Cerrar"),e.qZA()()()()(),e._UZ(176,"app-spinner",30)),2&t){const n=e.MAs(14);e.xp6(11),e.Q6J("matDatepicker",n)("ngModel",i.selectedDate),e.xp6(1),e.Q6J("for",n),e.xp6(6),e.Q6J("ngIf",i.preCorteCaja.sales>0||i.preCorteCaja.tallerSales>0),e.xp6(16),e.Q6J("ngModel",i.preCorteCaja.sales),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.tallerSales),e.xp6(8),e.Q6J("ngModel",i.preCorteCaja.egresos),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.ingresoTotal),e.xp6(15),e.Q6J("ngModel",i.preCorteCaja.pesos),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.pesosCaja),e.xp6(6),e.AsE("D\xd3LARES ( ",e.lcZ(85,25,i.preCorteCaja.dolares)," - TC:",e.lcZ(86,27,i.preCorteCaja.fxRate)," )"),e.xp6(5),e.Q6J("ngModel",i.preCorteCaja.dolaresMNX),e.xp6(4),e.hij("D\xd3LARES ( TC:",e.lcZ(94,29,i.preCorteCaja.fxRate)," )"),e.xp6(4),e.Q6J("ngModel",i.preCorteCaja.dolaresCaja),e.xp6(9),e.Q6J("ngModel",i.preCorteCaja.vouchers),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.vouchersCaja),e.xp6(9),e.Q6J("ngModel",i.preCorteCaja.transferencias),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.transferenciasCaja),e.xp6(9),e.Q6J("ngModel",i.preCorteCaja.dineroElectronico),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.totalCaja),e.xp6(14),e.Q6J("ngModel",i.preCorteCaja.diferencia),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.observaciones),e.xp6(5),e.Q6J("ngIf",i.preCorteCaja.sales>0||i.preCorteCaja.tallerSales>0),e.xp6(5),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.O5,m.Fj,m.wV,m.JJ,m.On,v.lW,v.RK,x.Mq,x.hl,x.nW,d.KE,d.hX,d.qo,d.R9,N.Nt,Q.IC,P.Hw,U.O,h.H9]}),a})();const Da=["tbxDesc"],La=["tbxMonto"];function ka(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_InsertEgreso())}),e.TgZ(1,"mat-icon",16),e._uU(2,"save"),e.qZA(),e._uU(3," Guardar"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",!t.ev_fn_enableBtnSave())}}function Oa(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_InsertEgreso())}),e.TgZ(1,"mat-icon",16),e._uU(2,"save"),e.qZA(),e._uU(3," Guardar e imprimir ticket"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",!t.ev_fn_enableBtnSave())}}function Ja(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_btnRePrinter(n.idEgreso))}),e._uU(1," print "),e.qZA()}}function Ga(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",25)(2,"div",26)(3,"span",27),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.fn_disabledEgresos(o.idEgreso))}),e._uU(4," delete_outline "),e.qZA(),e.YNc(5,Ja,2,0,"span",28),e.qZA()(),e.TgZ(6,"td",29),e._uU(7),e.qZA(),e.TgZ(8,"td",29),e._uU(9),e.qZA(),e.TgZ(10,"td",30),e._uU(11),e.ALo(12,"currency"),e.qZA()()}if(2&a){const t=r.$implicit,i=e.oxw();e.xp6(5),e.Q6J("ngIf",i.selectPrinter.idPrinter>0),e.xp6(2),e.Oqu(t.idEgreso),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(12,4,t.amount))}}let Ra=(()=>{class a{constructor(t,i,n,o,l,p,_,g){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this.authServ=o,this.salesServ=l,this.printTicketServ=p,this.formaPagoServ=_,this.printersServ=g,this.idUserLogON=0,this.bShowSpinner=!1,this.bPago=!1,this.egresosList=[],this.egresoForm={idCaja:0,idFormaPago:1,amount:0,description:""},this.selectPrinter={idSucursal:0,idPrinter:0,printerName:""},this.bInsertEgreso=!1}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),console.log(t.ODataP),t.egresosList=[],t.egresoForm.idCaja=t.ODataP.idCaja,t.ODataP.idCaja>0&&(t.fn_getSelectPrintByIdUser(t.idUserLogON),t.fn_getPreEgresosCorteCaja(t.ODataP.idCaja))})()}fn_getPreEgresosCorteCaja(t){this.egresosList=[],this.bShowSpinner=!0,this.salesServ.CGetPreEgresosCorteCaja(t).subscribe({next:i=>{0==i.status&&(this.egresosList=i.data.rows),this.bShowSpinner=!1},error:i=>{this.bShowSpinner=!1}})}fn_InsertEgreso(){this.bInsertEgreso||(this.bInsertEgreso=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de guardar el Egreso","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t?(this.bShowSpinner=!0,this.salesServ.CInsertEgresos(this.egresoForm).subscribe({next:i=>{0===i.status&&(this.egresoForm.amount=0,this.egresoForm.description="",this.selectPrinter.idPrinter>0&&this.printTicketServ.printTicket("Egreso",i.insertID,this.selectPrinter.idPrinter),this.fn_CerrarMDL()),this.servicesGServ.showSnakbar(i.message),this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}})):this.bInsertEgreso=!1}}))}fn_disabledEgresos(t){console.log(t),this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deshabilitar el Egreso","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(this.bShowSpinner=!0,this.salesServ.CDisabledEgresos(t).subscribe({next:n=>{this.fn_getPreEgresosCorteCaja(this.ODataP.idCaja),this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}}))}})}fn_getSelectPrintByIdUser(t){this.printersServ.CGetSelectPrinterByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectPrinter.idSucursal=i.data.idSucursal,this.selectPrinter.idPrinter=i.data.idPrinter,this.selectPrinter.printerName=i.data.printerName):(this.selectPrinter.idSucursal=0,this.selectPrinter.idPrinter=0,this.selectPrinter.printerName=""),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}fn_btnRePrinter(t){this.selectPrinter.idPrinter>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1s apunto de reimprimir","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&this.printTicketServ.printTicket("Egreso",t,this.selectPrinter.idPrinter)}})}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}fn_CerrarMDL(){this.dialogRef.close(!1)}ev_fn_description_keyup_enter(t){13==t.keyCode&&this.nextInputFocus(this.tbxMonto,0)}event_fn_Amount(t){13==t.keyCode&&this.egresoForm.amount>0&&this.fn_InsertEgreso()}ev_fn_enableBtnSave(){return this.egresoForm.amount>0}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(T.e),e.Y36(Y),e.Y36(j),e.Y36(he),e.Y36(H))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-egresos"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Da,5),e.Gf(La,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.tbxDesc=n.first),e.iGM(n=e.CRH())&&(i.tbxMonto=n.first)}},decls:42,vars:6,consts:[[2,"padding","10px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"row","top30px"],[1,"col-md-9"],[1,"example-full-width","with100","top20px"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese una descripci\xf3n",3,"ngModel","ngModelChange","keyup"],["tbxDesc",""],[1,"col-md-3"],[1,"with100","top20px"],["matInput","","currencyMask","","placeholder","PAGA",1,"textAlingRight","colorGreen",3,"ngModel","ngModelChange","keyup"],["tbxMonto",""],[1,"row","top10px"],[1,"col-md-12"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"hidden"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],[1,"textAlingCenter"],[2,"width","50px"],[1,"material-icons","manitaSobre","colorRed",3,"click"],["class","material-icons manitaSobre colorGreen","title","Imprimir",3,"click",4,"ngIf"],[2,"text-align","left"],[2,"text-align","right"],["title","Imprimir",1,"material-icons","manitaSobre","colorGreen",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Descripci\xf3n"),e.qZA(),e.TgZ(9,"textarea",5,6),e.NdJ("ngModelChange",function(o){return i.egresoForm.description=o})("keyup",function(o){return i.ev_fn_description_keyup_enter(o)}),e.qZA()()(),e.TgZ(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Monto"),e.qZA(),e.TgZ(15,"input",9,10),e.NdJ("ngModelChange",function(o){return i.egresoForm.amount=o})("keyup",function(o){return i.event_fn_Amount(o)}),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12)(19,"div",13),e.YNc(20,ka,4,1,"button",14),e.YNc(21,Oa,4,1,"button",14),e.TgZ(22,"button",15),e.NdJ("click",function(){return i.fn_CerrarMDL()}),e.TgZ(23,"mat-icon",16),e._uU(24,"close"),e.qZA(),e._uU(25," Cerrar"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",12)(28,"div",18)(29,"table",19)(30,"thead")(31,"th",20),e._uU(32,"Acciones"),e.qZA(),e.TgZ(33,"th",21),e._uU(34,"# Egreso"),e.qZA(),e.TgZ(35,"th",21),e._uU(36,"Descripci\xf3n"),e.qZA(),e.TgZ(37,"th",20),e._uU(38,"Monto"),e.qZA()(),e.TgZ(39,"tbody"),e.YNc(40,Ga,13,6,"tr",22),e.qZA()()()()()(),e._UZ(41,"app-spinner",23)),2&t&&(e.xp6(9),e.Q6J("ngModel",i.egresoForm.description),e.xp6(6),e.Q6J("ngModel",i.egresoForm.amount),e.xp6(5),e.Q6J("ngIf",0==i.selectPrinter.idPrinter),e.xp6(1),e.Q6J("ngIf",i.selectPrinter.idPrinter>0),e.xp6(19),e.Q6J("ngForOf",i.egresosList),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,v.lW,v.RK,d.KE,d.hX,d.qo,N.Nt,Q.IC,P.Hw,X.g1,U.O,h.H9]}),a})();const Ea=["cbxPrintersCBX"];function Qa(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxPrinters_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ya(a,r){if(1&a&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.printerName," ")}}function ja(a,r){1&a&&(e.TgZ(0,"mat-option",20),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ha(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_insertSelectPrint())}),e.TgZ(1,"mat-icon",16),e._uU(2,"save"),e.qZA(),e._uU(3," Seleccionar impresora"),e.qZA()}}let we=(()=>{class a{constructor(t,i,n,o,l){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this.authServ=o,this.printersServ=l,this.bShowSpinner=!1,this.selectPrinterForm={idUser:0,idPrinter:0,printerName:""},this.bQuestion=!1,this.cbxPrinters=[]}ngOnInit(){this.selectPrinterForm.idUser=this.ODataP.idUser,setTimeout(()=>{this.cbxPrintersCBX.nativeElement.focus()},1e3)}fn_insertSelectPrint(){var t=this;return(0,Z.Z)(function*(){var i;t.bQuestion||(t.bQuestion=!0,t.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de seleccionar una impresora","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:(i=(0,Z.Z)(function*(n){var o;n?(t.bShowSpinner=!0,t.printersServ.CInsertSelectPrinter(t.selectPrinterForm).subscribe({next:(o=(0,Z.Z)(function*(l){0===l.status&&t.fn_CerrarMDL(l.insertID),t.servicesGServ.showSnakbar(l.message),t.bShowSpinner=!1,t.bQuestion=!1}),function(p){return o.apply(this,arguments)}),error:o=>{t.servicesGServ.showSnakbar(o.error.message),t.bShowSpinner=!1}})):t.bQuestion=!1}),function(o){return i.apply(this,arguments)})}))})()}fn_CerrarMDL(t){this.dialogRef.close(t)}nextInputFocus(t,i){setTimeout(()=>{t.nativeElement.focus()},i)}cbxPrinters_Search(){this.printersServ.CGetPrintersBySec(this.selectPrinterForm.printName,this.selectPrinterForm.idUser).subscribe({next:t=>{this.cbxPrinters=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxPrinters_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.selectPrinterForm.idPrinter=i.idPrinter,this.selectPrinterForm.printerName=i.printerName}cbxPrinters_Clear(){this.selectPrinterForm.idPrinter=0,this.selectPrinterForm.printerName=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(T.e),e.Y36(H))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-select-print"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ea,5),2&t){let n;e.iGM(n=e.CRH())&&(i.cbxPrintersCBX=n.first)}},decls:27,vars:7,consts:[[2,"padding","10px"],[1,"row"],[1,"col-md-12"],["mat-icon-button","",2,"float","right",3,"click"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",1,"colorGreen","fontSize",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus"],["cbxPrintersCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxCaja","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()()(),e.TgZ(6,"div",1)(7,"div",2)(8,"mat-label"),e._uU(9,"Seleccione una impresora:"),e.qZA(),e.TgZ(10,"mat-form-field",4),e.NdJ("click",function(){return i.cbxPrinters_Search()}),e.TgZ(11,"input",5,6),e.NdJ("ngModelChange",function(o){return i.selectPrinterForm.printerName=o})("input",function(){return i.cbxPrinters_Search()})("focus",function(){return i.cbxPrinters_Search()}),e.qZA(),e.YNc(13,Qa,3,0,"button",7),e.TgZ(14,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(o){return i.cbxPrinters_SelectedOption(o)}),e.YNc(16,Ya,2,2,"mat-option",10),e.YNc(17,ja,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(18,"div",12)(19,"div",2)(20,"div",13),e.YNc(21,Ha,4,0,"button",14),e.TgZ(22,"button",15),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(23,"mat-icon",16),e._uU(24,"close"),e.qZA(),e._uU(25," Cerrar"),e.qZA()()()()(),e._UZ(26,"app-spinner",17)),2&t){const n=e.MAs(15);e.xp6(11),e.Q6J("ngModel",i.selectPrinterForm.printerName)("matAutocomplete",n),e.xp6(2),e.Q6J("ngIf",i.selectPrinterForm.printerName),e.xp6(3),e.Q6J("ngForOf",i.cbxPrinters),e.xp6(1),e.Q6J("ngIf",0==i.cbxPrinters.length&&i.selectPrinterForm.printerName),e.xp6(4),e.Q6J("ngIf",i.selectPrinterForm.idPrinter>0),e.xp6(5),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,d.KE,d.hX,d.qo,d.R9,N.Nt,P.Hw,U.O]}),a})(),za=(()=>{class a{constructor(t){this.el=t,this.regex=new RegExp(/^\d*\.?\d{0,2}$/g),this.specialKeys=["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Delete"]}onKeyDown(t){if(-1!==this.specialKeys.indexOf(t.key))return;const n=this.el.nativeElement.value.concat(t.key);n&&!String(n).match(this.regex)&&t.preventDefault()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(e.SBq))},a.\u0275dir=e.lG2({type:a,selectors:[["","appDecimalNumber",""]],hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(o){return i.onKeyDown(o)})}}),a})();function $a(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_editTaller())}),e.TgZ(1,"mat-icon",11),e._uU(2,"save"),e.qZA(),e._uU(3," Editar sobre de taller"),e.qZA()}}let Ba=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u){this.dialogRef=t,this.ODataP=i,this._adapter=n,this._locale=o,this.servicesGServ=l,this.authServ=p,this.salesServ=_,this.printTicketServ=g,this.printersServ=u,this.idUserLogON=0,this.bShowSpinner=!1,this.selectPrinter={idSucursal:0,idPrinter:0,printerName:""},this.oDataSale={importe:"",descriptionTaller:""},this.bShowAction=!1}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.ODataP.idSale.length>0&&(t.fn_getSaleByID(t.ODataP.idSale),t.fn_getSelectPrintByIdUser(t.idUserLogON))})()}fn_CerrarMDL(t){this.dialogRef.close(t)}fn_getSaleByID(t){this.bShowSpinner=!0,this.salesServ.CGetSaleByID(t).subscribe(i=>{console.log(i),0==i.status?(this.oDataSale.descriptionTaller=i.dataDetail[0].productDesc,this.oDataSale.importe=i.dataDetail.reduce((n,o)=>n+o.importe,0)):this.servicesGServ.showSnakbar(i.message),this.bShowSpinner=!1})}fn_editTaller(){this.bShowAction||(this.bShowAction=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 apunto de editar el sobre de taller: #"+this.ODataP.idSale,"\xbfDesea continuar?","Si","No","500px").afterClosed().subscribe({next:t=>{t?this.servicesGServ.showModalWithParams(k,{actionName:"ventas_ChangeTaller",bShowAlert:!1},"400px").afterClosed().subscribe({next:n=>{n?(this.bShowAction=!1,this.bShowSpinner=!0,this.salesServ.CEditSobreTaller({auth_idUser:n,idSale:this.ODataP.idSale,importe:this.oDataSale.importe,descriptionTaller:this.oDataSale.descriptionTaller}).subscribe({next:l=>{0===l.status&&this.fn_CerrarMDL(this.ODataP.idSale),this.servicesGServ.showAlertIA(l),this.bShowSpinner=!1},error:l=>{this.servicesGServ.showSnakbar(l.error.message),this.bShowSpinner=!1}})):this.bShowAction=!1}}):this.bShowAction=!1}}))}fn_getSelectPrintByIdUser(t){this.printersServ.CGetSelectPrinterByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectPrinter.idSucursal=i.data.idSucursal,this.selectPrinter.idPrinter=i.data.idPrinter,this.selectPrinter.printerName=i.data.printerName):(this.selectPrinter.idSucursal=0,this.selectPrinter.idPrinter=0,this.selectPrinter.printerName=""),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(f._A),e.Y36(f.Ad),e.Y36(A.$),e.Y36(T.e),e.Y36(Y),e.Y36(j),e.Y36(H))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-taller"]],decls:35,vars:4,consts:[[2,"padding","10px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"row"],[1,"col-md-12"],[1,"row","top10px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px","background-color","#3f51b5 !important"],[1,"example-full-width","with100","top20px"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese la descripci\xf3n del sobre",3,"ngModel","ngModelChange"],["tbxDescription",""],[1,"col-md-6"],["fxLayout.xs","column",1,"with100"],["matPrefix","",1,"my-icon"],["matInput","","type","text","appDecimalNumber","",1,"textAlingRight",3,"ngModel","ngModelChange"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],[3,"hidden"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"div",3)(8,"div",5),e._uU(9," MODIFICACI\xd3N DE SOBRE DE TALLER "),e.qZA()()(),e.TgZ(10,"div",2)(11,"div",3)(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Descripci\xf3n"),e.qZA(),e.TgZ(15,"textarea",7,8),e.NdJ("ngModelChange",function(o){return i.oDataSale.descriptionTaller=o}),e.qZA()()()(),e.TgZ(17,"div",4),e._UZ(18,"div",9),e.TgZ(19,"div",9)(20,"mat-form-field",10)(21,"mat-label"),e._uU(22,"Precio del sobre"),e.qZA(),e.TgZ(23,"mat-icon",11),e._uU(24,"attach_money"),e.qZA(),e.TgZ(25,"input",12),e.NdJ("ngModelChange",function(o){return i.oDataSale.importe=o}),e.qZA()()()(),e.TgZ(26,"div",4)(27,"div",3)(28,"div",13),e.YNc(29,$a,4,0,"button",14),e.TgZ(30,"button",15),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(31,"mat-icon",11),e._uU(32,"close"),e.qZA(),e._uU(33," Cerrar"),e.qZA()()()()(),e._UZ(34,"app-spinner",16)),2&t&&(e.xp6(15),e.Q6J("ngModel",i.oDataSale.descriptionTaller),e.xp6(10),e.Q6J("ngModel",i.oDataSale.importe),e.xp6(4),e.Q6J("ngIf",i.ODataP.idSale.length>0&&i.oDataSale.importe>0&&i.oDataSale.descriptionTaller.length>0),e.xp6(5),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.O5,m.Fj,m.JJ,m.On,v.lW,v.RK,d.KE,d.hX,d.qo,N.Nt,Q.IC,P.Hw,U.O,za]}),a})();const Wa=["cbxCustomerCBX"];function Ka(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxCustomers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Va(a,r){if(1&a&&(e.TgZ(0,"mat-option",51),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Xa(a,r){if(1&a&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.parametersForm.customerResp," ")}}function eo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSalesType_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function to(a,r){if(1&a&&(e.TgZ(0,"mat-option",51),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function io(a,r){1&a&&(e.TgZ(0,"mat-option",52),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function no(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowSale(0))}),e.TgZ(1,"mat-icon",32),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Nueva venta"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal)}}function ao(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowCorteCajaSale())}),e.TgZ(1,"mat-icon",32),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Corte de Caja"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal)}}function oo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowEgresos())}),e.TgZ(1,"mat-icon",32),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Egresos"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal)}}function ro(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowSelectCaja())}),e.TgZ(1,"mat-icon",32),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Seleccionar caja"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t._idSucursal)}}function so(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowSelectPrint())}),e.TgZ(1,"mat-icon",32),e._uU(2,"print"),e.qZA(),e._uU(3," Seleccionar impresora"),e.qZA()}}function lo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"img",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_btnCerrarCaja())}),e.qZA()}}function co(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",56),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_btnCerrarCaja())}),e._uU(1),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.selectCajas.cajaDesc," ")}}function po(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"img",57),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_btnCerrarPrinter())}),e.qZA()}}function uo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",56),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_btnCerrarPrinter())}),e._uU(1),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.selectPrinter.printerName," ")}}function mo(a,r){1&a&&(e.TgZ(0,"span",73),e._uU(1," check_circle "),e.qZA())}function _o(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",74),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_disabledSale(n.idSale))}),e._uU(1," delete_outline "),e.qZA()}}function ho(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",75),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_ShowEditTaller(n.idSale))}),e._uU(1," edit "),e.qZA()}}const go=function(a){return{"colorRed elemento-animado":a}};function fo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",58)(2,"div",59)(3,"span",60),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.fn_ShowSale(o.idSale))}),e._uU(4," remove_red_eye "),e.qZA(),e.YNc(5,mo,2,0,"span",61),e.YNc(6,_o,2,0,"span",62),e.YNc(7,ho,2,0,"span",63),e.qZA()(),e.TgZ(8,"td",64)(9,"div",65),e._uU(10),e.qZA()(),e.TgZ(11,"td",64),e._uU(12),e.qZA(),e.TgZ(13,"td",66),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"td",66),e._uU(17),e.ALo(18,"currency"),e.qZA(),e.TgZ(19,"td",67),e._uU(20),e.ALo(21,"currency"),e.qZA(),e.TgZ(22,"td",58)(23,"div",65)(24,"div",1)(25,"div",68)(26,"mat-icon",69),e._uU(27,"calendar_today"),e.qZA()(),e.TgZ(28,"div",70)(29,"label",71),e._uU(30),e.qZA(),e.TgZ(31,"label",71),e._uU(32),e.qZA()()()()(),e.TgZ(33,"td",64)(34,"div",72),e._uU(35),e.qZA()(),e.TgZ(36,"td",64),e._uU(37),e.qZA(),e.TgZ(38,"td",64),e._uU(39),e.qZA()()}if(2&a){const t=r.$implicit;e.xp6(5),e.Q6J("ngIf",t.pendingAmount<1&&t.abonado>0),e.xp6(1),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",5==t.idSaleType),e.xp6(3),e.hij(" #",t.idSale," "),e.xp6(2),e.Oqu(t.saleTypeDesc),e.xp6(2),e.Oqu(e.lcZ(15,14,t.total)),e.xp6(3),e.Oqu(e.lcZ(18,16,t.abonado)),e.xp6(2),e.Q6J("ngClass",e.VKq(20,go,t.pendingAmount>0)),e.xp6(1),e.Oqu(e.lcZ(21,18,t.pendingAmount)),e.xp6(10),e.Oqu(t.createDateDate),e.xp6(2),e.Oqu(t.createDateHours),e.xp6(3),e.hij(" ",t.ventaDesc," "),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(t.sellerName)}}function Co(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",76),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let bo=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u,s){this.servicesGServ=t,this._adapter=i,this._locale=n,this.authServ=o,this.customersServ=l,this.salesServ=p,this.cajasServ=_,this.printersServ=g,this.printTicketServ=u,this.salesTypeServ=s,this._appMain=C.N.appMain,this._idSucursal=C.N.idSucursal,this.timeCBXskeyup=new ee.x,this.title="Ventas",this.bShowSpinner=!1,this.panelOpenState=!1,this.idUserLogON=0,this.saleslist=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={idSucursal:0,sucursalDesc:"",createDateStart:"",createDateEnd:"",idCustomer:0,customerDesc:"",customerResp:"",idSaleType:0,saleTypeDesc:"",idSale:"",bCancel:!1,bPending:!1,bPagada:!1},this.selectCajas={idSucursal:0,idCaja:0,cajaDesc:"",idPrinter:0},this.selectPrinter={idSucursal:0,idPrinter:0,printerName:""},this.cbxCustomers=[],this.cbxSalesType=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.timeCBXskeyup.pipe((0,te.b)(500)).subscribe(i=>{1==i.iOption&&t.cbxCustomers_Search()}),t.fn_getVentasListWithPage(),t.fn_getSelectCajaByIdUser(t.idUserLogON),t.fn_getSelectPrintByIdUser(t.idUserLogON)})()}fn_ShowEditTaller(t){this.servicesGServ.showModalWithParams(Ba,{idSale:t},"1500px").afterClosed().subscribe({next:n=>{this.fn_getVentasListWithPage()}})}changePagination(t){this.pagination=t,this.fn_getVentasListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getVentasListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}hasPermissionAction(t){return this.authServ.hasPermissionAction(t)}ev_fn_search_keyup_enter(t){13==t.keyCode&&this.fn_getVentasListWithPage()}fn_getVentasListWithPage(){let t={idUser:this.idUserLogON,createDateStart:this.parametersForm.createDateStart,createDateEnd:this.parametersForm.createDateEnd,idCustomer:this.parametersForm.idCustomer,idSaleType:this.parametersForm.idSaleType,search:this.parametersForm.idSale,bCancel:this.parametersForm.bCancel,bPending:this.parametersForm.bPending,bPagada:this.parametersForm.bPagada};this.bShowSpinner=!0,this.salesServ.CGetVentasListWithPage(this.pagination,t).subscribe({next:i=>{this.saleslist=i.data.rows,this.pagination.length=i.data.count,this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.data),this.bShowSpinner=!1}})}fn_getSelectCajaByIdUser(t){this.cajasServ.CGetSelectCajaByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectCajas.idSucursal=i.data.idSucursal,this.selectCajas.idCaja=i.data.idCaja,this.selectCajas.cajaDesc=i.data.name,this.selectCajas.idPrinter=i.data.idPrinter,this.selectPrinter.idSucursal=i.data.idSucursal,this.selectPrinter.idPrinter=i.data.idPrinter,this.selectPrinter.printerName=i.data.printerName):(this.selectCajas.idSucursal=0,this.selectCajas.idCaja=0,this.selectCajas.cajaDesc="",this.selectCajas.idPrinter=0),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}fn_getSelectPrintByIdUser(t){this.printersServ.CGetSelectPrinterByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectPrinter.idSucursal=i.data.idSucursal,this.selectPrinter.idPrinter=i.data.idPrinter,this.selectPrinter.printerName=i.data.printerName):(this.selectPrinter.idSucursal=0,this.selectPrinter.idPrinter=0,this.selectPrinter.printerName=""),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}fn_cerrarCaja(){var i,t=this;this.selectCajas.idUser=this.idUserLogON,this.cajasServ.CDeleteSelectCaja(this.selectCajas).subscribe({next:(i=(0,Z.Z)(function*(n){0===n.status&&(t.fn_getSelectCajaByIdUser(t.idUserLogON),t.fn_getSelectPrintByIdUser(t.idUserLogON)),t.servicesGServ.showAlertIA(n),t.bShowSpinner=!1}),function(o){return i.apply(this,arguments)}),error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}})}fn_btnCerrarCaja(){this.selectCajas.idCaja>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de salir de la caja","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t&&this.fn_cerrarCaja()}})}fn_btnCerrarPrinter(){var t=this;0==this.selectCajas.idCaja&&this.selectPrinter.idPrinter>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deseleccionar la impresora","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{var n;i&&(this.selectPrinter.idUser=this.idUserLogON,this.printersServ.CDeleteSelectPrinter(this.selectPrinter).subscribe({next:(n=(0,Z.Z)(function*(o){0===o.status&&(t.fn_getSelectCajaByIdUser(t.idUserLogON),t.fn_getSelectPrintByIdUser(t.idUserLogON)),t.servicesGServ.showAlertIA(o),t.bShowSpinner=!1}),function(l){return n.apply(this,arguments)}),error:n=>{this.servicesGServ.showSnakbar(n.error.message),this.bShowSpinner=!1}}))}})}fn_CDisabledSale(t,i){var l,n=this;this.salesServ.CDisabledSale({idSale:t,auth_idUser:i}).subscribe({next:(l=(0,Z.Z)(function*(p){n.servicesGServ.showAlertIA(p),n.bShowSpinner=!1,n.fn_getVentasListWithPage()}),function(_){return l.apply(this,arguments)}),error:l=>{this.servicesGServ.showSnakbar(l.error.message),this.bShowSpinner=!1}})}fn_ShowSale(t){this.servicesGServ.showModalWithParams(Ca,{idSale:t,selectCajas:this.selectCajas,selectPrinter:this.selectPrinter},"2000px").afterClosed().subscribe({next:n=>{this.fn_getVentasListWithPage()}})}fn_ShowSelectCaja(){this.servicesGServ.showModalWithParams(Ta,{idUser:this.idUserLogON},"2000px").afterClosed().subscribe({next:i=>{this.fn_getSelectCajaByIdUser(this.idUserLogON)}})}fn_ShowSelectPrint(){this.servicesGServ.showModalWithParams(we,{idUser:this.idUserLogON},"2000px").afterClosed().subscribe({next:i=>{this.fn_getSelectPrintByIdUser(this.idUserLogON)}})}fn_ShowCorteCajaSale(){this.servicesGServ.showModalWithParams(qa,{idCaja:this.selectCajas.idCaja},"800px").afterClosed().subscribe({next:i=>{i>0&&(this.printTicketServ.printTicket("CorteCaja",i,this.selectPrinter.idPrinter),this.fn_cerrarCaja()),this.fn_getVentasListWithPage()}})}fn_ShowEgresos(){this.servicesGServ.showModalWithParams(Ra,{idCaja:this.selectCajas.idCaja},"2000px").afterClosed().subscribe({next:i=>{this.fn_getVentasListWithPage()}})}fn_disabledSale(t){this.servicesGServ.showModalWithParams(k,{actionName:"ventas_Cancelar"},"400px").afterClosed().subscribe({next:n=>{n&&this.fn_CDisabledSale(t,n)}})}fn_ClearFilters(){this.parametersForm={idSucursal:0,sucursalDesc:"",createDateStart:"",createDateEnd:"",idCustomer:0,customerDesc:"",customerResp:"",idSaleType:0,saleTypeDesc:"",idSale:"",bCancel:!1,bPending:!1,bPagada:!1}}CBXskeyup(t,i){this.timeCBXskeyup.next({iOption:t,txt:i})}cbxCustomers_Search(){this.customersServ.CCbxGetCustomersCombo(this.parametersForm.customerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxCustomers=t.data,this.parametersForm.customerResp=""):(this.cbxCustomers=[],this.parametersForm.customerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxCustomers_SelectedOption(t){this.cbxCustomers_Clear(),setTimeout(()=>{const i=t.option.value;this.parametersForm.idCustomer=i.idCustomer,this.parametersForm.customerDesc=i.name},1)}cbxCustomers_Clear(){this.parametersForm.idCustomer=0,this.parametersForm.customerDesc="",this.parametersForm.customerResp=""}cbxSalesType_Search(){this.salesTypeServ.CCbxGetSalesTypeCombo(this.parametersForm.saleTypeDesc).subscribe({next:t=>{this.cbxSalesType=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSalesType_SelectedOption(t){this.cbxSalesType_Clear(),setTimeout(()=>{const i=t.option.value;this.parametersForm.idSaleType=i.id,this.parametersForm.saleTypeDesc=i.name},1)}cbxSalesType_Clear(){this.parametersForm.idSaleType=0,this.parametersForm.saleTypeDesc=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(V),e.Y36(Y),e.Y36(re),e.Y36(H),e.Y36(j),e.Y36(Pe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sale-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(Wa,5),2&t){let n;e.iGM(n=e.CRH())&&(i.cbxCustomerCBX=n.first)}},decls:107,vars:30,consts:[[1,"divMain",2,"width","100%","margin-top","10px !important"],[1,"row"],[1,"col-md-12"],[1,"col-md-6"],["fxLayout.xs","column",1,"with100"],["matInput","","placeholder","Ingrese un Folio y presione ENTER",3,"ngModel","ngModelChange","keyup.enter"],["barCode",""],[1,"col-md-6",2,"text-align","left"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-md-8"],[2,"width","100%"],["type","text","id","cbxCustomer","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxCustomerCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxCustomer","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-4"],[2,"width","100%",3,"click"],["type","text","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","click","focus"],["cbxSaleTypeCBX",""],["cbxSaleType","matAutocomplete"],[1,"row","top10px"],[1,"col-md-3"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],[1,"example-margin",3,"ngModel","ngModelChange"],[1,"col-md-7"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px top10px700",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px top10px700",3,"click",4,"ngIf"],[1,"col-md-5",2,"position","relative"],["style","display: inline-block;","width","50","src","assets/img/icons/cajaRegistradora.gif","class","marginRight10px manitaSobre","alt","",3,"click",4,"ngIf"],["style","display: inline-block;","class","badge bg-primary text-wrap manitaSobre","style","font-size: 15px;",3,"click",4,"ngIf"],["style","display: inline-block;","width","50","src","assets/img/icons/printIco.gif","class","marginRight10px manitaSobre","alt","",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px","top10px700",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px","top10px700",3,"click"],["width","50","src","assets/img/icons/cajaRegistradora.gif","alt","",1,"marginRight10px","manitaSobre",2,"display","inline-block",3,"click"],[1,"badge","bg-primary","text-wrap","manitaSobre",2,"font-size","15px",3,"click"],["width","50","src","assets/img/icons/printIco.gif","alt","",1,"marginRight10px","manitaSobre",2,"display","inline-block",3,"click"],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Consultar",1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorGreen","matTooltip","Pagado",4,"ngIf"],["class","material-icons manitaSobre colorRed","matTooltip","Cancelar",3,"click",4,"ngIf"],["class","material-icons manitaSobre colorGreen","matTooltip","Editar sobre de taller",3,"click",4,"ngIf"],[2,"text-align","left"],[2,"width","120px"],[2,"text-align","right"],[2,"text-align","right",3,"ngClass"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","5px"],[1,"col-md-10"],[2,"margin-left","10px"],[2,"width","150px"],["matTooltip","Pagado",1,"material-icons","manitaSobre","colorGreen"],["matTooltip","Cancelar",1,"material-icons","manitaSobre","colorRed",3,"click"],["matTooltip","Editar sobre de taller",1,"material-icons","manitaSobre","colorGreen",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Folio"),e.qZA(),e.TgZ(8,"input",5,6),e.NdJ("ngModelChange",function(l){return i.parametersForm.idSale=l})("keyup.enter",function(l){return i.ev_fn_search_keyup_enter(l)}),e.qZA()()(),e.TgZ(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),e._uU(13,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(14,"mat-date-range-input",9),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(21);return e.KtG(l.open())}),e.TgZ(15,"input",10),e.NdJ("ngModelChange",function(l){return i.parametersForm.createDateStart=l}),e.qZA(),e.TgZ(16,"input",11),e.NdJ("ngModelChange",function(l){return i.parametersForm.createDateEnd=l}),e.qZA()(),e.TgZ(17,"mat-hint"),e._uU(18,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(19,"mat-datepicker-toggle",12)(20,"mat-date-range-picker",null,13),e.qZA()()(),e.TgZ(22,"div",1)(23,"div",14)(24,"mat-label"),e._uU(25,"Cliente: "),e.qZA(),e.TgZ(26,"mat-form-field",15)(27,"input",16,17),e.NdJ("ngModelChange",function(l){return i.parametersForm.customerDesc=l})("keyup",function(){e.CHM(n);const l=e.MAs(28);return e.KtG(i.CBXskeyup(1,l.value))})("click",function(){return i.cbxCustomers_Clear()}),e.qZA(),e.YNc(29,Ka,3,0,"button",18),e.TgZ(30,"mat-autocomplete",19,20),e.NdJ("optionSelected",function(l){return i.cbxCustomers_SelectedOption(l)}),e.YNc(32,Va,2,2,"mat-option",21),e.YNc(33,Xa,2,1,"mat-option",22),e.qZA()()(),e.TgZ(34,"div",23)(35,"mat-label"),e._uU(36,"Tipo de venta: "),e.qZA(),e.TgZ(37,"mat-form-field",24),e.NdJ("click",function(){return i.cbxSalesType_Search()}),e.TgZ(38,"input",25,26),e.NdJ("ngModelChange",function(l){return i.parametersForm.saleTypeDesc=l})("input",function(){return i.cbxSalesType_Search()})("click",function(){return i.cbxSalesType_Clear()})("focus",function(){return i.cbxSalesType_Search()}),e.qZA(),e.YNc(40,eo,3,0,"button",18),e.TgZ(41,"mat-autocomplete",19,27),e.NdJ("optionSelected",function(l){return i.cbxSalesType_SelectedOption(l)}),e.YNc(43,to,2,2,"mat-option",21),e.YNc(44,io,2,0,"mat-option",22),e.qZA()()()(),e.TgZ(45,"div",28)(46,"div",29)(47,"div",30)(48,"button",31),e.NdJ("click",function(){return i.fn_getVentasListWithPage()}),e.TgZ(49,"mat-icon",32),e._uU(50,"search"),e.qZA(),e._uU(51," Buscar"),e.qZA(),e.TgZ(52,"button",33),e.NdJ("click",function(){return i.fn_ClearFilters()}),e.TgZ(53,"mat-icon",32),e._uU(54,"clear"),e.qZA(),e._uU(55," limpiar"),e.qZA()()(),e.TgZ(56,"div",3)(57,"mat-checkbox",34),e.NdJ("ngModelChange",function(l){return i.parametersForm.bCancel=l}),e._uU(58,"Canceladas"),e.qZA(),e.TgZ(59,"mat-checkbox",34),e.NdJ("ngModelChange",function(l){return i.parametersForm.bPending=l}),e._uU(60,"Pendientes"),e.qZA(),e.TgZ(61,"mat-checkbox",34),e.NdJ("ngModelChange",function(l){return i.parametersForm.bPagada=l}),e._uU(62,"Pagadas"),e.qZA()()()()(),e.TgZ(63,"div",28)(64,"div",35)(65,"div",30),e.YNc(66,no,4,1,"button",36),e.YNc(67,ao,4,1,"button",36),e.YNc(68,oo,4,1,"button",36),e.YNc(69,ro,4,1,"button",36),e.YNc(70,so,4,0,"button",37),e.qZA()(),e.TgZ(71,"div",38),e.YNc(72,lo,1,0,"img",39),e.YNc(73,co,2,1,"div",40),e.YNc(74,po,1,0,"img",41),e.YNc(75,uo,2,1,"div",40),e.qZA()(),e.TgZ(76,"div",28)(77,"div",2)(78,"div",1)(79,"div",2)(80,"div",42)(81,"table",43)(82,"thead")(83,"th",44),e._uU(84,"Acciones"),e.qZA(),e.TgZ(85,"th",45),e._uU(86,"Folio"),e.qZA(),e.TgZ(87,"th",45),e._uU(88,"Tipo de venta"),e.qZA(),e.TgZ(89,"th",46),e._uU(90,"Total"),e.qZA(),e.TgZ(91,"th",46),e._uU(92,"Pagado"),e.qZA(),e.TgZ(93,"th",46),e._uU(94,"Pendiente"),e.qZA(),e.TgZ(95,"th",44),e._uU(96,"Fecha"),e.qZA(),e.TgZ(97,"th",45),e._uU(98,"Descripci\xf3n"),e.qZA(),e.TgZ(99,"th",45),e._uU(100,"Cliente"),e.qZA(),e.TgZ(101,"th",45),e._uU(102,"Vendedor"),e.qZA()(),e.TgZ(103,"tbody"),e.YNc(104,fo,40,22,"tr",47),e.qZA()()(),e.YNc(105,Co,1,1,"app-pagination",48),e.qZA()()()()(),e._UZ(106,"app-spinner",49)}if(2&t){const n=e.MAs(21),o=e.MAs(31),l=e.MAs(42);e.xp6(8),e.Q6J("ngModel",i.parametersForm.idSale),e.xp6(6),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("ngModel",i.parametersForm.createDateStart),e.xp6(1),e.Q6J("ngModel",i.parametersForm.createDateEnd),e.xp6(3),e.Q6J("for",n),e.xp6(8),e.Q6J("ngModel",i.parametersForm.customerDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.parametersForm.customerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxCustomers),e.xp6(1),e.Q6J("ngIf",i.parametersForm.customerResp.length>0),e.xp6(5),e.Q6J("ngModel",i.parametersForm.saleTypeDesc)("matAutocomplete",l),e.xp6(2),e.Q6J("ngIf",i.parametersForm.saleTypeDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSalesType),e.xp6(1),e.Q6J("ngIf",0==i.cbxSalesType.length&&i.parametersForm.saleTypeDesc),e.xp6(13),e.Q6J("ngModel",i.parametersForm.bCancel),e.xp6(2),e.Q6J("ngModel",i.parametersForm.bPending),e.xp6(2),e.Q6J("ngModel",i.parametersForm.bPagada),e.xp6(5),e.Q6J("ngIf",i.hasPermissionAction("ventas_Crear")),e.xp6(1),e.Q6J("ngIf",i.selectCajas.idCaja>0&&i.hasPermissionAction("ventas_crearCorteCaja")),e.xp6(1),e.Q6J("ngIf",i.selectCajas.idCaja>0&&i.hasPermissionAction("ventas_crearEgresos")),e.xp6(1),e.Q6J("ngIf",0==i.selectCajas.idCaja&&i.hasPermissionAction("ventas_abrirCaja")),e.xp6(1),e.Q6J("ngIf",0==i.selectPrinter.idPrinter),e.xp6(2),e.Q6J("ngIf",i.selectCajas.idCaja>0),e.xp6(1),e.Q6J("ngIf",i.selectCajas.idCaja>0),e.xp6(1),e.Q6J("ngIf",i.selectPrinter.idPrinter>0),e.xp6(1),e.Q6J("ngIf",i.selectPrinter.idPrinter>0),e.xp6(29),e.Q6J("ngForOf",i.saleslist),e.xp6(1),e.Q6J("ngIf",i.saleslist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.mk,h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,L.oG,x.nW,x.wx,x.zY,x.By,x._g,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,O.gM,U.O,D,h.H9]}),a})();function So(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function vo(a,r){if(1&a&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function xo(a,r){1&a&&(e.TgZ(0,"mat-option",46),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Zo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxGroups_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function To(a,r){if(1&a&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function yo(a,r){1&a&&(e.TgZ(0,"mat-option",46),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ao(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxFamilies_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Fo(a,r){if(1&a&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Uo(a,r){1&a&&(e.TgZ(0,"mat-option",46),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Po(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxQuality_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function wo(a,r){if(1&a&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function No(a,r){1&a&&(e.TgZ(0,"mat-option",46),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Io(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxOrigin_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Mo(a,r){if(1&a&&(e.TgZ(0,"mat-option",45),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function qo(a,r){1&a&&(e.TgZ(0,"mat-option",46),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Do(a,r){if(1&a&&(e.TgZ(0,"div",47)(1,"div",48)(2,"div",4)(3,"div",49),e._uU(4),e.qZA()()(),e.TgZ(5,"div",3)(6,"div",50)(7,"h1"),e._uU(8),e.qZA()(),e.TgZ(9,"div",51),e._UZ(10,"img",52),e.TgZ(11,"h2",53),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.TgZ(14,"div",51),e._UZ(15,"img",52),e.TgZ(16,"h2",53),e._uU(17),e.ALo(18,"currency"),e.qZA()()()()),2&a){const t=r.$implicit;e.xp6(4),e.hij(" ",t.sucursalDesc," "),e.xp6(4),e.hij("",t.sumPiezas," PZ"),e.xp6(4),e.hij("Costo Total: ",e.lcZ(13,4,t.sumCost),""),e.xp6(5),e.hij("Importe Total: ",e.lcZ(18,6,t.sumPrice),"")}}function Lo(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",54)(2,"div",55)(3,"div",56)(4,"mat-icon",57),e._uU(5,"qr_code"),e.qZA()(),e.TgZ(6,"div",58)(7,"label",59),e._uU(8),e.qZA()()()(),e.TgZ(9,"td",54),e._uU(10),e.qZA(),e.TgZ(11,"td",60),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",60),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.TgZ(17,"td",60),e._uU(18),e.qZA(),e.TgZ(19,"td",60),e._uU(20),e.qZA(),e.TgZ(21,"td",60),e._uU(22),e.qZA(),e.TgZ(23,"td",60),e._uU(24),e.qZA(),e.TgZ(25,"td",60),e._uU(26),e.ALo(27,"currency"),e.qZA(),e.TgZ(28,"td",60),e._uU(29),e.ALo(30,"currency"),e.qZA(),e.TgZ(31,"td",54),e._uU(32),e.qZA(),e.TgZ(33,"td",54),e._uU(34),e.qZA(),e.TgZ(35,"td",54),e._uU(36),e.qZA(),e.TgZ(37,"td",54),e._uU(38),e.qZA(),e.TgZ(39,"td",54),e._uU(40),e.qZA()()),2&a){const t=r.$implicit;e.xp6(8),e.Oqu(t.barCode),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.lcZ(13,15,t.cost)),e.xp6(3),e.Oqu(e.lcZ(16,17,t.price)),e.xp6(3),e.hij("",t.catInventaryApart," PZ"),e.xp6(2),e.hij("",t.catInventaryCons," PZ"),e.xp6(2),e.hij("",t.catInventary," PZ"),e.xp6(2),e.Oqu(t.gramos),e.xp6(2),e.Oqu(e.lcZ(27,19,t.costoT)),e.xp6(3),e.Oqu(e.lcZ(30,21,t.importeT)),e.xp6(3),e.Oqu(t.sucursalDesc),e.xp6(2),e.Oqu(t.familyDesc),e.xp6(2),e.Oqu(t.groupDesc),e.xp6(2),e.Oqu(t.qualityDesc),e.xp6(2),e.Oqu(t.originDesc)}}function ko(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",61),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Oo=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u,s,S){this.servicesGServ=t,this.productsServ=i,this.fb=n,this._adapter=o,this._locale=l,this.familiesServ=p,this.groupsServ=_,this.originServ=g,this.qualityServ=u,this.sucursalesServ=s,this.authServ=S,this._appMain=C.N.appMain,this.idUserLogON=0,this.title="Lista de Products",this.bShowSpinner=!1,this.catlist=[],this.inventaryBySucursalList=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm=this.fb.group({idUser:0,idSucursal:0,sucursalDesc:"",createDateStart:"",createDateEnd:"",barCode:"",name:"",idFamily:0,familyDesc:[""],idGroup:0,groupDesc:[""],idQuality:0,qualityDesc:[""],idOrigin:0,originDesc:[""]}),this.cbxFamiliesList=[],this.cbxGroupsList=[],this.cbxQualityList=[],this.cbxOriginList=[],this.cbxSucursales=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getInventaryListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getInventaryListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getInventaryListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}exportDataToExcel(t){this.bShowSpinner=!0,this.productsServ.CGetInventaryListWithPage({search:"",length:1e7,pageSize:1e7,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm.value).subscribe({next:n=>{if(console.log(n),0==n.status)if(t){const l=[{col:0,currencyFormat:!1,textAlignment:"left"},{col:1,currencyFormat:!1,textAlignment:"left"},{col:2,numberFormat:"#,##0",textAlignment:"right"},{col:3,numberFormat:"#,##0",textAlignment:"right"},{col:4,numberFormat:"#,##0",textAlignment:"right"},{col:5,currencyFormat:!0,textAlignment:"right"},{col:6,currencyFormat:!0,textAlignment:"right"}];var o=n.data.rows.map(g=>({"C\xf3digo de barras\t":g.barCode,Nombre:g.name,Apartado:g.catInventaryApart,Consignaci\u00f3n:g.catInventaryCons,Mostrador:g.catInventary,cost:g.cost,price:g.price}));const _=(new Date).toISOString().replace(/[:.]/g,"-");this.servicesGServ.exportToExcel(o,`RepInventarioConCostos_${_}.xlsx`,l)}else{const l=[{col:0,currencyFormat:!1,textAlignment:"left"},{col:1,currencyFormat:!1,textAlignment:"left"},{col:2,numberFormat:"#,##0",textAlignment:"right"},{col:3,numberFormat:"#,##0",textAlignment:"right"},{col:4,numberFormat:"#,##0",textAlignment:"right"}];o=n.data.rows.map(u=>({"C\xf3digo de barras\t":u.barCode,Nombre:u.name,Apartado:u.catInventaryApart,Consignaci\u00f3n:u.catInventaryCons,Mostrador:u.catInventary}));const g=(new Date).toISOString().replace(/[:.]/g,"-");this.servicesGServ.exportToExcel(o,`RepInventario_${g}.xlsx`,l)}this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}})}fn_getInventaryListWithPage(){this.catlist=[],this.inventaryBySucursalList=[],this.parametersForm.get("idUser")?.setValue(this.idUserLogON),this.bShowSpinner=!0,this.productsServ.CGetInventaryListWithPage(this.pagination,this.parametersForm.value).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1,this.fn_getInventaryBySucursal()},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_getInventaryBySucursal(){this.parametersForm.get("idUser")?.setValue(this.idUserLogON),this.productsServ.CGetInventaryBySucursal(this.parametersForm.value).subscribe({next:t=>{console.log(t),this.inventaryBySucursalList=t.data.rows},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data)}})}parametersForm_Clear(){this.parametersForm.get("createDateStart")?.setValue(""),this.parametersForm.get("createDateEnd")?.setValue(""),this.parametersForm.get("barCode")?.setValue(""),this.parametersForm.get("name")?.setValue(""),this.parametersForm.get("description")?.setValue(""),this.parametersForm.get("idFamily")?.setValue(0),this.parametersForm.get("familyDesc")?.setValue(""),this.parametersForm.get("idGroup")?.setValue(0),this.parametersForm.get("groupDesc")?.setValue(""),this.parametersForm.get("idQuality")?.setValue(0),this.parametersForm.get("qualityDesc")?.setValue(""),this.parametersForm.get("idOrigin")?.setValue(0),this.parametersForm.get("originDesc")?.setValue(""),this.parametersForm.get("idSucursal")?.setValue(0),this.parametersForm.get("sucursalDesc")?.setValue(""),this.fn_getInventaryListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editProduct`,t)}cbxFamilies_Search(){this.familiesServ.CCbxGetFamiliesCombo(this.parametersForm.value.familyDesc).subscribe({next:t=>{this.cbxFamiliesList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFamilies_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idFamily")?.setValue(i.idFamily),this.parametersForm.get("familyDesc")?.setValue(i.name)}cbxFamilies_Clear(){this.parametersForm.get("idFamily")?.setValue(0),this.parametersForm.get("familyDesc")?.setValue("")}cbxGroups_Search(){this.groupsServ.CCbxGetGroupsCombo(this.parametersForm.value.groupDesc).subscribe({next:t=>{this.cbxGroupsList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxGroups_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idGroup")?.setValue(i.idGroup),this.parametersForm.get("groupDesc")?.setValue(i.name)}cbxGroups_Clear(){this.parametersForm.get("idGroup")?.setValue(0),this.parametersForm.get("groupDesc")?.setValue("")}cbxQuality_Search(){this.qualityServ.CCbxGetQualityCombo(this.parametersForm.value.qualityDesc).subscribe({next:t=>{this.cbxQualityList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxQuality_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idQuality")?.setValue(i.idQuality),this.parametersForm.get("qualityDesc")?.setValue(i.name)}cbxQuality_Clear(){this.parametersForm.get("idQuality")?.setValue(0),this.parametersForm.get("qualityDesc")?.setValue("")}cbxOrigin_Search(){this.originServ.CCbxGetOriginCombo(this.parametersForm.value.originDesc).subscribe({next:t=>{this.cbxOriginList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxOrigin_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.get("idOrigin")?.setValue(i.idOrigin),this.parametersForm.get("originDesc")?.setValue(i.name)}cbxOrigin_Clear(){this.parametersForm.get("idOrigin")?.setValue(0),this.parametersForm.get("originDesc")?.setValue("")}cbxSucursales_Search(){this.sucursalesServ.CCbxGetSucursalesCombo(this.parametersForm.value.sucursalDesc,this.idUserLogON).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.parametersForm.get("idSucursal")?.setValue(i.idSucursal),this.parametersForm.get("sucursalDesc")?.setValue(i.name)}cbxSucursales_Clear(){this.parametersForm.get("idSucursal")?.setValue(0),this.parametersForm.get("sucursalDesc")?.setValue("")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(R),e.Y36(m.qu),e.Y36(f._A),e.Y36(f.Ad),e.Y36(oe),e.Y36(ne),e.Y36(me),e.Y36(de),e.Y36(W),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventary"]],decls:137,vars:26,consts:[[1,"divMain",2,"margin-top","10px !important",3,"expanded","opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],["action","","autocomplete","off",3,"formGroup"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","sucursalDesc",2,"width","100%",3,"matAutocomplete","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top20px"],[1,"col-md-4"],["fxLayout.xs","column",1,"with100"],["matPrefix","",1,"my-icon"],["matInput","","placeholder","Ingrese un C\xf3digo de barras","formControlName","barCode"],[1,"col-md-8"],[1,"with100"],["matInput","","placeholder","Ingrese un nombre","formControlName","name"],["text","",1,"row","top20px"],[1,"col-md-3"],["type","text","id","cbxGroups","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","groupDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxGroups","matAutocomplete"],["type","text","id","cbxFamilies","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","familyDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxFamilies","matAutocomplete"],["type","text","id","cbxQuality","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","qualityDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxQuality","matAutocomplete"],["type","text","id","cbxOrigin","placeholder","Selecciona...","aria-label","Number","matInput","","formControlName","originDesc",2,"width","100%",3,"matAutocomplete","input"],["cbxOrigin","matAutocomplete"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["mat-raised-button","","type","button",3,"click"],["class","divSection",4,"ngFor","ngForOf"],[1,"divMain",2,"width","100%","margin-top","10px !important"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"divSection"],[1,"row",2,"margin-top","-35px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-2"],[1,"col-md-5",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],[1,"textAlingLeft"],[1,"row",2,"width","150px"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[1,"col-md-10"],[2,"margin-left","10px"],[1,"textAlingRight"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros del inventario "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"form",5)(9,"div",3)(10,"div",4)(11,"mat-label"),e._uU(12,"Sucursal: "),e.qZA(),e.TgZ(13,"mat-form-field",6),e.NdJ("click",function(){return i.cbxSucursales_Search()}),e.TgZ(14,"input",7),e.NdJ("input",function(){return i.cbxSucursales_Search()}),e.qZA(),e.YNc(15,So,3,0,"button",8),e.TgZ(16,"mat-autocomplete",9,10),e.NdJ("optionSelected",function(o){return i.cbxSucursales_SelectedOption(o)}),e.YNc(18,vo,2,2,"mat-option",11),e.YNc(19,xo,2,0,"mat-option",12),e.qZA()()()(),e.TgZ(20,"div",13)(21,"div",14)(22,"mat-form-field",15)(23,"mat-label"),e._uU(24,"C\xf3digo de barras"),e.qZA(),e.TgZ(25,"mat-icon",16),e._uU(26,"qr_code"),e.qZA(),e._UZ(27,"input",17),e.qZA()(),e.TgZ(28,"div",18)(29,"mat-form-field",19)(30,"mat-label"),e._uU(31,"Nombre"),e.qZA(),e._UZ(32,"input",20),e.qZA()()(),e.TgZ(33,"div",21)(34,"div",22)(35,"mat-label"),e._uU(36,"Grupo: "),e.qZA(),e.TgZ(37,"mat-form-field",6),e.NdJ("click",function(){return i.cbxGroups_Search()}),e.TgZ(38,"input",23),e.NdJ("input",function(){return i.cbxGroups_Search()}),e.qZA(),e.YNc(39,Zo,3,0,"button",8),e.TgZ(40,"mat-autocomplete",9,24),e.NdJ("optionSelected",function(o){return i.cbxGroups_SelectedOption(o)}),e.YNc(42,To,2,2,"mat-option",11),e.YNc(43,yo,2,0,"mat-option",12),e.qZA()()(),e.TgZ(44,"div",22)(45,"mat-label"),e._uU(46,"Familia: "),e.qZA(),e.TgZ(47,"mat-form-field",6),e.NdJ("click",function(){return i.cbxFamilies_Search()}),e.TgZ(48,"input",25),e.NdJ("input",function(){return i.cbxFamilies_Search()}),e.qZA(),e.YNc(49,Ao,3,0,"button",8),e.TgZ(50,"mat-autocomplete",9,26),e.NdJ("optionSelected",function(o){return i.cbxFamilies_SelectedOption(o)}),e.YNc(52,Fo,2,2,"mat-option",11),e.YNc(53,Uo,2,0,"mat-option",12),e.qZA()()(),e.TgZ(54,"div",22)(55,"mat-label"),e._uU(56,"Calidad: "),e.qZA(),e.TgZ(57,"mat-form-field",6),e.NdJ("click",function(){return i.cbxQuality_Search()}),e.TgZ(58,"input",27),e.NdJ("input",function(){return i.cbxQuality_Search()}),e.qZA(),e.YNc(59,Po,3,0,"button",8),e.TgZ(60,"mat-autocomplete",9,28),e.NdJ("optionSelected",function(o){return i.cbxQuality_SelectedOption(o)}),e.YNc(62,wo,2,2,"mat-option",11),e.YNc(63,No,2,0,"mat-option",12),e.qZA()()(),e.TgZ(64,"div",22)(65,"mat-label"),e._uU(66,"Origen: "),e.qZA(),e.TgZ(67,"mat-form-field",6),e.NdJ("click",function(){return i.cbxOrigin_Search()}),e.TgZ(68,"input",29),e.NdJ("input",function(){return i.cbxOrigin_Search()}),e.qZA(),e.YNc(69,Io,3,0,"button",8),e.TgZ(70,"mat-autocomplete",9,30),e.NdJ("optionSelected",function(o){return i.cbxOrigin_SelectedOption(o)}),e.YNc(72,Mo,2,2,"mat-option",11),e.YNc(73,qo,2,0,"mat-option",12),e.qZA()()()(),e.TgZ(74,"div",31)(75,"div",4)(76,"div",32)(77,"button",33),e.NdJ("click",function(){return i.fn_getInventaryListWithPage()}),e.TgZ(78,"mat-icon",16),e._uU(79,"search"),e.qZA(),e._uU(80," Buscar"),e.qZA(),e.TgZ(81,"button",34),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(82,"mat-icon",16),e._uU(83,"clear"),e.qZA(),e._uU(84," limpiar"),e.qZA()()()()()()()()(),e.YNc(85,Do,19,8,"div",35),e.TgZ(86,"div",36)(87,"div",31)(88,"div",4)(89,"div",32)(90,"button",33),e.NdJ("click",function(){return i.exportDataToExcel(!0)}),e.TgZ(91,"mat-icon",16),e._uU(92,"insert_drive_file"),e.qZA(),e._uU(93," EXPORTAR A EXCEL CON PRECIOS Y COSTOS"),e.qZA(),e.TgZ(94,"button",33),e.NdJ("click",function(){return i.exportDataToExcel(!1)}),e.TgZ(95,"mat-icon",16),e._uU(96,"insert_drive_file"),e.qZA(),e._uU(97," EXPORTAR A EXCEL SIN PRECIOS Y COSTOS"),e.qZA()()()(),e.TgZ(98,"div",13)(99,"div",4)(100,"div",37)(101,"table",38)(102,"thead")(103,"th",39),e._uU(104,"C\xf3digo de barras"),e.qZA(),e.TgZ(105,"th",39),e._uU(106,"Nombre"),e.qZA(),e.TgZ(107,"th",40),e._uU(108,"Costo"),e.qZA(),e.TgZ(109,"th",40),e._uU(110,"Precio"),e.qZA(),e.TgZ(111,"th",40),e._uU(112,"Apartado"),e.qZA(),e.TgZ(113,"th",40),e._uU(114,"Consignaci\xf3n"),e.qZA(),e.TgZ(115,"th",40),e._uU(116,"Mostrador"),e.qZA(),e.TgZ(117,"th",40),e._uU(118,"Gramos"),e.qZA(),e.TgZ(119,"th",40),e._uU(120,"Costo T"),e.qZA(),e.TgZ(121,"th",40),e._uU(122,"Precio T"),e.qZA(),e.TgZ(123,"th",39),e._uU(124,"Sucursal"),e.qZA(),e.TgZ(125,"th",39),e._uU(126,"Familia"),e.qZA(),e.TgZ(127,"th",39),e._uU(128,"Grupo"),e.qZA(),e.TgZ(129,"th",39),e._uU(130,"Calidad"),e.qZA(),e.TgZ(131,"th",39),e._uU(132,"Origen"),e.qZA()(),e.TgZ(133,"tbody"),e.YNc(134,Lo,41,23,"tr",41),e.qZA()()(),e.YNc(135,ko,1,1,"app-pagination",42),e.qZA()()(),e._UZ(136,"app-spinner",43)),2&t){const n=e.MAs(17),o=e.MAs(41),l=e.MAs(51),p=e.MAs(61),_=e.MAs(71);e.xp6(1),e.Q6J("expanded",!0),e.xp6(7),e.Q6J("formGroup",i.parametersForm),e.xp6(6),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.parametersForm.value.sucursalDesc),e.xp6(19),e.Q6J("matAutocomplete",o),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.groupDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxGroupsList),e.xp6(1),e.Q6J("ngIf",0==i.cbxGroupsList.length&&i.parametersForm.value.groupDesc),e.xp6(5),e.Q6J("matAutocomplete",l),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.familyDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFamiliesList),e.xp6(1),e.Q6J("ngIf",0==i.cbxFamiliesList.length&&i.parametersForm.value.familyDesc),e.xp6(5),e.Q6J("matAutocomplete",p),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.qualityDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxQualityList),e.xp6(1),e.Q6J("ngIf",0==i.cbxQualityList.length&&i.parametersForm.value.qualityDesc),e.xp6(5),e.Q6J("matAutocomplete",_),e.xp6(1),e.Q6J("ngIf",i.parametersForm.value.originDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxOriginList),e.xp6(1),e.Q6J("ngIf",0==i.cbxOriginList.length&&i.parametersForm.value.originDesc),e.xp6(12),e.Q6J("ngForOf",i.inventaryBySucursalList),e.xp6(49),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,I.XC,f.ey,I.ZL,v.lW,v.RK,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.qo,d.R9,N.Nt,P.Hw,U.O,D,h.H9]}),a})(),Jo=(()=>{class a{constructor(t,i,n,o,l,p,_,g){this.dialogRef=t,this.ODataP=i,this._adapter=n,this._locale=o,this.servicesGServ=l,this.authServ=p,this.salesServ=_,this.printTicketServ=g,this.bShowSpinner=!1,this.idCorteCaja=0,this.selectedDate="",this.preCorteCaja={sales:0,egresos:0,ingresoTotal:0,pesos:0,pesosCaja:0,dolares:0,dolaresF:0,dolaresCaja:0,fxRate:0,dolaresMNX:0,vouchers:0,vouchersCaja:0,transferencias:0,transferenciasCaja:0,dineroElectronico:0,totalCaja:0,diferencia:0,observaciones:""}}ngOnInit(){this._locale="mx",this._adapter.setLocale(this._locale),console.log(this.ODataP),this.idCorteCaja=this.ODataP.idCorteCaja,this.ODataP.idCorteCaja.length>0&&this.fn_getCorteCajaDetailByID(this.ODataP.idCorteCaja)}fn_getCorteCajaDetailByID(t){this.bShowSpinner=!0,this.salesServ.CGetCorteCajaByID(t).subscribe(i=>{0==i.status&&(this.preCorteCaja=i.data,this.selectedDate=i.data.createDate),this.bShowSpinner=!1})}fn_CerrarMDL(t){this.dialogRef.close(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(f._A),e.Y36(f.Ad),e.Y36(A.$),e.Y36(T.e),e.Y36(Y),e.Y36(j))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-cortecajadetail"]],decls:170,vars:30,consts:[[2,"padding","10px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"row"],[1,"col-md-12"],[1,"row","top10px"],[1,"col-md-12",2,"text-align","center"],[1,""],["matInput","","placeholder","Seleccione una fecha","readonly","",1,"textAlingCenter",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","","disabled","",3,"for"],["picker",""],[1,"badge","bg-primary","text-wrap",2,"font-size","15px","background-color","#3f51b5 !important"],[1,"col-md-6"],["fxLayout.xs","column",1,"with100"],["matPrefix","",1,"my-icon"],["matInput","","readonly","",1,"textAlingRight",3,"ngModel","ngModelChange"],["matInput","","type","number","readonly","",1,"textAlingRight",3,"ngModel","ngModelChange"],["tbxPesosCaja",""],["tbxDolaresCaja",""],["tbxVouchersCaja",""],["tbxTransferenciasCaja",""],["tbxTotalCaja",""],["tbxDiferencia",""],[1,"example-full-width","with100","top20px"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese un comentario","readonly","",3,"ngModel","ngModelChange"],["tbxComentarios",""],[2,"float","left"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],[3,"hidden"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"h1"),e._uU(7),e.qZA()()(),e.TgZ(8,"div",4)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Fecha de corte:"),e.qZA(),e.TgZ(13,"input",7),e.NdJ("ngModelChange",function(o){return i.selectedDate=o}),e.qZA(),e._UZ(14,"mat-datepicker-toggle",8)(15,"mat-datepicker",null,9),e.qZA()()(),e.TgZ(17,"div",4)(18,"div",3)(19,"div",10),e._uU(20," INGRESOS SEG\xdaN REGISTROS "),e.qZA()()(),e.TgZ(21,"div",4)(22,"div",11)(23,"mat-form-field",12)(24,"mat-label"),e._uU(25,"VENTA"),e.qZA(),e.TgZ(26,"mat-icon",13),e._uU(27,"attach_money"),e.qZA(),e.TgZ(28,"input",14),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.sales=o}),e.qZA()()(),e.TgZ(29,"div",11)(30,"mat-form-field",12)(31,"mat-label"),e._uU(32,"TALLER"),e.qZA(),e.TgZ(33,"mat-icon",13),e._uU(34,"attach_money"),e.qZA(),e.TgZ(35,"input",14),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.tallerSales=o}),e.qZA()()()(),e.TgZ(36,"div",4)(37,"div",11)(38,"mat-form-field",12)(39,"mat-label"),e._uU(40,"EGRESOS"),e.qZA(),e.TgZ(41,"mat-icon",13),e._uU(42,"attach_money"),e.qZA(),e.TgZ(43,"input",14),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.egresos=o}),e.qZA()()(),e.TgZ(44,"div",11)(45,"mat-form-field",12)(46,"mat-label"),e._uU(47,"INGRESO TOTAL"),e.qZA(),e.TgZ(48,"mat-icon",13),e._uU(49,"attach_money"),e.qZA(),e.TgZ(50,"input",14),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.ingresoTotal=o}),e.qZA()()()(),e.TgZ(51,"div",2)(52,"div",11)(53,"div",10),e._uU(54," DESGLOSE SISTEMA "),e.qZA()(),e.TgZ(55,"div",11)(56,"div",10),e._uU(57," EXISTENCIA EN CAJA "),e.qZA()()(),e.TgZ(58,"div",4)(59,"div",11)(60,"mat-form-field",12)(61,"mat-label"),e._uU(62,"PESOS"),e.qZA(),e.TgZ(63,"mat-icon",13),e._uU(64,"attach_money"),e.qZA(),e.TgZ(65,"input",14),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.pesos=o}),e.qZA()()(),e.TgZ(66,"div",11)(67,"mat-form-field",12)(68,"mat-label"),e._uU(69,"PESOS"),e.qZA(),e.TgZ(70,"mat-icon",13),e._uU(71,"attach_money"),e.qZA(),e.TgZ(72,"input",15,16),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.pesosCaja=o}),e.qZA()()()(),e.TgZ(74,"div",4)(75,"div",11)(76,"mat-form-field",12)(77,"mat-label"),e._uU(78),e.ALo(79,"currency"),e.ALo(80,"currency"),e.qZA(),e.TgZ(81,"mat-icon",13),e._uU(82,"attach_money"),e.qZA(),e.TgZ(83,"input",15),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.dolaresMNX=o}),e.qZA()()(),e.TgZ(84,"div",11)(85,"mat-form-field",12)(86,"mat-label"),e._uU(87),e.ALo(88,"currency"),e.qZA(),e.TgZ(89,"mat-icon",13),e._uU(90,"attach_money"),e.qZA(),e.TgZ(91,"input",15,17),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.dolaresCaja=o}),e.qZA()()()(),e.TgZ(93,"div",4)(94,"div",11)(95,"mat-form-field",12)(96,"mat-label"),e._uU(97,"VOUCHERS"),e.qZA(),e.TgZ(98,"mat-icon",13),e._uU(99,"attach_money"),e.qZA(),e.TgZ(100,"input",15),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.vouchers=o}),e.qZA()()(),e.TgZ(101,"div",11)(102,"mat-form-field",12)(103,"mat-label"),e._uU(104,"VOUCHERS"),e.qZA(),e.TgZ(105,"mat-icon",13),e._uU(106,"attach_money"),e.qZA(),e.TgZ(107,"input",15,18),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.vouchersCaja=o}),e.qZA()()()(),e.TgZ(109,"div",4)(110,"div",11)(111,"mat-form-field",12)(112,"mat-label"),e._uU(113,"TRANSFERENCIAS"),e.qZA(),e.TgZ(114,"mat-icon",13),e._uU(115,"attach_money"),e.qZA(),e.TgZ(116,"input",15),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.transferencias=o}),e.qZA()()(),e.TgZ(117,"div",11)(118,"mat-form-field",12)(119,"mat-label"),e._uU(120,"TRANSFERENCIAS"),e.qZA(),e.TgZ(121,"mat-icon",13),e._uU(122,"attach_money"),e.qZA(),e.TgZ(123,"input",15,19),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.transferenciasCaja=o}),e.qZA()()()(),e.TgZ(125,"div",4)(126,"div",11)(127,"mat-form-field",12)(128,"mat-label"),e._uU(129,"DINERO ELECTR\xd3NICO"),e.qZA(),e.TgZ(130,"mat-icon",13),e._uU(131,"attach_money"),e.qZA(),e.TgZ(132,"input",15),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.dineroElectronico=o}),e.qZA()()(),e.TgZ(133,"div",11)(134,"mat-form-field",12)(135,"mat-label"),e._uU(136,"TOTAL CAJA"),e.qZA(),e.TgZ(137,"mat-icon",13),e._uU(138,"attach_money"),e.qZA(),e.TgZ(139,"input",15,20),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.totalCaja=o}),e.qZA()()()(),e.TgZ(141,"div",2)(142,"div",3)(143,"div",10),e._uU(144," CONCLUSI\xd3N "),e.qZA()()(),e.TgZ(145,"div",4),e._UZ(146,"div",11),e.TgZ(147,"div",11)(148,"mat-form-field",12)(149,"mat-label"),e._uU(150,"DIFERENCIA"),e.qZA(),e.TgZ(151,"mat-icon",13),e._uU(152,"attach_money"),e.qZA(),e.TgZ(153,"input",14,21),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.diferencia=o}),e.qZA()()()(),e.TgZ(155,"div",2)(156,"div",3)(157,"mat-form-field",22)(158,"mat-label"),e._uU(159,"Comentarios"),e.qZA(),e.TgZ(160,"textarea",23,24),e.NdJ("ngModelChange",function(o){return i.preCorteCaja.observaciones=o}),e.qZA()()()(),e.TgZ(162,"div",4)(163,"div",3)(164,"div",25)(165,"button",26),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(166,"mat-icon",13),e._uU(167,"close"),e.qZA(),e._uU(168," Cerrar"),e.qZA()()()()(),e._UZ(169,"app-spinner",27)),2&t){const n=e.MAs(16);e.xp6(7),e.hij("Hecho por: ",i.preCorteCaja.createUserName,""),e.xp6(6),e.Q6J("matDatepicker",n)("ngModel",i.selectedDate),e.xp6(1),e.Q6J("for",n),e.xp6(14),e.Q6J("ngModel",i.preCorteCaja.sales),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.tallerSales),e.xp6(8),e.Q6J("ngModel",i.preCorteCaja.egresos),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.ingresoTotal),e.xp6(15),e.Q6J("ngModel",i.preCorteCaja.pesos),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.pesosCaja),e.xp6(6),e.AsE("D\xd3LARES ( ",e.lcZ(79,24,i.preCorteCaja.dolares)," - TC:",e.lcZ(80,26,i.preCorteCaja.fxRate)," )"),e.xp6(5),e.Q6J("ngModel",i.preCorteCaja.dolaresMNX),e.xp6(4),e.hij("D\xd3LARES ( TC:",e.lcZ(88,28,i.preCorteCaja.fxRate)," )"),e.xp6(4),e.Q6J("ngModel",i.preCorteCaja.dolaresCaja),e.xp6(9),e.Q6J("ngModel",i.preCorteCaja.vouchers),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.vouchersCaja),e.xp6(9),e.Q6J("ngModel",i.preCorteCaja.transferencias),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.transferenciasCaja),e.xp6(9),e.Q6J("ngModel",i.preCorteCaja.dineroElectronico),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.totalCaja),e.xp6(14),e.Q6J("ngModel",i.preCorteCaja.diferencia),e.xp6(7),e.Q6J("ngModel",i.preCorteCaja.observaciones),e.xp6(9),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[m.Fj,m.wV,m.JJ,m.On,v.lW,v.RK,x.Mq,x.hl,x.nW,d.KE,d.hX,d.qo,d.R9,N.Nt,Q.IC,P.Hw,U.O,h.H9]}),a})();function Go(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_ShowSelectPrint())}),e.TgZ(1,"mat-icon",15),e._uU(2,"print"),e.qZA(),e._uU(3," Seleccionar impresora"),e.qZA()}}function Ro(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"img",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_btnCerrarPrinter())}),e.qZA()}}function Eo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_btnCerrarPrinter())}),e._uU(1),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.selectPrinter.printerName," ")}}function Qo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_btnRePrinter(n.idCorteCaja))}),e._uU(1," print "),e.qZA()}}function Yo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",32)(2,"div",33)(3,"span",34),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.fn_ShowCorteCajaDetail(o.idCorteCaja))}),e._uU(4," remove_red_eye "),e.qZA(),e.YNc(5,Qo,2,0,"span",35),e.qZA()(),e.TgZ(6,"td",36),e._uU(7),e.qZA(),e.TgZ(8,"td",32)(9,"div",37)(10,"div",3)(11,"div",38)(12,"mat-icon",39),e._uU(13,"calendar_today"),e.qZA()(),e.TgZ(14,"div",40)(15,"label",41),e._uU(16),e.qZA(),e.TgZ(17,"label",41),e._uU(18),e.qZA()()()()(),e.TgZ(19,"td",42),e._uU(20),e.qZA(),e.TgZ(21,"td",42),e._uU(22),e.qZA(),e.TgZ(23,"td",32)(24,"mat-checkbox",43),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit,i=e.oxw();e.xp6(5),e.Q6J("ngIf",i.selectPrinter.idPrinter>0),e.xp6(2),e.hij("#",t.idCorteCaja,""),e.xp6(9),e.Oqu(t.createDateDate),e.xp6(2),e.Oqu(t.createDateHours),e.xp6(2),e.Oqu(t.sucursalName),e.xp6(2),e.Oqu(t.cajaName),e.xp6(2),e.Q6J("ngModel",t.active)}}function jo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",45),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Ho=(()=>{class a{constructor(t,i,n,o,l,p,_,g){this.servicesGServ=t,this._adapter=i,this._locale=n,this.authServ=o,this.salesServ=l,this.cajasServ=p,this.printTicketServ=_,this.printersServ=g,this._appMain=C.N.appMain,this.title="Cortes de caja",this.bShowSpinner=!1,this.panelOpenState=!1,this.idUserLogON=0,this.cortesCajaList=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={idSucursal:0,sucursalDesc:"",idCaja:0,cajaDesc:"",createDateStart:"",createDateEnd:""},this.selectPrinter={idSucursal:0,idPrinter:0,printerName:""}}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getCorteCajaListWithPage(),t.fn_getSelectPrintByIdUser(t.idUserLogON)})()}changePagination(t){this.pagination=t,this.fn_getCorteCajaListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getCorteCajaListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_getCorteCajaListWithPage(){let t={createDateStart:this.parametersForm.createDateStart,createDateEnd:this.parametersForm.createDateEnd,idSucursal:this.parametersForm.idSucursal,idCaja:this.parametersForm.idCaja};this.bShowSpinner=!0,this.salesServ.CGetCorteCajaListWithPage(this.pagination,t).subscribe({next:i=>{this.cortesCajaList=i.data.rows,this.pagination.length=i.data.count,this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.data),this.bShowSpinner=!1}})}fn_getSelectPrintByIdUser(t){this.printersServ.CGetSelectPrinterByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectPrinter.idSucursal=i.data.idSucursal,this.selectPrinter.idPrinter=i.data.idPrinter,this.selectPrinter.printerName=i.data.printerName):(this.selectPrinter.idSucursal=0,this.selectPrinter.idPrinter=0,this.selectPrinter.printerName=""),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}fn_btnCerrarPrinter(){var t=this;this.selectPrinter.idPrinter>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de deseleccionar la impresora","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{var n;i&&(this.selectPrinter.idUser=this.idUserLogON,this.printersServ.CDeleteSelectPrinter(this.selectPrinter).subscribe({next:(n=(0,Z.Z)(function*(o){0===o.status&&t.fn_getSelectPrintByIdUser(t.idUserLogON),t.servicesGServ.showAlertIA(o),t.bShowSpinner=!1}),function(l){return n.apply(this,arguments)}),error:n=>{this.servicesGServ.showSnakbar(n.error.message),this.bShowSpinner=!1}}))}})}fn_ShowSelectPrint(){this.servicesGServ.showModalWithParams(we,{idUser:this.idUserLogON},"2000px").afterClosed().subscribe({next:i=>{this.fn_getSelectPrintByIdUser(this.idUserLogON)}})}fn_btnRePrinter(t){this.selectPrinter.idPrinter>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1s apunto de reimprimir este corte de caja","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&this.printTicketServ.printTicket("CorteCaja",t,this.selectPrinter.idPrinter)}})}fn_ShowCorteCajaDetail(t){this.servicesGServ.showModalWithParams(Jo,{idCorteCaja:t},"800px").afterClosed().subscribe({next:n=>{}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(Y),e.Y36(re),e.Y36(j),e.Y36(H))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-cortes-caja"]],decls:62,vars:10,consts:[[1,"divMain",2,"margin-top","10px !important",3,"opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button"],[1,"divMain",2,"width","100%","margin-top","10px !important"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],[1,"col-md-12",2,"position","relative"],["style","display: inline-block;","width","50","src","assets/img/icons/printIco.gif","class","marginRight10px manitaSobre","alt","",3,"click",4,"ngIf"],["style","display: inline-block;","class","badge bg-primary text-wrap manitaSobre","style","font-size: 15px;",3,"click",4,"ngIf"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["width","50","src","assets/img/icons/printIco.gif","alt","",1,"marginRight10px","manitaSobre",2,"display","inline-block",3,"click"],[1,"badge","bg-primary","text-wrap","manitaSobre",2,"font-size","15px",3,"click"],[1,"textAlingCenter"],[2,"width","50px"],["title","Ver",1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorGreen","title","Imprimir",3,"click",4,"ngIf"],[2,"text-align","Center"],[2,"width","120px"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","5px"],[1,"col-md-10"],[2,"margin-left","10px"],[2,"text-align","left"],[1,"example-margin",3,"ngModel","ngModelChange"],["title","Imprimir",1,"material-icons","manitaSobre","colorGreen",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros de Cortes de Caja "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",3)(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),e._uU(11,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(12,"mat-date-range-input",7),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(19);return e.KtG(l.open())}),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(l){return i.parametersForm.createDateStart=l}),e.qZA(),e.TgZ(14,"input",9),e.NdJ("ngModelChange",function(l){return i.parametersForm.createDateEnd=l}),e.qZA()(),e.TgZ(15,"mat-hint"),e._uU(16,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(17,"mat-datepicker-toggle",10)(18,"mat-date-range-picker",null,11),e.qZA()()(),e.TgZ(20,"div",12)(21,"div",4)(22,"div",13)(23,"button",14),e.NdJ("click",function(){return i.fn_getCorteCajaListWithPage()}),e.TgZ(24,"mat-icon",15),e._uU(25,"search"),e.qZA(),e._uU(26," Buscar"),e.qZA(),e.TgZ(27,"button",16)(28,"mat-icon",15),e._uU(29,"clear"),e.qZA(),e._uU(30," limpiar"),e.qZA()()()()()()()(),e.TgZ(31,"div",17)(32,"div",3)(33,"div",4)(34,"div",13),e.YNc(35,Go,4,0,"button",18),e.qZA()(),e.TgZ(36,"div",19),e.YNc(37,Ro,1,0,"img",20),e.YNc(38,Eo,2,1,"div",21),e.qZA()(),e.TgZ(39,"div",3)(40,"div",4)(41,"div",22)(42,"div",4)(43,"div",23)(44,"table",24)(45,"thead")(46,"th",25),e._uU(47,"Acciones"),e.qZA(),e.TgZ(48,"th",25),e._uU(49,"Folio"),e.qZA(),e.TgZ(50,"th",25),e._uU(51,"Creado"),e.qZA(),e.TgZ(52,"th",26),e._uU(53,"Sucursal"),e.qZA(),e.TgZ(54,"th",26),e._uU(55,"Caja"),e.qZA(),e.TgZ(56,"th",25),e._uU(57,"Activo"),e.qZA()(),e.TgZ(58,"tbody"),e.YNc(59,Yo,25,7,"tr",27),e.qZA()()(),e.YNc(60,jo,1,1,"app-pagination",28),e.qZA()()()()(),e._UZ(61,"app-spinner",29)}if(2&t){const n=e.MAs(19);e.xp6(12),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("ngModel",i.parametersForm.createDateStart),e.xp6(1),e.Q6J("ngModel",i.parametersForm.createDateEnd),e.xp6(3),e.Q6J("for",n),e.xp6(18),e.Q6J("ngIf",0==i.selectPrinter.idPrinter),e.xp6(2),e.Q6J("ngIf",i.selectPrinter.idPrinter>0),e.xp6(1),e.Q6J("ngIf",i.selectPrinter.idPrinter>0),e.xp6(21),e.Q6J("ngForOf",i.cortesCajaList),e.xp6(1),e.Q6J("ngIf",i.cortesCajaList),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,v.lW,L.oG,x.nW,x.wx,x.zY,x.By,x._g,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.bx,d.qo,d.R9,P.Hw,U.O,D]}),a})(),zo=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/rep_utilidades"}CGet_rep_getUtilidades(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/get_rep_getUtilidades`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function $o(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Bo(a,r){if(1&a&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Wo(a,r){1&a&&(e.TgZ(0,"mat-option",49),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Ko(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSellers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Vo(a,r){if(1&a&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Xo(a,r){if(1&a&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.parametersForm.sellerResp," ")}}function er(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxGroups_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function tr(a,r){if(1&a&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ir(a,r){1&a&&(e.TgZ(0,"mat-option",49),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function nr(a,r){if(1&a&&(e.TgZ(0,"div",50)(1,"h2",37),e._uU(2),e.qZA(),e._UZ(3,"img",36),e.TgZ(4,"h2",37),e._uU(5),e.ALo(6,"currency"),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.hij("",t.parametersForm.comision,"% de comisi\xf3n"),e.xp6(3),e.Oqu(e.lcZ(6,2,t.sumUtilidad*(t.parametersForm.comision/100)))}}function ar(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",51)(2,"div",52),e._uU(3),e.qZA()(),e.TgZ(4,"td",53)(5,"div",54),e._uU(6),e.ALo(7,"currency"),e.qZA()(),e.TgZ(8,"td",53)(9,"div",54),e._uU(10),e.ALo(11,"currency"),e.qZA()(),e.TgZ(12,"td",53)(13,"div",54),e._uU(14),e.ALo(15,"currency"),e.qZA()(),e.TgZ(16,"td",53)(17,"div",54),e._uU(18),e.ALo(19,"currency"),e.qZA()(),e.TgZ(20,"td",53)(21,"div",54),e._uU(22),e.ALo(23,"currency"),e.qZA()(),e.TgZ(24,"td",51),e._uU(25),e.qZA()()),2&a){const t=r.$implicit;e.xp6(3),e.hij(" ",t.idSale," "),e.xp6(3),e.hij(" ",e.lcZ(7,7,t.costSale)," "),e.xp6(4),e.hij(" ",e.lcZ(11,9,t.impSale)," "),e.xp6(4),e.hij(" ",e.lcZ(15,11,t.paymentsHist)," "),e.xp6(4),e.hij(" ",e.lcZ(19,13,t.paymentsRange)," "),e.xp6(4),e.hij(" ",e.lcZ(23,15,t.fUtilidad)," "),e.xp6(3),e.Oqu(t.ventaDesc)}}let or=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u,s){this.servicesGServ=t,this.productsServ=i,this.fb=n,this._adapter=o,this._locale=l,this.groupsServ=p,this.sucursalesServ=_,this.authServ=g,this.userServ=u,this.repUtilidadesServ=s,this._appMain=C.N.appMain,this.idUserLogON=0,this.timeCBXskeyup=new ee.x,this.title="Lista de Products",this.bShowSpinner=!1,this.oData=[],this.panelOpenState=!1,this.sumUtilidad=0,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={idUser:0,idSucursal:0,sucursalDesc:"",startDate:"",endDate:"",idSeller_idUser:0,sellerDesc:"",sellerResp:"",comision:0,idGroup:0,groupDesc:""},this.cbxGroupsList=[],this.cbxSucursales=[],this.cbxSellers=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.timeCBXskeyup.pipe((0,te.b)(500)).subscribe(i=>{1==i.iOption&&t.cbxSellers_Search()})})()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_CGet_rep_getUtilidades(){this.oData=[],this.sumUtilidad=0,this.bShowSpinner=!0,this.repUtilidadesServ.CGet_rep_getUtilidades(this.parametersForm).subscribe({next:t=>{console.log(t),this.oData=t.data.rows,this.bShowSpinner=!1,t?.data?.rows?.length>0&&(this.sumUtilidad=t.data.rows[0].sumUtilidad)},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}parametersForm_Clear(){this.parametersForm={idUser:0,idSucursal:0,sucursalDesc:"",createDateStart:"",createDateEnd:"",idCustomer:0,customerDesc:"",customerResp:"",idGroup:0,groupDesc:[""]},this.fn_CGet_rep_getUtilidades()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editProduct`,t)}cbxGroups_Search(){this.groupsServ.CCbxGetGroupsCombo(this.parametersForm.groupDesc).subscribe({next:t=>{this.cbxGroupsList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxGroups_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.idGroup=i.idGroup,this.parametersForm.groupDesc=i.name}cbxGroups_Clear(){this.parametersForm.idGroup=0,this.parametersForm.groupDesc=""}cbxSucursales_Search(){this.sucursalesServ.CCbxGetSucursalesCombo(this.parametersForm.sucursalDesc,this.idUserLogON).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.parametersForm.idSucursal=i.idSucursal,this.parametersForm.sucursalDesc=i.name}cbxSucursales_Clear(){this.parametersForm.idSucursal=0,this.parametersForm.sucursalDesc=""}CBXskeyup(t,i){this.timeCBXskeyup.next({iOption:t,txt:i})}cbxSellers_Search(){this.userServ.CCbxGetSellersCombo(this.parametersForm.sellerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxSellers=t.data,this.parametersForm.sellerResp=""):(this.cbxSellers=[],this.parametersForm.sellerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSellers_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.idSeller_idUser=i.idUser,this.parametersForm.sellerDesc=i.name,this.parametersForm.sellerResp="",this.parametersForm.comision=i.comision}cbxSellers_Clear(){this.cbxSellers=[],this.parametersForm.idSeller_idUser=0,this.parametersForm.sellerDesc="",this.parametersForm.sellerResp="",this.parametersForm.comision=0}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(R),e.Y36(m.qu),e.Y36(f._A),e.Y36(f.Ad),e.Y36(ne),e.Y36(W),e.Y36(T.e),e.Y36(B),e.Y36(zo))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-utilidad"]],decls:100,vars:26,consts:[[1,"divMain",2,"margin-top","10px !important",3,"expanded","opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-md-9"],[2,"width","100%"],["type","text","id","cbxSeller","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxSellerCBX",""],["cbxSeller","matAutocomplete"],[1,"col-md-3"],["type","text","id","cbxGroups","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input"],["cbxGroups","matAutocomplete"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],[1,"divSection"],[1,"row",2,"margin-top","-35px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-3",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],["class","col-md-5","style","position: relative;",4,"ngIf"],[1,"divMain",2,"width","100%","margin-top","10px !important"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"col-md-5",2,"position","relative"],[1,"textAlingLeft"],[2,"width","130px","padding","2px"],[1,"textAlingRight"],[2,"width","100px","padding","2px"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"div",3)(9,"div",4)(10,"mat-label"),e._uU(11,"Sucursal: "),e.qZA(),e.TgZ(12,"mat-form-field",5),e.NdJ("click",function(){return i.cbxSucursales_Search()}),e.TgZ(13,"input",6),e.NdJ("ngModelChange",function(l){return i.parametersForm.sucursalDesc=l})("input",function(){return i.cbxSucursales_Search()}),e.qZA(),e.YNc(14,$o,3,0,"button",7),e.TgZ(15,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(l){return i.cbxSucursales_SelectedOption(l)}),e.YNc(17,Bo,2,2,"mat-option",10),e.YNc(18,Wo,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(19,"div",3)(20,"div",12)(21,"mat-form-field",13)(22,"mat-label"),e._uU(23,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(24,"mat-date-range-input",14),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(31);return e.KtG(l.open())}),e.TgZ(25,"input",15),e.NdJ("ngModelChange",function(l){return i.parametersForm.startDate=l}),e.qZA(),e.TgZ(26,"input",16),e.NdJ("ngModelChange",function(l){return i.parametersForm.endDate=l}),e.qZA()(),e.TgZ(27,"mat-hint"),e._uU(28,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(29,"mat-datepicker-toggle",17)(30,"mat-date-range-picker",null,18),e.qZA()()(),e.TgZ(32,"div",3)(33,"div",19)(34,"mat-label"),e._uU(35,"Vendedor: "),e.qZA(),e.TgZ(36,"mat-form-field",20)(37,"input",21,22),e.NdJ("ngModelChange",function(l){return i.parametersForm.sellerDesc=l})("keyup",function(){e.CHM(n);const l=e.MAs(38);return e.KtG(i.CBXskeyup(1,l.value))})("click",function(){return i.cbxSellers_Clear()}),e.qZA(),e.YNc(39,Ko,3,0,"button",7),e.TgZ(40,"mat-autocomplete",8,23),e.NdJ("optionSelected",function(l){return i.cbxSellers_SelectedOption(l)}),e.YNc(42,Vo,2,2,"mat-option",10),e.YNc(43,Xo,2,1,"mat-option",11),e.qZA()()(),e.TgZ(44,"div",24)(45,"mat-label"),e._uU(46,"Grupo: "),e.qZA(),e.TgZ(47,"mat-form-field",5),e.NdJ("click",function(){return i.cbxGroups_Search()}),e.TgZ(48,"input",25),e.NdJ("ngModelChange",function(l){return i.parametersForm.groupDesc=l})("input",function(){return i.cbxGroups_Search()}),e.qZA(),e.YNc(49,er,3,0,"button",7),e.TgZ(50,"mat-autocomplete",8,26),e.NdJ("optionSelected",function(l){return i.cbxGroups_SelectedOption(l)}),e.YNc(52,tr,2,2,"mat-option",10),e.YNc(53,ir,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(54,"div",27)(55,"div",4)(56,"div",28)(57,"button",29),e.NdJ("click",function(){return i.fn_CGet_rep_getUtilidades()}),e.TgZ(58,"mat-icon",30),e._uU(59,"search"),e.qZA(),e._uU(60," Buscar"),e.qZA(),e.TgZ(61,"button",31),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(62,"mat-icon",30),e._uU(63,"clear"),e.qZA(),e._uU(64," limpiar"),e.qZA()()()()()()()(),e.TgZ(65,"div",32)(66,"div",33)(67,"div",4)(68,"div",34),e._uU(69," Utilidad "),e.qZA()()(),e.TgZ(70,"div",3)(71,"div",35),e._UZ(72,"img",36),e.TgZ(73,"h2",37),e._uU(74),e.ALo(75,"currency"),e.qZA()(),e.YNc(76,nr,7,4,"div",38),e.qZA()(),e.TgZ(77,"div",39)(78,"div",40)(79,"div",4)(80,"div",41)(81,"table",42)(82,"thead")(83,"th",43),e._uU(84,"# Folio"),e.qZA(),e.TgZ(85,"th",44),e._uU(86,"Costo"),e.qZA(),e.TgZ(87,"th",44),e._uU(88,"Total"),e.qZA(),e.TgZ(89,"th",44),e._uU(90,"Pagos Hist\xf3rico"),e.qZA(),e.TgZ(91,"th",44),e._uU(92,"Pagos en el rango"),e.qZA(),e.TgZ(93,"th",44),e._uU(94,"Utilidad"),e.qZA(),e.TgZ(95,"th",43),e._uU(96,"Descripci\xf3n"),e.qZA()(),e.TgZ(97,"tbody"),e.YNc(98,ar,26,17,"tr",45),e.qZA()()()()()(),e._UZ(99,"app-spinner",46)}if(2&t){const n=e.MAs(16),o=e.MAs(31),l=e.MAs(41),p=e.MAs(51);e.xp6(1),e.Q6J("expanded",!0),e.xp6(12),e.Q6J("ngModel",i.parametersForm.sucursalDesc)("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",i.parametersForm.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.parametersForm.sucursalDesc),e.xp6(6),e.Q6J("rangePicker",o),e.xp6(1),e.Q6J("ngModel",i.parametersForm.startDate),e.xp6(1),e.Q6J("ngModel",i.parametersForm.endDate),e.xp6(3),e.Q6J("for",o),e.xp6(8),e.Q6J("ngModel",i.parametersForm.sellerDesc)("matAutocomplete",l),e.xp6(2),e.Q6J("ngIf",i.parametersForm.sellerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSellers),e.xp6(1),e.Q6J("ngIf",(null==i.parametersForm||null==i.parametersForm.sellerDesc?null:i.parametersForm.sellerDesc.length)>0&&(null==i.parametersForm||null==i.parametersForm.sellerResp?null:i.parametersForm.sellerResp.length)>0),e.xp6(5),e.Q6J("ngModel",i.parametersForm.groupDesc)("matAutocomplete",p),e.xp6(1),e.Q6J("ngIf",i.parametersForm.groupDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxGroupsList),e.xp6(1),e.Q6J("ngIf",0==i.cbxGroupsList.length&&i.parametersForm.groupDesc),e.xp6(21),e.Oqu(e.lcZ(75,24,i.sumUtilidad)),e.xp6(2),e.Q6J("ngIf",i.parametersForm.idSeller_idUser>0),e.xp6(22),e.Q6J("ngForOf",i.oData),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,x.nW,x.wx,x.zY,x.By,x._g,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,U.O,h.H9]}),a})();function rr(a,r){1&a&&(e.TgZ(0,"span",25),e._uU(1," delete_outline "),e.qZA())}function sr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",26),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.showActionsConf(n.idRol,n.name))}),e._uU(1," https "),e.qZA()}}function lr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.showMenusPermisos(n.idRol,n.name))}),e._uU(1," menu "),e.qZA()}}function cr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",17)(2,"div",18)(3,"span",19),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.edit(o.idRol))}),e._uU(4," edit "),e.qZA(),e.YNc(5,rr,2,0,"span",20),e.YNc(6,sr,2,0,"span",21),e.YNc(7,lr,2,0,"span",22),e.qZA()(),e.TgZ(8,"td",23),e._uU(9),e.qZA(),e.TgZ(10,"td",23),e._uU(11),e.qZA(),e.TgZ(12,"td",17),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td",17)(16,"mat-checkbox",24),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(5),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",t.active),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(e.xi3(14,7,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngModel",t.active)}}function pr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",28),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let ur=(()=>{class a{constructor(t,i,n){this.servicesGServ=t,this.rolesServ=i,this.authService=n,this._appMain=C.N.appMain,this.title="Lista de roles",this.bShowSpinner=!1,this.catlist=[],this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){this.authService.checkSession(),this.fn_getRolesListWithPage()}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editRol`,t)}changePagination(t){this.pagination=t,this.fn_getRolesListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getRolesListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}showMenusPermisos(t,i){this.servicesGServ.showModalWithParams(Ze,{relationType:"R",idRelation:t,description:"Permisos del Rol: "+i},"1500px").afterClosed().subscribe({next:o=>{}})}fn_getRolesListWithPage(){this.bShowSpinner=!0,this.rolesServ.CGetRolesListWithPage(this.pagination).subscribe({next:t=>{this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t.error.errors[0].msg),this.servicesGServ.showSnakbar(t.error.errors[0].msg),this.bShowSpinner=!1}})}showActionsConf(t,i){this.servicesGServ.showModalWithParams(xe,{relationType:"R",idRelation:t,description:"Permisos del Rol: "+i},"1500px").afterClosed().subscribe({next:o=>{}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(ue),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-role-list"]],decls:34,vars:4,consts:[[1,"divMain","textAlingCenter",2,"width","100%"],[1,"row"],[1,"col-md-1"],[1,"divSearch"],[1,"material-icons","manitaSobre","colorGreen",3,"click"],[1,"col-md-11"],[1,"divTitle-center"],[1,"row","top20px"],[1,"col-md-12"],[1,"with100"],["matInput","","placeholder","Ingrese un nombre",3,"change"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Editar Rol",1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorRed","matTooltip","Eliminar Rol",4,"ngIf"],["class","material-icons manitaSobre","matTooltip","Configurar permisos de acciones",3,"click",4,"ngIf"],["class","material-icons manitaSobre","matTooltip","Configurar permisos de Men\xfa",3,"click",4,"ngIf"],[1,"textAlingLeft"],["disabled","",1,"example-margin",3,"ngModel","ngModelChange"],["matTooltip","Eliminar Rol",1,"material-icons","manitaSobre","colorRed"],["matTooltip","Configurar permisos de acciones",1,"material-icons","manitaSobre",3,"click"],["matTooltip","Configurar permisos de Men\xfa",1,"material-icons","manitaSobre",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.NdJ("click",function(){return i.changeRoute("rol")}),e._uU(5," add_circle_outline "),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6),e._uU(8),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label"),e._uU(13,"B\xfaqueda del Rol por nombre o descripci\xf3n"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("change",function(o){return i.onChangeEvent(o)}),e.qZA()()()(),e.TgZ(15,"div",7)(16,"div",8)(17,"div",11)(18,"table",12)(19,"thead")(20,"th",13),e._uU(21,"Acciones"),e.qZA(),e.TgZ(22,"th",13),e._uU(23,"Nombre"),e.qZA(),e.TgZ(24,"th",13),e._uU(25,"Descripci\xf3n"),e.qZA(),e.TgZ(26,"th",13),e._uU(27,"Creado"),e.qZA(),e.TgZ(28,"th",13),e._uU(29,"Activo"),e.qZA()(),e.TgZ(30,"tbody"),e.YNc(31,cr,17,10,"tr",14),e.qZA()()(),e.YNc(32,pr,1,1,"app-pagination",15),e.qZA()()(),e._UZ(33,"app-spinner",16)),2&t&&(e.xp6(8),e.hij(" ",i.title," "),e.xp6(23),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.JJ,m.On,L.oG,d.KE,d.hX,N.Nt,O.gM,U.O,D,h.uU]}),a})(),Ne=(()=>{class a{constructor(t,i,n,o,l,p,_,g){this.router=t,this.activatedRoute=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.rolesServ=p,this.actionsServ=_,this.authService=g,this._appMain=C.N.appMain,this.title="Rol",this.bShowSpinner=!1,this.idRol=0,this.rolForm={idRol:0,name:"",description:"",active:!0}}ngOnInit(){this.authService.checkSession(),this._locale="mx",this._adapter.setLocale(this._locale),this.router.url.includes("editRol")&&(this.bShowSpinner=!0,this.activatedRoute.params.pipe((0,pe.w)(({id:t})=>this.rolesServ.CGetRolByID(t))).subscribe(t=>{0==t.status?(this.idRol=t.data.idRol,this.rolForm={idRol:t.data.idRol,name:t.data.name,description:t.data.description,active:t.data.active}):this.servicesGServ.showSnakbar(t.message),this.bShowSpinner=!1}))}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_saveRol(){this.bShowSpinner=!0,this.idRol>0?this.rolesServ.CUpdateRol(this.rolForm).subscribe({next:t=>{this.servicesGServ.showAlertIA(t),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}):this.rolesServ.CInsertRol(this.rolForm).subscribe({next:t=>{0===t.status&&(this.idRol=t.insertID,this.rolForm.idRol=t.insertID),this.servicesGServ.showAlertIA(t),this.bShowSpinner=!1},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(J.F0),e.Y36(J.gz),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(ue),e.Y36(K),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-role"]],decls:30,vars:7,consts:[[1,"divMain","textAlingCenter",2,"padding","30px"],[1,"divTitle-center"],[1,"row"],[1,"col-md-12"],["fxLayout.xs","column",2,"width","100%"],["matInput","","type","text",3,"ngModel","ngModelChange"],[1,"col-md-1"],[1,"example-margin",3,"ngModel","ngModelChange"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["mat-raised-button","","type","button",3,"click"],[3,"hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e._UZ(5,"br"),e.TgZ(6,"div",2)(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),e._uU(10,"Nombre:"),e.qZA(),e.TgZ(11,"input",5),e.NdJ("ngModelChange",function(o){return i.rolForm.name=o}),e.qZA()()()(),e.TgZ(12,"div",2)(13,"div",3)(14,"mat-form-field",4)(15,"mat-label"),e._uU(16,"Descripci\xf3n:"),e.qZA(),e.TgZ(17,"input",5),e.NdJ("ngModelChange",function(o){return i.rolForm.description=o}),e.qZA()()()(),e.TgZ(18,"div",2)(19,"div",6)(20,"mat-checkbox",7),e.NdJ("ngModelChange",function(o){return i.rolForm.active=o}),e._uU(21,"Activo"),e.qZA()()(),e.TgZ(22,"div",8)(23,"div",3)(24,"div",9)(25,"button",10),e.NdJ("click",function(){return i.fn_saveRol()}),e._uU(26,"Guardar"),e.qZA(),e.TgZ(27,"button",11),e.NdJ("click",function(){return i.changeRoute("roleList")}),e._uU(28,"Cancelar"),e.qZA()()()()()()(),e._UZ(29,"app-spinner",12)),2&t&&(e.xp6(2),e.AsE(" ",i.idRol?"Editar":"Nuevo"," ",i.title," "),e.xp6(9),e.Q6J("ngModel",i.rolForm.name),e.xp6(6),e.Q6J("ngModel",i.rolForm.description),e.xp6(3),e.Q6J("ngModel",i.rolForm.active),e.xp6(5),e.Q6J("disabled",0==i.rolForm.name.length),e.xp6(4),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[m.Fj,m.JJ,m.On,v.lW,L.oG,d.KE,d.hX,N.Nt,U.O]}),a})();const mr=["barCode"];function dr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_changeStatusPhysicalInventory(2))}),e.TgZ(1,"mat-icon",19),e._uU(2,"done"),e.qZA(),e._uU(3," Completar"),e.qZA()}}function _r(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_changeStatusPhysicalInventory(3))}),e.TgZ(1,"mat-icon",19),e._uU(2,"verified_user"),e.qZA(),e._uU(3," Verificar"),e.qZA()}}function hr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_changeStatusPhysicalInventory(4))}),e.TgZ(1,"mat-icon",19),e._uU(2,"done_all"),e.qZA(),e._uU(3," Terminar"),e.qZA()}}function gr(a,r){1&a&&(e.TgZ(0,"div",20)(1,"div",2)(2,"div",21)(3,"span",22),e._uU(4,"check_circle"),e.qZA(),e.TgZ(5,"h1",23),e._uU(6,"INVENTARIO F\xcdSICO PERFECTO"),e.qZA()()()())}function fr(a,r){if(1&a&&(e.TgZ(0,"div",20)(1,"div",24)(2,"div",3)(3,"div",25),e._uU(4," Faltantes "),e.qZA()()(),e.TgZ(5,"div",2)(6,"div",26)(7,"h1"),e._uU(8),e.qZA()(),e.TgZ(9,"div",27),e._UZ(10,"img",28),e.TgZ(11,"h2",29),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.TgZ(14,"div",27),e._UZ(15,"img",28),e.TgZ(16,"h2",29),e._uU(17),e.ALo(18,"currency"),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(8),e.hij("",t.oPhysicalInventoryHeader.faltantePz," PZ"),e.xp6(4),e.hij("Costo Total: ",e.lcZ(13,3,t.oPhysicalInventoryHeader.faltanteCostMXN),""),e.xp6(5),e.hij("Importe Total: ",e.lcZ(18,5,t.oPhysicalInventoryHeader.faltantePriceMXN),"")}}function Cr(a,r){if(1&a&&(e.TgZ(0,"div",20)(1,"div",24)(2,"div",3)(3,"div",25),e._uU(4," Sobrantes "),e.qZA()()(),e.TgZ(5,"div",2)(6,"div",26)(7,"h1"),e._uU(8),e.qZA()(),e.TgZ(9,"div",27),e._UZ(10,"img",28),e.TgZ(11,"h2",29),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.TgZ(14,"div",27),e._UZ(15,"img",28),e.TgZ(16,"h2",29),e._uU(17),e.ALo(18,"currency"),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(8),e.hij("",t.oPhysicalInventoryHeader.sobrantePz," PZ"),e.xp6(4),e.hij("Costo Total: ",e.lcZ(13,3,t.oPhysicalInventoryHeader.sobranteCostMXN),""),e.xp6(5),e.hij("Importe Total: ",e.lcZ(18,5,t.oPhysicalInventoryHeader.sobrantePriceMXN),"")}}function br(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",30)(2,"mat-form-field",31)(3,"mat-label"),e._uU(4,"C\xf3digo de barras"),e.qZA(),e.TgZ(5,"mat-icon",19),e._uU(6,"qr_code"),e.qZA(),e.TgZ(7,"input",32,33),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.productData.barCode=n)})("keyup.enter",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.ev_fn_barCode_keyup_enter(n))}),e.qZA()()(),e.TgZ(9,"div",34)(10,"mat-form-field",35)(11,"mat-label"),e._uU(12,"Descripci\xf3n"),e.qZA(),e.TgZ(13,"input",36),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.productData.description=n)}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.productData.barCode),e.xp6(6),e.Q6J("ngModel",t.productData.description)}}function Sr(a,r){1&a&&(e.TgZ(0,"span",49),e._uU(1,"check_circle"),e.qZA())}function vr(a,r){1&a&&(e.TgZ(0,"span",50),e._uU(1,"error"),e.qZA())}function xr(a,r){1&a&&(e.TgZ(0,"span",51),e._uU(1,"error"),e.qZA())}function Zr(a,r){1&a&&(e.TgZ(0,"span",50),e._uU(1,"autorenew"),e.qZA())}function Tr(a,r){if(1&a&&(e.TgZ(0,"td",45),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.cMostrador)}}function yr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"td",14)(1,"div",52)(2,"span",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.ev_onMostradorChange(n,-1))}),e._uU(3,"remove"),e.qZA(),e.TgZ(4,"input",54),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.cMostrador=n)}),e.qZA(),e.TgZ(5,"span",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.ev_onMostradorChange(n,1))}),e._uU(6,"add"),e.qZA()()()}if(2&a){const t=e.oxw().$implicit;e.xp6(4),e.Q6J("ngModel",t.cMostrador)}}function Ar(a,r){if(1&a&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.comments)}}function Fr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"td",14)(1,"div",52)(2,"textarea",55),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.comments=n)}),e.qZA()()()}if(2&a){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngModel",t.comments)}}function Ur(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",37)(2,"div",2)(3,"div",38)(4,"mat-icon",39),e._uU(5,"qr_code"),e.qZA()(),e.TgZ(6,"div",40)(7,"label",41),e._uU(8),e.qZA()()()(),e.TgZ(9,"td",37)(10,"div",2)(11,"div",38),e.YNc(12,Sr,2,0,"span",42),e.YNc(13,vr,2,0,"span",43),e.YNc(14,xr,2,0,"span",44),e.YNc(15,Zr,2,0,"span",43),e.qZA(),e.TgZ(16,"div",40)(17,"label",41),e._uU(18),e.qZA()()()(),e.TgZ(19,"td",45),e._uU(20),e.qZA(),e.YNc(21,Tr,2,1,"td",46),e.YNc(22,yr,7,1,"td",47),e.TgZ(23,"td",45),e._uU(24),e.qZA(),e.YNc(25,Ar,2,1,"td",48),e.YNc(26,Fr,3,1,"td",47),e.qZA()),2&a){const t=r.$implicit,i=e.oxw();e.xp6(8),e.Oqu(t.barCode),e.xp6(4),e.Q6J("ngIf",0==t.cDiff),e.xp6(1),e.Q6J("ngIf",t.cDiff<0),e.xp6(1),e.Q6J("ngIf",t.cDiff>0&&1!=i.oPhysicalInventoryHeader.idStatus),e.xp6(1),e.Q6J("ngIf",t.cDiff>0&&1==i.oPhysicalInventoryHeader.idStatus),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.cCantidad),e.xp6(1),e.Q6J("ngIf",2==i.oPhysicalInventoryHeader.idStatus||4==i.oPhysicalInventoryHeader.idStatus),e.xp6(1),e.Q6J("ngIf",1==i.oPhysicalInventoryHeader.idStatus||3==i.oPhysicalInventoryHeader.idStatus),e.xp6(2),e.Oqu(t.cDiff),e.xp6(1),e.Q6J("ngIf",2==i.oPhysicalInventoryHeader.idStatus||4==i.oPhysicalInventoryHeader.idStatus),e.xp6(1),e.Q6J("ngIf",1==i.oPhysicalInventoryHeader.idStatus||3==i.oPhysicalInventoryHeader.idStatus)}}function Pr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",56),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let wr=(()=>{class a{constructor(t,i,n,o,l,p,_){this.dialogRef=t,this.ODataP=i,this._adapter=n,this._locale=o,this.servicesGServ=l,this.authServ=p,this.productsServ=_,this.bShowSpinner=!1,this.catlist=[],this.oPhysicalInventoryHeader={idPhysicalInventory:0,createDate:"",createDateDate:"",createDateHours:"",idSucursal:0,idStatus:0,statusName:"",idUser:0,userName:"",bOK:0,bOKNow:0,active:0,faltantePz:0,faltanteCostMXN:0,faltantePriceMXN:0,sobrantePz:0,sobranteCostMXN:0,sobrantePriceMXN:0},this.productData={idProduct:0,barCode:"",description:""},this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.bShowActionAuthorization=!1}ngOnInit(){this._locale="mx",this._adapter.setLocale(this._locale),this.ODataP.idPhysicalInventory.length>0&&this.fn_getPhysicalInventoryHeader()}hasPermissionAction(t){return this.authServ.hasPermissionAction(t)}fn_CerrarMDL(t){this.dialogRef.close(t)}changePagination(t){this.pagination=t,this.fn_getPhysicalInventoryDetailListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getPhysicalInventoryDetailListWithPage()}ev_onMostradorChange(t,i){this.bShowActionAuthorization||(this.bShowActionAuthorization=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 modificando el dato del mostrador","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:n=>{n?this.servicesGServ.showModalWithParams(k,{actionName:"inv_ModifMostradorInventarioFisico",bShowAlert:!1},"400px").afterClosed().subscribe({next:l=>{l?(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.productsServ.CUpdateMostradorPhysicalInventoryDetail({idPhysicalInventory:t.idPhysicalInventory,idPhysicalInventoryDetail:t.idPhysicalInventoryDetail,cantidad:i}).subscribe({next:_=>{0===_.status&&this.fn_getPhysicalInventoryHeader(),this.servicesGServ.showAlertIA(_),this.bShowSpinner=!1},error:_=>{this.servicesGServ.showSnakbar(_.error.message),this.bShowSpinner=!1,this.bShowActionAuthorization=!1}})):(this.bShowActionAuthorization=!1,setTimeout(()=>{1==this.oPhysicalInventoryHeader.idStatus&&this.barCode.nativeElement.focus()},1e3))}}):(this.bShowActionAuthorization=!1,setTimeout(()=>{1==this.oPhysicalInventoryHeader.idStatus&&this.barCode.nativeElement.focus()},1e3))}}))}ev_fn_barCode_keyup_enter(t){13==t.keyCode&&this.productData.barCode.length>0&&this.fn_verifyProductInPhysicalInventoryDetail()}fn_getPhysicalInventoryHeader(){this.catlist=[],this.bShowSpinner=!0,this.productsServ.CGetPhysicalInventoryHeader(this.ODataP.idPhysicalInventory).subscribe({next:t=>{console.log(t),0==t.status&&(this.oPhysicalInventoryHeader=t.data,this.fn_getPhysicalInventoryDetailListWithPage(),setTimeout(()=>{1==this.oPhysicalInventoryHeader.idStatus&&this.barCode.nativeElement.focus()},1e3))},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_changeStatusPhysicalInventory(t){this.bShowActionAuthorization?this.bShowActionAuthorization=!1:(this.bShowActionAuthorization=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de cambiar el Estatus del inventario f\xedsico","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&(3==t||4==t?this.servicesGServ.showModalWithParams(k,{actionName:3==t?"inv_VerificarInventarioFisico":"inv_TerminarinventarioFisico",bShowAlert:!1},"400px").afterClosed().subscribe({next:l=>{l?(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.productsServ.CChangeStatusPhysicalInventory({idPhysicalInventory:this.ODataP.idPhysicalInventory,idStatus:t}).subscribe({next:_=>{0===_.status&&this.fn_getPhysicalInventoryHeader(),this.servicesGServ.showAlertIA(_),this.bShowSpinner=!1},error:_=>{this.servicesGServ.showSnakbar(_.error.message),this.bShowSpinner=!1}})):this.bShowActionAuthorization=!1}}):(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.productsServ.CChangeStatusPhysicalInventory({idPhysicalInventory:this.ODataP.idPhysicalInventory,idStatus:t}).subscribe({next:l=>{0===l.status&&this.fn_getPhysicalInventoryHeader(),this.servicesGServ.showAlertIA(l),this.bShowSpinner=!1},error:l=>{this.servicesGServ.showSnakbar(l.error.message),this.bShowSpinner=!1}})))}}))}fn_verifyProductInPhysicalInventoryDetail(){this.productData.barCode.length>0&&(this.bShowSpinner=!0,this.productsServ.CVerifyPhysicalInventoryDetail({idPhysicalInventory:this.ODataP.idPhysicalInventory,barCode:this.productData.barCode}).subscribe({next:i=>{console.log(i),this.productData.description=i.message,this.productData.barCode="",this.fn_getPhysicalInventoryDetailListWithPage(),this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}}))}fn_getPhysicalInventoryDetailListWithPage(){this.catlist=[],this.bShowSpinner=!0,this.productsServ.CGetPhysicalInventoryDetailListWithPage(this.pagination,this.ODataP.idPhysicalInventory).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(f._A),e.Y36(f.Ad),e.Y36(A.$),e.Y36(T.e),e.Y36(R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-physical-inventory"]],viewQuery:function(t,i){if(1&t&&e.Gf(mr,5),2&t){let n;e.iGM(n=e.CRH())&&(i.barCode=n.first)}},decls:39,vars:11,consts:[[2,"padding","10px"],["mat-icon-button","",2,"position","absolute","top","10px","right","10px",3,"click"],[1,"row"],[1,"col-md-12"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],["class","divSection",4,"ngIf"],["class","row top20px",4,"ngIf"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[1,"textAlingCenter","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[1,"divSection"],[1,"col-md-12","inlineDIV"],[1,"material-icons","manitaSobre","colorGreen","inlineObj"],[1,"inlineObj"],[1,"row",2,"margin-top","-35px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-2"],[1,"col-md-5",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],[1,"col-md-4"],["fxLayout.xs","column",1,"with100"],["matInput","","placeholder","Ingrese un C\xf3digo de barras",3,"ngModel","ngModelChange","keyup.enter"],["barCode",""],[1,"col-md-8"],[1,"with100"],["matInput","","placeholder","","readonly","",3,"ngModel","ngModelChange"],[1,"textAlingLeft"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[1,"col-md-10"],[2,"margin-left","10px"],["class","material-icons manitaSobre colorGreen",4,"ngIf"],["class","material-icons manitaSobre colorBlue",4,"ngIf"],["class","material-icons manitaSobre colorRed",4,"ngIf"],[1,"textAlingRight"],["class","textAlingRight",4,"ngIf"],["class","textAlingCenter padding-th",4,"ngIf"],["class","textAlingLeft",4,"ngIf"],[1,"material-icons","manitaSobre","colorGreen"],[1,"material-icons","manitaSobre","colorBlue"],[1,"material-icons","manitaSobre","colorRed"],[1,"inlineDIV",2,"width","180px"],[1,"material-icons","manitaSobre","colorGreen","inlineObj",3,"click"],["matInput","","type","number","readonly","",1,"textAlingCenter","colorGreen","inlineObj",2,"width","55px",3,"ngModel","ngModelChange"],["matInput","",3,"ngModel","ngModelChange"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"h1"),e._uU(7),e.qZA()()(),e.TgZ(8,"div",4)(9,"div",3)(10,"div",5),e.YNc(11,dr,4,0,"button",6),e.YNc(12,_r,4,0,"button",6),e.YNc(13,hr,4,0,"button",6),e.qZA()()(),e.YNc(14,gr,7,0,"div",7),e.YNc(15,fr,19,7,"div",7),e.YNc(16,Cr,19,7,"div",7),e.YNc(17,br,14,2,"div",8),e.TgZ(18,"div",9)(19,"div",3)(20,"div",10)(21,"table",11)(22,"thead")(23,"th",12),e._uU(24,"C\xf3digo de barras"),e.qZA(),e.TgZ(25,"th",12),e._uU(26,"Nombre"),e.qZA(),e.TgZ(27,"th",13),e._uU(28,"Inventario"),e.qZA(),e.TgZ(29,"th",14),e._uU(30,"Mostrador"),e.qZA(),e.TgZ(31,"th",13),e._uU(32,"Diferencia"),e.qZA(),e.TgZ(33,"th",12),e._uU(34,"Comentarios"),e.qZA()(),e.TgZ(35,"tbody"),e.YNc(36,Ur,27,12,"tr",15),e.qZA()()(),e.YNc(37,Pr,1,1,"app-pagination",16),e.qZA()()(),e._UZ(38,"app-spinner",17)),2&t&&(e.xp6(7),e.hij("Inventario f\xedsico #",i.ODataP.idPhysicalInventory,""),e.xp6(4),e.Q6J("ngIf",1==i.oPhysicalInventoryHeader.idStatus),e.xp6(1),e.Q6J("ngIf",1==i.oPhysicalInventoryHeader.idStatus||2==i.oPhysicalInventoryHeader.idStatus),e.xp6(1),e.Q6J("ngIf",1==i.oPhysicalInventoryHeader.idStatus||2==i.oPhysicalInventoryHeader.idStatus||3==i.oPhysicalInventoryHeader.idStatus),e.xp6(1),e.Q6J("ngIf",1!=i.oPhysicalInventoryHeader.idStatus&&i.oPhysicalInventoryHeader.bOK),e.xp6(1),e.Q6J("ngIf",1!=i.oPhysicalInventoryHeader.idStatus&&0!=i.oPhysicalInventoryHeader.faltantePz),e.xp6(1),e.Q6J("ngIf",1!=i.oPhysicalInventoryHeader.idStatus&&0!=i.oPhysicalInventoryHeader.sobrantePz),e.xp6(1),e.Q6J("ngIf",1==i.oPhysicalInventoryHeader.idStatus),e.xp6(19),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,m.Fj,m.wV,m.JJ,m.On,v.lW,v.RK,d.KE,d.hX,d.qo,N.Nt,P.Hw,U.O,D,h.H9]}),a})();function Nr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSucursales_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ir(a,r){if(1&a&&(e.TgZ(0,"mat-option",42),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Mr(a,r){1&a&&(e.TgZ(0,"mat-option",43),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function qr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxGroups_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Dr(a,r){if(1&a&&(e.TgZ(0,"mat-option",42),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Lr(a,r){1&a&&(e.TgZ(0,"mat-option",43),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function kr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxFamilies_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Or(a,r){if(1&a&&(e.TgZ(0,"mat-option",42),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Jr(a,r){1&a&&(e.TgZ(0,"mat-option",43),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function Gr(a,r){if(1&a&&(e.TgZ(0,"div",44)(1,"div",45)(2,"div",11)(3,"div",46),e._uU(4),e.qZA()()(),e.TgZ(5,"div",3)(6,"div",47)(7,"mat-icon",48),e._uU(8,"error"),e.qZA(),e.TgZ(9,"h1",49),e._uU(10),e.qZA()(),e.TgZ(11,"div",50),e._UZ(12,"img",51),e.TgZ(13,"h2",52),e._uU(14),e.ALo(15,"currency"),e.qZA()(),e.TgZ(16,"div",50),e._UZ(17,"img",51),e.TgZ(18,"h2",52),e._uU(19),e.ALo(20,"currency"),e.qZA()()(),e.TgZ(21,"div",3)(22,"div",47)(23,"mat-icon",53),e._uU(24,"error"),e.qZA(),e.TgZ(25,"h1",49),e._uU(26),e.qZA()(),e.TgZ(27,"div",50),e._UZ(28,"img",51),e.TgZ(29,"h2",52),e._uU(30),e.ALo(31,"currency"),e.qZA()(),e.TgZ(32,"div",50),e._UZ(33,"img",51),e.TgZ(34,"h2",52),e._uU(35),e.ALo(36,"currency"),e.qZA()()()()),2&a){const t=r.$implicit;e.xp6(4),e.hij(" ",t.sucursalDesc," "),e.xp6(6),e.hij("Faltantes: ",t.faltantePz," PZ"),e.xp6(4),e.hij("Costo Total: ",e.lcZ(15,7,t.faltanteCostMXN),""),e.xp6(5),e.hij("Importe Total: ",e.lcZ(20,9,t.faltantePriceMXN),""),e.xp6(7),e.hij("Sobrantes: ",t.sobrantePz," PZ"),e.xp6(4),e.hij("Costo Total: ",e.lcZ(31,11,t.sobranteCostMXN),""),e.xp6(5),e.hij("Importe Total: ",e.lcZ(36,13,t.sobrantePriceMXN),"")}}function Rr(a,r){1&a&&(e.TgZ(0,"span",69),e._uU(1," delete_outline "),e.qZA())}function Er(a,r){1&a&&(e.TgZ(0,"mat-icon",70),e._uU(1,"autorenew"),e.qZA())}function Qr(a,r){1&a&&(e.TgZ(0,"mat-icon",71),e._uU(1,"check_circle"),e.qZA())}function Yr(a,r){1&a&&(e.TgZ(0,"mat-icon",70),e._uU(1,"error"),e.qZA())}function jr(a,r){1&a&&(e.TgZ(0,"span",72),e._uU(1,"autorenew"),e.qZA())}function Hr(a,r){1&a&&(e.TgZ(0,"span",73),e._uU(1,"done"),e.qZA())}function zr(a,r){1&a&&(e.TgZ(0,"span",72),e._uU(1,"verified_user"),e.qZA())}function $r(a,r){1&a&&(e.TgZ(0,"span",73),e._uU(1,"done_all"),e.qZA())}function Br(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",54)(2,"div",55)(3,"span",56),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.fn_ShowPhysicalInventory(o.idPhysicalInventory))}),e._uU(4," edit "),e.qZA(),e.YNc(5,Rr,2,0,"span",57),e.qZA()(),e.TgZ(6,"td",58)(7,"div",3)(8,"div",59),e.YNc(9,Er,2,0,"mat-icon",60),e.YNc(10,Qr,2,0,"mat-icon",61),e.YNc(11,Yr,2,0,"mat-icon",60),e.qZA(),e.TgZ(12,"div",62)(13,"label",63),e._uU(14),e.qZA()()()(),e.TgZ(15,"td",58)(16,"div",3)(17,"div",59),e.YNc(18,jr,2,0,"span",64),e.YNc(19,Hr,2,0,"span",65),e.YNc(20,zr,2,0,"span",64),e.YNc(21,$r,2,0,"span",65),e.qZA(),e.TgZ(22,"div",62)(23,"label",63),e._uU(24),e.qZA()()()(),e.TgZ(25,"td",54)(26,"div",66)(27,"div",3)(28,"div",59)(29,"mat-icon",67),e._uU(30,"calendar_today"),e.qZA()(),e.TgZ(31,"div",62)(32,"label",63),e._uU(33),e.qZA(),e.TgZ(34,"label",63),e._uU(35),e.qZA()()()()(),e.TgZ(36,"td",58),e._uU(37),e.qZA(),e.TgZ(38,"td",58),e._uU(39),e.qZA(),e.TgZ(40,"td",54)(41,"mat-checkbox",68),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(5),e.Q6J("ngIf",t.active),e.xp6(4),e.Q6J("ngIf",1==t.idStatus),e.xp6(1),e.Q6J("ngIf",1==t.bOK&&1!=t.idStatus),e.xp6(1),e.Q6J("ngIf",0==t.bOK&&1!=t.idStatus),e.xp6(3),e.Oqu(t.idPhysicalInventory),e.xp6(4),e.Q6J("ngIf",1==t.idStatus),e.xp6(1),e.Q6J("ngIf",2==t.idStatus),e.xp6(1),e.Q6J("ngIf",3==t.idStatus),e.xp6(1),e.Q6J("ngIf",4==t.idStatus),e.xp6(3),e.Oqu(t.statusName),e.xp6(9),e.Oqu(t.createDateDate),e.xp6(2),e.Oqu(t.createDateHours),e.xp6(2),e.Oqu(t.sucursalName),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Q6J("ngModel",t.active)}}function Wr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",74),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}let Kr=(()=>{class a{constructor(t,i,n,o,l,p,_,g,u){this.servicesGServ=t,this.productsServ=i,this.fb=n,this._adapter=o,this._locale=l,this.familiesServ=p,this.groupsServ=_,this.sucursalesServ=g,this.authServ=u,this._appMain=C.N.appMain,this._idSucursal=C.N.idSucursal,this.idUserLogON=0,this.title="Lista de Products",this.bShowSpinner=!1,this.catlist=[],this.physicalInventoryHeaderBySucursal=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={idSucursal:0,sucursalDesc:"",startDate:"",endDate:"",idFamily:0,familyDesc:"",idGroup:0,groupDesc:""},this.bShowActionAuthorization=!1,this.cbxFamiliesList=[],this.cbxGroupsList=[],this.cbxSucursales=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale)})()}parametersForm_Clear(){this.parametersForm={idSucursal:0,sucursalDesc:"",startDate:"",endDate:"",idFamily:0,familyDesc:"",idGroup:0,groupDesc:""},this.fn_getPhysicalInventoryListWithPage()}changePagination(t){this.pagination=t,this.fn_getPhysicalInventoryListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getPhysicalInventoryListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editInventarioFisico`,t)}fn_ShowPhysicalInventory(t){this.servicesGServ.showModalWithParams(wr,{idPhysicalInventory:t},"2500px").afterClosed().subscribe({next:n=>{this.fn_getPhysicalInventoryListWithPage()}})}fn_getPhysicalInventoryHeaderBySucursal(){this.productsServ.CGetPhysicalInventoryHeaderBySucursal(this.parametersForm).subscribe({next:t=>{console.log(t),this.physicalInventoryHeaderBySucursal=t.data.rows},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data)}})}fn_startPhysicInventory(){this.bShowActionAuthorization||(this.bShowActionAuthorization=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de iniciar un inventario f\xedsico con estos filtros","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t?this.servicesGServ.showModalWithParams(k,{actionName:"inv_CrearInventarioFisico",bShowAlert:!1},"400px").afterClosed().subscribe({next:n=>{n?(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.productsServ.CStartPhysicInventory(this.parametersForm).subscribe({next:o=>{0===o.status?(this.parametersForm.idGroup=0,this.parametersForm.groupDesc="",this.parametersForm.idFamily=0,this.parametersForm.familyDesc="",this.fn_ShowPhysicalInventory(o.idPhysicalInventory),this.fn_getPhysicalInventoryListWithPage()):this.servicesGServ.showAlertIA(o),this.bShowSpinner=!1},error:o=>{this.servicesGServ.showSnakbar(o.error.message),this.bShowSpinner=!1}})):this.bShowActionAuthorization=!1}}):this.bShowActionAuthorization=!1}}))}fn_getPhysicalInventoryListWithPage(){this.catlist=[],this.physicalInventoryHeaderBySucursal=[],this.bShowSpinner=!0,this.productsServ.CGetPhysicalInventoryListWithPage(this.pagination,this.parametersForm).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1,this.fn_getPhysicalInventoryHeaderBySucursal()},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}cbxFamilies_Search(){this.familiesServ.CCbxGetFamiliesCombo(this.parametersForm.familyDesc).subscribe({next:t=>{this.cbxFamiliesList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxFamilies_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.idFamily=i.idFamily,this.parametersForm.familyDesc=i.name}cbxFamilies_Clear(){this.parametersForm.idFamily=0,this.parametersForm.familyDesc=""}cbxGroups_Search(){this.groupsServ.CCbxGetGroupsCombo(this.parametersForm.groupDesc).subscribe({next:t=>{this.cbxGroupsList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxGroups_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.idGroup=i.idGroup,this.parametersForm.groupDesc=i.name}cbxGroups_Clear(){this.parametersForm.idGroup=0,this.parametersForm.groupDesc=""}cbxSucursales_Search(){this.sucursalesServ.CCbxGetSucursalesCombo(this.parametersForm.sucursalDesc,this.idUserLogON).subscribe({next:t=>{this.cbxSucursales=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSucursales_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;console.log(i),this.parametersForm.idSucursal=i.idSucursal,this.parametersForm.sucursalDesc=i.name}cbxSucursales_Clear(){this.parametersForm.idSucursal=0,this.parametersForm.sucursalDesc=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(R),e.Y36(m.qu),e.Y36(f._A),e.Y36(f.Ad),e.Y36(oe),e.Y36(ne),e.Y36(W),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-physical-inventory-list"]],decls:92,vars:25,consts:[[1,"divMain",2,"margin-top","10px !important",3,"expanded","opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-md-12"],[1,"col-md-6"],[2,"width","100%",3,"click"],["type","text","id","cbxSucursal","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSucursal","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-3"],["type","text","id","cbxGroups","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input"],["cbxGroups","matAutocomplete"],["type","text","id","cbxFamilies","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input"],["cbxFamilies","matAutocomplete"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"disabled","click"],["class","divSection",4,"ngFor","ngForOf"],[1,"divMain",2,"width","100%","margin-top","10px !important"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"divSection"],[1,"row",2,"margin-top","-35px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-4","inlineDIV"],["matPrefix","",1,"material-icons","manitaSobre","colorRed","inlineObj",2,"margin-right","5px"],[1,"inlineObj"],[1,"col-md-4",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],["matPrefix","",1,"material-icons","manitaSobre","colorBlue","inlineObj",2,"margin-right","5px"],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Editar inventario f\xedsico",1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorRed","matTooltip","Eliminar inventario f\xedsico",4,"ngIf"],[1,"textAlingLeft"],[1,"col-md-1"],["style","margin-top: -5px;","matPrefix","","class","material-icons manitaSobre colorBlue",4,"ngIf"],["style","margin-top: -5px;","matPrefix","","class","material-icons manitaSobre colorGreen",4,"ngIf"],[1,"col-md-10"],[2,"margin-left","10px"],["class","material-icons manitaSobre colorBlue",4,"ngIf"],["class","material-icons manitaSobre colorGreen",4,"ngIf"],[2,"width","120px"],["matPrefix","",1,"my-icon",2,"margin-top","5px"],["disabled","",1,"example-margin",3,"ngModel","ngModelChange"],["matTooltip","Eliminar inventario f\xedsico",1,"material-icons","manitaSobre","colorRed"],["matPrefix","",1,"material-icons","manitaSobre","colorBlue",2,"margin-top","-5px"],["matPrefix","",1,"material-icons","manitaSobre","colorGreen",2,"margin-top","-5px"],[1,"material-icons","manitaSobre","colorBlue"],[1,"material-icons","manitaSobre","colorGreen"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros de inventarios f\xedsicos "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(10,"mat-date-range-input",6),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(17);return e.KtG(l.open())}),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(l){return i.parametersForm.startDate=l}),e.qZA(),e.TgZ(12,"input",8),e.NdJ("ngModelChange",function(l){return i.parametersForm.endDate=l}),e.qZA()(),e.TgZ(13,"mat-hint"),e._uU(14,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(15,"mat-datepicker-toggle",9)(16,"mat-date-range-picker",null,10),e.qZA()()(),e.TgZ(18,"div",3)(19,"div",11),e._UZ(20,"br"),e.TgZ(21,"div",3)(22,"div",12)(23,"mat-label"),e._uU(24,"Sucursal: "),e.qZA(),e.TgZ(25,"mat-form-field",13),e.NdJ("click",function(){return i.cbxSucursales_Search()}),e.TgZ(26,"input",14),e.NdJ("ngModelChange",function(l){return i.parametersForm.sucursalDesc=l})("input",function(){return i.cbxSucursales_Search()}),e.qZA(),e.YNc(27,Nr,3,0,"button",15),e.TgZ(28,"mat-autocomplete",16,17),e.NdJ("optionSelected",function(l){return i.cbxSucursales_SelectedOption(l)}),e.YNc(30,Ir,2,2,"mat-option",18),e.YNc(31,Mr,2,0,"mat-option",19),e.qZA()()(),e.TgZ(32,"div",20)(33,"mat-label"),e._uU(34,"Grupo: "),e.qZA(),e.TgZ(35,"mat-form-field",13),e.NdJ("click",function(){return i.cbxGroups_Search()}),e.TgZ(36,"input",21),e.NdJ("ngModelChange",function(l){return i.parametersForm.groupDesc=l})("input",function(){return i.cbxGroups_Search()}),e.qZA(),e.YNc(37,qr,3,0,"button",15),e.TgZ(38,"mat-autocomplete",16,22),e.NdJ("optionSelected",function(l){return i.cbxGroups_SelectedOption(l)}),e.YNc(40,Dr,2,2,"mat-option",18),e.YNc(41,Lr,2,0,"mat-option",19),e.qZA()()(),e.TgZ(42,"div",20)(43,"mat-label"),e._uU(44,"Familia: "),e.qZA(),e.TgZ(45,"mat-form-field",13),e.NdJ("click",function(){return i.cbxFamilies_Search()}),e.TgZ(46,"input",23),e.NdJ("ngModelChange",function(l){return i.parametersForm.familyDesc=l})("input",function(){return i.cbxFamilies_Search()}),e.qZA(),e.YNc(47,kr,3,0,"button",15),e.TgZ(48,"mat-autocomplete",16,24),e.NdJ("optionSelected",function(l){return i.cbxFamilies_SelectedOption(l)}),e.YNc(50,Or,2,2,"mat-option",18),e.YNc(51,Jr,2,0,"mat-option",19),e.qZA()()()(),e.TgZ(52,"div",25)(53,"div",11)(54,"div",26)(55,"button",27),e.NdJ("click",function(){return i.fn_getPhysicalInventoryListWithPage()}),e.TgZ(56,"mat-icon",28),e._uU(57,"search"),e.qZA(),e._uU(58," Buscar"),e.qZA(),e.TgZ(59,"button",29),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(60,"mat-icon",28),e._uU(61,"clear"),e.qZA(),e._uU(62," limpiar"),e.qZA(),e.TgZ(63,"button",30),e.NdJ("click",function(){return i.fn_startPhysicInventory()}),e.TgZ(64,"mat-icon",28),e._uU(65,"inbox"),e.qZA(),e._uU(66," GENERAR INVENTARIO F\xcdSICO CON ESTOS FILTROS"),e.qZA()()()()()()()(),e.YNc(67,Gr,37,15,"div",31),e.TgZ(68,"div",32)(69,"div",33)(70,"div",11)(71,"div",34)(72,"table",35)(73,"thead")(74,"th",36),e._uU(75,"Acciones"),e.qZA(),e.TgZ(76,"th",36),e._uU(77,"Folio"),e.qZA(),e.TgZ(78,"th",37),e._uU(79,"Estatus"),e.qZA(),e.TgZ(80,"th",36),e._uU(81,"Fecha"),e.qZA(),e.TgZ(82,"th",37),e._uU(83,"Sucursal"),e.qZA(),e.TgZ(84,"th",37),e._uU(85,"Usuario"),e.qZA(),e.TgZ(86,"th",37),e._uU(87,"Activo"),e.qZA()(),e.TgZ(88,"tbody"),e.YNc(89,Br,42,15,"tr",38),e.qZA()()(),e.YNc(90,Wr,1,1,"app-pagination",39),e.qZA()()(),e._UZ(91,"app-spinner",40)}if(2&t){const n=e.MAs(17),o=e.MAs(29),l=e.MAs(39),p=e.MAs(49);e.xp6(1),e.Q6J("expanded",!0),e.xp6(9),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("ngModel",i.parametersForm.startDate),e.xp6(1),e.Q6J("ngModel",i.parametersForm.endDate),e.xp6(3),e.Q6J("for",n),e.xp6(11),e.Q6J("ngModel",i.parametersForm.sucursalDesc)("matAutocomplete",o),e.xp6(1),e.Q6J("ngIf",i.parametersForm.sucursalDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSucursales),e.xp6(1),e.Q6J("ngIf",0==i.cbxSucursales.length&&i.parametersForm.sucursalDesc),e.xp6(5),e.Q6J("ngModel",i.parametersForm.groupDesc)("matAutocomplete",l),e.xp6(1),e.Q6J("ngIf",i.parametersForm.groupDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxGroupsList),e.xp6(1),e.Q6J("ngIf",0==i.cbxGroupsList.length&&i.parametersForm.groupDesc),e.xp6(5),e.Q6J("ngModel",i.parametersForm.familyDesc)("matAutocomplete",p),e.xp6(1),e.Q6J("ngIf",i.parametersForm.familyDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxFamiliesList),e.xp6(1),e.Q6J("ngIf",0==i.cbxFamiliesList.length&&i.parametersForm.familyDesc),e.xp6(12),e.Q6J("disabled",0==i.parametersForm.idSucursal),e.xp6(4),e.Q6J("ngForOf",i.physicalInventoryHeaderBySucursal),e.xp6(22),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,L.oG,x.nW,x.wx,x.zY,x.By,x._g,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,O.gM,U.O,D,h.H9]}),a})(),ge=(()=>{class a{constructor(t,i){this.http=t,this.authServ=i,this.baseURL=C.N.baseUrl,this.idSucursal=C.N.idSucursal,this._api="api/comisiones"}CGenerarComision(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/generarComision`,t)}CGenerarAllComisiones(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/generarAllComisiones`,t)}CGetComisionesListWithPage(t,i){let n=t.pageIndex*t.pageSize,o=t.pageSize;return i.search=t.search,i.start=n,i.limiter=o,this.http.post(`${this.baseURL}/${this._api}/getComisionesListWithPage`,i)}CGetComisionDetail(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/getComisionDetail`,t)}CGetComisionesPagosDetailListWithPage(t,i){let n=t.pageIndex*t.pageSize,o=t.pageSize;return i.search=t.search,i.start=n,i.limiter=o,this.http.post(`${this.baseURL}/${this._api}/getComisionesPagosDetailListWithPage`,i)}CDisabledComision(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledComision`,t)}CDisabledComisionDetail(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/disabledComisionDetail`,t)}CChangeStatusComision(t){return t.idUserLogON=this.authServ.getIdUserSession(),t.idSucursalLogON=this.idSucursal,this.http.post(`${this.baseURL}/${this._api}/changeStatusComision`,t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(q.eN),e.LFG(T.e))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Vr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_changeStatusComision(2))}),e.TgZ(1,"mat-icon",16),e._uU(2,"done_all"),e.qZA(),e._uU(3," Pagado"),e.qZA()}}function Xr(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fn_changeStatusComision(3))}),e.TgZ(1,"mat-icon",16),e._uU(2,"cancel"),e.qZA(),e._uU(3," Cancelar comisi\xf3n"),e.qZA()}}function es(a,r){if(1&a&&(e.TgZ(0,"div",17)(1,"div",1)(2,"div",6)(3,"div",18),e._uU(4," Suma de comisi\xf3n "),e.qZA()()(),e.TgZ(5,"div",1)(6,"div",19),e._UZ(7,"img",20),e.TgZ(8,"h2",21),e._uU(9),e.ALo(10,"currency"),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(9),e.Oqu(e.lcZ(10,1,t.oComisionDetailHeader.sumComisiones))}}function ts(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",29)(2,"div",30)(3,"span",31),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.fn_startPhysicInventory(o.idComisionDetail))}),e._uU(4," delete_outline "),e.qZA()()(),e.TgZ(5,"td",32)(6,"div",33),e._uU(7),e.qZA()(),e.TgZ(8,"td",34)(9,"div",35),e._uU(10),e.ALo(11,"currency"),e.qZA()(),e.TgZ(12,"td",34)(13,"div",35),e._uU(14),e.qZA()(),e.TgZ(15,"td",34)(16,"div",35),e._uU(17),e.ALo(18,"currency"),e.qZA()(),e.TgZ(19,"td",32)(20,"div",36),e._uU(21),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(7),e.hij(" ",t.idRelation," "),e.xp6(3),e.hij(" ",e.lcZ(11,5,t.utilidad)," "),e.xp6(4),e.hij(" ",100*t.porcentaje,"% "),e.xp6(3),e.hij(" ",e.lcZ(18,7,t.comisionFinal)," "),e.xp6(4),e.hij(" ",t.comentario," ")}}function is(a,r){if(1&a&&(e.TgZ(0,"div",22)(1,"div",1)(2,"div",6)(3,"div",23)(4,"table",24)(5,"thead")(6,"th",25),e._uU(7,"Acciones"),e.qZA(),e.TgZ(8,"th",26),e._uU(9,"idRelaci\xf3n"),e.qZA(),e.TgZ(10,"th",27),e._uU(11,"Utilidad"),e.qZA(),e.TgZ(12,"th",27),e._uU(13,"Porcentaje"),e.qZA(),e.TgZ(14,"th",27),e._uU(15,"Comisi\xf3n"),e.qZA(),e.TgZ(16,"th",26),e._uU(17,"Comentario"),e.qZA()(),e.TgZ(18,"tbody"),e.YNc(19,ts,22,9,"tr",28),e.qZA()()()()()()),2&a){const t=e.oxw();e.xp6(19),e.Q6J("ngForOf",t.oComisionDetail)}}function ns(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",32)(2,"div",33),e._uU(3),e.qZA()(),e.TgZ(4,"td",32)(5,"div",33),e._uU(6),e.qZA()(),e.TgZ(7,"td",34)(8,"div",35),e._uU(9),e.ALo(10,"currency"),e.qZA()()()),2&a){const t=r.$implicit;e.xp6(3),e.hij(" ",t.idPayment," "),e.xp6(3),e.hij(" ",t.idSale," "),e.xp6(3),e.hij(" ",e.lcZ(10,3,t.Pago)," ")}}function as(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",38),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("IPagination",t.pagination)}}function os(a,r){if(1&a&&(e.TgZ(0,"div",22)(1,"div",1)(2,"div",6)(3,"div",23)(4,"table",24)(5,"thead")(6,"th",26),e._uU(7,"# Pago"),e.qZA(),e.TgZ(8,"th",26),e._uU(9,"Venta"),e.qZA(),e.TgZ(10,"th",27),e._uU(11,"Pago"),e.qZA()(),e.TgZ(12,"tbody"),e.YNc(13,ns,11,5,"tr",28),e.qZA()()(),e.YNc(14,as,1,1,"app-pagination",37),e.qZA()()()),2&a){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.oComisionesPagosDetail),e.xp6(1),e.Q6J("ngIf",t.oComisionesPagosDetail)}}let rs=(()=>{class a{constructor(t,i,n,o,l,p,_){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.authServ=p,this.comisionesServ=_,this._appMain=C.N.appMain,this._idSucursal=C.N.idSucursal,this.idUserLogON=0,this.title="Comisi\xf3n",this.bShowSpinner=!1,this.oComisionDetail=[],this.oComisionesPagosDetail=[],this.panelComisionDetailOpenState=!1,this.panelPagosDetailState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={startDate:"",endDate:"",idSeller_idUser:0,sellerDesc:"",sellerResp:"",comision:0},this.oComisionDetailHeader={sumComisiones:0,idStatus:0},this.bShowActionAuthorization=!1}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.ODataP.idComision.length>0&&t.fn_GetComisionDetail()})()}changePagination(t){this.pagination=t,this.fn_getComisionesPagosDetailListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getComisionesPagosDetailListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_CerrarMDL(t){this.dialogRef.close(t)}fn_ClearParameters(){this.parametersForm={startDate:"",endDate:"",idSeller_idUser:0,sellerDesc:"",sellerResp:"",comision:0},this.oComisionDetailHeader={sumComisiones:0}}fn_changeStatusComision(t){this.bShowActionAuthorization?this.bShowActionAuthorization=!1:(this.bShowActionAuthorization=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de cambiar el Estatus de la comisi\xf3n","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&this.servicesGServ.showModalWithParams(k,{actionName:"opera_ChangeStatus",bShowAlert:!1},"400px").afterClosed().subscribe({next:o=>{o?(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.comisionesServ.CChangeStatusComision({idComision:this.ODataP.idComision,idStatus:t}).subscribe({next:p=>{0===p.status&&this.fn_GetComisionDetail(),this.servicesGServ.showAlertIA(p),this.bShowSpinner=!1},error:p=>{this.servicesGServ.showSnakbar(p.error.message),this.bShowSpinner=!1}})):this.bShowActionAuthorization=!1}})}}))}fn_startPhysicInventory(t){this.bShowActionAuthorization||(this.bShowActionAuthorization=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de cancelar esta comisi\xf3n","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i?this.servicesGServ.showModalWithParams(k,{actionName:"opera_CancelarComision",bShowAlert:!1},"400px").afterClosed().subscribe({next:o=>{o?(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.comisionesServ.CDisabledComisionDetail({idComisionDetail:t}).subscribe({next:p=>{this.servicesGServ.showAlertIA(p),this.bShowSpinner=!1,this.fn_GetComisionDetail()},error:p=>{this.servicesGServ.showSnakbar(p.error.message),this.bShowSpinner=!1}})):this.bShowActionAuthorization=!1}}):this.bShowActionAuthorization=!1}}))}fn_getComisionesPagosDetailListWithPage(){this.oComisionesPagosDetail=[],this.bShowSpinner=!0,this.comisionesServ.CGetComisionesPagosDetailListWithPage(this.pagination,{idComision:this.ODataP.idComision}).subscribe({next:i=>{console.log(i),0==i.status?(this.oComisionesPagosDetail=i.data.rows,this.pagination.length=i.data.count):(this.oComisionesPagosDetail=[],this.pagination.length=0),this.bShowSpinner=!1},error:i=>{console.log(i),this.servicesGServ.showSnakbar(i.error.data),this.bShowSpinner=!1}})}fn_GetComisionDetail(){this.oComisionDetail=[],this.bShowSpinner=!0,this.comisionesServ.CGetComisionDetail({idComision:this.ODataP.idComision}).subscribe({next:i=>{console.log(i),0==i.status?(this.oComisionDetail=i.data.rows,this.oComisionDetailHeader.sumComisiones=i.data.header.sumComisiones,this.oComisionDetailHeader.idStatus=i.data.header.idStatus):(this.oComisionDetail=[],this.oComisionDetailHeader.sumComisiones=0),this.bShowSpinner=!1,this.fn_getComisionesPagosDetailListWithPage()},error:i=>{console.log(i),this.servicesGServ.showSnakbar(i.error.data),this.bShowSpinner=!1}})}fn_GenerarComision(){this.comisionesServ.CGenerarComision({startDate:"20240101",endDate:"20240201",idSeller_idUser:15}).subscribe({next:i=>{console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(ge))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-comision"]],decls:28,vars:10,consts:[[2,"margin","20px !important"],[1,"row"],[1,"col-md-10"],[1,"col-md-2"],["mat-icon-button","",2,"float","right",3,"click"],[1,"row","top10px"],[1,"col-md-12"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit","class","marginRight10px",3,"click",4,"ngIf"],[1,"divMain",2,"margin-top","10px !important",3,"expanded","opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],["class","",4,"ngIf"],["class","","style","width: 100%; margin-top: 10px !important;",4,"ngIf"],[3,"hidden"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],[1,""],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-3",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],[1,"",2,"width","100%","margin-top","10px !important"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Eliminar Comisi\xf3n",1,"material-icons","manitaSobre","colorRed",3,"click"],[1,"textAlingLeft"],[2,"width","130px","padding","2px"],[1,"textAlingRight"],[2,"width","100px","padding","2px"],[2,"width","200px","padding","2px"],[3,"IPagination","OPagination",4,"ngIf"],[3,"IPagination","OPagination"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return i.fn_CerrarMDL(0)}),e.TgZ(7,"mat-icon"),e._uU(8,"close"),e.qZA()()()(),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7),e.YNc(12,Vr,4,0,"button",8),e.YNc(13,Xr,4,0,"button",8),e.qZA()()(),e.TgZ(14,"mat-accordion")(15,"mat-expansion-panel",9),e.NdJ("opened",function(){return i.panelComisionDetailOpenState=!0})("closed",function(){return i.panelComisionDetailOpenState=!1}),e.TgZ(16,"mat-expansion-panel-header",10)(17,"mat-panel-title",11),e._uU(18," Detalle de la comisi\xf3n "),e.qZA()(),e.YNc(19,es,11,3,"div",12),e.YNc(20,is,20,1,"div",13),e.qZA()(),e.TgZ(21,"mat-accordion")(22,"mat-expansion-panel",9),e.NdJ("opened",function(){return i.panelPagosDetailState=!0})("closed",function(){return i.panelPagosDetailState=!1}),e.TgZ(23,"mat-expansion-panel-header",10)(24,"mat-panel-title",11),e._uU(25," Detalle de pagos "),e.qZA()(),e.YNc(26,os,15,2,"div",13),e.qZA()()(),e._UZ(27,"app-spinner",14)),2&t&&(e.xp6(4),e.AsE("Comisi\xf3n #",i.ODataP.idComision," de ",i.ODataP.userName," "),e.xp6(8),e.Q6J("ngIf",1==i.oComisionDetailHeader.idStatus),e.xp6(1),e.Q6J("ngIf",1==i.oComisionDetailHeader.idStatus||2==i.oComisionDetailHeader.idStatus),e.xp6(2),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("ngIf",i.oComisionDetailHeader.sumComisiones>0),e.xp6(1),e.Q6J("ngIf",i.oComisionDetail.length>0),e.xp6(2),e.Q6J("expanded",!1),e.xp6(4),e.Q6J("ngIf",i.oComisionesPagosDetail.length>0),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner))},dependencies:[h.sg,h.O5,v.lW,v.RK,y.pp,y.ib,y.yz,y.yK,d.qo,P.Hw,O.gM,U.O,D,h.H9]}),a})();function ss(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSellers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function ls(a,r){if(1&a&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function cs(a,r){if(1&a&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.parametersForm.sellerResp," ")}}let ps=(()=>{class a{constructor(t,i,n,o,l,p,_,g){this.dialogRef=t,this.ODataP=i,this.servicesGServ=n,this._adapter=o,this._locale=l,this.authServ=p,this.comisionesServ=_,this.userServ=g,this._appMain=C.N.appMain,this._idSucursal=C.N.idSucursal,this.idUserLogON=0,this.timeCBXskeyup=new ee.x,this.bShowSpinner=!1,this.parametersForm={startDate:new Date,endDate:new Date,idSeller_idUser:0,sellerDesc:"",sellerResp:"",comision:0},this.bShowAction=!1,this.cbxSellers=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_setDates(),t.timeCBXskeyup.pipe((0,te.b)(500)).subscribe(i=>{1==i.iOption&&t.cbxSellers_Search()})})()}fn_CerrarMDL(t){this.dialogRef.close(t)}fn_setDates(){const t=new Date,i=new Date(t.getFullYear(),t.getMonth()-1,1),n=new Date(t.getFullYear(),t.getMonth(),0);this.parametersForm.startDate=i,this.parametersForm.endDate=n}fn_ClearParameters(){this.parametersForm={startDate:new Date,endDate:new Date,idSeller_idUser:0,sellerDesc:"",sellerResp:"",comision:0},this.fn_setDates()}fn_generarAllComisiones(){this.bShowAction||(this.bShowAction=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de generar las comisiones","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:t=>{t?(this.bShowAction=!1,this.bShowSpinner=!0,this.comisionesServ.CGenerarAllComisiones({startDate:this.parametersForm.startDate,endDate:this.parametersForm.endDate,idSeller_idUser:this.parametersForm.idSeller_idUser}).subscribe({next:n=>{0===n.status?this.fn_CerrarMDL(!0):this.servicesGServ.showAlertIA(n),this.bShowSpinner=!1},error:n=>{this.servicesGServ.showSnakbar(n.error.message),this.bShowSpinner=!1}})):this.bShowAction=!1}}))}CBXskeyup(t,i){this.timeCBXskeyup.next({iOption:t,txt:i})}cbxSellers_Search(){this.userServ.CCbxGetSellersCombo(this.parametersForm.sellerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxSellers=t.data,this.parametersForm.sellerResp=""):(this.cbxSellers=[],this.parametersForm.sellerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSellers_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.idSeller_idUser=i.idUser,this.parametersForm.sellerDesc=i.name,this.parametersForm.sellerResp="",this.parametersForm.comision=i.comision}cbxSellers_Clear(){this.cbxSellers=[],this.parametersForm.idSeller_idUser=0,this.parametersForm.sellerDesc="",this.parametersForm.sellerResp="",this.parametersForm.comision=0}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.so),e.Y36(F.WI),e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(ge),e.Y36(B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-gen-comision"]],decls:42,vars:10,consts:[[2,"margin","20px !important"],[1,"row"],[1,"col-md-12"],["mat-icon-button","",2,"float","right",3,"click"],[1,"col-md-4",2,"text-align","left","margin-top","20px"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Fecha inicio",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","Fecha fin",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-md-8"],[2,"width","100%"],["type","text","id","cbxSeller","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxSellerCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSeller","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return i.fn_CerrarMDL(!0)}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()()(),e.TgZ(6,"div",1)(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Fecha:"),e.qZA(),e.TgZ(11,"mat-date-range-input",6),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(18);return e.KtG(l.open())}),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(l){return i.parametersForm.startDate=l}),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(l){return i.parametersForm.endDate=l}),e.qZA()(),e.TgZ(14,"mat-hint"),e._uU(15,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(16,"mat-datepicker-toggle",9)(17,"mat-date-range-picker",null,10),e.qZA()(),e.TgZ(19,"div",11)(20,"mat-label"),e._uU(21,"Vendedor: "),e.qZA(),e.TgZ(22,"mat-form-field",12)(23,"input",13,14),e.NdJ("ngModelChange",function(l){return i.parametersForm.sellerDesc=l})("keyup",function(){e.CHM(n);const l=e.MAs(24);return e.KtG(i.CBXskeyup(1,l.value))})("click",function(){return i.cbxSellers_Clear()}),e.qZA(),e.YNc(25,ss,3,0,"button",15),e.TgZ(26,"mat-autocomplete",16,17),e.NdJ("optionSelected",function(l){return i.cbxSellers_SelectedOption(l)}),e.YNc(28,ls,2,2,"mat-option",18),e.YNc(29,cs,2,1,"mat-option",19),e.qZA()()()(),e.TgZ(30,"div",20)(31,"div",2)(32,"div",21)(33,"button",22),e.NdJ("click",function(){return i.fn_generarAllComisiones()}),e.TgZ(34,"mat-icon",23),e._uU(35,"monetization_on"),e.qZA(),e._uU(36," GENERAR COMISI\xd3N"),e.qZA(),e.TgZ(37,"button",24),e.NdJ("click",function(){return i.fn_ClearParameters()}),e.TgZ(38,"mat-icon",23),e._uU(39,"clear"),e.qZA(),e._uU(40," limpiar"),e.qZA()()()()(),e._UZ(41,"app-spinner",25)}if(2&t){const n=e.MAs(18),o=e.MAs(27);e.xp6(11),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("ngModel",i.parametersForm.startDate),e.xp6(1),e.Q6J("ngModel",i.parametersForm.endDate),e.xp6(3),e.Q6J("for",n),e.xp6(7),e.Q6J("ngModel",i.parametersForm.sellerDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.parametersForm.sellerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSellers),e.xp6(1),e.Q6J("ngIf",(null==i.parametersForm||null==i.parametersForm.sellerDesc?null:i.parametersForm.sellerDesc.length)>0&&(null==i.parametersForm||null==i.parametersForm.sellerResp?null:i.parametersForm.sellerResp.length)>0),e.xp6(12),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,x.nW,x.wx,x.zY,x.By,x._g,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,U.O]}),a})();function us(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSellers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function ms(a,r){if(1&a&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ds(a,r){if(1&a&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.parametersForm.sellerResp," ")}}function _s(a,r){if(1&a&&(e.TgZ(0,"div",34)(1,"div",35)(2,"div",4)(3,"div",36),e._uU(4," Suma de comisiones "),e.qZA()()(),e.TgZ(5,"div",3)(6,"div",37),e._UZ(7,"img",38),e.TgZ(8,"h2",39),e._uU(9),e.ALo(10,"currency"),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(9),e.Oqu(e.lcZ(10,1,t.sumComisiones))}}function hs(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",65),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.fn_disabledComision(n.idComision))}),e._uU(1," delete_outline "),e.qZA()}}function gs(a,r){1&a&&(e.TgZ(0,"span",66),e._uU(1,"autorenew"),e.qZA())}function fs(a,r){1&a&&(e.TgZ(0,"span",67),e._uU(1,"done_all"),e.qZA())}function Cs(a,r){1&a&&(e.TgZ(0,"span",68),e._uU(1,"cancel"),e.qZA())}function bs(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",48)(2,"div",49)(3,"span",50),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.fn_ShowComision(o))}),e._uU(4," edit "),e.qZA(),e.YNc(5,hs,2,0,"span",51),e.qZA()(),e.TgZ(6,"td",52)(7,"div",53),e._uU(8),e.qZA()(),e.TgZ(9,"td",52)(10,"div",54)(11,"div",3)(12,"div",55),e.YNc(13,gs,2,0,"span",56),e.YNc(14,fs,2,0,"span",57),e.YNc(15,Cs,2,0,"span",58),e.qZA(),e.TgZ(16,"div",59)(17,"label",60),e._uU(18),e.qZA()()()()(),e.TgZ(19,"td",52)(20,"div",54),e._uU(21),e.qZA()(),e.TgZ(22,"td",61)(23,"div",62),e._uU(24),e.ALo(25,"currency"),e.qZA()(),e.TgZ(26,"td",48)(27,"div",62),e._uU(28),e.qZA()(),e.TgZ(29,"td",48)(30,"div",63)(31,"div",3)(32,"div",55)(33,"mat-icon",64),e._uU(34,"calendar_today"),e.qZA()(),e.TgZ(35,"div",59)(36,"label",60),e._uU(37),e.qZA(),e.TgZ(38,"label",60),e._uU(39),e.qZA()()()()(),e.TgZ(40,"td",52),e._uU(41),e.qZA()()}if(2&a){const t=r.$implicit;e.xp6(5),e.Q6J("ngIf",t.active),e.xp6(3),e.hij(" ",t.idComision," "),e.xp6(5),e.Q6J("ngIf",1==t.idStatus),e.xp6(1),e.Q6J("ngIf",2==t.idStatus),e.xp6(1),e.Q6J("ngIf",3==t.idStatus),e.xp6(3),e.Oqu(t.statusName),e.xp6(3),e.hij(" ",t.userName," "),e.xp6(3),e.hij(" ",e.lcZ(25,13,t.comision)," "),e.xp6(4),e.AsE(" ",t.startDate," ",t.endDate," "),e.xp6(9),e.Oqu(t.createDateDate),e.xp6(2),e.Oqu(t.createDateHours),e.xp6(2),e.Oqu(t.createUserName)}}function Ss(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",69),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("IPagination",t.pagination)}}function vs(a,r){if(1&a&&(e.TgZ(0,"div",40)(1,"div",3)(2,"div",4)(3,"div",41)(4,"table",42)(5,"thead")(6,"th",43),e._uU(7,"Acciones"),e.qZA(),e.TgZ(8,"th",44),e._uU(9,"# Comisi\xf3n"),e.qZA(),e.TgZ(10,"th",44),e._uU(11,"Estatus"),e.qZA(),e.TgZ(12,"th",44),e._uU(13,"Empleado"),e.qZA(),e.TgZ(14,"th",45),e._uU(15,"Comisi\xf3n"),e.qZA(),e.TgZ(16,"th",43),e._uU(17,"Rango"),e.qZA(),e.TgZ(18,"th",43),e._uU(19,"Fecha de creaci\xf3n"),e.qZA(),e.TgZ(20,"th",44),e._uU(21,"Creador"),e.qZA()(),e.TgZ(22,"tbody"),e.YNc(23,bs,42,15,"tr",46),e.qZA()()(),e.YNc(24,Ss,1,1,"app-pagination",47),e.qZA()()()),2&a){const t=e.oxw();e.xp6(23),e.Q6J("ngForOf",t.oData),e.xp6(1),e.Q6J("ngIf",t.oData)}}function Zs(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"span",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.fn_btnRePrinter(n.idEgreso))}),e._uU(1," print "),e.qZA()}}function Ts(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",32)(2,"div",33),e.YNc(3,Zs,2,0,"span",34),e.qZA()(),e.TgZ(4,"td",35),e._uU(5),e.qZA(),e.TgZ(6,"td",35),e._uU(7),e.qZA(),e.TgZ(8,"td",36),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"td",32)(12,"div",37)(13,"div",3)(14,"div",38)(15,"mat-icon",39),e._uU(16,"calendar_today"),e.qZA()(),e.TgZ(17,"div",40)(18,"label",41),e._uU(19),e.qZA(),e.TgZ(20,"label",41),e._uU(21),e.qZA()()()()()()),2&a){const t=r.$implicit,i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.selectPrinter.idPrinter>0),e.xp6(2),e.Oqu(t.idEgreso),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(10,6,t.amount)),e.xp6(10),e.Oqu(t.createDateDate),e.xp6(2),e.Oqu(t.createDateHours)}}function ys(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",43),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}function Fs(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxSupplier_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Us(a,r){if(1&a&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ps(a,r){1&a&&(e.TgZ(0,"mat-option",30),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function ws(a,r){if(1&a&&(e.TgZ(0,"div",31)(1,"div",3)(2,"div",32)(3,"h1"),e._uU(4),e.qZA()(),e.TgZ(5,"div",33),e._UZ(6,"img",34),e.TgZ(7,"h2",35),e._uU(8),e.ALo(9,"currency"),e.qZA()(),e.TgZ(10,"div",33),e._UZ(11,"img",34),e.TgZ(12,"h2",35),e._uU(13),e.ALo(14,"currency"),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(4),e.hij("",t.oHeaderForm.iPzs," PZ"),e.xp6(4),e.hij("Costo Total: ",e.lcZ(9,3,t.oHeaderForm.costSum),""),e.xp6(5),e.hij("Importe Total: ",e.lcZ(14,5,t.oHeaderForm.priceSum),"")}}function Ns(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",36)(2,"div",37)(3,"div",38)(4,"mat-icon",39),e._uU(5,"qr_code"),e.qZA()(),e.TgZ(6,"div",40)(7,"label",41),e._uU(8),e.qZA()()()(),e.TgZ(9,"td",36),e._uU(10),e.qZA(),e.TgZ(11,"td",42),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",42),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.TgZ(17,"td",42),e._uU(18),e.qZA(),e.TgZ(19,"td",43),e._uU(20),e.qZA(),e.TgZ(21,"td",36),e._uU(22),e.qZA()()),2&a){const t=r.$implicit;e.xp6(8),e.Oqu(t.barCode),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.lcZ(13,7,t.cost)),e.xp6(3),e.Oqu(e.lcZ(16,9,t.price)),e.xp6(3),e.hij("",t.catInventary," PZ"),e.xp6(2),e.Oqu(t.compraDate),e.xp6(2),e.Oqu(t.supplierDesc)}}function Is(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",44),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}function qs(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxProducts_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Ds(a,r){if(1&a&&(e.TgZ(0,"mat-option",45)(1,"mat-icon",30),e._uU(2,"qr_code"),e.qZA(),e._uU(3),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(3),e.hij("",t.nameConcat," ")}}function Ls(a,r){1&a&&(e.TgZ(0,"mat-option",46),e._uU(1," No se encontr\xf3 nada... "),e.qZA())}function ks(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"mat-checkbox",61),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.select=n)}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("ngModel",t.select)}}function Os(a,r){1&a&&(e.TgZ(0,"span",62),e._uU(1,"autorenew"),e.qZA())}function Js(a,r){1&a&&(e.TgZ(0,"span",63),e._uU(1,"done"),e.qZA())}function Gs(a,r){1&a&&(e.TgZ(0,"span",64),e._uU(1,"autorenew"),e.qZA())}function Rs(a,r){1&a&&(e.TgZ(0,"span",65),e._uU(1,"done_all"),e.qZA())}function Es(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",38)(2,"div",47),e.YNc(3,ks,1,1,"mat-checkbox",48),e.qZA()(),e.TgZ(4,"td",49)(5,"div",3)(6,"div",4),e.YNc(7,Os,2,0,"span",50),e.YNc(8,Js,2,0,"span",51),e.YNc(9,Gs,2,0,"span",52),e.YNc(10,Rs,2,0,"span",53),e.qZA()()(),e.TgZ(11,"td",54),e._uU(12),e.qZA(),e.TgZ(13,"td",54)(14,"div",3)(15,"div",55)(16,"mat-icon",56),e._uU(17,"qr_code"),e.qZA()(),e.TgZ(18,"div",57)(19,"label",58),e._uU(20),e.qZA()()()(),e.TgZ(21,"td",54),e._uU(22),e.qZA(),e.TgZ(23,"td",59),e._uU(24),e.qZA(),e.TgZ(25,"td",54),e._uU(26),e.qZA(),e.TgZ(27,"td",49),e._uU(28),e.ALo(29,"date"),e.qZA(),e.TgZ(30,"td",49)(31,"mat-checkbox",60),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.active=n)}),e.qZA()()()}if(2&a){const t=r.$implicit;e.xp6(3),e.Q6J("ngIf",0==t.firmaVer||0==t.firmaMost),e.xp6(4),e.Q6J("ngIf",0==t.firmaVer),e.xp6(1),e.Q6J("ngIf",1==t.firmaVer),e.xp6(1),e.Q6J("ngIf",0==t.firmaMost),e.xp6(1),e.Q6J("ngIf",1==t.firmaMost),e.xp6(2),e.Oqu(t.noEntrada),e.xp6(8),e.Oqu(t.barCode),e.xp6(2),e.Oqu(t.productName),e.xp6(2),e.hij("",t.cantidad," piezas"),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(e.xi3(29,12,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngModel",t.active)}}function Qs(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",66),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}function js(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cbxCustomers_Clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function Hs(a,r){if(1&a&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function zs(a,r){if(1&a&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.parametersForm.customerResp," ")}}function $s(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"td",45),e._uU(2),e.qZA(),e.TgZ(3,"td",46),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td",45),e._uU(7),e.qZA(),e.TgZ(8,"td",47)(9,"div",48)(10,"div",3)(11,"div",49)(12,"mat-icon",50),e._uU(13,"calendar_today"),e.qZA()(),e.TgZ(14,"div",51)(15,"label",52),e._uU(16),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"label",52),e._uU(19),e.ALo(20,"date"),e.qZA()()()()()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(5,5,t.amount)),e.xp6(3),e.Oqu(t.customerName),e.xp6(9),e.Oqu(e.xi3(17,7,t.createDate,"dd-MM-yyyy")),e.xp6(3),e.Oqu(e.xi3(20,10,t.createDate,"h:mm:ss a"))}}function Bs(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-pagination",53),e.NdJ("OPagination",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.changePagination(n))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("IPagination",t.pagination)}}const Ws=[{path:"",component:Re,children:[{path:"dashboard",component:Le},{path:"users",component:ve},{path:"editUser/:id",component:ve},{path:"userList",component:ft},{path:"rol",component:Ne},{path:"editRol/:id",component:Ne},{path:"roleList",component:ur},{path:"product",component:ye},{path:"editProduct/:id",component:ye},{path:"productList",component:Lt},{path:"customerList",component:Ii},{path:"saleList",component:bo},{path:"tiposDeCambio",component:ki},{path:"repinventario",component:Oo},{path:"cortesCaja",component:Ho},{path:"rep_utilidad",component:or},{path:"inventarioFisicoList",component:Kr},{path:"comisiones",component:(()=>{class a{constructor(t,i,n,o,l,p){this.servicesGServ=t,this._adapter=i,this._locale=n,this.authServ=o,this.comisionesServ=l,this.userServ=p,this._appMain=C.N.appMain,this._idSucursal=C.N.idSucursal,this.idUserLogON=0,this.timeCBXskeyup=new ee.x,this.title="Lista de Comisiones",this.bShowSpinner=!1,this.oData=[],this.panelOpenState=!1,this.sumComisiones=0,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={startDate:new Date,endDate:new Date,idSeller_idUser:0,sellerDesc:"",sellerResp:"",comision:0,bPending:!1,bPagada:!1,bCancel:!1},this.bShowActionAuthorization=!1,this.cbxSellers=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_setDates(),t.timeCBXskeyup.pipe((0,te.b)(500)).subscribe(i=>{1==i.iOption&&t.cbxSellers_Search()})})()}changePagination(t){this.pagination=t}onChangeEvent(t){this.pagination.search=t.target.value}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}fn_ShowGenComision(){this.servicesGServ.showModalWithParams(ps,null,"800px").afterClosed().subscribe({next:t=>{t&&this.fn_getComisionesListWithPage()}})}fn_setDates(){const t=new Date,i=new Date(t.getFullYear(),t.getMonth()-1,1),n=new Date(t.getFullYear(),t.getMonth(),0);this.parametersForm.startDate=i,this.parametersForm.endDate=n}fn_ShowComision(t){this.servicesGServ.showModalWithParams(rs,{idComision:t.idComision,userName:t.userName},"2500px").afterClosed().subscribe({next:n=>{this.fn_getComisionesListWithPage()}})}fn_ClearParameters(){this.parametersForm={startDate:new Date,endDate:new Date,idSeller_idUser:0,sellerDesc:"",sellerResp:"",comision:0},this.sumComisiones=0,this.oData=[],this.fn_setDates()}fn_disabledComision(t){this.bShowActionAuthorization||(this.bShowActionAuthorization=!0,this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de cancelar esta comisi\xf3n","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i?this.servicesGServ.showModalWithParams(k,{actionName:"opera_CancelarComision",bShowAlert:!1},"400px").afterClosed().subscribe({next:o=>{o?(this.bShowActionAuthorization=!1,this.bShowSpinner=!0,this.comisionesServ.CDisabledComision({idComision:t}).subscribe({next:p=>{this.servicesGServ.showAlertIA(p),this.bShowSpinner=!1,this.fn_getComisionesListWithPage()},error:p=>{this.servicesGServ.showSnakbar(p.error.message),this.bShowSpinner=!1}})):this.bShowActionAuthorization=!1}}):this.bShowActionAuthorization=!1}}))}fn_getComisionesListWithPage(){this.oData=[],this.bShowSpinner=!0,this.comisionesServ.CGetComisionesListWithPage(this.pagination,this.parametersForm).subscribe({next:t=>{console.log(t),0==t.status?(this.oData=t.data.rows,this.pagination.length=t.data.count,this.sumComisiones=t.data.header.sumComisiones):(this.oData=[],this.pagination.length=0,this.sumComisiones=0),this.bShowSpinner=!1},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}fn_GenerarComision(){this.comisionesServ.CGenerarComision({startDate:this.parametersForm.startDate,endDate:this.parametersForm.endDate,idSeller_idUser:this.parametersForm.idSeller_idUser}).subscribe({next:i=>{0===i.status?this.fn_ShowComision({idComision:i.insertID,userName:this.parametersForm.sellerDesc}):this.servicesGServ.showAlertIA(i),this.bShowSpinner=!1},error:i=>{this.servicesGServ.showSnakbar(i.error.message),this.bShowSpinner=!1}})}CBXskeyup(t,i){this.timeCBXskeyup.next({iOption:t,txt:i})}cbxSellers_Search(){this.userServ.CCbxGetSellersCombo(this.parametersForm.sellerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxSellers=t.data,this.parametersForm.sellerResp=""):(this.cbxSellers=[],this.parametersForm.sellerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSellers_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.idSeller_idUser=i.idUser,this.parametersForm.sellerDesc=i.name,this.parametersForm.sellerResp="",this.parametersForm.comision=i.comision}cbxSellers_Clear(){this.cbxSellers=[],this.parametersForm.idSeller_idUser=0,this.parametersForm.sellerDesc="",this.parametersForm.sellerResp="",this.parametersForm.comision=0}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(ge),e.Y36(B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-comisiones"]],decls:58,vars:16,consts:[[1,"divMain",2,"margin-top","10px !important",3,"expanded","opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],[1,"col-md-4",2,"text-align","left","margin-top","20px"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Fecha inicio",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","Fecha fin",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-md-8"],[2,"width","100%"],["type","text","id","cbxSeller","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxSellerCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSeller","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-6"],[1,"example-margin",3,"ngModel","ngModelChange"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",1,"marginRight10px",3,"click"],["class","divSection",4,"ngIf"],["class","divMain","style","width: 100%; margin-top: 10px !important;",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"divSection"],[1,"row",2,"margin-top","-35px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-3",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],[1,"divMain",2,"width","100%","margin-top","10px !important"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[1,"textAlingCenter"],[2,"width","100px"],["matTooltip","Editar comisi\xf3n",1,"material-icons","manitaSobre","colorGreen",3,"click"],["class","material-icons manitaSobre colorRed","matTooltip","Eliminar Comisi\xf3n",3,"click",4,"ngIf"],[1,"textAlingLeft"],[2,"width","130px","padding","2px"],[2,"width","200px","padding","2px"],[1,"col-md-1"],["class","material-icons manitaSobre colorBlue",4,"ngIf"],["class","material-icons manitaSobre colorGreen",4,"ngIf"],["class","material-icons manitaSobre colorRed",4,"ngIf"],[1,"col-md-10"],[2,"margin-left","10px"],[1,"textAlingRight"],[2,"width","100px","padding","2px"],[2,"width","120px"],["matPrefix","",1,"my-icon",2,"margin-top","5px"],["matTooltip","Eliminar Comisi\xf3n",1,"material-icons","manitaSobre","colorRed",3,"click"],[1,"material-icons","manitaSobre","colorBlue"],[1,"material-icons","manitaSobre","colorGreen"],[1,"material-icons","manitaSobre","colorRed"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"div",3)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Fecha:"),e.qZA(),e.TgZ(13,"mat-date-range-input",7),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(20);return e.KtG(l.open())}),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(l){return i.parametersForm.startDate=l}),e.qZA(),e.TgZ(15,"input",9),e.NdJ("ngModelChange",function(l){return i.parametersForm.endDate=l}),e.qZA()(),e.TgZ(16,"mat-hint"),e._uU(17,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",10)(19,"mat-date-range-picker",null,11),e.qZA()(),e.TgZ(21,"div",12)(22,"mat-label"),e._uU(23,"Vendedor: "),e.qZA(),e.TgZ(24,"mat-form-field",13)(25,"input",14,15),e.NdJ("ngModelChange",function(l){return i.parametersForm.sellerDesc=l})("keyup",function(){e.CHM(n);const l=e.MAs(26);return e.KtG(i.CBXskeyup(1,l.value))})("click",function(){return i.cbxSellers_Clear()}),e.qZA(),e.YNc(27,us,3,0,"button",16),e.TgZ(28,"mat-autocomplete",17,18),e.NdJ("optionSelected",function(l){return i.cbxSellers_SelectedOption(l)}),e.YNc(30,ms,2,2,"mat-option",19),e.YNc(31,ds,2,1,"mat-option",20),e.qZA()()()(),e.TgZ(32,"div",3)(33,"div",21)(34,"mat-checkbox",22),e.NdJ("ngModelChange",function(l){return i.parametersForm.bPending=l}),e._uU(35,"En revisi\xf3n"),e.qZA(),e.TgZ(36,"mat-checkbox",22),e.NdJ("ngModelChange",function(l){return i.parametersForm.bPagada=l}),e._uU(37,"Pagada"),e.qZA(),e.TgZ(38,"mat-checkbox",22),e.NdJ("ngModelChange",function(l){return i.parametersForm.bCancel=l}),e._uU(39,"Cancelada"),e.qZA()()(),e.TgZ(40,"div",23)(41,"div",4)(42,"div",24)(43,"button",25),e.NdJ("click",function(){return i.fn_getComisionesListWithPage()}),e.TgZ(44,"mat-icon",26),e._uU(45,"search"),e.qZA(),e._uU(46," Buscar"),e.qZA(),e.TgZ(47,"button",27),e.NdJ("click",function(){return i.fn_ClearParameters()}),e.TgZ(48,"mat-icon",26),e._uU(49,"clear"),e.qZA(),e._uU(50," limpiar"),e.qZA(),e.TgZ(51,"button",25),e.NdJ("click",function(){return i.fn_ShowGenComision()}),e.TgZ(52,"mat-icon",26),e._uU(53,"monetization_on"),e.qZA(),e._uU(54," GENERAR COMISI\xd3N"),e.qZA()()()()()()()(),e.YNc(55,_s,11,3,"div",28),e.YNc(56,vs,25,2,"div",29),e._UZ(57,"app-spinner",30)}if(2&t){const n=e.MAs(20),o=e.MAs(29);e.xp6(1),e.Q6J("expanded",!0),e.xp6(12),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("ngModel",i.parametersForm.startDate),e.xp6(1),e.Q6J("ngModel",i.parametersForm.endDate),e.xp6(3),e.Q6J("for",n),e.xp6(7),e.Q6J("ngModel",i.parametersForm.sellerDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.parametersForm.sellerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSellers),e.xp6(1),e.Q6J("ngIf",(null==i.parametersForm||null==i.parametersForm.sellerDesc?null:i.parametersForm.sellerDesc.length)>0&&(null==i.parametersForm||null==i.parametersForm.sellerResp?null:i.parametersForm.sellerResp.length)>0),e.xp6(3),e.Q6J("ngModel",i.parametersForm.bPending),e.xp6(2),e.Q6J("ngModel",i.parametersForm.bPagada),e.xp6(2),e.Q6J("ngModel",i.parametersForm.bCancel),e.xp6(17),e.Q6J("ngIf",0!=i.sumComisiones),e.xp6(1),e.Q6J("ngIf",i.oData.length>0),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,L.oG,x.nW,x.wx,x.zY,x.By,x._g,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,O.gM,U.O,D,h.H9]}),a})()},{path:"egresosList",component:(()=>{class a{constructor(t,i,n,o,l,p,_,g){this.servicesGServ=t,this._adapter=i,this._locale=n,this.authServ=o,this.userServ=l,this.salesServ=p,this.printersServ=_,this.printTicketServ=g,this._appMain=C.N.appMain,this.idUserLogON=0,this.bShowSpinner=!1,this.oData=[],this.panelOpenState=!1,this.egresoForm={date:"",description:"",amount:0},this.selectPrinter={idSucursal:0,idPrinter:0,printerName:""},this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]}}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getSelectPrintByIdUser(t.idUserLogON)})()}changePagination(t){this.pagination=t,this.fn_getEgresosListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getEgresosListWithPage()}fn_btnRePrinter(t){this.selectPrinter.idPrinter>0&&this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1s apunto de reimprimir","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:i=>{i&&this.printTicketServ.printTicket("Egreso",t,this.selectPrinter.idPrinter)}})}parametersForm_Clear(){this.egresoForm={date:"",description:"",amount:0},this.oData=[]}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}edit(t){this.servicesGServ.changeRouteWithParameter(`/${this._appMain}/editProduct`,t)}fn_getEgresosListWithPage(){this.oData=[],this.bShowSpinner=!0,this.salesServ.CGetEgresosListWithPage(this.pagination,this.egresoForm).subscribe({next:t=>{0==t.status&&(this.oData=t.data.rows),this.bShowSpinner=!1},error:t=>{this.bShowSpinner=!1}})}fn_getSelectPrintByIdUser(t){this.printersServ.CGetSelectPrinterByIdUser(t).subscribe({next:i=>{0==i.status?(this.selectPrinter.idSucursal=i.data.idSucursal,this.selectPrinter.idPrinter=i.data.idPrinter,this.selectPrinter.printerName=i.data.printerName):(this.selectPrinter.idSucursal=0,this.selectPrinter.idPrinter=0,this.selectPrinter.printerName=""),console.log(i)},error:i=>{this.servicesGServ.showSnakbar(i.error.data)}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(B),e.Y36(Y),e.Y36(H),e.Y36(j))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-egresos-list"]],decls:60,vars:9,consts:[[1,"divMain",2,"margin-top","10px !important",3,"expanded","opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],[1,"col-md-3",2,"text-align","center"],[1,""],["matInput","","placeholder","Seleccione una fecha",1,"textAlingCenter",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[1,"col-md-6"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese una descripci\xf3n",3,"ngModel","ngModelChange"],["tbxDesc",""],[1,"col-md-3"],[1,"with100"],["matInput","","currencyMask","","placeholder","PAGA",1,"textAlingRight","colorGreen",3,"ngModel","ngModelChange"],["tbxMonto",""],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],[1,"divMain",2,"width","100%","margin-top","10px !important"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],[1,"textAlingCenter"],[2,"width","50px"],["class","material-icons manitaSobre colorGreen","title","Imprimir",3,"click",4,"ngIf"],[2,"text-align","left"],[2,"text-align","right"],[2,"width","120px"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","5px"],[1,"col-md-10"],[2,"margin-left","10px"],["title","Imprimir",1,"material-icons","manitaSobre","colorGreen",3,"click"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"div",3)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Fecha:"),e.qZA(),e.TgZ(13,"input",7),e.NdJ("ngModelChange",function(o){return i.egresoForm.date=o}),e.qZA(),e._UZ(14,"mat-datepicker-toggle",8)(15,"mat-datepicker",null,9),e.qZA()(),e.TgZ(17,"div",10)(18,"mat-form-field",11)(19,"mat-label"),e._uU(20,"Descripci\xf3n"),e.qZA(),e.TgZ(21,"textarea",12,13),e.NdJ("ngModelChange",function(o){return i.egresoForm.description=o}),e.qZA()()(),e.TgZ(23,"div",14)(24,"mat-form-field",15)(25,"mat-label"),e._uU(26,"Monto"),e.qZA(),e.TgZ(27,"input",16,17),e.NdJ("ngModelChange",function(o){return i.egresoForm.amount=o}),e.qZA()()()(),e.TgZ(29,"div",18)(30,"div",4)(31,"div",19)(32,"button",20),e.NdJ("click",function(){return i.fn_getEgresosListWithPage()}),e.TgZ(33,"mat-icon",21),e._uU(34,"search"),e.qZA(),e._uU(35," Buscar"),e.qZA(),e.TgZ(36,"button",22),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(37,"mat-icon",21),e._uU(38,"clear"),e.qZA(),e._uU(39," limpiar"),e.qZA()()()()()()()(),e.TgZ(40,"div",23)(41,"div",24)(42,"div",4)(43,"div",25)(44,"table",26)(45,"thead")(46,"th",27),e._uU(47,"Acciones"),e.qZA(),e.TgZ(48,"th",28),e._uU(49,"# Egreso"),e.qZA(),e.TgZ(50,"th",28),e._uU(51,"Descripci\xf3n"),e.qZA(),e.TgZ(52,"th",27),e._uU(53,"Monto"),e.qZA(),e.TgZ(54,"th",27),e._uU(55,"Fecha"),e.qZA()(),e.TgZ(56,"tbody"),e.YNc(57,Ts,22,8,"tr",29),e.qZA()()(),e.YNc(58,ys,1,1,"app-pagination",30),e.qZA()()(),e._UZ(59,"app-spinner",31)),2&t){const n=e.MAs(16);e.xp6(1),e.Q6J("expanded",!0),e.xp6(12),e.Q6J("matDatepicker",n)("ngModel",i.egresoForm.date),e.xp6(1),e.Q6J("for",n),e.xp6(7),e.Q6J("ngModel",i.egresoForm.description),e.xp6(6),e.Q6J("ngModel",i.egresoForm.amount),e.xp6(30),e.Q6J("ngForOf",i.oData),e.xp6(1),e.Q6J("ngIf",i.oData),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,v.lW,x.Mq,x.hl,x.nW,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.qo,d.R9,N.Nt,Q.IC,P.Hw,X.g1,U.O,D,h.H9]}),a})()},{path:"rep_compras_proveedor",component:(()=>{class a{constructor(t,i,n,o,l,p,_){this.servicesGServ=t,this.productsServ=i,this.fb=n,this._adapter=o,this._locale=l,this.authServ=p,this.suppliersServ=_,this._appMain=C.N.appMain,this.idUserLogON=0,this.title="Lista de Products",this.bShowSpinner=!1,this.catlist=[],this.inventaryBySucursalList=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={idSupplier:0,supplierDesc:""},this.oHeaderForm={iPzs:0,costSum:0,priceSum:0},this.cbxSupplierList=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getRepComprasProveedorListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getRepComprasProveedorListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getRepComprasProveedorListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}exportDataToExcel(t){this.bShowSpinner=!0,this.productsServ.CGetInventaryListWithPage({search:"",length:1e7,pageSize:1e7,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm.value).subscribe({next:n=>{if(console.log(n),0==n.status)if(t){const l=[{col:0,currencyFormat:!1,textAlignment:"left"},{col:1,currencyFormat:!1,textAlignment:"left"},{col:2,numberFormat:"#,##0",textAlignment:"right"},{col:3,numberFormat:"#,##0",textAlignment:"right"},{col:4,numberFormat:"#,##0",textAlignment:"right"},{col:5,currencyFormat:!0,textAlignment:"right"},{col:6,currencyFormat:!0,textAlignment:"right"}];var o=n.data.rows.map(g=>({"C\xf3digo de barras\t":g.barCode,Nombre:g.name,Apartado:g.catInventaryApart,Consignaci\u00f3n:g.catInventaryCons,Mostrador:g.catInventary,cost:g.cost,price:g.price}));const _=(new Date).toISOString().replace(/[:.]/g,"-");this.servicesGServ.exportToExcel(o,`RepInventarioConCostos_${_}.xlsx`,l)}else{const l=[{col:0,currencyFormat:!1,textAlignment:"left"},{col:1,currencyFormat:!1,textAlignment:"left"},{col:2,numberFormat:"#,##0",textAlignment:"right"},{col:3,numberFormat:"#,##0",textAlignment:"right"},{col:4,numberFormat:"#,##0",textAlignment:"right"}];o=n.data.rows.map(u=>({"C\xf3digo de barras\t":u.barCode,Nombre:u.name,Apartado:u.catInventaryApart,Consignaci\u00f3n:u.catInventaryCons,Mostrador:u.catInventary}));const g=(new Date).toISOString().replace(/[:.]/g,"-");this.servicesGServ.exportToExcel(o,`RepInventario_${g}.xlsx`,l)}this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}})}fn_getRepComprasProveedorListWithPage(){this.catlist=[],this.bShowSpinner=!0,this.productsServ.CGetRepComprasProveedorListWithPage(this.pagination,this.parametersForm).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1,t.data.count>0?(this.oHeaderForm.iPzs=t.data.rows[0].iPzs,this.oHeaderForm.costSum=t.data.rows[0].costSum,this.oHeaderForm.priceSum=t.data.rows[0].priceSum):(this.oHeaderForm.iPzs=0,this.oHeaderForm.costSum=0,this.oHeaderForm.priceSum=0)},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}parametersForm_Clear(){this.parametersForm.idSupplier=0,this.parametersForm.supplierDesc=""}cbxSupplier_Search(){this.suppliersServ.CCbxGetSuppliersCombo(this.parametersForm.supplierDesc).subscribe({next:t=>{this.cbxSupplierList=0===t.status?t.data:[]},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxSupplier_SelectedOption(t){if(!t.option.value)return;const i=t.option.value;this.parametersForm.idSupplier!=i.idSupplier&&(this.parametersForm.idSupplier=i.idSupplier,this.parametersForm.supplierDesc=i.name)}cbxSupplier_Clear(){this.parametersForm.idSupplier=0,this.parametersForm.supplierDesc=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(R),e.Y36(m.qu),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(_e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-repcomprasproveedor"]],decls:55,vars:10,consts:[[1,"divMain",2,"margin-top","10px !important",3,"expanded","opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],[2,"width","100%",3,"click"],["type","text","id","cbxSupplier","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","focus","click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxSupplier","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],["class","divSection",4,"ngIf"],[1,"divMain",2,"width","100%","margin-top","10px !important"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[1,"textAlingCenter","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"divSection"],[1,"col-md-2"],[1,"col-md-5",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],[1,"textAlingLeft"],[1,"row",2,"width","150px"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[1,"col-md-10"],[2,"margin-left","10px"],[1,"textAlingRight"],[1,"textAlingCenter"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"div",3)(9,"div",4)(10,"mat-label"),e._uU(11,"Proveedor: "),e.qZA(),e.TgZ(12,"mat-form-field",5),e.NdJ("click",function(){return i.cbxSupplier_Search()}),e.TgZ(13,"input",6),e.NdJ("ngModelChange",function(o){return i.parametersForm.supplierDesc=o})("input",function(){return i.cbxSupplier_Search()})("focus",function(){return i.cbxSupplier_Search()})("click",function(){return i.cbxSupplier_Clear()}),e.qZA(),e.YNc(14,Fs,3,0,"button",7),e.TgZ(15,"mat-autocomplete",8,9),e.NdJ("optionSelected",function(o){return i.cbxSupplier_SelectedOption(o)}),e.YNc(17,Us,2,2,"mat-option",10),e.YNc(18,Ps,2,0,"mat-option",11),e.qZA()()()(),e.TgZ(19,"div",12)(20,"div",4)(21,"div",13)(22,"button",14),e.NdJ("click",function(){return i.fn_getRepComprasProveedorListWithPage()}),e.TgZ(23,"mat-icon",15),e._uU(24,"search"),e.qZA(),e._uU(25," Buscar"),e.qZA(),e.TgZ(26,"button",16),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(27,"mat-icon",15),e._uU(28,"clear"),e.qZA(),e._uU(29," limpiar"),e.qZA()()()()()()()(),e.YNc(30,ws,15,7,"div",17),e.TgZ(31,"div",18)(32,"div",19)(33,"div",4)(34,"div",20)(35,"table",21)(36,"thead")(37,"th",22),e._uU(38,"C\xf3digo de barras"),e.qZA(),e.TgZ(39,"th",22),e._uU(40,"Nombre"),e.qZA(),e.TgZ(41,"th",23),e._uU(42,"Costo"),e.qZA(),e.TgZ(43,"th",23),e._uU(44,"Precio"),e.qZA(),e.TgZ(45,"th",23),e._uU(46,"Inventario"),e.qZA(),e.TgZ(47,"th",24),e._uU(48,"Fecha compra"),e.qZA(),e.TgZ(49,"th",22),e._uU(50,"Proveedor"),e.qZA()(),e.TgZ(51,"tbody"),e.YNc(52,Ns,23,11,"tr",25),e.qZA()()(),e.YNc(53,Is,1,1,"app-pagination",26),e.qZA()()(),e._UZ(54,"app-spinner",27)),2&t){const n=e.MAs(16);e.xp6(1),e.Q6J("expanded",!0),e.xp6(12),e.Q6J("ngModel",i.parametersForm.supplierDesc)("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",i.parametersForm.supplierDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxSupplierList),e.xp6(1),e.Q6J("ngIf",0==i.cbxSupplierList.length&&i.parametersForm.supplierDesc),e.xp6(12),e.Q6J("ngIf",i.oHeaderForm.iPzs>0),e.xp6(22),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.qo,d.R9,N.Nt,P.Hw,U.O,D,h.H9]}),a})()},{path:"verifi_entradas",component:(()=>{class a{constructor(t,i,n,o,l){this.servicesGServ=t,this.productsServ=i,this._adapter=n,this._locale=o,this.authServ=l,this._appMain=C.N.appMain,this.idUserLogON=0,this.title="Lista de Products",this.bShowSpinner=!1,this.catlist=[],this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={idProduct:0,productDesc:"",startDate:"",endDate:"",noEntrada:"",bPending:!0},this.bShowActionAuthorization=!1,this.cbxProducts=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.fn_getInventarylogParaFirmar()})()}exportDataToExcel(t){this.bShowSpinner=!0,this.productsServ.CGetInventarylogParaFirmar({search:"",length:1e7,pageSize:1e7,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm).subscribe({next:n=>{if(console.log(n),0==n.status){const l=[{col:0,currencyFormat:!1,textAlignment:"left"},{col:1,currencyFormat:!1,textAlignment:"left"},{col:2,currencyFormat:!1,textAlignment:"left"},{col:3,numberFormat:"#,##0",textAlignment:"right"}];var o=n.data.rows.map(g=>({"# Entrada":g.noEntrada,"C\xf3digo de barras":g.barCode,Nombre:g.productName,Cantidad:g.cantidad}));const _=(new Date).toISOString().replace(/[:.]/g,"-");this.servicesGServ.exportToExcel(o,`RepInventarioConCostos_${_}.xlsx`,l)}this.bShowSpinner=!1},error:n=>{console.log(n),this.servicesGServ.showSnakbar(n.error.data),this.bShowSpinner=!1}})}changePagination(t){this.pagination=t,this.fn_getInventarylogParaFirmar()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getInventarylogParaFirmar()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}parametersForm_Clear(){this.parametersForm.idProduct=0,this.parametersForm.productDesc="",this.parametersForm.startDate="",this.parametersForm.endDate="",this.parametersForm.noEntrada="",this.parametersForm.bPending=!0,this.fn_getInventarylogParaFirmar()}fn_updateFirmaEntradaInventario(t,i){let n=this.catlist.filter(function(o){return 1==o.select&&(0==o.firmaVer||0==o.firmaMost)});console.log(n),this.bShowActionAuthorization||(this.bShowActionAuthorization=!0,this.servicesGServ.disableEnableButton(i,!0),this.servicesGServ.showDialog("\xbfEst\xe1s seguro?","Est\xe1 a punto de "+(1==t?"verificar":"recibir")+" el inventario con estos filtros","\xbfDesea continuar?","Si","No").afterClosed().subscribe({next:o=>{o?this.servicesGServ.showModalWithParams(k,{actionName:1==t?"opera_VeriEnt_Verification":"opera_VeriEnt_Mostrador",bShowAlert:!1},"400px").afterClosed().subscribe({next:p=>{p?(this.bShowActionAuthorization=!1,this.servicesGServ.disableEnableButton(i,!1),this.bShowSpinner=!0,this.parametersForm.iOption=t,this.parametersForm.invSelectList=n,this.productsServ.CUpdateFirmaEntradaInventario(this.parametersForm).subscribe({next:_=>{0===_.status&&this.fn_getInventarylogParaFirmar(),this.servicesGServ.showAlertIA(_),this.bShowSpinner=!1},error:_=>{this.servicesGServ.showSnakbar(_.error.message),this.bShowSpinner=!1}})):(this.bShowActionAuthorization=!1,this.servicesGServ.disableEnableButton(i,!1))}}):(this.bShowActionAuthorization=!1,this.servicesGServ.disableEnableButton(i,!1))}}))}fn_getInventarylogParaFirmar(){this.bShowSpinner=!0,this.productsServ.CGetInventarylogParaFirmar(this.pagination,this.parametersForm).subscribe({next:t=>{console.log(t),this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1},error:t=>{console.log(t),this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}cbxProducts_Search(){this.productsServ.CCbxGetProductsCombo({iOption:2,search:this.parametersForm.productDesc}).subscribe({next:i=>{this.cbxProducts=0===i.status?i.data:[]},error:i=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxProducts_SelectedOption(t){this.cbxProducts_Clear(),setTimeout(()=>{const i=t.option.value;this.parametersForm.idProduct=i.idProduct,this.parametersForm.productDesc=i.barCode+" - "+i.name},1)}cbxProducts_Clear(){this.parametersForm.idProduct=0,this.parametersForm.productDesc=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(R),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-verificacion-entradas"]],decls:95,vars:14,consts:[[1,"divMain",2,"margin-top","10px !important",3,"opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],[1,"col-md-12",2,"text-align","left"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-md-4"],[1,"example-full-width","with100"],["matInput","","cdkTextareaAutosize","","placeholder","Ingrese n\xfamero de entrada",3,"ngModel","ngModelChange"],["tbxNoEntrada",""],[1,"col-md-8"],[2,"width","100%",3,"click"],["type","text","id","cbxProduct","placeholder","Selecciona un producto...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","input","click"],["cbxProductss",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxProduct","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"col-md-6"],[1,"example-margin",3,"ngModel","ngModelChange"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],[1,"divMain",2,"width","100%","margin-top","10px !important"],["id","btnVerificar","mat-raised-button","","color","primary","type","submit","matTooltip","Con este bot\xf3n verificas todas las entradas filtradas",1,"marginRight10px",3,"click"],["id","btnRecibirMostrador","mat-raised-button","","color","primary","type","submit","matTooltip","Con este bot\xf3n verificas todas las entradas filtradas",1,"marginRight10px",3,"click"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingCenter","padding-th"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[2,"width","80px"],["style","margin-top: -50px;","class","manitaSobre",3,"ngModel","ngModelChange",4,"ngIf"],[1,"textAlingCenter"],["matTooltip","Pendiente por verificar","class","material-icons manitaSobre colorBlue",4,"ngIf"],["matTooltip","Verificado","class","material-icons manitaSobre colorGreen",4,"ngIf"],["matTooltip","Pendiente recibir en mostrador","class","material-icons manitaSobre colorBlue",4,"ngIf"],["matTooltip","Recibido en mostrador","class","material-icons manitaSobre colorGreen",4,"ngIf"],[1,"textAlingLeft"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","-5px"],[1,"col-md-10"],[2,"margin-left","10px"],[1,"textAlingRight"],["disabled","",1,"example-margin",3,"ngModel","ngModelChange"],[1,"manitaSobre",2,"margin-top","-50px",3,"ngModel","ngModelChange"],["matTooltip","Pendiente por verificar",1,"material-icons","manitaSobre","colorBlue"],["matTooltip","Verificado",1,"material-icons","manitaSobre","colorGreen"],["matTooltip","Pendiente recibir en mostrador",1,"material-icons","manitaSobre","colorBlue"],["matTooltip","Recibido en mostrador",1,"material-icons","manitaSobre","colorGreen"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"div",3)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(13,"mat-date-range-input",7),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(20);return e.KtG(l.open())}),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(l){return i.parametersForm.startDate=l}),e.qZA(),e.TgZ(15,"input",9),e.NdJ("ngModelChange",function(l){return i.parametersForm.endDate=l}),e.qZA()(),e.TgZ(16,"mat-hint"),e._uU(17,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",10)(19,"mat-date-range-picker",null,11),e.qZA()()(),e.TgZ(21,"div",3)(22,"div",12)(23,"mat-form-field",13)(24,"mat-label"),e._uU(25,"# Entrada"),e.qZA(),e.TgZ(26,"input",14,15),e.NdJ("ngModelChange",function(l){return i.parametersForm.noEntrada=l}),e.qZA()()(),e.TgZ(28,"div",16)(29,"mat-form-field",17),e.NdJ("click",function(){return i.cbxProducts_Search()}),e.TgZ(30,"input",18,19),e.NdJ("ngModelChange",function(l){return i.parametersForm.productDesc=l})("input",function(){return i.cbxProducts_Search()})("click",function(){return i.cbxProducts_Clear()}),e.qZA(),e.YNc(32,qs,3,0,"button",20),e.TgZ(33,"mat-autocomplete",21,22),e.NdJ("optionSelected",function(l){return i.cbxProducts_SelectedOption(l)}),e.YNc(35,Ds,4,2,"mat-option",23),e.YNc(36,Ls,2,0,"mat-option",24),e.qZA()()()(),e.TgZ(37,"div",3)(38,"div",25)(39,"mat-checkbox",26),e.NdJ("ngModelChange",function(l){return i.parametersForm.bPending=l}),e._uU(40,"Pendiente"),e.qZA()()(),e.TgZ(41,"div",27)(42,"div",4)(43,"div",28)(44,"button",29),e.NdJ("click",function(){return i.fn_getInventarylogParaFirmar()}),e.TgZ(45,"mat-icon",30),e._uU(46,"search"),e.qZA(),e._uU(47," Buscar"),e.qZA(),e.TgZ(48,"button",31),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(49,"mat-icon",30),e._uU(50,"clear"),e.qZA(),e._uU(51," limpiar"),e.qZA()()()()()()()(),e.TgZ(52,"div",32)(53,"div",27)(54,"div",4)(55,"div",28)(56,"button",33),e.NdJ("click",function(){return i.fn_updateFirmaEntradaInventario(1,"btnVerificar")}),e.TgZ(57,"mat-icon",30),e._uU(58,"done"),e.qZA(),e._uU(59," VERIFICAR"),e.qZA(),e.TgZ(60,"button",34),e.NdJ("click",function(){return i.fn_updateFirmaEntradaInventario(2,"btnRecibirMostrador")}),e.TgZ(61,"mat-icon",30),e._uU(62,"done"),e.qZA(),e._uU(63," RECIBIR EN MOSTRADOR"),e.qZA(),e.TgZ(64,"button",29),e.NdJ("click",function(){return i.exportDataToExcel(!0)}),e.TgZ(65,"mat-icon",30),e._uU(66,"insert_drive_file"),e.qZA(),e._uU(67," EXPORTAR A EXCEL PARA IMPRIMIR"),e.qZA()()()(),e.TgZ(68,"div",35)(69,"div",4)(70,"div",36)(71,"table",37)(72,"thead")(73,"th",38),e._uU(74,"Acciones"),e.qZA(),e.TgZ(75,"th",38),e._uU(76,"Estatus"),e.qZA(),e.TgZ(77,"th",39),e._uU(78,"# Entrada"),e.qZA(),e.TgZ(79,"th",39),e._uU(80,"C\xf3digo de barras"),e.qZA(),e.TgZ(81,"th",39),e._uU(82,"Nombre"),e.qZA(),e.TgZ(83,"th",40),e._uU(84,"Cantidad"),e.qZA(),e.TgZ(85,"th",39),e._uU(86,"Registrado por"),e.qZA(),e.TgZ(87,"th",38),e._uU(88,"Creado"),e.qZA(),e.TgZ(89,"th",38),e._uU(90,"Activo"),e.qZA()(),e.TgZ(91,"tbody"),e.YNc(92,Es,32,15,"tr",41),e.qZA()()(),e.YNc(93,Qs,1,1,"app-pagination",42),e.qZA()()(),e._UZ(94,"app-spinner",43)}if(2&t){const n=e.MAs(20),o=e.MAs(34);e.xp6(13),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("ngModel",i.parametersForm.startDate),e.xp6(1),e.Q6J("ngModel",i.parametersForm.endDate),e.xp6(3),e.Q6J("for",n),e.xp6(8),e.Q6J("ngModel",i.parametersForm.noEntrada),e.xp6(4),e.Q6J("ngModel",i.parametersForm.productDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.parametersForm.productDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxProducts),e.xp6(1),e.Q6J("ngIf",0==i.cbxProducts.length&&i.parametersForm.productDesc),e.xp6(3),e.Q6J("ngModel",i.parametersForm.bPending),e.xp6(53),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,L.oG,x.nW,x.wx,x.zY,x.By,x._g,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,O.gM,U.O,D,h.uU]}),a})()},{path:"rep_mod_dineroelect",component:(()=>{class a{constructor(t,i,n,o,l,p){this.servicesGServ=t,this._adapter=i,this._locale=n,this.authServ=o,this.customersServ=l,this.electronicMoneyServ=p,this._appMain=C.N.appMain,this.bShowSpinner=!1,this.catlist=[],this.idUserLogON=0,this.timeCBXskeyup=new ee.x,this.panelOpenState=!1,this.iRows=0,this.pagination={search:"",length:10,pageSize:10,pageIndex:0,pageSizeOptions:[5,10,25,100]},this.parametersForm={startDate:"",endDate:"",idCustomer:0,customerDesc:"",customerResp:""},this.oCustomerHeader={sumDineroElectronico:0,electronicMoneyOtorgado:0,electronicMoneyGastado:0},this.cbxCustomers=[]}ngOnInit(){var t=this;return(0,Z.Z)(function*(){t.authServ.checkSession(),t.idUserLogON=yield t.authServ.getIdUserSession(),t._locale="mx",t._adapter.setLocale(t._locale),t.timeCBXskeyup.pipe((0,te.b)(500)).subscribe(i=>{1==i.iOption&&t.cbxCustomers_Search()}),t.fn_getRepElectronicMoneyListWithPage()})()}changePagination(t){this.pagination=t,this.fn_getRepElectronicMoneyListWithPage()}onChangeEvent(t){this.pagination.search=t.target.value,this.fn_getRepElectronicMoneyListWithPage()}changeRoute(t){this.servicesGServ.changeRoute(`/${this._appMain}/${t}`)}parametersForm_Clear(){this.parametersForm.startDate="",this.parametersForm.endDate="",this.parametersForm.idCustomer=0,this.parametersForm.customerDesc="",this.parametersForm.customerResp="",this.fn_getRepElectronicMoneyListWithPage()}fn_getRepElectronicMoneyListWithPage(){this.bShowSpinner=!0,this.electronicMoneyServ.CGetRepElectronicMoneyListWithPage(this.pagination,this.parametersForm).subscribe({next:t=>{this.catlist=t.data.rows,this.pagination.length=t.data.count,this.bShowSpinner=!1,this.oCustomerHeader.sumDineroElectronico=t.data.count>0?this.catlist[0].electronicMoneySum:0,this.oCustomerHeader.electronicMoneyOtorgado=t.data.count>0?this.catlist[0].electronicMoneyOtorgado:0,this.oCustomerHeader.electronicMoneyGastado=t.data.count>0?this.catlist[0].electronicMoneyGastado:0},error:t=>{this.servicesGServ.showSnakbar(t.error.data),this.bShowSpinner=!1}})}CBXskeyup(t,i){this.timeCBXskeyup.next({iOption:t,txt:i})}cbxCustomers_Search(){this.customersServ.CCbxGetCustomersCombo(this.parametersForm.customerDesc,this.idUserLogON).subscribe({next:t=>{0===t.status?(this.cbxCustomers=t.data,this.parametersForm.customerResp=""):(this.cbxCustomers=[],this.parametersForm.customerResp=t.message)},error:t=>{this.servicesGServ.showSnakbar("Problemas con el servicio"),this.bShowSpinner=!1}})}cbxCustomers_SelectedOption(t){setTimeout(()=>{const i=t.option.value;this.parametersForm.idCustomer=i.idCustomer,this.parametersForm.customerDesc=i.name},1)}cbxCustomers_Clear(){this.parametersForm.idCustomer=0,this.parametersForm.customerDesc="",this.parametersForm.customerResp=""}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.$),e.Y36(f._A),e.Y36(f.Ad),e.Y36(T.e),e.Y36(V),e.Y36(Fe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-rep-mob-dineoelect"]],decls:82,vars:21,consts:[[1,"divMain",2,"margin-top","10px !important",3,"opened","closed"],[1,"autoHeight"],[1,"text-align:","center"],[1,"row"],[1,"col-md-12"],[1,"col-md-3","top20px",2,"text-align","left"],[1,"with100"],[3,"rangePicker","click"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-md-9"],[2,"width","100%"],["type","text","id","cbxCustomer","placeholder","Selecciona...","aria-label","Number","matInput","",2,"width","100%",3,"ngModel","matAutocomplete","ngModelChange","keyup","click"],["cbxCustomerCBX",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"optionSelected"],["cbxCustomer","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"row","top10px"],[2,"float","left"],["mat-raised-button","","color","primary","type","submit",1,"marginRight10px",3,"click"],["matPrefix","",1,"my-icon"],["mat-raised-button","","type","button",3,"click"],[1,"divSection"],[1,"row",2,"margin-top","-35px"],[1,"badge","bg-primary","text-wrap",2,"font-size","15px"],[1,"col-md-3",2,"position","relative"],["width","60","src","assets/img/icons/currencyIco.gif","alt","",2,"display","inline-block"],[2,"display","inline-block"],[1,"divMain",2,"width","100%","margin-top","10px !important"],[1,"row","top20px"],[1,"table-responsive"],[1,"table","table-hover"],[1,"textAlingLeft","padding-th"],[1,"textAlingRight","padding-th"],[1,"textAlingCenter","padding-th"],[4,"ngFor","ngForOf"],[3,"IPagination","OPagination",4,"ngIf"],[3,"hidden"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["value",""],[1,"textAlingLeft"],[1,"textAlingRight"],[1,"textAlingCenter"],[2,"width","120px"],[1,"col-md-1"],["matPrefix","",1,"my-icon",2,"margin-top","5px"],[1,"col-md-10"],[2,"margin-left","10px"],[3,"IPagination","OPagination"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),e.NdJ("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),e.TgZ(2,"mat-expansion-panel-header",1)(3,"mat-panel-title",2),e._uU(4," Filtros "),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"br"),e.TgZ(8,"div",3)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Fecha de creaci\xf3n:"),e.qZA(),e.TgZ(13,"mat-date-range-input",7),e.NdJ("click",function(){e.CHM(n);const l=e.MAs(20);return e.KtG(l.open())}),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(l){return i.parametersForm.startDate=l}),e.qZA(),e.TgZ(15,"input",9),e.NdJ("ngModelChange",function(l){return i.parametersForm.endDate=l}),e.qZA()(),e.TgZ(16,"mat-hint"),e._uU(17,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",10)(19,"mat-date-range-picker",null,11),e.qZA()(),e.TgZ(21,"div",12)(22,"mat-label"),e._uU(23,"Cliente: "),e.qZA(),e.TgZ(24,"mat-form-field",13)(25,"input",14,15),e.NdJ("ngModelChange",function(l){return i.parametersForm.customerDesc=l})("keyup",function(){e.CHM(n);const l=e.MAs(26);return e.KtG(i.CBXskeyup(1,l.value))})("click",function(){return i.cbxCustomers_Clear()}),e.qZA(),e.YNc(27,js,3,0,"button",16),e.TgZ(28,"mat-autocomplete",17,18),e.NdJ("optionSelected",function(l){return i.cbxCustomers_SelectedOption(l)}),e.YNc(30,Hs,2,2,"mat-option",19),e.YNc(31,zs,2,1,"mat-option",20),e.qZA()()()(),e.TgZ(32,"div",21)(33,"div",4)(34,"div",22)(35,"button",23),e.NdJ("click",function(){return i.fn_getRepElectronicMoneyListWithPage()}),e.TgZ(36,"mat-icon",24),e._uU(37,"search"),e.qZA(),e._uU(38," Buscar"),e.qZA(),e.TgZ(39,"button",25),e.NdJ("click",function(){return i.parametersForm_Clear()}),e.TgZ(40,"mat-icon",24),e._uU(41,"clear"),e.qZA(),e._uU(42," limpiar"),e.qZA()()()()()()()(),e.TgZ(43,"div",26)(44,"div",27)(45,"div",4)(46,"div",28),e._uU(47," Sumas de Dinero electr\xf3nico "),e.qZA()()(),e.TgZ(48,"div",3)(49,"div",29),e._UZ(50,"img",30),e.TgZ(51,"h2",31),e._uU(52),e.ALo(53,"currency"),e.qZA()(),e.TgZ(54,"div",29),e._UZ(55,"img",30),e.TgZ(56,"h2",31),e._uU(57),e.ALo(58,"currency"),e.qZA()(),e.TgZ(59,"div",29),e._UZ(60,"img",30),e.TgZ(61,"h2",31),e._uU(62),e.ALo(63,"currency"),e.qZA()()()(),e.TgZ(64,"div",32)(65,"div",33)(66,"div",4)(67,"div",34)(68,"table",35)(69,"thead")(70,"th",36),e._uU(71,"Movimiento"),e.qZA(),e.TgZ(72,"th",37),e._uU(73,"Importe"),e.qZA(),e.TgZ(74,"th",36),e._uU(75,"Cliente"),e.qZA(),e.TgZ(76,"th",38),e._uU(77,"Creado"),e.qZA()(),e.TgZ(78,"tbody"),e.YNc(79,$s,21,13,"tr",39),e.qZA()()(),e.YNc(80,Bs,1,1,"app-pagination",40),e.qZA()()(),e._UZ(81,"app-spinner",41)}if(2&t){const n=e.MAs(20),o=e.MAs(29);e.xp6(13),e.Q6J("rangePicker",n),e.xp6(1),e.Q6J("ngModel",i.parametersForm.startDate),e.xp6(1),e.Q6J("ngModel",i.parametersForm.endDate),e.xp6(3),e.Q6J("for",n),e.xp6(7),e.Q6J("ngModel",i.parametersForm.customerDesc)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.parametersForm.customerDesc),e.xp6(3),e.Q6J("ngForOf",i.cbxCustomers),e.xp6(1),e.Q6J("ngIf",i.parametersForm.customerResp.length>0&&i.parametersForm.customerResp.length>0),e.xp6(21),e.hij("Acomulado: ",e.lcZ(53,15,i.oCustomerHeader.sumDineroElectronico),""),e.xp6(5),e.hij("Otorgado: ",e.lcZ(58,17,i.oCustomerHeader.electronicMoneyOtorgado),""),e.xp6(5),e.hij("Gastado: ",e.lcZ(63,19,i.oCustomerHeader.electronicMoneyGastado),""),e.xp6(17),e.Q6J("ngForOf",i.catlist),e.xp6(1),e.Q6J("ngIf",i.catlist),e.xp6(1),e.Q6J("hidden",!i.bShowSpinner)}},dependencies:[h.sg,h.O5,m.Fj,m.JJ,m.On,I.XC,f.ey,I.ZL,v.lW,v.RK,x.nW,x.wx,x.zY,x.By,x._g,y.pp,y.ib,y.yz,y.yK,d.KE,d.hX,d.bx,d.qo,d.R9,N.Nt,P.Hw,U.O,D,h.H9,h.uU]}),a})()}]}];let Ks=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[J.Bz.forChild(Ws),J.Bz]}),a})();var Vs=w(822);let Xs=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[h.ez,m.UX,m.u5,Ie.q,Ks,Vs.K]}),a})()}}]);